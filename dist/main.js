// [CUSTOM]  Version: 1.2.59 - 2:55:52 AM  
 /*! For license information please see main.js.LICENSE.txt */
!function webpackUniversalModuleDefinition(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("lib",[],r):"object"==typeof exports?exports.lib=r():t.lib=r()}(window,(function(){return function(t){var r={};function __webpack_require__(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.d=function(t,r,n){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,r){if(1&r&&(t=__webpack_require__(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)__webpack_require__.d(n,i,function(r){return t[r]}.bind(null,i));return n},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=387)}([function(t,r){t.exports=function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){"use strict";n.r(r),n.d(r,"ACESFilmicToneMapping",(function(){return he})),n.d(r,"AddEquation",(function(){return D})),n.d(r,"AddOperation",(function(){return ie})),n.d(r,"AdditiveAnimationBlendMode",(function(){return rr})),n.d(r,"AdditiveBlending",(function(){return E})),n.d(r,"AlphaFormat",(function(){return He})),n.d(r,"AlwaysDepth",(function(){return X})),n.d(r,"AlwaysStencilFunc",(function(){return Nr})),n.d(r,"AmbientLight",(function(){return AmbientLight})),n.d(r,"AmbientLightProbe",(function(){return AmbientLightProbe})),n.d(r,"AnimationClip",(function(){return AnimationClip})),n.d(r,"AnimationLoader",(function(){return AnimationLoader})),n.d(r,"AnimationMixer",(function(){return AnimationMixer})),n.d(r,"AnimationObjectGroup",(function(){return AnimationObjectGroup})),n.d(r,"AnimationUtils",(function(){return Mo})),n.d(r,"ArcCurve",(function(){return ArcCurve})),n.d(r,"ArrayCamera",(function(){return ArrayCamera})),n.d(r,"ArrowHelper",(function(){return ArrowHelper})),n.d(r,"Audio",(function(){return Audio})),n.d(r,"AudioAnalyser",(function(){return AudioAnalyser})),n.d(r,"AudioContext",(function(){return Fo})),n.d(r,"AudioListener",(function(){return AudioListener})),n.d(r,"AudioLoader",(function(){return AudioLoader})),n.d(r,"AxesHelper",(function(){return AxesHelper})),n.d(r,"AxisHelper",(function(){return AxisHelper})),n.d(r,"BackSide",(function(){return b})),n.d(r,"BasicDepthPacking",(function(){return mr})),n.d(r,"BasicShadowMap",(function(){return d})),n.d(r,"BinaryTextureLoader",(function(){return BinaryTextureLoader})),n.d(r,"Bone",(function(){return Bone})),n.d(r,"BooleanKeyframeTrack",(function(){return BooleanKeyframeTrack})),n.d(r,"BoundingBoxHelper",(function(){return BoundingBoxHelper})),n.d(r,"Box2",(function(){return Box2})),n.d(r,"Box3",(function(){return Box3})),n.d(r,"Box3Helper",(function(){return Box3Helper})),n.d(r,"BoxBufferGeometry",(function(){return BoxGeometry})),n.d(r,"BoxGeometry",(function(){return BoxGeometry})),n.d(r,"BoxHelper",(function(){return BoxHelper})),n.d(r,"BufferAttribute",(function(){return BufferAttribute})),n.d(r,"BufferGeometry",(function(){return BufferGeometry})),n.d(r,"BufferGeometryLoader",(function(){return BufferGeometryLoader})),n.d(r,"ByteType",(function(){return Re})),n.d(r,"Cache",(function(){return _o})),n.d(r,"Camera",(function(){return Camera})),n.d(r,"CameraHelper",(function(){return CameraHelper})),n.d(r,"CanvasRenderer",(function(){return CanvasRenderer})),n.d(r,"CanvasTexture",(function(){return CanvasTexture})),n.d(r,"CatmullRomCurve3",(function(){return CatmullRomCurve3})),n.d(r,"CineonToneMapping",(function(){return ue})),n.d(r,"CircleBufferGeometry",(function(){return CircleGeometry})),n.d(r,"CircleGeometry",(function(){return CircleGeometry})),n.d(r,"ClampToEdgeWrapping",(function(){return be})),n.d(r,"Clock",(function(){return Clock})),n.d(r,"Color",(function(){return Color})),n.d(r,"ColorKeyframeTrack",(function(){return ColorKeyframeTrack})),n.d(r,"CompressedTexture",(function(){return CompressedTexture})),n.d(r,"CompressedTextureLoader",(function(){return CompressedTextureLoader})),n.d(r,"ConeBufferGeometry",(function(){return ConeGeometry})),n.d(r,"ConeGeometry",(function(){return ConeGeometry})),n.d(r,"CubeCamera",(function(){return CubeCamera})),n.d(r,"CubeReflectionMapping",(function(){return de})),n.d(r,"CubeRefractionMapping",(function(){return fe})),n.d(r,"CubeTexture",(function(){return CubeTexture})),n.d(r,"CubeTextureLoader",(function(){return CubeTextureLoader})),n.d(r,"CubeUVReflectionMapping",(function(){return ge})),n.d(r,"CubeUVRefractionMapping",(function(){return ve})),n.d(r,"CubicBezierCurve",(function(){return CubicBezierCurve})),n.d(r,"CubicBezierCurve3",(function(){return CubicBezierCurve3})),n.d(r,"CubicInterpolant",(function(){return CubicInterpolant})),n.d(r,"CullFaceBack",(function(){return h})),n.d(r,"CullFaceFront",(function(){return l})),n.d(r,"CullFaceFrontBack",(function(){return c})),n.d(r,"CullFaceNone",(function(){return s})),n.d(r,"Curve",(function(){return Curve})),n.d(r,"CurvePath",(function(){return CurvePath})),n.d(r,"CustomBlending",(function(){return T})),n.d(r,"CustomToneMapping",(function(){return le})),n.d(r,"CylinderBufferGeometry",(function(){return CylinderGeometry})),n.d(r,"CylinderGeometry",(function(){return CylinderGeometry})),n.d(r,"Cylindrical",(function(){return Cylindrical})),n.d(r,"DataTexture",(function(){return DataTexture})),n.d(r,"DataTexture2DArray",(function(){return DataTexture2DArray})),n.d(r,"DataTexture3D",(function(){return DataTexture3D})),n.d(r,"DataTextureLoader",(function(){return DataTextureLoader})),n.d(r,"DataUtils",(function(){return DataUtils})),n.d(r,"DecrementStencilOp",(function(){return xr})),n.d(r,"DecrementWrapStencilOp",(function(){return Sr})),n.d(r,"DefaultLoadingManager",(function(){return xo})),n.d(r,"DepthFormat",(function(){return Xe})),n.d(r,"DepthStencilFormat",(function(){return Ye})),n.d(r,"DepthTexture",(function(){return DepthTexture})),n.d(r,"DirectionalLight",(function(){return DirectionalLight})),n.d(r,"DirectionalLightHelper",(function(){return DirectionalLightHelper})),n.d(r,"DiscreteInterpolant",(function(){return DiscreteInterpolant})),n.d(r,"DodecahedronBufferGeometry",(function(){return DodecahedronGeometry})),n.d(r,"DodecahedronGeometry",(function(){return DodecahedronGeometry})),n.d(r,"DoubleSide",(function(){return w})),n.d(r,"DstAlphaFactor",(function(){return j})),n.d(r,"DstColorFactor",(function(){return G})),n.d(r,"DynamicBufferAttribute",(function(){return DynamicBufferAttribute})),n.d(r,"DynamicCopyUsage",(function(){return jr})),n.d(r,"DynamicDrawUsage",(function(){return Ir})),n.d(r,"DynamicReadUsage",(function(){return Ur})),n.d(r,"EdgesGeometry",(function(){return EdgesGeometry})),n.d(r,"EdgesHelper",(function(){return EdgesHelper})),n.d(r,"EllipseCurve",(function(){return EllipseCurve})),n.d(r,"EqualDepth",(function(){return Z})),n.d(r,"EqualStencilFunc",(function(){return Tr})),n.d(r,"EquirectangularReflectionMapping",(function(){return pe})),n.d(r,"EquirectangularRefractionMapping",(function(){return me})),n.d(r,"Euler",(function(){return Euler})),n.d(r,"EventDispatcher",(function(){return EventDispatcher})),n.d(r,"ExtrudeBufferGeometry",(function(){return ExtrudeGeometry})),n.d(r,"ExtrudeGeometry",(function(){return ExtrudeGeometry})),n.d(r,"FaceColors",(function(){return Es})),n.d(r,"FileLoader",(function(){return FileLoader})),n.d(r,"FlatShading",(function(){return M})),n.d(r,"Float16BufferAttribute",(function(){return Float16BufferAttribute})),n.d(r,"Float32Attribute",(function(){return Float32Attribute})),n.d(r,"Float32BufferAttribute",(function(){return Float32BufferAttribute})),n.d(r,"Float64Attribute",(function(){return Float64Attribute})),n.d(r,"Float64BufferAttribute",(function(){return Float64BufferAttribute})),n.d(r,"FloatType",(function(){return ke})),n.d(r,"Fog",(function(){return Fog})),n.d(r,"FogExp2",(function(){return FogExp2})),n.d(r,"Font",(function(){return Font})),n.d(r,"FontLoader",(function(){return FontLoader})),n.d(r,"FrontSide",(function(){return y})),n.d(r,"Frustum",(function(){return Frustum})),n.d(r,"GLBufferAttribute",(function(){return GLBufferAttribute})),n.d(r,"GLSL1",(function(){return Gr})),n.d(r,"GLSL3",(function(){return Wr})),n.d(r,"GammaEncoding",(function(){return hr})),n.d(r,"GreaterDepth",(function(){return ee})),n.d(r,"GreaterEqualDepth",(function(){return $})),n.d(r,"GreaterEqualStencilFunc",(function(){return Lr})),n.d(r,"GreaterStencilFunc",(function(){return Pr})),n.d(r,"GridHelper",(function(){return GridHelper})),n.d(r,"Group",(function(){return Group})),n.d(r,"HalfFloatType",(function(){return Oe})),n.d(r,"HemisphereLight",(function(){return HemisphereLight})),n.d(r,"HemisphereLightHelper",(function(){return HemisphereLightHelper})),n.d(r,"HemisphereLightProbe",(function(){return HemisphereLightProbe})),n.d(r,"IcosahedronBufferGeometry",(function(){return IcosahedronGeometry})),n.d(r,"IcosahedronGeometry",(function(){return IcosahedronGeometry})),n.d(r,"ImageBitmapLoader",(function(){return ImageBitmapLoader})),n.d(r,"ImageLoader",(function(){return ImageLoader})),n.d(r,"ImageUtils",(function(){return ImageUtils})),n.d(r,"ImmediateRenderObject",(function(){return ImmediateRenderObject})),n.d(r,"IncrementStencilOp",(function(){return _r})),n.d(r,"IncrementWrapStencilOp",(function(){return Ar})),n.d(r,"InstancedBufferAttribute",(function(){return InstancedBufferAttribute})),n.d(r,"InstancedBufferGeometry",(function(){return InstancedBufferGeometry})),n.d(r,"InstancedInterleavedBuffer",(function(){return InstancedInterleavedBuffer})),n.d(r,"InstancedMesh",(function(){return InstancedMesh})),n.d(r,"Int16Attribute",(function(){return Int16Attribute})),n.d(r,"Int16BufferAttribute",(function(){return Int16BufferAttribute})),n.d(r,"Int32Attribute",(function(){return Int32Attribute})),n.d(r,"Int32BufferAttribute",(function(){return Int32BufferAttribute})),n.d(r,"Int8Attribute",(function(){return Int8Attribute})),n.d(r,"Int8BufferAttribute",(function(){return Int8BufferAttribute})),n.d(r,"IntType",(function(){return Fe})),n.d(r,"InterleavedBuffer",(function(){return InterleavedBuffer})),n.d(r,"InterleavedBufferAttribute",(function(){return InterleavedBufferAttribute})),n.d(r,"Interpolant",(function(){return Interpolant})),n.d(r,"InterpolateDiscrete",(function(){return Xt})),n.d(r,"InterpolateLinear",(function(){return Yt})),n.d(r,"InterpolateSmooth",(function(){return Jt})),n.d(r,"InvertStencilOp",(function(){return Er})),n.d(r,"JSONLoader",(function(){return JSONLoader})),n.d(r,"KeepStencilOp",(function(){return wr})),n.d(r,"KeyframeTrack",(function(){return KeyframeTrack})),n.d(r,"LOD",(function(){return LOD})),n.d(r,"LatheBufferGeometry",(function(){return LatheGeometry})),n.d(r,"LatheGeometry",(function(){return LatheGeometry})),n.d(r,"Layers",(function(){return Layers})),n.d(r,"LensFlare",(function(){return LensFlare})),n.d(r,"LessDepth",(function(){return Y})),n.d(r,"LessEqualDepth",(function(){return J})),n.d(r,"LessEqualStencilFunc",(function(){return Dr})),n.d(r,"LessStencilFunc",(function(){return Cr})),n.d(r,"Light",(function(){return Light})),n.d(r,"LightProbe",(function(){return LightProbe})),n.d(r,"Line",(function(){return Line})),n.d(r,"Line3",(function(){return Line3})),n.d(r,"LineBasicMaterial",(function(){return LineBasicMaterial})),n.d(r,"LineCurve",(function(){return LineCurve})),n.d(r,"LineCurve3",(function(){return LineCurve3})),n.d(r,"LineDashedMaterial",(function(){return LineDashedMaterial})),n.d(r,"LineLoop",(function(){return LineLoop})),n.d(r,"LinePieces",(function(){return As})),n.d(r,"LineSegments",(function(){return LineSegments})),n.d(r,"LineStrip",(function(){return xs})),n.d(r,"LinearEncoding",(function(){return sr})),n.d(r,"LinearFilter",(function(){return Ee})),n.d(r,"LinearInterpolant",(function(){return LinearInterpolant})),n.d(r,"LinearMipMapLinearFilter",(function(){return De})),n.d(r,"LinearMipMapNearestFilter",(function(){return Ce})),n.d(r,"LinearMipmapLinearFilter",(function(){return Te})),n.d(r,"LinearMipmapNearestFilter",(function(){return Be})),n.d(r,"LinearToneMapping",(function(){return oe})),n.d(r,"Loader",(function(){return Loader})),n.d(r,"LoaderUtils",(function(){return LoaderUtils})),n.d(r,"LoadingManager",(function(){return LoadingManager})),n.d(r,"LogLuvEncoding",(function(){return cr})),n.d(r,"LoopOnce",(function(){return qt})),n.d(r,"LoopPingPong",(function(){return Qt})),n.d(r,"LoopRepeat",(function(){return Kt})),n.d(r,"LuminanceAlphaFormat",(function(){return Ke})),n.d(r,"LuminanceFormat",(function(){return qe})),n.d(r,"MOUSE",(function(){return a})),n.d(r,"Material",(function(){return Material})),n.d(r,"MaterialLoader",(function(){return MaterialLoader})),n.d(r,"Math",(function(){return Yr})),n.d(r,"MathUtils",(function(){return Yr})),n.d(r,"Matrix3",(function(){return Matrix3})),n.d(r,"Matrix4",(function(){return Matrix4})),n.d(r,"MaxEquation",(function(){return F})),n.d(r,"Mesh",(function(){return Mesh})),n.d(r,"MeshBasicMaterial",(function(){return MeshBasicMaterial})),n.d(r,"MeshDepthMaterial",(function(){return MeshDepthMaterial})),n.d(r,"MeshDistanceMaterial",(function(){return MeshDistanceMaterial})),n.d(r,"MeshFaceMaterial",(function(){return MeshFaceMaterial})),n.d(r,"MeshLambertMaterial",(function(){return MeshLambertMaterial})),n.d(r,"MeshMatcapMaterial",(function(){return MeshMatcapMaterial})),n.d(r,"MeshNormalMaterial",(function(){return MeshNormalMaterial})),n.d(r,"MeshPhongMaterial",(function(){return MeshPhongMaterial})),n.d(r,"MeshPhysicalMaterial",(function(){return MeshPhysicalMaterial})),n.d(r,"MeshStandardMaterial",(function(){return MeshStandardMaterial})),n.d(r,"MeshToonMaterial",(function(){return MeshToonMaterial})),n.d(r,"MinEquation",(function(){return N})),n.d(r,"MirroredRepeatWrapping",(function(){return we})),n.d(r,"MixOperation",(function(){return ne})),n.d(r,"MultiMaterial",(function(){return MultiMaterial})),n.d(r,"MultiplyBlending",(function(){return C})),n.d(r,"MultiplyOperation",(function(){return re})),n.d(r,"NearestFilter",(function(){return Me})),n.d(r,"NearestMipMapLinearFilter",(function(){return Se})),n.d(r,"NearestMipMapNearestFilter",(function(){return xe})),n.d(r,"NearestMipmapLinearFilter",(function(){return Ae})),n.d(r,"NearestMipmapNearestFilter",(function(){return _e})),n.d(r,"NeverDepth",(function(){return Q})),n.d(r,"NeverStencilFunc",(function(){return Br})),n.d(r,"NoBlending",(function(){return x})),n.d(r,"NoColors",(function(){return Ss})),n.d(r,"NoToneMapping",(function(){return ae})),n.d(r,"NormalAnimationBlendMode",(function(){return tr})),n.d(r,"NormalBlending",(function(){return A})),n.d(r,"NotEqualDepth",(function(){return te})),n.d(r,"NotEqualStencilFunc",(function(){return Rr})),n.d(r,"NumberKeyframeTrack",(function(){return NumberKeyframeTrack})),n.d(r,"Object3D",(function(){return Object3D})),n.d(r,"ObjectLoader",(function(){return ObjectLoader})),n.d(r,"ObjectSpaceNormalMap",(function(){return yr})),n.d(r,"OctahedronBufferGeometry",(function(){return OctahedronGeometry})),n.d(r,"OctahedronGeometry",(function(){return OctahedronGeometry})),n.d(r,"OneFactor",(function(){return k})),n.d(r,"OneMinusDstAlphaFactor",(function(){return H})),n.d(r,"OneMinusDstColorFactor",(function(){return W})),n.d(r,"OneMinusSrcAlphaFactor",(function(){return V})),n.d(r,"OneMinusSrcColorFactor",(function(){return U})),n.d(r,"OrthographicCamera",(function(){return OrthographicCamera})),n.d(r,"PCFShadowMap",(function(){return p})),n.d(r,"PCFSoftShadowMap",(function(){return m})),n.d(r,"PMREMGenerator",(function(){return PMREMGenerator})),n.d(r,"ParametricBufferGeometry",(function(){return ParametricGeometry})),n.d(r,"ParametricGeometry",(function(){return ParametricGeometry})),n.d(r,"Particle",(function(){return Particle})),n.d(r,"ParticleBasicMaterial",(function(){return ParticleBasicMaterial})),n.d(r,"ParticleSystem",(function(){return ParticleSystem})),n.d(r,"ParticleSystemMaterial",(function(){return ParticleSystemMaterial})),n.d(r,"Path",(function(){return Path})),n.d(r,"PerspectiveCamera",(function(){return PerspectiveCamera})),n.d(r,"Plane",(function(){return Plane})),n.d(r,"PlaneBufferGeometry",(function(){return PlaneGeometry})),n.d(r,"PlaneGeometry",(function(){return PlaneGeometry})),n.d(r,"PlaneHelper",(function(){return PlaneHelper})),n.d(r,"PointCloud",(function(){return PointCloud})),n.d(r,"PointCloudMaterial",(function(){return PointCloudMaterial})),n.d(r,"PointLight",(function(){return PointLight})),n.d(r,"PointLightHelper",(function(){return PointLightHelper})),n.d(r,"Points",(function(){return Points})),n.d(r,"PointsMaterial",(function(){return PointsMaterial})),n.d(r,"PolarGridHelper",(function(){return PolarGridHelper})),n.d(r,"PolyhedronBufferGeometry",(function(){return PolyhedronGeometry})),n.d(r,"PolyhedronGeometry",(function(){return PolyhedronGeometry})),n.d(r,"PositionalAudio",(function(){return PositionalAudio})),n.d(r,"PropertyBinding",(function(){return PropertyBinding})),n.d(r,"PropertyMixer",(function(){return PropertyMixer})),n.d(r,"QuadraticBezierCurve",(function(){return QuadraticBezierCurve})),n.d(r,"QuadraticBezierCurve3",(function(){return QuadraticBezierCurve3})),n.d(r,"Quaternion",(function(){return Quaternion})),n.d(r,"QuaternionKeyframeTrack",(function(){return QuaternionKeyframeTrack})),n.d(r,"QuaternionLinearInterpolant",(function(){return QuaternionLinearInterpolant})),n.d(r,"REVISION",(function(){return i})),n.d(r,"RGBADepthPacking",(function(){return gr})),n.d(r,"RGBAFormat",(function(){return We})),n.d(r,"RGBAIntegerFormat",(function(){return rt})),n.d(r,"RGBA_ASTC_10x10_Format",(function(){return Ct})),n.d(r,"RGBA_ASTC_10x5_Format",(function(){return St})),n.d(r,"RGBA_ASTC_10x6_Format",(function(){return Et})),n.d(r,"RGBA_ASTC_10x8_Format",(function(){return Bt})),n.d(r,"RGBA_ASTC_12x10_Format",(function(){return Tt})),n.d(r,"RGBA_ASTC_12x12_Format",(function(){return Dt})),n.d(r,"RGBA_ASTC_4x4_Format",(function(){return vt})),n.d(r,"RGBA_ASTC_5x4_Format",(function(){return yt})),n.d(r,"RGBA_ASTC_5x5_Format",(function(){return bt})),n.d(r,"RGBA_ASTC_6x5_Format",(function(){return wt})),n.d(r,"RGBA_ASTC_6x6_Format",(function(){return Mt})),n.d(r,"RGBA_ASTC_8x5_Format",(function(){return _t})),n.d(r,"RGBA_ASTC_8x6_Format",(function(){return xt})),n.d(r,"RGBA_ASTC_8x8_Format",(function(){return At})),n.d(r,"RGBA_BPTC_Format",(function(){return Pt})),n.d(r,"RGBA_ETC2_EAC_Format",(function(){return mt})),n.d(r,"RGBA_PVRTC_2BPPV1_Format",(function(){return ct})),n.d(r,"RGBA_PVRTC_4BPPV1_Format",(function(){return ht})),n.d(r,"RGBA_S3TC_DXT1_Format",(function(){return it})),n.d(r,"RGBA_S3TC_DXT3_Format",(function(){return at})),n.d(r,"RGBA_S3TC_DXT5_Format",(function(){return ot})),n.d(r,"RGBDEncoding",(function(){return pr})),n.d(r,"RGBEEncoding",(function(){return lr})),n.d(r,"RGBEFormat",(function(){return Qe})),n.d(r,"RGBFormat",(function(){return Ge})),n.d(r,"RGBIntegerFormat",(function(){return tt})),n.d(r,"RGBM16Encoding",(function(){return fr})),n.d(r,"RGBM7Encoding",(function(){return dr})),n.d(r,"RGB_ETC1_Format",(function(){return dt})),n.d(r,"RGB_ETC2_Format",(function(){return pt})),n.d(r,"RGB_PVRTC_2BPPV1_Format",(function(){return ut})),n.d(r,"RGB_PVRTC_4BPPV1_Format",(function(){return st})),n.d(r,"RGB_S3TC_DXT1_Format",(function(){return nt})),n.d(r,"RGFormat",(function(){return $e})),n.d(r,"RGIntegerFormat",(function(){return et})),n.d(r,"RawShaderMaterial",(function(){return RawShaderMaterial})),n.d(r,"Ray",(function(){return Ray})),n.d(r,"Raycaster",(function(){return Raycaster})),n.d(r,"RectAreaLight",(function(){return RectAreaLight})),n.d(r,"RedFormat",(function(){return Je})),n.d(r,"RedIntegerFormat",(function(){return Ze})),n.d(r,"ReinhardToneMapping",(function(){return se})),n.d(r,"RepeatWrapping",(function(){return ye})),n.d(r,"ReplaceStencilOp",(function(){return Mr})),n.d(r,"ReverseSubtractEquation",(function(){return L})),n.d(r,"RingBufferGeometry",(function(){return RingGeometry})),n.d(r,"RingGeometry",(function(){return RingGeometry})),n.d(r,"SRGB8_ALPHA8_ASTC_10x10_Format",(function(){return Ht})),n.d(r,"SRGB8_ALPHA8_ASTC_10x5_Format",(function(){return zt})),n.d(r,"SRGB8_ALPHA8_ASTC_10x6_Format",(function(){return Vt})),n.d(r,"SRGB8_ALPHA8_ASTC_10x8_Format",(function(){return jt})),n.d(r,"SRGB8_ALPHA8_ASTC_12x10_Format",(function(){return Gt})),n.d(r,"SRGB8_ALPHA8_ASTC_12x12_Format",(function(){return Wt})),n.d(r,"SRGB8_ALPHA8_ASTC_4x4_Format",(function(){return Rt})),n.d(r,"SRGB8_ALPHA8_ASTC_5x4_Format",(function(){return Lt})),n.d(r,"SRGB8_ALPHA8_ASTC_5x5_Format",(function(){return Nt})),n.d(r,"SRGB8_ALPHA8_ASTC_6x5_Format",(function(){return Ft})),n.d(r,"SRGB8_ALPHA8_ASTC_6x6_Format",(function(){return It})),n.d(r,"SRGB8_ALPHA8_ASTC_8x5_Format",(function(){return kt})),n.d(r,"SRGB8_ALPHA8_ASTC_8x6_Format",(function(){return Ot})),n.d(r,"SRGB8_ALPHA8_ASTC_8x8_Format",(function(){return Ut})),n.d(r,"Scene",(function(){return Scene})),n.d(r,"SceneUtils",(function(){return Cs})),n.d(r,"ShaderChunk",(function(){return Hi})),n.d(r,"ShaderLib",(function(){return Wi})),n.d(r,"ShaderMaterial",(function(){return ShaderMaterial})),n.d(r,"ShadowMaterial",(function(){return ShadowMaterial})),n.d(r,"Shape",(function(){return Shape})),n.d(r,"ShapeBufferGeometry",(function(){return ShapeGeometry})),n.d(r,"ShapeGeometry",(function(){return ShapeGeometry})),n.d(r,"ShapePath",(function(){return ShapePath})),n.d(r,"ShapeUtils",(function(){return ShapeUtils})),n.d(r,"ShortType",(function(){return Le})),n.d(r,"Skeleton",(function(){return Skeleton})),n.d(r,"SkeletonHelper",(function(){return SkeletonHelper})),n.d(r,"SkinnedMesh",(function(){return SkinnedMesh})),n.d(r,"SmoothShading",(function(){return _})),n.d(r,"Sphere",(function(){return Sphere})),n.d(r,"SphereBufferGeometry",(function(){return SphereGeometry})),n.d(r,"SphereGeometry",(function(){return SphereGeometry})),n.d(r,"Spherical",(function(){return Spherical})),n.d(r,"SphericalHarmonics3",(function(){return SphericalHarmonics3})),n.d(r,"SplineCurve",(function(){return SplineCurve})),n.d(r,"SpotLight",(function(){return SpotLight})),n.d(r,"SpotLightHelper",(function(){return SpotLightHelper})),n.d(r,"Sprite",(function(){return Sprite})),n.d(r,"SpriteMaterial",(function(){return SpriteMaterial})),n.d(r,"SrcAlphaFactor",(function(){return z})),n.d(r,"SrcAlphaSaturateFactor",(function(){return q})),n.d(r,"SrcColorFactor",(function(){return O})),n.d(r,"StaticCopyUsage",(function(){return Vr})),n.d(r,"StaticDrawUsage",(function(){return Fr})),n.d(r,"StaticReadUsage",(function(){return Or})),n.d(r,"StereoCamera",(function(){return StereoCamera})),n.d(r,"StreamCopyUsage",(function(){return Hr})),n.d(r,"StreamDrawUsage",(function(){return kr})),n.d(r,"StreamReadUsage",(function(){return zr})),n.d(r,"StringKeyframeTrack",(function(){return StringKeyframeTrack})),n.d(r,"SubtractEquation",(function(){return P})),n.d(r,"SubtractiveBlending",(function(){return B})),n.d(r,"TOUCH",(function(){return o})),n.d(r,"TangentSpaceNormalMap",(function(){return vr})),n.d(r,"TetrahedronBufferGeometry",(function(){return TetrahedronGeometry})),n.d(r,"TetrahedronGeometry",(function(){return TetrahedronGeometry})),n.d(r,"TextBufferGeometry",(function(){return TextGeometry})),n.d(r,"TextGeometry",(function(){return TextGeometry})),n.d(r,"Texture",(function(){return Texture})),n.d(r,"TextureLoader",(function(){return TextureLoader})),n.d(r,"TorusBufferGeometry",(function(){return TorusGeometry})),n.d(r,"TorusGeometry",(function(){return TorusGeometry})),n.d(r,"TorusKnotBufferGeometry",(function(){return TorusKnotGeometry})),n.d(r,"TorusKnotGeometry",(function(){return TorusKnotGeometry})),n.d(r,"Triangle",(function(){return Triangle})),n.d(r,"TriangleFanDrawMode",(function(){return ar})),n.d(r,"TriangleStripDrawMode",(function(){return ir})),n.d(r,"TrianglesDrawMode",(function(){return nr})),n.d(r,"TubeBufferGeometry",(function(){return TubeGeometry})),n.d(r,"TubeGeometry",(function(){return TubeGeometry})),n.d(r,"UVMapping",(function(){return ce})),n.d(r,"Uint16Attribute",(function(){return Uint16Attribute})),n.d(r,"Uint16BufferAttribute",(function(){return Uint16BufferAttribute})),n.d(r,"Uint32Attribute",(function(){return Uint32Attribute})),n.d(r,"Uint32BufferAttribute",(function(){return Uint32BufferAttribute})),n.d(r,"Uint8Attribute",(function(){return Uint8Attribute})),n.d(r,"Uint8BufferAttribute",(function(){return Uint8BufferAttribute})),n.d(r,"Uint8ClampedAttribute",(function(){return Uint8ClampedAttribute})),n.d(r,"Uint8ClampedBufferAttribute",(function(){return Uint8ClampedBufferAttribute})),n.d(r,"Uniform",(function(){return Uniform})),n.d(r,"UniformsLib",(function(){return Gi})),n.d(r,"UniformsUtils",(function(){return Ii})),n.d(r,"UnsignedByteType",(function(){return Pe})),n.d(r,"UnsignedInt248Type",(function(){return je})),n.d(r,"UnsignedIntType",(function(){return Ie})),n.d(r,"UnsignedShort4444Type",(function(){return Ue})),n.d(r,"UnsignedShort5551Type",(function(){return ze})),n.d(r,"UnsignedShort565Type",(function(){return Ve})),n.d(r,"UnsignedShortType",(function(){return Ne})),n.d(r,"VSMShadowMap",(function(){return g})),n.d(r,"Vector2",(function(){return Vector2})),n.d(r,"Vector3",(function(){return Vector3})),n.d(r,"Vector4",(function(){return Vector4})),n.d(r,"VectorKeyframeTrack",(function(){return VectorKeyframeTrack})),n.d(r,"Vertex",(function(){return Vertex})),n.d(r,"VertexColors",(function(){return Bs})),n.d(r,"VideoTexture",(function(){return VideoTexture})),n.d(r,"WebGL1Renderer",(function(){return WebGL1Renderer})),n.d(r,"WebGLCubeRenderTarget",(function(){return WebGLCubeRenderTarget})),n.d(r,"WebGLMultipleRenderTargets",(function(){return WebGLMultipleRenderTargets})),n.d(r,"WebGLMultisampleRenderTarget",(function(){return WebGLMultisampleRenderTarget})),n.d(r,"WebGLRenderTarget",(function(){return WebGLRenderTarget})),n.d(r,"WebGLRenderTargetCube",(function(){return WebGLRenderTargetCube})),n.d(r,"WebGLRenderer",(function(){return WebGLRenderer})),n.d(r,"WebGLUtils",(function(){return WebGLUtils})),n.d(r,"WireframeGeometry",(function(){return WireframeGeometry})),n.d(r,"WireframeHelper",(function(){return WireframeHelper})),n.d(r,"WrapAroundEnding",(function(){return er})),n.d(r,"XHRLoader",(function(){return XHRLoader})),n.d(r,"ZeroCurvatureEnding",(function(){return Zt})),n.d(r,"ZeroFactor",(function(){return I})),n.d(r,"ZeroSlopeEnding",(function(){return $t})),n.d(r,"ZeroStencilOp",(function(){return br})),n.d(r,"sRGBEncoding",(function(){return ur}));n(102);const i="131",a={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s=0,h=1,l=2,c=3,d=0,p=1,m=2,g=3,y=0,b=1,w=2,M=1,_=2,x=0,A=1,E=2,B=3,C=4,T=5,D=100,P=101,L=102,N=103,F=104,I=200,k=201,O=202,U=203,z=204,V=205,j=206,H=207,G=208,W=209,q=210,Q=0,X=1,Y=2,J=3,Z=4,$=5,ee=6,te=7,re=0,ne=1,ie=2,ae=0,oe=1,se=2,ue=3,he=4,le=5,ce=300,de=301,fe=302,pe=303,me=304,ge=306,ve=307,ye=1e3,be=1001,we=1002,Me=1003,_e=1004,xe=1004,Ae=1005,Se=1005,Ee=1006,Be=1007,Ce=1007,Te=1008,De=1008,Pe=1009,Re=1010,Le=1011,Ne=1012,Fe=1013,Ie=1014,ke=1015,Oe=1016,Ue=1017,ze=1018,Ve=1019,je=1020,He=1021,Ge=1022,We=1023,qe=1024,Ke=1025,Qe=We,Xe=1026,Ye=1027,Je=1028,Ze=1029,$e=1030,et=1031,tt=1032,rt=1033,nt=33776,it=33777,at=33778,ot=33779,st=35840,ut=35841,ht=35842,ct=35843,dt=36196,pt=37492,mt=37496,vt=37808,yt=37809,bt=37810,wt=37811,Mt=37812,_t=37813,xt=37814,At=37815,St=37816,Et=37817,Bt=37818,Ct=37819,Tt=37820,Dt=37821,Pt=36492,Rt=37840,Lt=37841,Nt=37842,Ft=37843,It=37844,kt=37845,Ot=37846,Ut=37847,zt=37848,Vt=37849,jt=37850,Ht=37851,Gt=37852,Wt=37853,qt=2200,Kt=2201,Qt=2202,Xt=2300,Yt=2301,Jt=2302,Zt=2400,$t=2401,er=2402,tr=2500,rr=2501,nr=0,ir=1,ar=2,sr=3e3,ur=3001,hr=3007,lr=3002,cr=3003,dr=3004,fr=3005,pr=3006,mr=3200,gr=3201,vr=0,yr=1,br=0,wr=7680,Mr=7681,_r=7682,xr=7683,Ar=34055,Sr=34056,Er=5386,Br=512,Cr=513,Tr=514,Dr=515,Pr=516,Rr=517,Lr=518,Nr=519,Fr=35044,Ir=35048,kr=35040,Or=35045,Ur=35049,zr=35041,Vr=35046,jr=35050,Hr=35042,Gr="100",Wr="300 es";class EventDispatcher{addEventListener(t,r){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(r)&&n[t].push(r)}hasEventListener(t,r){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(r)}removeEventListener(t,r){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(r);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const r=this._listeners[t.type];if(void 0!==r){t.target=this;const n=r.slice(0);for(let r=0,i=n.length;r<i;r++)n[r].call(this,t);t.target=null}}}const qr=[];for(let t=0;t<256;t++)qr[t]=(t<16?"0":"")+t.toString(16);let Kr=1234567;const Qr=Math.PI/180,Xr=180/Math.PI;function generateUUID(){const t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(qr[255&t]+qr[t>>8&255]+qr[t>>16&255]+qr[t>>24&255]+"-"+qr[255&r]+qr[r>>8&255]+"-"+qr[r>>16&15|64]+qr[r>>24&255]+"-"+qr[63&n|128]+qr[n>>8&255]+"-"+qr[n>>16&255]+qr[n>>24&255]+qr[255&i]+qr[i>>8&255]+qr[i>>16&255]+qr[i>>24&255]).toUpperCase()}function clamp(t,r,n){return Math.max(r,Math.min(n,t))}function euclideanModulo(t,r){return(t%r+r)%r}function lerp(t,r,n){return(1-n)*t+n*r}function isPowerOfTwo(t){return 0==(t&t-1)&&0!==t}function ceilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function floorPowerOfTwo(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Yr=Object.freeze({__proto__:null,DEG2RAD:Qr,RAD2DEG:Xr,generateUUID:generateUUID,clamp:clamp,euclideanModulo:euclideanModulo,mapLinear:function mapLinear(t,r,n,i,a){return i+(t-r)*(a-i)/(n-r)},inverseLerp:function inverseLerp(t,r,n){return t!==r?(n-t)/(r-t):0},lerp:lerp,damp:function damp(t,r,n,i){return lerp(t,r,1-Math.exp(-n*i))},pingpong:function pingpong(t,r=1){return r-Math.abs(euclideanModulo(t,2*r)-r)},smoothstep:function smoothstep(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*(3-2*t)},smootherstep:function smootherstep(t,r,n){return t<=r?0:t>=n?1:(t=(t-r)/(n-r))*t*t*(t*(6*t-15)+10)},randInt:function randInt(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function randFloat(t,r){return t+Math.random()*(r-t)},randFloatSpread:function randFloatSpread(t){return t*(.5-Math.random())},seededRandom:function seededRandom(t){return void 0!==t&&(Kr=t%2147483647),Kr=16807*Kr%2147483647,(Kr-1)/2147483646},degToRad:function degToRad(t){return t*Qr},radToDeg:function radToDeg(t){return t*Xr},isPowerOfTwo:isPowerOfTwo,ceilPowerOfTwo:ceilPowerOfTwo,floorPowerOfTwo:floorPowerOfTwo,setQuaternionFromProperEuler:function setQuaternionFromProperEuler(t,r,n,i,a){const o=Math.cos,s=Math.sin,h=o(n/2),l=s(n/2),c=o((r+i)/2),d=s((r+i)/2),p=o((r-i)/2),m=s((r-i)/2),g=o((i-r)/2),y=s((i-r)/2);switch(a){case"XYX":t.set(h*d,l*p,l*m,h*c);break;case"YZY":t.set(l*m,h*d,l*p,h*c);break;case"ZXZ":t.set(l*p,l*m,h*d,h*c);break;case"XZX":t.set(h*d,l*y,l*g,h*c);break;case"YXY":t.set(l*g,h*d,l*y,h*c);break;case"ZYZ":t.set(l*y,l*g,h*d,h*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}});class Vector2{constructor(t=0,r=0){this.x=t,this.y=r}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,r){return this.x=t,this.y=r,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,r){return void 0!==r?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this}sub(t,r){return void 0!==r?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const r=this.x,n=this.y,i=t.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,n=this.y-t.y;return r*r+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t}fromBufferAttribute(t,r,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this}rotateAround(t,r){const n=Math.cos(r),i=Math.sin(r),a=this.x-t.x,o=this.y-t.y;return this.x=a*n-o*i+t.x,this.y=a*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Vector2.prototype.isVector2=!0;class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,r,n,i,a,o,s,h,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=s,c[3]=r,c[4]=a,c[5]=h,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(t,r,n){return t.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const r=t.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const n=t.elements,i=r.elements,a=this.elements,o=n[0],s=n[3],h=n[6],l=n[1],c=n[4],d=n[7],p=n[2],m=n[5],g=n[8],y=i[0],b=i[3],w=i[6],M=i[1],_=i[4],x=i[7],A=i[2],E=i[5],B=i[8];return a[0]=o*y+s*M+h*A,a[3]=o*b+s*_+h*E,a[6]=o*w+s*x+h*B,a[1]=l*y+c*M+d*A,a[4]=l*b+c*_+d*E,a[7]=l*w+c*x+d*B,a[2]=p*y+m*M+g*A,a[5]=p*b+m*_+g*E,a[8]=p*w+m*x+g*B,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=t,r[4]*=t,r[7]*=t,r[2]*=t,r[5]*=t,r[8]*=t,this}determinant(){const t=this.elements,r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],h=t[6],l=t[7],c=t[8];return r*o*c-r*s*l-n*a*c+n*s*h+i*a*l-i*o*h}invert(){const t=this.elements,r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],h=t[6],l=t[7],c=t[8],d=c*o-s*l,p=s*h-c*a,m=l*a-o*h,g=r*d+n*p+i*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const y=1/g;return t[0]=d*y,t[1]=(i*l-c*n)*y,t[2]=(s*n-i*o)*y,t[3]=p*y,t[4]=(c*r-i*h)*y,t[5]=(i*a-s*r)*y,t[6]=m*y,t[7]=(n*h-l*r)*y,t[8]=(o*r-n*a)*y,this}transpose(){let t;const r=this.elements;return t=r[1],r[1]=r[3],r[3]=t,t=r[2],r[2]=r[6],r[6]=t,t=r[5],r[5]=r[7],r[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const r=this.elements;return t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8],this}setUvTransform(t,r,n,i,a,o,s){const h=Math.cos(a),l=Math.sin(a);return this.set(n*h,n*l,-n*(h*o+l*s)+o+t,-i*l,i*h,-i*(-l*o+h*s)+s+r,0,0,1),this}scale(t,r){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=r,n[4]*=r,n[7]*=r,this}rotate(t){const r=Math.cos(t),n=Math.sin(t),i=this.elements,a=i[0],o=i[3],s=i[6],h=i[1],l=i[4],c=i[7];return i[0]=r*a+n*h,i[3]=r*o+n*l,i[6]=r*s+n*c,i[1]=-n*a+r*h,i[4]=-n*o+r*l,i[7]=-n*s+r*c,this}translate(t,r){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=r*n[2],n[4]+=r*n[5],n[7]+=r*n[8],this}equals(t){const r=this.elements,n=t.elements;for(let t=0;t<9;t++)if(r[t]!==n[t])return!1;return!0}fromArray(t,r=0){for(let n=0;n<9;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){const n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}let Jr;Matrix3.prototype.isMatrix3=!0;class ImageUtils{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let r;if(t instanceof HTMLCanvasElement)r=t;else{void 0===Jr&&(Jr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Jr.width=t.width,Jr.height=t.height;const n=Jr.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),r=Jr}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}}let Zr=0;class Texture extends EventDispatcher{constructor(t=Texture.DEFAULT_IMAGE,r=Texture.DEFAULT_MAPPING,n=be,i=be,a=Ee,o=Te,s=We,h=Pe,l=1,c=sr){super(),Object.defineProperty(this,"id",{value:Zr++}),this.uuid=generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=r,this.wrapS=n,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=h,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=generateUUID()),!r&&void 0===t.images[i.uuid]){let r;if(Array.isArray(i)){r=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?r.push(serializeImage(i[t].image)):r.push(serializeImage(i[t]))}else r=serializeImage(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return r||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ce)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ye:t.x=t.x-Math.floor(t.x);break;case be:t.x=t.x<0?0:1;break;case we:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ye:t.y=t.y-Math.floor(t.y);break;case be:t.y=t.y<0?0:1;break;case we:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function serializeImage(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ImageUtils.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=ce,Texture.prototype.isTexture=!0;class Vector4{constructor(t=0,r=0,n=0,i=1){this.x=t,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,r,n,i){return this.x=t,this.y=r,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,r){return void 0!==r?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this.w=t.w+r.w,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this.w+=t.w*r,this}sub(t,r){return void 0!==r?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this.w=t.w-r.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const r=this.x,n=this.y,i=this.z,a=this.w,o=t.elements;return this.x=o[0]*r+o[4]*n+o[8]*i+o[12]*a,this.y=o[1]*r+o[5]*n+o[9]*i+o[13]*a,this.z=o[2]*r+o[6]*n+o[10]*i+o[14]*a,this.w=o[3]*r+o[7]*n+o[11]*i+o[15]*a,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const r=Math.sqrt(1-t.w*t.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/r,this.y=t.y/r,this.z=t.z/r),this}setAxisAngleFromRotationMatrix(t){let r,n,i,a;const o=.01,s=.1,h=t.elements,l=h[0],c=h[4],d=h[8],p=h[1],m=h[5],g=h[9],y=h[2],b=h[6],w=h[10];if(Math.abs(c-p)<o&&Math.abs(d-y)<o&&Math.abs(g-b)<o){if(Math.abs(c+p)<s&&Math.abs(d+y)<s&&Math.abs(g+b)<s&&Math.abs(l+m+w-3)<s)return this.set(1,0,0,0),this;r=Math.PI;const t=(l+1)/2,h=(m+1)/2,M=(w+1)/2,_=(c+p)/4,x=(d+y)/4,A=(g+b)/4;return t>h&&t>M?t<o?(n=0,i=.707106781,a=.707106781):(n=Math.sqrt(t),i=_/n,a=x/n):h>M?h<o?(n=.707106781,i=0,a=.707106781):(i=Math.sqrt(h),n=_/i,a=A/i):M<o?(n=.707106781,i=.707106781,a=0):(a=Math.sqrt(M),n=x/a,i=A/a),this.set(n,i,a,r),this}let M=Math.sqrt((b-g)*(b-g)+(d-y)*(d-y)+(p-c)*(p-c));return Math.abs(M)<.001&&(M=1),this.x=(b-g)/M,this.y=(d-y)/M,this.z=(p-c)/M,this.w=Math.acos((l+m+w-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this.w=Math.max(t.w,Math.min(r.w,this.w)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this.w=Math.max(t,Math.min(r,this.w)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this.w+=(t.w-this.w)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this.w=t.w+(r.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this.w=t[r+3],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t[r+3]=this.w,t}fromBufferAttribute(t,r,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this.w=t.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Vector4.prototype.isVector4=!0;class WebGLRenderTarget extends EventDispatcher{constructor(t,r,n={}){super(),this.width=t,this.height=r,this.depth=1,this.scissor=new Vector4(0,0,t,r),this.scissorTest=!1,this.viewport=new Vector4(0,0,t,r),this.texture=new Texture(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:r,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Ee,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,r,n=1){this.width===t&&this.height===r&&this.depth===n||(this.width=t,this.height=r,this.depth=n,this.texture.image.width=t,this.texture.image.height=r,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0;class WebGLMultipleRenderTargets extends WebGLRenderTarget{constructor(t,r,n){super(t,r);const i=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=i.clone()}setSize(t,r,n=1){if(this.width!==t||this.height!==r||this.depth!==n){this.width=t,this.height=r,this.depth=n;for(let i=0,a=this.texture.length;i<a;i++)this.texture[i].image.width=t,this.texture[i].image.height=r,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,r),this.scissor.set(0,0,t,r),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let r=0,n=t.texture.length;r<n;r++)this.texture[r]=t.texture[r].clone();return this}}WebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets=!0;class WebGLMultisampleRenderTarget extends WebGLRenderTarget{constructor(t,r,n){super(t,r,n),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}WebGLMultisampleRenderTarget.prototype.isWebGLMultisampleRenderTarget=!0;class Quaternion{constructor(t=0,r=0,n=0,i=1){this._x=t,this._y=r,this._z=n,this._w=i}static slerp(t,r,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,r,i)}static slerpFlat(t,r,n,i,a,o,s){let h=n[i+0],l=n[i+1],c=n[i+2],d=n[i+3];const p=a[o+0],m=a[o+1],g=a[o+2],y=a[o+3];if(0===s)return t[r+0]=h,t[r+1]=l,t[r+2]=c,void(t[r+3]=d);if(1===s)return t[r+0]=p,t[r+1]=m,t[r+2]=g,void(t[r+3]=y);if(d!==y||h!==p||l!==m||c!==g){let t=1-s;const r=h*p+l*m+c*g+d*y,n=r>=0?1:-1,i=1-r*r;if(i>Number.EPSILON){const a=Math.sqrt(i),o=Math.atan2(a,r*n);t=Math.sin(t*o)/a,s=Math.sin(s*o)/a}const a=s*n;if(h=h*t+p*a,l=l*t+m*a,c=c*t+g*a,d=d*t+y*a,t===1-s){const t=1/Math.sqrt(h*h+l*l+c*c+d*d);h*=t,l*=t,c*=t,d*=t}}t[r]=h,t[r+1]=l,t[r+2]=c,t[r+3]=d}static multiplyQuaternionsFlat(t,r,n,i,a,o){const s=n[i],h=n[i+1],l=n[i+2],c=n[i+3],d=a[o],p=a[o+1],m=a[o+2],g=a[o+3];return t[r]=s*g+c*d+h*m-l*p,t[r+1]=h*g+c*p+l*d-s*m,t[r+2]=l*g+c*m+s*p-h*d,t[r+3]=c*g-s*d-h*p-l*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,r,n,i){return this._x=t,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,r){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,a=t._z,o=t._order,s=Math.cos,h=Math.sin,l=s(n/2),c=s(i/2),d=s(a/2),p=h(n/2),m=h(i/2),g=h(a/2);switch(o){case"XYZ":this._x=p*c*d+l*m*g,this._y=l*m*d-p*c*g,this._z=l*c*g+p*m*d,this._w=l*c*d-p*m*g;break;case"YXZ":this._x=p*c*d+l*m*g,this._y=l*m*d-p*c*g,this._z=l*c*g-p*m*d,this._w=l*c*d+p*m*g;break;case"ZXY":this._x=p*c*d-l*m*g,this._y=l*m*d+p*c*g,this._z=l*c*g+p*m*d,this._w=l*c*d-p*m*g;break;case"ZYX":this._x=p*c*d-l*m*g,this._y=l*m*d+p*c*g,this._z=l*c*g-p*m*d,this._w=l*c*d+p*m*g;break;case"YZX":this._x=p*c*d+l*m*g,this._y=l*m*d+p*c*g,this._z=l*c*g-p*m*d,this._w=l*c*d-p*m*g;break;case"XZY":this._x=p*c*d-l*m*g,this._y=l*m*d-p*c*g,this._z=l*c*g+p*m*d,this._w=l*c*d+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==r&&this._onChangeCallback(),this}setFromAxisAngle(t,r){const n=r/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const r=t.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],h=r[9],l=r[2],c=r[6],d=r[10],p=n+s+d;if(p>0){const t=.5/Math.sqrt(p+1);this._w=.25/t,this._x=(c-h)*t,this._y=(a-l)*t,this._z=(o-i)*t}else if(n>s&&n>d){const t=2*Math.sqrt(1+n-s-d);this._w=(c-h)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t}else if(s>d){const t=2*Math.sqrt(1+s-n-d);this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(h+c)/t}else{const t=2*Math.sqrt(1+d-n-s);this._w=(o-i)/t,this._x=(a+l)/t,this._y=(h+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,r){let n=t.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*r.z-t.z*r.y,this._y=t.z*r.x-t.x*r.z,this._z=t.x*r.y-t.y*r.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(clamp(this.dot(t),-1,1)))}rotateTowards(t,r){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,r/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,r){return void 0!==r?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,r)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,r){const n=t._x,i=t._y,a=t._z,o=t._w,s=r._x,h=r._y,l=r._z,c=r._w;return this._x=n*c+o*s+i*l-a*h,this._y=i*c+o*h+a*s-n*l,this._z=a*c+o*l+n*h-i*s,this._w=o*c-n*s-i*h-a*l,this._onChangeCallback(),this}slerp(t,r){if(0===r)return this;if(1===r)return this.copy(t);const n=this._x,i=this._y,a=this._z,o=this._w;let s=o*t._w+n*t._x+i*t._y+a*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=i,this._z=a,this;const h=1-s*s;if(h<=Number.EPSILON){const t=1-r;return this._w=t*o+r*this._w,this._x=t*n+r*this._x,this._y=t*i+r*this._y,this._z=t*a+r*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(h),c=Math.atan2(l,s),d=Math.sin((1-r)*c)/l,p=Math.sin(r*c)/l;return this._w=o*d+this._w*p,this._x=n*d+this._x*p,this._y=i*d+this._y*p,this._z=a*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,r,n){this.copy(t).slerp(r,n)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,r=0){return this._x=t[r],this._y=t[r+1],this._z=t[r+2],this._w=t[r+3],this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._w,t}fromBufferAttribute(t,r){return this._x=t.getX(r),this._y=t.getY(r),this._z=t.getZ(r),this._w=t.getW(r),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0;class Vector3{constructor(t=0,r=0,n=0){this.x=t,this.y=r,this.z=n}set(t,r,n){return void 0===n&&(n=this.z),this.x=t,this.y=r,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,r){switch(t){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,r){return void 0!==r?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,r)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this}addScaledVector(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r,this}sub(t,r){return void 0!==r?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}multiply(t,r){return void 0!==r?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,r)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,r){return this.x=t.x*r.x,this.y=t.y*r.y,this.z=t.z*r.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(en.setFromEuler(t))}applyAxisAngle(t,r){return this.applyQuaternion(en.setFromAxisAngle(t,r))}applyMatrix3(t){const r=this.x,n=this.y,i=this.z,a=t.elements;return this.x=a[0]*r+a[3]*n+a[6]*i,this.y=a[1]*r+a[4]*n+a[7]*i,this.z=a[2]*r+a[5]*n+a[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const r=this.x,n=this.y,i=this.z,a=t.elements,o=1/(a[3]*r+a[7]*n+a[11]*i+a[15]);return this.x=(a[0]*r+a[4]*n+a[8]*i+a[12])*o,this.y=(a[1]*r+a[5]*n+a[9]*i+a[13])*o,this.z=(a[2]*r+a[6]*n+a[10]*i+a[14])*o,this}applyQuaternion(t){const r=this.x,n=this.y,i=this.z,a=t.x,o=t.y,s=t.z,h=t.w,l=h*r+o*i-s*n,c=h*n+s*r-a*i,d=h*i+a*n-o*r,p=-a*r-o*n-s*i;return this.x=l*h+p*-a+c*-s-d*-o,this.y=c*h+p*-o+d*-a-l*-s,this.z=d*h+p*-s+l*-o-c*-a,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const r=this.x,n=this.y,i=this.z,a=t.elements;return this.x=a[0]*r+a[4]*n+a[8]*i,this.y=a[1]*r+a[5]*n+a[9]*i,this.z=a[2]*r+a[6]*n+a[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,r){return this.x=Math.max(t.x,Math.min(r.x,this.x)),this.y=Math.max(t.y,Math.min(r.y,this.y)),this.z=Math.max(t.z,Math.min(r.z,this.z)),this}clampScalar(t,r){return this.x=Math.max(t,Math.min(r,this.x)),this.y=Math.max(t,Math.min(r,this.y)),this.z=Math.max(t,Math.min(r,this.z)),this}clampLength(t,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,r){return this.x+=(t.x-this.x)*r,this.y+=(t.y-this.y)*r,this.z+=(t.z-this.z)*r,this}lerpVectors(t,r,n){return this.x=t.x+(r.x-t.x)*n,this.y=t.y+(r.y-t.y)*n,this.z=t.z+(r.z-t.z)*n,this}cross(t,r){return void 0!==r?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,r)):this.crossVectors(this,t)}crossVectors(t,r){const n=t.x,i=t.y,a=t.z,o=r.x,s=r.y,h=r.z;return this.x=i*h-a*s,this.y=a*o-n*h,this.z=n*s-i*o,this}projectOnVector(t){const r=t.lengthSq();if(0===r)return this.set(0,0,0);const n=t.dot(this)/r;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return $r.copy(this).projectOnVector(t),this.sub($r)}reflect(t){return this.sub($r.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const r=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===r)return Math.PI/2;const n=this.dot(t)/r;return Math.acos(clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const r=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return r*r+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,r,n){const i=Math.sin(r)*t;return this.x=i*Math.sin(n),this.y=Math.cos(r)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,r,n){return this.x=t*Math.sin(r),this.y=n,this.z=t*Math.cos(r),this}setFromMatrixPosition(t){const r=t.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(t){const r=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(t,r){return this.fromArray(t.elements,4*r)}setFromMatrix3Column(t,r){return this.fromArray(t.elements,3*r)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,r=0){return this.x=t[r],this.y=t[r+1],this.z=t[r+2],this}toArray(t=[],r=0){return t[r]=this.x,t[r+1]=this.y,t[r+2]=this.z,t}fromBufferAttribute(t,r,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(r),this.y=t.getY(r),this.z=t.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Vector3.prototype.isVector3=!0;const $r=new Vector3,en=new Quaternion;class Box3{constructor(t=new Vector3(1/0,1/0,1/0),r=new Vector3(-1/0,-1/0,-1/0)){this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromArray(t){let r=1/0,n=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let h=0,l=t.length;h<l;h+=3){const l=t[h],c=t[h+1],d=t[h+2];l<r&&(r=l),c<n&&(n=c),d<i&&(i=d),l>a&&(a=l),c>o&&(o=c),d>s&&(s=d)}return this.min.set(r,n,i),this.max.set(a,o,s),this}setFromBufferAttribute(t){let r=1/0,n=1/0,i=1/0,a=-1/0,o=-1/0,s=-1/0;for(let h=0,l=t.count;h<l;h++){const l=t.getX(h),c=t.getY(h),d=t.getZ(h);l<r&&(r=l),c<n&&(n=c),d<i&&(i=d),l>a&&(a=l),c>o&&(o=c),d>s&&(s=d)}return this.min.set(r,n,i),this.max.set(a,o,s),this}setFromPoints(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const n=rn.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const r=t.geometry;void 0!==r&&(null===r.boundingBox&&r.computeBoundingBox(),nn.copy(r.boundingBox),nn.applyMatrix4(t.matrixWorld),this.union(nn));const n=t.children;for(let t=0,r=n.length;t<r;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,rn),rn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let r,n;return t.normal.x>0?(r=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(r=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(r+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(r+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(r+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(r+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),r<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(dn),fn.subVectors(this.max,dn),an.subVectors(t.a,dn),sn.subVectors(t.b,dn),un.subVectors(t.c,dn),hn.subVectors(sn,an),ln.subVectors(un,sn),cn.subVectors(an,un);let r=[0,-hn.z,hn.y,0,-ln.z,ln.y,0,-cn.z,cn.y,hn.z,0,-hn.x,ln.z,0,-ln.x,cn.z,0,-cn.x,-hn.y,hn.x,0,-ln.y,ln.x,0,-cn.y,cn.x,0];return!!satForAxes(r,an,sn,un,fn)&&(r=[1,0,0,0,1,0,0,0,1],!!satForAxes(r,an,sn,un,fn)&&(pn.crossVectors(hn,ln),r=[pn.x,pn.y,pn.z],satForAxes(r,an,sn,un,fn)))}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return rn.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(rn).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(tn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),tn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),tn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),tn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),tn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),tn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),tn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),tn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(tn)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Box3.prototype.isBox3=!0;const tn=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],rn=new Vector3,nn=new Box3,an=new Vector3,sn=new Vector3,un=new Vector3,hn=new Vector3,ln=new Vector3,cn=new Vector3,dn=new Vector3,fn=new Vector3,pn=new Vector3,mn=new Vector3;function satForAxes(t,r,n,i,a){for(let o=0,s=t.length-3;o<=s;o+=3){mn.fromArray(t,o);const s=a.x*Math.abs(mn.x)+a.y*Math.abs(mn.y)+a.z*Math.abs(mn.z),h=r.dot(mn),l=n.dot(mn),c=i.dot(mn);if(Math.max(-Math.max(h,l,c),Math.min(h,l,c))>s)return!1}return!0}const gn=new Box3,vn=new Vector3,yn=new Vector3,bn=new Vector3;class Sphere{constructor(t=new Vector3,r=-1){this.center=t,this.radius=r}set(t,r){return this.center.copy(t),this.radius=r,this}setFromPoints(t,r){const n=this.center;void 0!==r?n.copy(r):gn.setFromPoints(t).getCenter(n);let i=0;for(let r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const r=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=r*r}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,r){const n=this.center.distanceToSquared(t);return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){bn.subVectors(t,this.center);const r=bn.lengthSq();if(r>this.radius*this.radius){const t=Math.sqrt(r),n=.5*(t-this.radius);this.center.add(bn.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return yn.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(vn.copy(t.center).add(yn)),this.expandByPoint(vn.copy(t.center).sub(yn)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const wn=new Vector3,Mn=new Vector3,_n=new Vector3,xn=new Vector3,An=new Vector3,Sn=new Vector3,En=new Vector3;class Ray{constructor(t=new Vector3,r=new Vector3(0,0,-1)){this.origin=t,this.direction=r}set(t,r){return this.origin.copy(t),this.direction.copy(r),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,r){return r.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,wn)),this}closestPointToPoint(t,r){r.subVectors(t,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const r=wn.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(wn.copy(this.direction).multiplyScalar(r).add(this.origin),wn.distanceToSquared(t))}distanceSqToSegment(t,r,n,i){Mn.copy(t).add(r).multiplyScalar(.5),_n.copy(r).sub(t).normalize(),xn.copy(this.origin).sub(Mn);const a=.5*t.distanceTo(r),o=-this.direction.dot(_n),s=xn.dot(this.direction),h=-xn.dot(_n),l=xn.lengthSq(),c=Math.abs(1-o*o);let d,p,m,g;if(c>0)if(d=o*h-s,p=o*s-h,g=a*c,d>=0)if(p>=-g)if(p<=g){const t=1/c;d*=t,p*=t,m=d*(d+o*p+2*s)+p*(o*d+p+2*h)+l}else p=a,d=Math.max(0,-(o*p+s)),m=-d*d+p*(p+2*h)+l;else p=-a,d=Math.max(0,-(o*p+s)),m=-d*d+p*(p+2*h)+l;else p<=-g?(d=Math.max(0,-(-o*a+s)),p=d>0?-a:Math.min(Math.max(-a,-h),a),m=-d*d+p*(p+2*h)+l):p<=g?(d=0,p=Math.min(Math.max(-a,-h),a),m=p*(p+2*h)+l):(d=Math.max(0,-(o*a+s)),p=d>0?a:Math.min(Math.max(-a,-h),a),m=-d*d+p*(p+2*h)+l);else p=o>0?-a:a,d=Math.max(0,-(o*p+s)),m=-d*d+p*(p+2*h)+l;return n&&n.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(_n).multiplyScalar(p).add(Mn),m}intersectSphere(t,r){wn.subVectors(t.center,this.origin);const n=wn.dot(this.direction),i=wn.dot(wn)-n*n,a=t.radius*t.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=n-o,h=n+o;return s<0&&h<0?null:s<0?this.at(h,r):this.at(s,r)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const r=t.normal.dot(this.direction);if(0===r)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/r;return n>=0?n:null}intersectPlane(t,r){const n=this.distanceToPlane(t);return null===n?null:this.at(n,r)}intersectsPlane(t){const r=t.distanceToPoint(this.origin);if(0===r)return!0;return t.normal.dot(this.direction)*r<0}intersectBox(t,r){let n,i,a,o,s,h;const l=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,p=this.origin;return l>=0?(n=(t.min.x-p.x)*l,i=(t.max.x-p.x)*l):(n=(t.max.x-p.x)*l,i=(t.min.x-p.x)*l),c>=0?(a=(t.min.y-p.y)*c,o=(t.max.y-p.y)*c):(a=(t.max.y-p.y)*c,o=(t.min.y-p.y)*c),n>o||a>i?null:((a>n||n!=n)&&(n=a),(o<i||i!=i)&&(i=o),d>=0?(s=(t.min.z-p.z)*d,h=(t.max.z-p.z)*d):(s=(t.max.z-p.z)*d,h=(t.min.z-p.z)*d),n>h||s>i?null:((s>n||n!=n)&&(n=s),(h<i||i!=i)&&(i=h),i<0?null:this.at(n>=0?n:i,r)))}intersectsBox(t){return null!==this.intersectBox(t,wn)}intersectTriangle(t,r,n,i,a){An.subVectors(r,t),Sn.subVectors(n,t),En.crossVectors(An,Sn);let o,s=this.direction.dot(En);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}xn.subVectors(this.origin,t);const h=o*this.direction.dot(Sn.crossVectors(xn,Sn));if(h<0)return null;const l=o*this.direction.dot(An.cross(xn));if(l<0)return null;if(h+l>s)return null;const c=-o*xn.dot(En);return c<0?null:this.at(c/s,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,r,n,i,a,o,s,h,l,c,d,p,m,g,y,b){const w=this.elements;return w[0]=t,w[4]=r,w[8]=n,w[12]=i,w[1]=a,w[5]=o,w[9]=s,w[13]=h,w[2]=l,w[6]=c,w[10]=d,w[14]=p,w[3]=m,w[7]=g,w[11]=y,w[15]=b,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(t){const r=this.elements,n=t.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(t){const r=this.elements,n=t.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(t){const r=t.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(t,r,n){return t.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,r,n){return this.set(t.x,r.x,n.x,0,t.y,r.y,n.y,0,t.z,r.z,n.z,0,0,0,0,1),this}extractRotation(t){const r=this.elements,n=t.elements,i=1/Bn.setFromMatrixColumn(t,0).length(),a=1/Bn.setFromMatrixColumn(t,1).length(),o=1/Bn.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[7]=0,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const r=this.elements,n=t.x,i=t.y,a=t.z,o=Math.cos(n),s=Math.sin(n),h=Math.cos(i),l=Math.sin(i),c=Math.cos(a),d=Math.sin(a);if("XYZ"===t.order){const t=o*c,n=o*d,i=s*c,a=s*d;r[0]=h*c,r[4]=-h*d,r[8]=l,r[1]=n+i*l,r[5]=t-a*l,r[9]=-s*h,r[2]=a-t*l,r[6]=i+n*l,r[10]=o*h}else if("YXZ"===t.order){const t=h*c,n=h*d,i=l*c,a=l*d;r[0]=t+a*s,r[4]=i*s-n,r[8]=o*l,r[1]=o*d,r[5]=o*c,r[9]=-s,r[2]=n*s-i,r[6]=a+t*s,r[10]=o*h}else if("ZXY"===t.order){const t=h*c,n=h*d,i=l*c,a=l*d;r[0]=t-a*s,r[4]=-o*d,r[8]=i+n*s,r[1]=n+i*s,r[5]=o*c,r[9]=a-t*s,r[2]=-o*l,r[6]=s,r[10]=o*h}else if("ZYX"===t.order){const t=o*c,n=o*d,i=s*c,a=s*d;r[0]=h*c,r[4]=i*l-n,r[8]=t*l+a,r[1]=h*d,r[5]=a*l+t,r[9]=n*l-i,r[2]=-l,r[6]=s*h,r[10]=o*h}else if("YZX"===t.order){const t=o*h,n=o*l,i=s*h,a=s*l;r[0]=h*c,r[4]=a-t*d,r[8]=i*d+n,r[1]=d,r[5]=o*c,r[9]=-s*c,r[2]=-l*c,r[6]=n*d+i,r[10]=t-a*d}else if("XZY"===t.order){const t=o*h,n=o*l,i=s*h,a=s*l;r[0]=h*c,r[4]=-d,r[8]=l*c,r[1]=t*d+a,r[5]=o*c,r[9]=n*d-i,r[2]=i*d-n,r[6]=s*c,r[10]=a*d+t}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tn,t,Dn)}lookAt(t,r,n){const i=this.elements;return Ln.subVectors(t,r),0===Ln.lengthSq()&&(Ln.z=1),Ln.normalize(),Pn.crossVectors(n,Ln),0===Pn.lengthSq()&&(1===Math.abs(n.z)?Ln.x+=1e-4:Ln.z+=1e-4,Ln.normalize(),Pn.crossVectors(n,Ln)),Pn.normalize(),Rn.crossVectors(Ln,Pn),i[0]=Pn.x,i[4]=Rn.x,i[8]=Ln.x,i[1]=Pn.y,i[5]=Rn.y,i[9]=Ln.y,i[2]=Pn.z,i[6]=Rn.z,i[10]=Ln.z,this}multiply(t,r){return void 0!==r?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,r)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,r){const n=t.elements,i=r.elements,a=this.elements,o=n[0],s=n[4],h=n[8],l=n[12],c=n[1],d=n[5],p=n[9],m=n[13],g=n[2],y=n[6],b=n[10],w=n[14],M=n[3],_=n[7],x=n[11],A=n[15],E=i[0],B=i[4],C=i[8],T=i[12],D=i[1],P=i[5],L=i[9],N=i[13],F=i[2],I=i[6],k=i[10],O=i[14],U=i[3],z=i[7],V=i[11],j=i[15];return a[0]=o*E+s*D+h*F+l*U,a[4]=o*B+s*P+h*I+l*z,a[8]=o*C+s*L+h*k+l*V,a[12]=o*T+s*N+h*O+l*j,a[1]=c*E+d*D+p*F+m*U,a[5]=c*B+d*P+p*I+m*z,a[9]=c*C+d*L+p*k+m*V,a[13]=c*T+d*N+p*O+m*j,a[2]=g*E+y*D+b*F+w*U,a[6]=g*B+y*P+b*I+w*z,a[10]=g*C+y*L+b*k+w*V,a[14]=g*T+y*N+b*O+w*j,a[3]=M*E+_*D+x*F+A*U,a[7]=M*B+_*P+x*I+A*z,a[11]=M*C+_*L+x*k+A*V,a[15]=M*T+_*N+x*O+A*j,this}multiplyScalar(t){const r=this.elements;return r[0]*=t,r[4]*=t,r[8]*=t,r[12]*=t,r[1]*=t,r[5]*=t,r[9]*=t,r[13]*=t,r[2]*=t,r[6]*=t,r[10]*=t,r[14]*=t,r[3]*=t,r[7]*=t,r[11]*=t,r[15]*=t,this}determinant(){const t=this.elements,r=t[0],n=t[4],i=t[8],a=t[12],o=t[1],s=t[5],h=t[9],l=t[13],c=t[2],d=t[6],p=t[10],m=t[14];return t[3]*(+a*h*d-i*l*d-a*s*p+n*l*p+i*s*m-n*h*m)+t[7]*(+r*h*m-r*l*p+a*o*p-i*o*m+i*l*c-a*h*c)+t[11]*(+r*l*d-r*s*m-a*o*d+n*o*m+a*s*c-n*l*c)+t[15]*(-i*s*c-r*h*d+r*s*p+i*o*d-n*o*p+n*h*c)}transpose(){const t=this.elements;let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,this}setPosition(t,r,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=r,i[14]=n),this}invert(){const t=this.elements,r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],h=t[6],l=t[7],c=t[8],d=t[9],p=t[10],m=t[11],g=t[12],y=t[13],b=t[14],w=t[15],M=d*b*l-y*p*l+y*h*m-s*b*m-d*h*w+s*p*w,_=g*p*l-c*b*l-g*h*m+o*b*m+c*h*w-o*p*w,x=c*y*l-g*d*l+g*s*m-o*y*m-c*s*w+o*d*w,A=g*d*h-c*y*h-g*s*p+o*y*p+c*s*b-o*d*b,E=r*M+n*_+i*x+a*A;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/E;return t[0]=M*B,t[1]=(y*p*a-d*b*a-y*i*m+n*b*m+d*i*w-n*p*w)*B,t[2]=(s*b*a-y*h*a+y*i*l-n*b*l-s*i*w+n*h*w)*B,t[3]=(d*h*a-s*p*a-d*i*l+n*p*l+s*i*m-n*h*m)*B,t[4]=_*B,t[5]=(c*b*a-g*p*a+g*i*m-r*b*m-c*i*w+r*p*w)*B,t[6]=(g*h*a-o*b*a-g*i*l+r*b*l+o*i*w-r*h*w)*B,t[7]=(o*p*a-c*h*a+c*i*l-r*p*l-o*i*m+r*h*m)*B,t[8]=x*B,t[9]=(g*d*a-c*y*a-g*n*m+r*y*m+c*n*w-r*d*w)*B,t[10]=(o*y*a-g*s*a+g*n*l-r*y*l-o*n*w+r*s*w)*B,t[11]=(c*s*a-o*d*a-c*n*l+r*d*l+o*n*m-r*s*m)*B,t[12]=A*B,t[13]=(c*y*i-g*d*i+g*n*p-r*y*p-c*n*b+r*d*b)*B,t[14]=(g*s*i-o*y*i-g*n*h+r*y*h+o*n*b-r*s*b)*B,t[15]=(o*d*i-c*s*i+c*n*h-r*d*h-o*n*p+r*s*p)*B,this}scale(t){const r=this.elements,n=t.x,i=t.y,a=t.z;return r[0]*=n,r[4]*=i,r[8]*=a,r[1]*=n,r[5]*=i,r[9]*=a,r[2]*=n,r[6]*=i,r[10]*=a,r[3]*=n,r[7]*=i,r[11]*=a,this}getMaxScaleOnAxis(){const t=this.elements,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(t,r,n){return this.set(1,0,0,t,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(t){const r=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(t){const r=Math.cos(t),n=Math.sin(t);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(t){const r=Math.cos(t),n=Math.sin(t);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,r){const n=Math.cos(r),i=Math.sin(r),a=1-n,o=t.x,s=t.y,h=t.z,l=a*o,c=a*s;return this.set(l*o+n,l*s-i*h,l*h+i*s,0,l*s+i*h,c*s+n,c*h-i*o,0,l*h-i*s,c*h+i*o,a*h*h+n,0,0,0,0,1),this}makeScale(t,r,n){return this.set(t,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,r,n,i,a,o){return this.set(1,n,a,0,t,1,o,0,r,i,1,0,0,0,0,1),this}compose(t,r,n){const i=this.elements,a=r._x,o=r._y,s=r._z,h=r._w,l=a+a,c=o+o,d=s+s,p=a*l,m=a*c,g=a*d,y=o*c,b=o*d,w=s*d,M=h*l,_=h*c,x=h*d,A=n.x,E=n.y,B=n.z;return i[0]=(1-(y+w))*A,i[1]=(m+x)*A,i[2]=(g-_)*A,i[3]=0,i[4]=(m-x)*E,i[5]=(1-(p+w))*E,i[6]=(b+M)*E,i[7]=0,i[8]=(g+_)*B,i[9]=(b-M)*B,i[10]=(1-(p+y))*B,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,r,n){const i=this.elements;let a=Bn.set(i[0],i[1],i[2]).length();const o=Bn.set(i[4],i[5],i[6]).length(),s=Bn.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),t.x=i[12],t.y=i[13],t.z=i[14],Cn.copy(this);const h=1/a,l=1/o,c=1/s;return Cn.elements[0]*=h,Cn.elements[1]*=h,Cn.elements[2]*=h,Cn.elements[4]*=l,Cn.elements[5]*=l,Cn.elements[6]*=l,Cn.elements[8]*=c,Cn.elements[9]*=c,Cn.elements[10]*=c,r.setFromRotationMatrix(Cn),n.x=a,n.y=o,n.z=s,this}makePerspective(t,r,n,i,a,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,h=2*a/(r-t),l=2*a/(n-i),c=(r+t)/(r-t),d=(n+i)/(n-i),p=-(o+a)/(o-a),m=-2*o*a/(o-a);return s[0]=h,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=p,s[14]=m,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,r,n,i,a,o){const s=this.elements,h=1/(r-t),l=1/(n-i),c=1/(o-a),d=(r+t)*h,p=(n+i)*l,m=(o+a)*c;return s[0]=2*h,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-p,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-m,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){const r=this.elements,n=t.elements;for(let t=0;t<16;t++)if(r[t]!==n[t])return!1;return!0}fromArray(t,r=0){for(let n=0;n<16;n++)this.elements[n]=t[n+r];return this}toArray(t=[],r=0){const n=this.elements;return t[r]=n[0],t[r+1]=n[1],t[r+2]=n[2],t[r+3]=n[3],t[r+4]=n[4],t[r+5]=n[5],t[r+6]=n[6],t[r+7]=n[7],t[r+8]=n[8],t[r+9]=n[9],t[r+10]=n[10],t[r+11]=n[11],t[r+12]=n[12],t[r+13]=n[13],t[r+14]=n[14],t[r+15]=n[15],t}}Matrix4.prototype.isMatrix4=!0;const Bn=new Vector3,Cn=new Matrix4,Tn=new Vector3(0,0,0),Dn=new Vector3(1,1,1),Pn=new Vector3,Rn=new Vector3,Ln=new Vector3,Nn=new Matrix4,Fn=new Quaternion;class Euler{constructor(t=0,r=0,n=0,i=Euler.DefaultOrder){this._x=t,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,r,n,i=this._order){return this._x=t,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,r=this._order,n=!0){const i=t.elements,a=i[0],o=i[4],s=i[8],h=i[1],l=i[5],c=i[9],d=i[2],p=i[6],m=i[10];switch(r){case"XYZ":this._y=Math.asin(clamp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,m),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,a));break;case"ZYX":this._y=Math.asin(-clamp(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(h,a)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(clamp(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,m));break;case"XZY":this._z=Math.asin(-clamp(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,r,n){return Nn.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Nn,r,n)}setFromVector3(t,r=this._order){return this.set(t.x,t.y,t.z,r)}reorder(t){return Fn.setFromEuler(this),this.setFromQuaternion(Fn,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],r=0){return t[r]=this._x,t[r+1]=this._y,t[r+2]=this._z,t[r+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0,Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Layers{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}}let In=0;const kn=new Vector3,On=new Quaternion,Un=new Matrix4,zn=new Vector3,Vn=new Vector3,jn=new Vector3,Hn=new Quaternion,Gn=new Vector3(1,0,0),Wn=new Vector3(0,1,0),qn=new Vector3(0,0,1),Kn={type:"added"},Qn={type:"removed"};class StateMachine{constructor(t,r){this.object=r,this.list=t.list||[],this.handle=t.handle||{}}set current_state(t){let r=this._current_state;t!==r&&this.list.indexOf(t)>-1&&(this.leave_state(r,t,this.list[r]),this._current_state=t,this.enter_state(t,r,this.list[t]))}get current_state(){return void 0===this._current_state&&(this.current_state=this.list[0]),this._current_state}enter_state(t,r,n){this.handle&&"function"==typeof this.handle.enter_state&&this.handle.enter_state(t,r,n),this.object.enter_state(t,r,n)}leave_state(t,r){this.handle&&"function"==typeof this.handle.leave_state&&this.handle.leave_state(t,r),this.object.leave_state(t,r)}update_state(t){this.handle&&"function"==typeof this.handle.update_state&&this.handle.update_state(t),this.object.update_state(t)}}class Task{constructor(t){this.ticks=0;for(let r in t)this[r]=t[r]}get progress(){return this.end_date<0?1:(+new Date-this.start_date)/(this.end_date-this.start_date)}start(){this.start_date=+new Date,"number"==typeof this.task_duration&&this.task_duration>0?this.end_date=this.start_date+1e3*this.task_duration:this.end_date=-1,this.finished=!1,this.handle.start&&this.handle.start(this)}update(){this.ticks++,this.handle.update&&this.handle.update(this),this.progress>=1&&this.end()}end(){this.finished=!0,this.handle.end&&this.handle.end(this)}}class TaskScheduler{constructor(t){this.queues=t||[],this._last=[],this._first=[],this.active_tasks={}}on_tick(){let t=!1,r=!1,n=!1;{let r=this._first,n="_first";if(void 0!==this.active_tasks[n]&&(this.active_tasks[n].finished?this.active_tasks[n]=void 0:(t=!0,this.active_tasks[n].update())),void 0===this.active_tasks[n]&&r.length>0){let i=r.shift();this.active_tasks[n]=i,i.start(),i.update(),t=!0}}if(t||(this.queues.forEach(((t,n)=>{if(void 0!==this.active_tasks[n]&&(this.active_tasks[n].finished?this.active_tasks[n]=void 0:(r=!0,this.active_tasks[n].update())),void 0===this.active_tasks[n]&&t.length>0){let i=t.shift();this.active_tasks[n]=i,i.start(),i.update(),r=!0}})),this.queues=this.queues.filter((t=>t.length>0))),!t&&!r){let t=this._last,r="_last";if(void 0!==this.active_tasks[r]&&(this.active_tasks[r].finished?this.active_tasks[r]=void 0:(n=!0,this.active_tasks[r].update())),void 0===this.active_tasks[r]&&t.length>0){let i=t.shift();this.active_tasks[r]=i,n=!0,i.start(),i.update()}}}add(t,r){let n=[];if("_first"===t?n=this._first:"_last"===t?n=this._last:(this.queues[t]=this.queues[t]||[],n=this.queues[t]),(r=new Task(r)).id)for(let t=0;t<n.length;t++)n[t].id===r.id&&n.splice(t,1);n.push(new Task(r))}}class Object3D extends EventDispatcher{constructor(t){super(),Object.defineProperty(this,"id",{value:In++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.components=[],this.refs={},this.states=new StateMachine(t&&t.states?t.states:{},this),this.tasks=new TaskScheduler(t&&t.tasks?t.tasks:[]),this.up=Object3D.DefaultUp.clone();const r=new Vector3,n=new Euler,i=new Quaternion,a=new Vector3(1,1,1);n._onChange((function onRotationChange(){i.setFromEuler(n,!1)})),i._onChange((function onQuaternionChange(){n.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={},"function"==typeof Object3D.patch_props&&Object3D.patch_props(this),void 0!==t&&("object"==typeof t.components&&this.setup_components(t.components),"function"==typeof t.on_tick&&(this.on_tick=t.on_tick),"object"==typeof t.position&&(Array.isArray(t.position)?this.position.set(t.position[0],t.position[1],t.position[2]):this.position.set(t.position.x,t.position.y,t.position.z)),"object"==typeof t.rotation&&(Array.isArray(t.position)?this.rotation.set(t.rotation[0],t.rotation[1],t.rotation[2]):this.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z)),"object"==typeof t.scale&&(Array.isArray(t.position)?this.scale.set(t.scale[0],t.scale[1],t.scale[2]):this.scale.set(t.scale.x,t.scale.y,t.scale.z)),"object"==typeof t.parent&&null!==t.parent&&t.parent.add(this),Array.isArray(t.topics)&&t.topics.forEach(event_name,this.listen(event_name)))}enter_state(t,r,n){}leave_state(t,r){}update_state(t){}get_components(t){let r=[];return this.components.forEach((n=>{n.component_name===t&&r.push(n)})),r}get_component(t){return this.get_components(t)[0]}find_component_of_type(t){let r=null;if(Object3D.components_base[t])for(let n in Object3D.components_base[t]){r=Object3D.components_base[t][n];break}return r}broadcast(t,r){if(console.log(t,Object3D.broadcasting),Object3D.broadcasting[t])for(let n in Object3D.broadcasting[t]){let i=`handle_${t}`;"function"==typeof Object3D.broadcasting[t][n]&&Object3D.broadcasting[t][n](r),Object3D.broadcasting[t][n].components.forEach((t=>{"function"==typeof t[i]&&t[i](r)}))}}listen(t){Object3D.broadcasting[t]=Object3D.broadcasting[t]||{},Object3D.broadcasting[t][this.uuid]=this}find_components_of_type(t,r){let n=0,i=[];if(Object3D.components_base[t])for(let a in Object3D.components_base[t])if((void 0===r||n<r)&&(i.push(Object3D.components_base[t][a]),n++,n>=r))break;return i}setup_components(t){void 0!==t&&t.forEach((t=>{this.add_component(t)}))}add_component(t){let r,n=t.name,i=t.params,a="boolean"!=typeof t.enabled||t.enabled,o="string"==typeof t.ref?t.ref:void 0,s=Object3D.components_lib[n];"function"==typeof s?r=new s(i):"object"===s&&(r=Object.assign({},s)),void 0!==r?(r.name=n,r.apply_params(),r.object=this,this.components.push(r),r._enabled=a,"number"==typeof t.tick_skip&&(r.tick_skip=t.tick_skip),void 0!==o?this.refs[o]=r:(o=n,void 0===this.refs[o]&&(this.refs[o]=r)),r.on_created(),r.enabled&&r.on_enabled(),Object3D.components_base[n]=Object3D.components_base[n]||{},Object3D.components_base[n][r.id]=r):console.log(`failed to create component: ${n}`,s)}update(t){for(let r in t)this[r]=t[r];this.on_update()}on_update(){}tick(t){this.visible&&(this.on_tick(),this.components.forEach((r=>{r.enabled&&(r.tick%(r.tick_skip*Object3D.global_tick_skip)==0&&r.on_tick(t),r.tick++)})),this.tasks.on_tick(),this.children.forEach((r=>r.tick(t))))}on_tick(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,r){this.quaternion.setFromAxisAngle(t,r)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,r){return On.setFromAxisAngle(t,r),this.quaternion.multiply(On),this}rotateOnWorldAxis(t,r){return On.setFromAxisAngle(t,r),this.quaternion.premultiply(On),this}rotateX(t){return this.rotateOnAxis(Gn,t)}rotateY(t){return this.rotateOnAxis(Wn,t)}rotateZ(t){return this.rotateOnAxis(qn,t)}translateOnAxis(t,r){return kn.copy(t).applyQuaternion(this.quaternion),this.position.add(kn.multiplyScalar(r)),this}translateX(t){return this.translateOnAxis(Gn,t)}translateY(t){return this.translateOnAxis(Wn,t)}translateZ(t){return this.translateOnAxis(qn,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Un.copy(this.matrixWorld).invert())}lookAt(t,r,n){t.isVector3?zn.copy(t):zn.set(t,r,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Vn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Un.lookAt(Vn,zn,this.up):Un.lookAt(zn,Vn,this.up),this.quaternion.setFromRotationMatrix(Un),i&&(Un.extractRotation(i.matrixWorld),On.setFromRotationMatrix(Un),this.quaternion.premultiply(On.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Kn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const r=this.children.indexOf(t);return-1!==r&&(t.parent=null,this.children.splice(r,1),t.dispatchEvent(Qn)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const r=this.children[t];r.parent=null,r.dispatchEvent(Qn)}return this.children.length=0,this.components.forEach((t=>{delete Object3D.components_base[t.name][t.id],this.components=[]})),this}attach(t){return this.updateWorldMatrix(!0,!1),Un.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Un.multiply(t.parent.matrixWorld)),t.applyMatrix4(Un),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,r){if(this[t]===r)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,r);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vn,t,jn),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Vn,Hn,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(t){t(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(t)}traverseAncestors(t){const r=this.parent;null!==r&&(t(r),r.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].updateMatrixWorld(t)}updateWorldMatrix(t,r){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===r){const t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].updateWorldMatrix(!1,!0)}}toJSON(t){const r=void 0===t||"string"==typeof t,n={};r&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function serialize(r,n){return void 0===r[n.uuid]&&(r[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=serialize(t.geometries,this.geometry);const r=this.geometry.parameters;if(void 0!==r&&void 0!==r.shapes){const n=r.shapes;if(Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const i=n[r];serialize(t.shapes,i)}else serialize(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const r=[];for(let n=0,i=this.material.length;n<i;n++)r.push(serialize(t.materials,this.material[n]));i.material=r}else i.material=serialize(t.materials,this.material);if(this.children.length>0){i.children=[];for(let r=0;r<this.children.length;r++)i.children.push(this.children[r].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let r=0;r<this.animations.length;r++){const n=this.animations[r];i.animations.push(serialize(t.animations,n))}}if(r){const r=extractFromCache(t.geometries),i=extractFromCache(t.materials),a=extractFromCache(t.textures),o=extractFromCache(t.images),s=extractFromCache(t.shapes),h=extractFromCache(t.skeletons),l=extractFromCache(t.animations);r.length>0&&(n.geometries=r),i.length>0&&(n.materials=i),a.length>0&&(n.textures=a),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),h.length>0&&(n.skeletons=h),l.length>0&&(n.animations=l)}return n.object=i,n;function extractFromCache(t){const r=[];for(const n in t){const i=t[n];delete i.metadata,r.push(i)}return r}}clone(t){return(new this.constructor).copy(this,t)}copy(t,r=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===r)for(let r=0;r<t.children.length;r++){const n=t.children[r];this.add(n.clone())}return this}}Object3D.broadcasting={},Object3D.components_base={},Object3D.global_tick_skip=1,Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.components_lib={},Object3D.prototype.isObject3D=!0,Object3D.register_component=function(t){Object3D.components_lib[t.name]=t};const Xn=new Vector3,Yn=new Vector3,Jn=new Vector3,Zn=new Vector3,$n=new Vector3,ei=new Vector3,ti=new Vector3,ri=new Vector3,ni=new Vector3,ii=new Vector3;class Triangle{constructor(t=new Vector3,r=new Vector3,n=new Vector3){this.a=t,this.b=r,this.c=n}static getNormal(t,r,n,i){i.subVectors(n,r),Xn.subVectors(t,r),i.cross(Xn);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(t,r,n,i,a){Xn.subVectors(i,r),Yn.subVectors(n,r),Jn.subVectors(t,r);const o=Xn.dot(Xn),s=Xn.dot(Yn),h=Xn.dot(Jn),l=Yn.dot(Yn),c=Yn.dot(Jn),d=o*l-s*s;if(0===d)return a.set(-2,-1,-1);const p=1/d,m=(l*h-s*c)*p,g=(o*c-s*h)*p;return a.set(1-m-g,g,m)}static containsPoint(t,r,n,i){return this.getBarycoord(t,r,n,i,Zn),Zn.x>=0&&Zn.y>=0&&Zn.x+Zn.y<=1}static getUV(t,r,n,i,a,o,s,h){return this.getBarycoord(t,r,n,i,Zn),h.set(0,0),h.addScaledVector(a,Zn.x),h.addScaledVector(o,Zn.y),h.addScaledVector(s,Zn.z),h}static isFrontFacing(t,r,n,i){return Xn.subVectors(n,r),Yn.subVectors(t,r),Xn.cross(Yn).dot(i)<0}set(t,r,n){return this.a.copy(t),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(t,r,n,i){return this.a.copy(t[r]),this.b.copy(t[n]),this.c.copy(t[i]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xn.subVectors(this.c,this.b),Yn.subVectors(this.a,this.b),.5*Xn.cross(Yn).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Triangle.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,r){return Triangle.getBarycoord(t,this.a,this.b,this.c,r)}getUV(t,r,n,i,a){return Triangle.getUV(t,this.a,this.b,this.c,r,n,i,a)}containsPoint(t){return Triangle.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Triangle.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,r){const n=this.a,i=this.b,a=this.c;let o,s;$n.subVectors(i,n),ei.subVectors(a,n),ri.subVectors(t,n);const h=$n.dot(ri),l=ei.dot(ri);if(h<=0&&l<=0)return r.copy(n);ni.subVectors(t,i);const c=$n.dot(ni),d=ei.dot(ni);if(c>=0&&d<=c)return r.copy(i);const p=h*d-c*l;if(p<=0&&h>=0&&c<=0)return o=h/(h-c),r.copy(n).addScaledVector($n,o);ii.subVectors(t,a);const m=$n.dot(ii),g=ei.dot(ii);if(g>=0&&m<=g)return r.copy(a);const y=m*l-h*g;if(y<=0&&l>=0&&g<=0)return s=l/(l-g),r.copy(n).addScaledVector(ei,s);const b=c*g-m*d;if(b<=0&&d-c>=0&&m-g>=0)return ti.subVectors(a,i),s=(d-c)/(d-c+(m-g)),r.copy(i).addScaledVector(ti,s);const w=1/(b+y+p);return o=y*w,s=p*w,r.copy(n).addScaledVector($n,o).addScaledVector(ei,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let ai=0;class Material extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:ai++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=A,this.side=y,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=z,this.blendDst=V,this.blendEquation=D,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Nr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wr,this.stencilZFail=wr,this.stencilZPass=wr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const r in t){const n=t[r];if(void 0===n){console.warn("THREE.Material: '"+r+"' parameter is undefined.");continue}if("shading"===r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===M;continue}const i=this[r];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):("uniforms"===r&&Material.patch_uniforms(n,this),this[r]=n):console.warn("THREE."+this.type+": '"+r+"' is not a property of this material.")}}toJSON(t){const r=void 0===t||"string"==typeof t;r&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(t){const r=[];for(const n in t){const i=t[n];delete i.metadata,r.push(i)}return r}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==A&&(n.blending=this.blending),this.side!==y&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),r){const r=extractFromCache(t.textures),i=extractFromCache(t.images);r.length>0&&(n.textures=r),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const r=t.clippingPlanes;let n=null;if(null!==r){const t=r.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=r[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}Material.patch_uniforms=function(t){console.log("patching uniforms")},Material.prototype.isMaterial=!0;const oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},si={h:0,s:0,l:0},ui={h:0,s:0,l:0};function hue2rgb(t,r,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(r-t)*n:n<.5?r:n<2/3?t+6*(r-t)*(2/3-n):t}function SRGBToLinear(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function LinearToSRGB(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class Color{constructor(t,r,n){return void 0===r&&void 0===n?this.set(t):this.setRGB(t,r,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return"string"==typeof t&&(t=parseInt(t.replace("#",""),16)),t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,r,n){return this.r=t,this.g=r,this.b=n,this}setHSL(t,r,n){if(t=euclideanModulo(t,1),r=clamp(r,0,1),n=clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=hue2rgb(a,i,t+1/3),this.g=hue2rgb(a,i,t),this.b=hue2rgb(a,i,t-1/3)}return this}setStyle(t){function handleAlpha(r){void 0!==r&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const n=r[1],i=r[2];switch(n){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,handleAlpha(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,handleAlpha(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const r=parseFloat(t[1])/360,n=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100;return handleAlpha(t[4]),this.setHSL(r,n,i)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],n=t.length;if(3===n)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const r=oi[t.toLowerCase()];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,r=2){return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this}copyLinearToGamma(t,r=2){const n=r>0?1/r:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=SRGBToLinear(t.r),this.g=SRGBToLinear(t.g),this.b=SRGBToLinear(t.b),this}copyLinearToSRGB(t){return this.r=LinearToSRGB(t.r),this.g=LinearToSRGB(t.g),this.b=LinearToSRGB(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const r=this.r,n=this.g,i=this.b,a=Math.max(r,n,i),o=Math.min(r,n,i);let s,h;const l=(o+a)/2;if(o===a)s=0,h=0;else{const t=a-o;switch(h=l<=.5?t/(a+o):t/(2-a-o),a){case r:s=(n-i)/t+(n<i?6:0);break;case n:s=(i-r)/t+2;break;case i:s=(r-n)/t+4}s/=6}return t.h=s,t.s=h,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,r,n){return this.getHSL(si),si.h+=t,si.s+=r,si.l+=n,this.setHSL(si.h,si.s,si.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,n){return this.r=t.r+(r.r-t.r)*n,this.g=t.g+(r.g-t.g)*n,this.b=t.b+(r.b-t.b)*n,this}lerpHSL(t,r){this.getHSL(si),t.getHSL(ui);const n=lerp(si.h,ui.h,r),i=lerp(si.s,ui.s,r),a=lerp(si.l,ui.l,r);return this.setHSL(n,i,a),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=oi,Color.prototype.isColor=!0,Color.prototype.r=1,Color.prototype.g=1,Color.prototype.b=1;class MeshBasicMaterial extends Material{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0;const hi=new Vector3,li=new Vector2;class BufferAttribute{constructor(t,r,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=r,this.count=void 0!==t?t.length/r:0,this.normalized=!0===n,this.usage=Fr,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,r,n){t*=this.itemSize,n*=r.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[t+i]=r.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const r=this.array;let n=0;for(let i=0,a=t.length;i<a;i++){let a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new Color),r[n++]=a.r,r[n++]=a.g,r[n++]=a.b}return this}copyVector2sArray(t){const r=this.array;let n=0;for(let i=0,a=t.length;i<a;i++){let a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Vector2),r[n++]=a.x,r[n++]=a.y}return this}copyVector3sArray(t){const r=this.array;let n=0;for(let i=0,a=t.length;i<a;i++){let a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new Vector3),r[n++]=a.x,r[n++]=a.y,r[n++]=a.z}return this}copyVector4sArray(t){const r=this.array;let n=0;for(let i=0,a=t.length;i<a;i++){let a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Vector4),r[n++]=a.x,r[n++]=a.y,r[n++]=a.z,r[n++]=a.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let r=0,n=this.count;r<n;r++)li.fromBufferAttribute(this,r),li.applyMatrix3(t),this.setXY(r,li.x,li.y);else if(3===this.itemSize)for(let r=0,n=this.count;r<n;r++)hi.fromBufferAttribute(this,r),hi.applyMatrix3(t),this.setXYZ(r,hi.x,hi.y,hi.z);return this}applyMatrix4(t){for(let r=0,n=this.count;r<n;r++)hi.x=this.getX(r),hi.y=this.getY(r),hi.z=this.getZ(r),hi.applyMatrix4(t),this.setXYZ(r,hi.x,hi.y,hi.z);return this}applyNormalMatrix(t){for(let r=0,n=this.count;r<n;r++)hi.x=this.getX(r),hi.y=this.getY(r),hi.z=this.getZ(r),hi.applyNormalMatrix(t),this.setXYZ(r,hi.x,hi.y,hi.z);return this}transformDirection(t){for(let r=0,n=this.count;r<n;r++)hi.x=this.getX(r),hi.y=this.getY(r),hi.z=this.getZ(r),hi.transformDirection(t),this.setXYZ(r,hi.x,hi.y,hi.z);return this}set(t,r=0){return this.array.set(t,r),this}getX(t){return this.array[t*this.itemSize]}setX(t,r){return this.array[t*this.itemSize]=r,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,r){return this.array[t*this.itemSize+1]=r,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,r){return this.array[t*this.itemSize+2]=r,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,r){return this.array[t*this.itemSize+3]=r,this}setXY(t,r,n){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this}setXYZ(t,r,n,i){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,r,n,i,a){return t*=this.itemSize,this.array[t+0]=r,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==Fr&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}BufferAttribute.prototype.isBufferAttribute=!0;class Int8BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Int8Array(t),r,n)}}class Uint8BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Uint8Array(t),r,n)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Uint8ClampedArray(t),r,n)}}class Int16BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Int16Array(t),r,n)}}class Uint16BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Uint16Array(t),r,n)}}class Int32BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Int32Array(t),r,n)}}class Uint32BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Uint32Array(t),r,n)}}class Float16BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Uint16Array(t),r,n)}}Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;class Float32BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Float32Array(t),r,n)}}class Float64BufferAttribute extends BufferAttribute{constructor(t,r,n){super(new Float64Array(t),r,n)}}function arrayMax(t){if(0===t.length)return-1/0;let r=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>r&&(r=t[n]);return r}const ci={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function getTypedArray(t,r){return new ci[t](r)}let di=0;const fi=new Matrix4,pi=new Object3D,mi=new Vector3,gi=new Box3,vi=new Box3,yi=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),Object.defineProperty(this,"id",{value:di++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}set_attributes_needs_update(t){for(let t in this.attributes){this.attributes[t].needsUpdate=!0}}attr(t){return this.attributes[t]}count_triangles(t,r){return t*r+1}set_attrs(t,r){for(let n in r){let i=r[n];switch(this.attr(n).itemSize){case 3:this.attr(n).setXYZ(t,...i);break;case 2:this.attr(n).setXY(t,...i);break;case 1:this.attr(n).setX(t,...i)}}}add_attribute(t,r,n){let i=3*r*n;this.setAttribute(t,new BufferAttribute(new Float32Array(i),n))}iterate(t,r){for(let n=0,i=0;n<this.attr(t).array.length;n+=this.attr(t).itemSize)r(i,this.attr(t).array[n],this.attr(t).array[n+1],this.attr(t).array[n+2]),i++}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(arrayMax(t)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,r){return this.attributes[t]=r,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,r,n=0){this.groups.push({start:t,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,r){this.drawRange.start=t,this.drawRange.count=r}applyMatrix4(t){const r=this.attributes.position;void 0!==r&&(r.applyMatrix4(t),r.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const r=(new Matrix3).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return fi.makeRotationFromQuaternion(t),this.applyMatrix4(fi),this}rotateX(t){return fi.makeRotationX(t),this.applyMatrix4(fi),this}rotateY(t){return fi.makeRotationY(t),this.applyMatrix4(fi),this}rotateZ(t){return fi.makeRotationZ(t),this.applyMatrix4(fi),this}translate(t,r,n){return fi.makeTranslation(t,r,n),this.applyMatrix4(fi),this}scale(t,r,n){return fi.makeScale(t,r,n),this.applyMatrix4(fi),this}lookAt(t){return pi.lookAt(t),pi.updateMatrix(),this.applyMatrix4(pi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mi).negate(),this.translate(mi.x,mi.y,mi.z),this}setFromPoints(t){const r=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];r.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Float32BufferAttribute(r,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let t=0,n=r.length;t<n;t++){const n=r[t];gi.setFromBufferAttribute(n),this.morphTargetsRelative?(yi.addVectors(this.boundingBox.min,gi.min),this.boundingBox.expandByPoint(yi),yi.addVectors(this.boundingBox.max,gi.max),this.boundingBox.expandByPoint(yi)):(this.boundingBox.expandByPoint(gi.min),this.boundingBox.expandByPoint(gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Vector3,1/0);if(t){const n=this.boundingSphere.center;if(gi.setFromBufferAttribute(t),r)for(let t=0,n=r.length;t<n;t++){const n=r[t];vi.setFromBufferAttribute(n),this.morphTargetsRelative?(yi.addVectors(gi.min,vi.min),gi.expandByPoint(yi),yi.addVectors(gi.max,vi.max),gi.expandByPoint(yi)):(gi.expandByPoint(vi.min),gi.expandByPoint(vi.max))}gi.getCenter(n);let i=0;for(let r=0,a=t.count;r<a;r++)yi.fromBufferAttribute(t,r),i=Math.max(i,n.distanceToSquared(yi));if(r)for(let a=0,o=r.length;a<o;a++){const o=r[a],s=this.morphTargetsRelative;for(let r=0,a=o.count;r<a;r++)yi.fromBufferAttribute(o,r),s&&(mi.fromBufferAttribute(t,r),yi.add(mi)),i=Math.max(i,n.distanceToSquared(yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const t=this.index,r=this.attributes;if(null===t||void 0===r.position||void 0===r.normal||void 0===r.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=r.position.array,a=r.normal.array,o=r.uv.array,s=i.length/3;void 0===r.tangent&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*s),4));const h=r.tangent.array,l=[],c=[];for(let t=0;t<s;t++)l[t]=new Vector3,c[t]=new Vector3;const d=new Vector3,p=new Vector3,m=new Vector3,g=new Vector2,y=new Vector2,b=new Vector2,w=new Vector3,M=new Vector3;function handleTriangle(t,r,n){d.fromArray(i,3*t),p.fromArray(i,3*r),m.fromArray(i,3*n),g.fromArray(o,2*t),y.fromArray(o,2*r),b.fromArray(o,2*n),p.sub(d),m.sub(d),y.sub(g),b.sub(g);const a=1/(y.x*b.y-b.x*y.y);isFinite(a)&&(w.copy(p).multiplyScalar(b.y).addScaledVector(m,-y.y).multiplyScalar(a),M.copy(m).multiplyScalar(y.x).addScaledVector(p,-b.x).multiplyScalar(a),l[t].add(w),l[r].add(w),l[n].add(w),c[t].add(M),c[r].add(M),c[n].add(M))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let t=0,r=_.length;t<r;++t){const r=_[t],i=r.start;for(let t=i,a=i+r.count;t<a;t+=3)handleTriangle(n[t+0],n[t+1],n[t+2])}const x=new Vector3,A=new Vector3,E=new Vector3,B=new Vector3;function handleVertex(t){E.fromArray(a,3*t),B.copy(E);const r=l[t];x.copy(r),x.sub(E.multiplyScalar(E.dot(r))).normalize(),A.crossVectors(B,r);const n=A.dot(c[t])<0?-1:1;h[4*t]=x.x,h[4*t+1]=x.y,h[4*t+2]=x.z,h[4*t+3]=n}for(let t=0,r=_.length;t<r;++t){const r=_[t],i=r.start;for(let t=i,a=i+r.count;t<a;t+=3)handleVertex(n[t+0]),handleVertex(n[t+1]),handleVertex(n[t+2])}}computeVertexNormals(){const t=this.index,r=this.getAttribute("position");if(void 0!==r){let n=this.getAttribute("normal");if(void 0===n)n=new BufferAttribute(new Float32Array(3*r.count),3),this.setAttribute("normal",n);else for(let t=0,r=n.count;t<r;t++)n.setXYZ(t,0,0,0);const i=new Vector3,a=new Vector3,o=new Vector3,s=new Vector3,h=new Vector3,l=new Vector3,c=new Vector3,d=new Vector3;if(t)for(let p=0,m=t.count;p<m;p+=3){const m=t.getX(p+0),g=t.getX(p+1),y=t.getX(p+2);i.fromBufferAttribute(r,m),a.fromBufferAttribute(r,g),o.fromBufferAttribute(r,y),c.subVectors(o,a),d.subVectors(i,a),c.cross(d),s.fromBufferAttribute(n,m),h.fromBufferAttribute(n,g),l.fromBufferAttribute(n,y),s.add(c),h.add(c),l.add(c),n.setXYZ(m,s.x,s.y,s.z),n.setXYZ(g,h.x,h.y,h.z),n.setXYZ(y,l.x,l.y,l.z)}else for(let t=0,s=r.count;t<s;t+=3)i.fromBufferAttribute(r,t+0),a.fromBufferAttribute(r,t+1),o.fromBufferAttribute(r,t+2),c.subVectors(o,a),d.subVectors(i,a),c.cross(d),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,r){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===r&&(r=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const a=n[i].array,o=t.attributes[i],s=o.array,h=o.itemSize*r,l=Math.min(s.length,a.length-h);for(let t=0,r=h;t<l;t++,r++)a[r]=s[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let r=0,n=t.count;r<n;r++)yi.fromBufferAttribute(t,r),yi.normalize(),t.setXYZ(r,yi.x,yi.y,yi.z)}toNonIndexed(){function convertBufferAttribute(t,r){const n=t.array,i=t.itemSize,a=t.normalized,o=new n.constructor(r.length*i);let s=0,h=0;for(let a=0,l=r.length;a<l;a++){s=t.isInterleavedBufferAttribute?r[a]*t.data.stride+t.offset:r[a]*i;for(let t=0;t<i;t++)o[h++]=n[s++]}return new BufferAttribute(o,i,a)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,r=this.index.array,n=this.attributes;for(const i in n){const a=convertBufferAttribute(n[i],r);t.setAttribute(i,a)}const i=this.morphAttributes;for(const n in i){const a=[],o=i[n];for(let t=0,n=o.length;t<n;t++){const n=convertBufferAttribute(o[t],r);a.push(n)}t.morphAttributes[n]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let r=0,n=a.length;r<n;r++){const n=a[r];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const r=this.parameters;for(const n in r)void 0!==r[n]&&(t[n]=r[n]);return t}t.data={attributes:{}};const r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const r in n){const i=n[r];t.data.attributes[r]=i.toJSON(t.data)}const i={};let a=!1;for(const r in this.morphAttributes){const n=this.morphAttributes[r],o=[];for(let r=0,i=n.length;r<i;r++){const i=n[r];o.push(i.toJSON(t.data))}o.length>0&&(i[r]=o,a=!0)}a&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new BufferGeometry).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(r));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(r))}const a=t.morphAttributes;for(const t in a){const n=[],i=a[t];for(let t=0,a=i.length;t<a;t++)n.push(i[t].clone(r));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,r=o.length;t<r;t++){const r=o[t];this.addGroup(r.start,r.count,r.materialIndex)}const s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());const h=t.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}BufferGeometry.prototype.isBufferGeometry=!0;const bi=new Matrix4,wi=new Ray,Mi=new Sphere,_i=new Vector3,xi=new Vector3,Ai=new Vector3,Si=new Vector3,Ei=new Vector3,Bi=new Vector3,Ci=new Vector3,Ti=new Vector3,Di=new Vector3,Pi=new Vector2,Ri=new Vector2,Li=new Vector2,Ni=new Vector3,Fi=new Vector3;class Mesh extends Object3D{constructor(t,r){void 0!==t&&(t.isGeometry||t.isBufferGeometry)&&(t={geometry:t,material:r}),super(t),this.type="Mesh",void 0!==t&&(this.geometry=t.geometry,this.material=t.material,this.updateMorphTargets())}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t&&t.isBufferGeometry){const r=t.morphAttributes,n=Object.keys(r);if(n.length>0){const t=r[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++){const n=t[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}else{const r=t.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,r){const n=this.geometry,i=this.material,a=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Mi.copy(n.boundingSphere),Mi.applyMatrix4(a),!1===t.ray.intersectsSphere(Mi))return;if(bi.copy(a).invert(),wi.copy(t.ray).applyMatrix4(bi),null!==n.boundingBox&&!1===wi.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const a=n.index,s=n.attributes.position,h=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,d=n.attributes.uv2,p=n.groups,m=n.drawRange;if(null!==a)if(Array.isArray(i))for(let n=0,g=p.length;n<g;n++){const g=p[n],y=i[g.materialIndex];for(let n=Math.max(g.start,m.start),i=Math.min(g.start+g.count,m.start+m.count);n<i;n+=3){const i=a.getX(n),p=a.getX(n+1),m=a.getX(n+2);o=checkBufferGeometryIntersection(this,y,t,wi,s,h,l,c,d,i,p,m),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=g.materialIndex,r.push(o))}}else{for(let n=Math.max(0,m.start),p=Math.min(a.count,m.start+m.count);n<p;n+=3){const p=a.getX(n),m=a.getX(n+1),g=a.getX(n+2);o=checkBufferGeometryIntersection(this,i,t,wi,s,h,l,c,d,p,m,g),o&&(o.faceIndex=Math.floor(n/3),r.push(o))}}else if(void 0!==s)if(Array.isArray(i))for(let n=0,a=p.length;n<a;n++){const a=p[n],g=i[a.materialIndex];for(let n=Math.max(a.start,m.start),i=Math.min(a.start+a.count,m.start+m.count);n<i;n+=3){o=checkBufferGeometryIntersection(this,g,t,wi,s,h,l,c,d,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=a.materialIndex,r.push(o))}}else{for(let n=Math.max(0,m.start),a=Math.min(s.count,m.start+m.count);n<a;n+=3){o=checkBufferGeometryIntersection(this,i,t,wi,s,h,l,c,d,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),r.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function checkBufferGeometryIntersection(t,r,n,i,a,o,s,h,l,c,d,p){_i.fromBufferAttribute(a,c),xi.fromBufferAttribute(a,d),Ai.fromBufferAttribute(a,p);const m=t.morphTargetInfluences;if(o&&m){Ci.set(0,0,0),Ti.set(0,0,0),Di.set(0,0,0);for(let t=0,r=o.length;t<r;t++){const r=m[t],n=o[t];0!==r&&(Si.fromBufferAttribute(n,c),Ei.fromBufferAttribute(n,d),Bi.fromBufferAttribute(n,p),s?(Ci.addScaledVector(Si,r),Ti.addScaledVector(Ei,r),Di.addScaledVector(Bi,r)):(Ci.addScaledVector(Si.sub(_i),r),Ti.addScaledVector(Ei.sub(xi),r),Di.addScaledVector(Bi.sub(Ai),r)))}_i.add(Ci),xi.add(Ti),Ai.add(Di)}t.isSkinnedMesh&&(t.boneTransform(c,_i),t.boneTransform(d,xi),t.boneTransform(p,Ai));const g=function checkIntersection(t,r,n,i,a,o,s,h){let l;if(l=r.side===b?i.intersectTriangle(s,o,a,!0,h):i.intersectTriangle(a,o,s,r.side!==w,h),null===l)return null;Fi.copy(h),Fi.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Fi);return c<n.near||c>n.far?null:{distance:c,point:Fi.clone(),object:t}}(t,r,n,i,_i,xi,Ai,Ni);if(g){h&&(Pi.fromBufferAttribute(h,c),Ri.fromBufferAttribute(h,d),Li.fromBufferAttribute(h,p),g.uv=Triangle.getUV(Ni,_i,xi,Ai,Pi,Ri,Li,new Vector2)),l&&(Pi.fromBufferAttribute(l,c),Ri.fromBufferAttribute(l,d),Li.fromBufferAttribute(l,p),g.uv2=Triangle.getUV(Ni,_i,xi,Ai,Pi,Ri,Li,new Vector2));const t={a:c,b:d,c:p,normal:new Vector3,materialIndex:0};Triangle.getNormal(_i,xi,Ai,t.normal),g.face=t}return g}Mesh.prototype.isMesh=!0;class BoxGeometry extends BufferGeometry{constructor(t=1,r=1,n=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:r,depth:n,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const h=[],l=[],c=[],d=[];let p=0,m=0;function buildPlane(t,r,n,i,a,o,g,y,b,w,M){const _=o/b,x=g/w,A=o/2,E=g/2,B=y/2,C=b+1,T=w+1;let D=0,P=0;const L=new Vector3;for(let o=0;o<T;o++){const s=o*x-E;for(let h=0;h<C;h++){const p=h*_-A;L[t]=p*i,L[r]=s*a,L[n]=B,l.push(L.x,L.y,L.z),L[t]=0,L[r]=0,L[n]=y>0?1:-1,c.push(L.x,L.y,L.z),d.push(h/b),d.push(1-o/w),D+=1}}for(let t=0;t<w;t++)for(let r=0;r<b;r++){const n=p+r+C*t,i=p+r+C*(t+1),a=p+(r+1)+C*(t+1),o=p+(r+1)+C*t;h.push(n,i,o),h.push(i,a,o),P+=6}s.addGroup(m,P,M),m+=P,p+=D}buildPlane("z","y","x",-1,-1,n,r,t,o,a,0),buildPlane("z","y","x",1,-1,n,r,-t,o,a,1),buildPlane("x","z","y",1,1,t,n,r,i,o,2),buildPlane("x","z","y",1,-1,t,n,-r,i,o,3),buildPlane("x","y","z",1,-1,t,r,n,i,a,4),buildPlane("x","y","z",-1,-1,t,r,-n,i,a,5),this.setIndex(h),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2))}static fromJSON(t){return new BoxGeometry(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function cloneUniforms(t){const r={};for(const n in t){r[n]={};for(const i in t[n]){const a=t[n][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?r[n][i]=a.clone():Array.isArray(a)?r[n][i]=a.slice():r[n][i]=a}}return r}function mergeUniforms(t){const r={};for(let n=0;n<t.length;n++){const i=cloneUniforms(t[n]);for(const t in i)r[t]=i[t]}return r}const Ii={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=cloneUniforms(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const r=super.toJSON(t);r.glslVersion=this.glslVersion,r.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?r.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?r.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?r.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?r.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?r.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?r.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?r.uniforms[n]={type:"m4",value:i.toArray()}:r.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}ShaderMaterial.prototype.isShaderMaterial=!0;class Camera extends Object3D{constructor(t){super(t),this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4}copy(t,r){return super.copy(t,r),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return t.set(-r[8],-r[9],-r[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,r){super.updateWorldMatrix(t,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Camera.prototype.isCamera=!0;class PerspectiveCamera extends Camera{constructor(t){super(t={fov:50,aspect:1,near:.1,far:2e3,...t}),this.type="PerspectiveCamera",this.fov=t.fov,this.zoom=1,this.near=t.near,this.far=t.far,this.focus=10,this.aspect=t.aspect,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const r=.5*this.getFilmHeight()/t;this.fov=2*Xr*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Qr*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Xr*Math.atan(Math.tan(.5*Qr*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,r,n,i,a,o){this.aspect=t/r,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let r=t*Math.tan(.5*Qr*this.fov)/this.zoom,n=2*r,i=this.aspect*n,a=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,s=o.fullHeight;a+=o.offsetX*i/t,r-=o.offsetY*n/s,i*=o.width/t,n*=o.height/s}const s=this.filmOffset;0!==s&&(a+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,r,r-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,null!==this.view&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}PerspectiveCamera.prototype.isPerspectiveCamera=!0;const ki=90;class CubeCamera extends Object3D{constructor(t,r,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new PerspectiveCamera(ki,1,t,r);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Vector3(1,0,0)),this.add(i);const a=new PerspectiveCamera(ki,1,t,r);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Vector3(-1,0,0)),this.add(a);const o=new PerspectiveCamera(ki,1,t,r);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Vector3(0,1,0)),this.add(o);const s=new PerspectiveCamera(ki,1,t,r);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new Vector3(0,-1,0)),this.add(s);const h=new PerspectiveCamera(ki,1,t,r);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new Vector3(0,0,1)),this.add(h);const l=new PerspectiveCamera(ki,1,t,r);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Vector3(0,0,-1)),this.add(l)}update(t,r){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,a,o,s,h,l]=this.children,c=t.xr.enabled,d=t.getRenderTarget();t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(r,i),t.setRenderTarget(n,1),t.render(r,a),t.setRenderTarget(n,2),t.render(r,o),t.setRenderTarget(n,3),t.render(r,s),t.setRenderTarget(n,4),t.render(r,h),n.texture.generateMipmaps=p,t.setRenderTarget(n,5),t.render(r,l),t.setRenderTarget(d),t.xr.enabled=c}}class CubeTexture extends Texture{constructor(t,r,n,i,a,o,s,h,l,c){super(t=void 0!==t?t:[],r=void 0!==r?r:de,n,i,a,o,s=void 0!==s?s:Ge,h,l,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}CubeTexture.prototype.isCubeTexture=!0;class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(t,r,n){Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=n),super(t,t,r),r=r||{},this.texture=new CubeTexture(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Ee,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,r){this.texture.type=r.type,this.texture.format=We,this.texture.encoding=r.encoding,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new BoxGeometry(5,5,5),a=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:b,blending:x});a.uniforms.tEquirect.value=r;const o=new Mesh(i,a),s=r.minFilter;r.minFilter===Te&&(r.minFilter=Ee);return new CubeCamera(1,10,this).update(t,o),r.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(t,r,n,i){const a=t.getRenderTarget();for(let a=0;a<6;a++)t.setRenderTarget(this,a),t.clear(r,n,i);t.setRenderTarget(a)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;const Oi=new Vector3,Ui=new Vector3,zi=new Matrix3;class Plane{constructor(t=new Vector3(1,0,0),r=0){this.normal=t,this.constant=r}set(t,r){return this.normal.copy(t),this.constant=r,this}setComponents(t,r,n,i){return this.normal.set(t,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,r){return this.normal.copy(t),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(t,r,n){const i=Oi.subVectors(n,r).cross(Ui.subVectors(t,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,r){return r.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,r){const n=t.delta(Oi),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?r.copy(t.start):null;const a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:r.copy(n).multiplyScalar(a).add(t.start)}intersectsLine(t){const r=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return r<0&&n>0||n<0&&r>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,r){const n=r||zi.getNormalMatrix(t),i=this.coplanarPoint(Oi).applyMatrix4(t),a=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Plane.prototype.isPlane=!0;const Vi=new Sphere,ji=new Vector3;class Frustum{constructor(t=new Plane,r=new Plane,n=new Plane,i=new Plane,a=new Plane,o=new Plane){this.planes=[t,r,n,i,a,o]}set(t,r,n,i,a,o){const s=this.planes;return s[0].copy(t),s[1].copy(r),s[2].copy(n),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(t){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const r=this.planes,n=t.elements,i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=n[6],d=n[7],p=n[8],m=n[9],g=n[10],y=n[11],b=n[12],w=n[13],M=n[14],_=n[15];return r[0].setComponents(s-i,d-h,y-p,_-b).normalize(),r[1].setComponents(s+i,d+h,y+p,_+b).normalize(),r[2].setComponents(s+a,d+l,y+m,_+w).normalize(),r[3].setComponents(s-a,d-l,y-m,_-w).normalize(),r[4].setComponents(s-o,d-c,y-g,_-M).normalize(),r[5].setComponents(s+o,d+c,y+g,_+M).normalize(),this}intersectsObject(t){const r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),Vi.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Vi)}intersectsSprite(t){return Vi.center.set(0,0,0),Vi.radius=.7071067811865476,Vi.applyMatrix4(t.matrixWorld),this.intersectsSphere(Vi)}intersectsSphere(t){const r=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(r[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const r=this.planes;for(let n=0;n<6;n++){const i=r[n];if(ji.x=i.normal.x>0?t.max.x:t.min.x,ji.y=i.normal.y>0?t.max.y:t.min.y,ji.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(ji)<0)return!1}return!0}containsPoint(t){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function WebGLAnimation(){let t=null,r=!1,n=null,i=null;function onAnimationFrame(r,a){n(r,a),i=t.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==r&&null!==n&&(i=t.requestAnimationFrame(onAnimationFrame),r=!0)},stop:function(){t.cancelAnimationFrame(i),r=!1},setAnimationLoop:function(t){n=t},setContext:function(r){t=r}}}function WebGLAttributes(t,r){const n=r.isWebGL2,i=new WeakMap;return{get:function get(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function remove(r){r.isInterleavedBufferAttribute&&(r=r.data);const n=i.get(r);n&&(t.deleteBuffer(n.buffer),i.delete(r))},update:function update(r,a){if(r.isGLBufferAttribute){const t=i.get(r);return void((!t||t.version<r.version)&&i.set(r,{buffer:r.buffer,type:r.type,bytesPerElement:r.elementSize,version:r.version}))}r.isInterleavedBufferAttribute&&(r=r.data);const o=i.get(r);void 0===o?i.set(r,function createBuffer(r,i){const a=r.array,o=r.usage,s=t.createBuffer();t.bindBuffer(i,s),t.bufferData(i,a,o),r.onUploadCallback();let h=5126;return a instanceof Float32Array?h=5126:a instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):a instanceof Uint16Array?r.isFloat16BufferAttribute?n?h=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):h=5123:a instanceof Int16Array?h=5122:a instanceof Uint32Array?h=5125:a instanceof Int32Array?h=5124:a instanceof Int8Array?h=5120:(a instanceof Uint8Array||a instanceof Uint8ClampedArray)&&(h=5121),{buffer:s,type:h,bytesPerElement:a.BYTES_PER_ELEMENT,version:r.version}}(r,a)):o.version<r.version&&(!function updateBuffer(r,i,a){const o=i.array,s=i.updateRange;t.bindBuffer(a,r),-1===s.count?t.bufferSubData(a,0,o):(n?t.bufferSubData(a,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(a,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1)}(o.buffer,r,a),o.version=r.version)}}}class PlaneGeometry extends BufferGeometry{constructor(t=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:r,widthSegments:n,heightSegments:i};const a=t/2,o=r/2,s=Math.floor(n),h=Math.floor(i),l=s+1,c=h+1,d=t/s,p=r/h,m=[],g=[],y=[],b=[];for(let t=0;t<c;t++){const r=t*p-o;for(let n=0;n<l;n++){const i=n*d-a;g.push(i,-r,0),y.push(0,0,1),b.push(n/s),b.push(1-t/h)}}for(let t=0;t<h;t++)for(let r=0;r<s;r++){const n=r+l*t,i=r+l*(t+1),a=r+1+l*(t+1),o=r+1+l*t;m.push(n,i,o),m.push(i,a,o)}this.setIndex(m),this.setAttribute("position",new Float32BufferAttribute(g,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2))}static fromJSON(t){return new PlaneGeometry(t.width,t.height,t.widthSegments,t.heightSegments)}}const Hi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn ( f90 - f0 ) * fresnel + f0;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\t#ifdef SPECULAR\n\t\tvec3 specularIntensityFactor = vec3( specularIntensity );\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );\n\t#else\n\t\tvec3 specularIntensityFactor = vec3( 1.0 );\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularColorF90 = vec3( 1.0 );\n\t#endif\n\tmaterial.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularColorF90 = vec3( 1.0 );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n\tvec3 specularColorF90;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 transmission = transmissionFactor * getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t\t#ifdef USE_TANGENT\n\t\t\tvTangent = normalize( transformedTangent );\n\t\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t\t#endif\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Gi={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Matrix3},uv2Transform:{value:new Matrix3},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Matrix3}}},Wi={basic:{uniforms:mergeUniforms([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.fog]),vertexShader:Hi.meshbasic_vert,fragmentShader:Hi.meshbasic_frag},lambert:{uniforms:mergeUniforms([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.fog,Gi.lights,{emissive:{value:new Color(0)}}]),vertexShader:Hi.meshlambert_vert,fragmentShader:Hi.meshlambert_frag},phong:{uniforms:mergeUniforms([Gi.common,Gi.specularmap,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.fog,Gi.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Hi.meshphong_vert,fragmentShader:Hi.meshphong_frag},standard:{uniforms:mergeUniforms([Gi.common,Gi.envmap,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.roughnessmap,Gi.metalnessmap,Gi.fog,Gi.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag},toon:{uniforms:mergeUniforms([Gi.common,Gi.aomap,Gi.lightmap,Gi.emissivemap,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.gradientmap,Gi.fog,Gi.lights,{emissive:{value:new Color(0)}}]),vertexShader:Hi.meshtoon_vert,fragmentShader:Hi.meshtoon_frag},matcap:{uniforms:mergeUniforms([Gi.common,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,Gi.fog,{matcap:{value:null}}]),vertexShader:Hi.meshmatcap_vert,fragmentShader:Hi.meshmatcap_frag},points:{uniforms:mergeUniforms([Gi.points,Gi.fog]),vertexShader:Hi.points_vert,fragmentShader:Hi.points_frag},dashed:{uniforms:mergeUniforms([Gi.common,Gi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hi.linedashed_vert,fragmentShader:Hi.linedashed_frag},depth:{uniforms:mergeUniforms([Gi.common,Gi.displacementmap]),vertexShader:Hi.depth_vert,fragmentShader:Hi.depth_frag},normal:{uniforms:mergeUniforms([Gi.common,Gi.bumpmap,Gi.normalmap,Gi.displacementmap,{opacity:{value:1}}]),vertexShader:Hi.normal_vert,fragmentShader:Hi.normal_frag},sprite:{uniforms:mergeUniforms([Gi.sprite,Gi.fog]),vertexShader:Hi.sprite_vert,fragmentShader:Hi.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null}},vertexShader:Hi.background_vert,fragmentShader:Hi.background_frag},cube:{uniforms:mergeUniforms([Gi.envmap,{opacity:{value:1}}]),vertexShader:Hi.cube_vert,fragmentShader:Hi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hi.equirect_vert,fragmentShader:Hi.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([Gi.common,Gi.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hi.distanceRGBA_vert,fragmentShader:Hi.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([Gi.lights,Gi.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:Hi.shadow_vert,fragmentShader:Hi.shadow_frag}};function WebGLBackground(t,r,n,i,a){const o=new Color(0);let s,h,l=0,c=null,d=0,p=null;function setClear(t,r){n.buffers.color.setClear(t.r,t.g,t.b,r,a)}return{getClearColor:function(){return o},setClearColor:function(t,r=1){o.set(t),l=r,setClear(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,setClear(o,l)},render:function render(n,a){let m=!1,g=!0===a.isScene?a.background:null;g&&g.isTexture&&(g=r.get(g));const w=t.xr,M=w.getSession&&w.getSession();M&&"additive"===M.environmentBlendMode&&(g=null),null===g?setClear(o,l):g&&g.isColor&&(setClear(g,1),m=!0),(t.autoClear||m)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ge)?(void 0===h&&(h=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(Wi.cube.uniforms),vertexShader:Wi.cube.vertexShader,fragmentShader:Wi.cube.fragmentShader,side:b,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,r,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=g,h.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,c===g&&d===g.version&&p===t.toneMapping||(h.material.needsUpdate=!0,c=g,d=g.version,p=t.toneMapping),n.unshift(h,h.geometry,h.material,0,0,null)):g&&g.isTexture&&(void 0===s&&(s=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(Wi.background.uniforms),vertexShader:Wi.background.vertexShader,fragmentShader:Wi.background.fragmentShader,side:y,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),s.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&d===g.version&&p===t.toneMapping||(s.material.needsUpdate=!0,c=g,d=g.version,p=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function WebGLBindingStates(t,r,n,i){const a=t.getParameter(34921),o=i.isWebGL2?null:r.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,h={},l=createBindingState(null);let c=l;function bindVertexArrayObject(r){return i.isWebGL2?t.bindVertexArray(r):o.bindVertexArrayOES(r)}function deleteVertexArrayObject(r){return i.isWebGL2?t.deleteVertexArray(r):o.deleteVertexArrayOES(r)}function createBindingState(t){const r=[],n=[],i=[];for(let t=0;t<a;t++)r[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:r,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function initAttributes(){const t=c.newAttributes;for(let r=0,n=t.length;r<n;r++)t[r]=0}function enableAttribute(t){enableAttributeAndDivisor(t,0)}function enableAttributeAndDivisor(n,a){const o=c.newAttributes,s=c.enabledAttributes,h=c.attributeDivisors;if(o[n]=1,0===s[n]&&(t.enableVertexAttribArray(n),s[n]=1),h[n]!==a){(i.isWebGL2?t:r.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,a),h[n]=a}}function disableUnusedAttributes(){const r=c.newAttributes,n=c.enabledAttributes;for(let i=0,a=n.length;i<a;i++)n[i]!==r[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function vertexAttribPointer(r,n,a,o,s,h){!0!==i.isWebGL2||5124!==a&&5125!==a?t.vertexAttribPointer(r,n,a,o,s,h):t.vertexAttribIPointer(r,n,a,s,h)}function reset(){resetDefaultState(),c!==l&&(c=l,bindVertexArrayObject(c.object))}function resetDefaultState(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function setup(a,l,d,p,m){let g=!1;if(s){const r=function getBindingState(r,n,a){const s=!0===a.wireframe;let l=h[r.id];void 0===l&&(l={},h[r.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let d=c[s];void 0===d&&(d=createBindingState(function createVertexArrayObject(){return i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}()),c[s]=d);return d}(p,d,l);c!==r&&(c=r,bindVertexArrayObject(c.object)),g=function needsUpdate(t,r){const n=c.attributes,i=t.attributes;let a=0;for(const t in i){const r=n[t],o=i[t];if(void 0===r)return!0;if(r.attribute!==o)return!0;if(r.data!==o.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(p,m),g&&function saveCache(t,r){const n={},i=t.attributes;let a=0;for(const t in i){const r=i[t],o={};o.attribute=r,r.data&&(o.data=r.data),n[t]=o,a++}c.attributes=n,c.attributesNum=a,c.index=r}(p,m)}else{const t=!0===l.wireframe;c.geometry===p.id&&c.program===d.id&&c.wireframe===t||(c.geometry=p.id,c.program=d.id,c.wireframe=t,g=!0)}!0===a.isInstancedMesh&&(g=!0),null!==m&&n.update(m,34963),g&&(!function setupVertexAttributes(a,o,s,h){if(!1===i.isWebGL2&&(a.isInstancedMesh||h.isInstancedBufferGeometry)&&null===r.get("ANGLE_instanced_arrays"))return;initAttributes();const l=h.attributes,c=s.getAttributes(),d=o.defaultAttributeValues;for(const r in c){const i=c[r];if(i>=0){const o=l[r];if(void 0!==o){const r=o.normalized,a=o.itemSize,s=n.get(o);if(void 0===s)continue;const l=s.buffer,c=s.type,d=s.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,s=n.stride,p=o.offset;n&&n.isInstancedInterleavedBuffer?(enableAttributeAndDivisor(i,n.meshPerAttribute),void 0===h._maxInstanceCount&&(h._maxInstanceCount=n.meshPerAttribute*n.count)):enableAttribute(i),t.bindBuffer(34962,l),vertexAttribPointer(i,a,c,r,s*d,p*d)}else o.isInstancedBufferAttribute?(enableAttributeAndDivisor(i,o.meshPerAttribute),void 0===h._maxInstanceCount&&(h._maxInstanceCount=o.meshPerAttribute*o.count)):enableAttribute(i),t.bindBuffer(34962,l),vertexAttribPointer(i,a,c,r,0,0)}else if("instanceMatrix"===r){const r=n.get(a.instanceMatrix);if(void 0===r)continue;const o=r.buffer,s=r.type;enableAttributeAndDivisor(i+0,1),enableAttributeAndDivisor(i+1,1),enableAttributeAndDivisor(i+2,1),enableAttributeAndDivisor(i+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i+0,4,s,!1,64,0),t.vertexAttribPointer(i+1,4,s,!1,64,16),t.vertexAttribPointer(i+2,4,s,!1,64,32),t.vertexAttribPointer(i+3,4,s,!1,64,48)}else if("instanceColor"===r){const r=n.get(a.instanceColor);if(void 0===r)continue;const o=r.buffer,s=r.type;enableAttributeAndDivisor(i,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i,3,s,!1,12,0)}else if(void 0!==d){const n=d[r];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i,n);break;case 3:t.vertexAttrib3fv(i,n);break;case 4:t.vertexAttrib4fv(i,n);break;default:t.vertexAttrib1fv(i,n)}}}}disableUnusedAttributes()}(a,l,d,p),null!==m&&t.bindBuffer(34963,n.get(m).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function dispose(){reset();for(const t in h){const r=h[t];for(const t in r){const n=r[t];for(const t in n)deleteVertexArrayObject(n[t].object),delete n[t];delete r[t]}delete h[t]}},releaseStatesOfGeometry:function releaseStatesOfGeometry(t){if(void 0===h[t.id])return;const r=h[t.id];for(const t in r){const n=r[t];for(const t in n)deleteVertexArrayObject(n[t].object),delete n[t];delete r[t]}delete h[t.id]},releaseStatesOfProgram:function releaseStatesOfProgram(t){for(const r in h){const n=h[r];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)deleteVertexArrayObject(i[t].object),delete i[t];delete n[t.id]}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(t,r,n,i){const a=i.isWebGL2;let o;this.setMode=function setMode(t){o=t},this.render=function render(r,i){t.drawArrays(o,r,i),n.update(i,o,1)},this.renderInstances=function renderInstances(i,s,h){if(0===h)return;let l,c;if(a)l=t,c="drawArraysInstanced";else if(l=r.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,s,h),n.update(s,o,h)}}function WebGLCapabilities(t,r,n){let i;function getMaxPrecision(r){if("highp"===r){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";r="mediump"}return"mediump"===r&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const s=getMaxPrecision(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const h=a||r.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),d=t.getParameter(35660),p=t.getParameter(3379),m=t.getParameter(34076),g=t.getParameter(34921),y=t.getParameter(36347),b=t.getParameter(36348),w=t.getParameter(36349),M=d>0,_=a||r.has("OES_texture_float");return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!==i)return i;if(!0===r.has("EXT_texture_filter_anisotropic")){const n=r.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:getMaxPrecision,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:y,maxVaryings:b,maxFragmentUniforms:w,vertexTextures:M,floatFragmentTextures:_,floatVertexTextures:M&&_,maxSamples:a?t.getParameter(36183):0}}function WebGLClipping(t){const r=this;let n=null,i=0,a=!1,o=!1;const s=new Plane,h=new Matrix3,l={value:null,needsUpdate:!1};function resetGlobalState(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),r.numPlanes=i,r.numIntersection=0}function projectPlanes(t,n,i,a){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==a||null===c){const r=i+4*o,a=n.matrixWorldInverse;h.getNormalMatrix(a),(null===c||c.length<r)&&(c=new Float32Array(r));for(let r=0,n=i;r!==o;++r,n+=4)s.copy(t[r]).applyMatrix4(a,h),s.normal.toArray(c,n),c[n+3]=s.constant}l.value=c,l.needsUpdate=!0}return r.numPlanes=o,r.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){const s=0!==t.length||r||0!==i||a;return a=r,n=projectPlanes(t,o,0),i=t.length,s},this.beginShadows=function(){o=!0,projectPlanes(null)},this.endShadows=function(){o=!1,resetGlobalState()},this.setState=function(r,s,h){const c=r.clippingPlanes,d=r.clipIntersection,p=r.clipShadows,m=t.get(r);if(!a||null===c||0===c.length||o&&!p)o?projectPlanes(null):resetGlobalState();else{const t=o?0:i,r=4*t;let a=m.clippingState||null;l.value=a,a=projectPlanes(c,s,r,h);for(let t=0;t!==r;++t)a[t]=n[t];m.clippingState=a,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function WebGLCubeMaps(t){let r=new WeakMap;function mapTextureMapping(t,r){return r===pe?t.mapping=de:r===me&&(t.mapping=fe),t}function onTextureDispose(t){const n=t.target;n.removeEventListener("dispose",onTextureDispose);const i=r.get(n);void 0!==i&&(r.delete(n),i.dispose())}return{get:function get(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){const i=n.mapping;if(i===pe||i===me){if(r.has(n)){return mapTextureMapping(r.get(n).texture,n.mapping)}{const i=n.image;if(i&&i.height>0){const a=t.getRenderTarget(),o=new WebGLCubeRenderTarget(i.height/2);return o.fromEquirectangularTexture(t,n),r.set(n,o),t.setRenderTarget(a),n.addEventListener("dispose",onTextureDispose),mapTextureMapping(o.texture,n.mapping)}return null}}}return n},dispose:function dispose(){r=new WeakMap}}}Wi.physical={uniforms:mergeUniforms([Wi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Color(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Color(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Color(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Hi.meshphysical_vert,fragmentShader:Hi.meshphysical_frag};class OrthographicCamera extends Camera{constructor(t){super(t={left:-1,right:1,top:1,bottom:-1,near:.1,far:2e3,...t}),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.updateProjectionMatrix()}copy(t,r){return super.copy(t,r),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,r,n,i,a,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=n-t,o=n+t,s=i+r,h=i-r;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,r=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=t*this.view.offsetX,o=a+t*this.view.width,s-=r*this.view.offsetY,h=s-r*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const r=super.toJSON(t);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,null!==this.view&&(r.object.view=Object.assign({},this.view)),r}}OrthographicCamera.prototype.isOrthographicCamera=!0;class RawShaderMaterial extends ShaderMaterial{constructor(t){super(t),this.type="RawShaderMaterial"}}RawShaderMaterial.prototype.isRawShaderMaterial=!0;const qi=Math.pow(2,8),Ki=[.125,.215,.35,.446,.526,.582],Qi=5+Ki.length,Xi=20,Yi={[sr]:0,[ur]:1,[lr]:2,[dr]:3,[fr]:4,[pr]:5,[hr]:6},Ji=new MeshBasicMaterial({side:b,depthWrite:!1,depthTest:!1}),Zi=new Mesh(new BoxGeometry,Ji),$i=new OrthographicCamera,{_lodPlanes:ea,_sizeLods:ta,_sigmas:ra}=_createPlanes(),na=new Color;let ia=null;const aa=(1+Math.sqrt(5))/2,oa=1/aa,sa=[new Vector3(1,1,1),new Vector3(-1,1,1),new Vector3(1,1,-1),new Vector3(-1,1,-1),new Vector3(0,aa,oa),new Vector3(0,aa,-oa),new Vector3(oa,0,aa),new Vector3(-oa,0,aa),new Vector3(aa,oa,0),new Vector3(-aa,oa,0)];function convertLinearToRGBE(t){const r=Math.max(t.r,t.g,t.b),n=Math.min(Math.max(Math.ceil(Math.log2(r)),-128),127);t.multiplyScalar(Math.pow(2,-n));return(n+128)/255}class PMREMGenerator{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function _getBlurShader(t){const r=new Float32Array(t),n=new Vector3(0,1,0);return new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Yi[sr]},outputEncoding:{value:Yi[sr]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${_getEncodings()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}(Xi),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,r=0,n=.1,i=100){ia=this._renderer.getRenderTarget();const a=this._allocateTargets();return this._sceneToCubeUV(t,n,i,a),r>0&&this._blur(a,0,0,r),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=_getCubemapShader(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=_getEquirectShader(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<ea.length;t++)ea[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(ia),t.scissorTest=!1,_setViewport(t,0,0,t.width,t.height)}_fromTexture(t){ia=this._renderer.getRenderTarget();const r=this._allocateTargets(t);return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(t){const r={magFilter:Me,minFilter:Me,generateMipmaps:!1,type:Pe,format:Qe,encoding:_isLDR(t)?t.encoding:lr,depthBuffer:!1},n=_createRenderTarget(r);return n.depthBuffer=!t,this._pingPongRenderTarget=_createRenderTarget(r),n}_compileMaterial(t){const r=new Mesh(ea[0],t);this._renderer.compile(r,$i)}_sceneToCubeUV(t,r,n,i){const a=new PerspectiveCamera(90,1,r,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],h=this._renderer,l=h.autoClear,c=h.outputEncoding,d=h.toneMapping;h.getClearColor(na),h.toneMapping=ae,h.outputEncoding=sr,h.autoClear=!1;let p=!1;const m=t.background;if(m){if(m.isColor){Ji.color.copy(m).convertSRGBToLinear(),t.background=null;const r=convertLinearToRGBE(Ji.color);Ji.opacity=r,p=!0}}else{Ji.color.copy(na).convertSRGBToLinear();const t=convertLinearToRGBE(Ji.color);Ji.opacity=t,p=!0}for(let r=0;r<6;r++){const n=r%3;0==n?(a.up.set(0,o[r],0),a.lookAt(s[r],0,0)):1==n?(a.up.set(0,0,o[r]),a.lookAt(0,s[r],0)):(a.up.set(0,o[r],0),a.lookAt(0,0,s[r])),_setViewport(i,n*qi,r>2?qi:0,qi,qi),h.setRenderTarget(i),p&&h.render(Zi,a),h.render(t,a)}h.toneMapping=d,h.outputEncoding=c,h.autoClear=l}_textureToCubeUV(t,r){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=_getCubemapShader()):null==this._equirectShader&&(this._equirectShader=_getEquirectShader());const i=t.isCubeTexture?this._cubemapShader:this._equirectShader,a=new Mesh(ea[0],i),o=i.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=Yi[t.encoding],o.outputEncoding.value=Yi[r.texture.encoding],_setViewport(r,0,0,3*qi,2*qi),n.setRenderTarget(r),n.render(a,$i)}_applyPMREM(t){const r=this._renderer,n=r.autoClear;r.autoClear=!1;for(let r=1;r<Qi;r++){const n=Math.sqrt(ra[r]*ra[r]-ra[r-1]*ra[r-1]),i=sa[(r-1)%sa.length];this._blur(t,r-1,r,n,i)}r.autoClear=n}_blur(t,r,n,i,a){const o=this._pingPongRenderTarget;this._halfBlur(t,o,r,n,i,"latitudinal",a),this._halfBlur(o,t,n,n,i,"longitudinal",a)}_halfBlur(t,r,n,i,a,o,s){const h=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Mesh(ea[i],l),d=l.uniforms,p=ta[n]-1,m=isFinite(a)?Math.PI/(2*p):2*Math.PI/39,g=a/m,y=isFinite(a)?1+Math.floor(3*g):Xi;y>Xi&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const b=[];let w=0;for(let t=0;t<Xi;++t){const r=t/g,n=Math.exp(-r*r/2);b.push(n),0==t?w+=n:t<y&&(w+=2*n)}for(let t=0;t<b.length;t++)b[t]=b[t]/w;d.envMap.value=t.texture,d.samples.value=y,d.weights.value=b,d.latitudinal.value="latitudinal"===o,s&&(d.poleAxis.value=s),d.dTheta.value=m,d.mipInt.value=8-n,d.inputEncoding.value=Yi[t.texture.encoding],d.outputEncoding.value=Yi[t.texture.encoding];const M=ta[i];_setViewport(r,3*Math.max(0,qi-2*M),(0===i?0:2*qi)+2*M*(i>4?i-8+4:0),3*M,2*M),h.setRenderTarget(r),h.render(c,$i)}}function _isLDR(t){return void 0!==t&&t.type===Pe&&(t.encoding===sr||t.encoding===ur||t.encoding===hr)}function _createPlanes(){const t=[],r=[],n=[];let i=8;for(let a=0;a<Qi;a++){const o=Math.pow(2,i);r.push(o);let s=1/o;a>4?s=Ki[a-8+4-1]:0==a&&(s=0),n.push(s);const h=1/(o-1),l=-h/2,c=1+h/2,d=[l,l,c,l,c,c,l,l,c,c,l,c],p=6,m=6,g=3,y=2,b=1,w=new Float32Array(g*m*p),M=new Float32Array(y*m*p),_=new Float32Array(b*m*p);for(let t=0;t<p;t++){const r=t%3*2/3-1,n=t>2?0:-1,i=[r,n,0,r+2/3,n,0,r+2/3,n+1,0,r,n,0,r+2/3,n+1,0,r,n+1,0];w.set(i,g*m*t),M.set(d,y*m*t);const a=[t,t,t,t,t,t];_.set(a,b*m*t)}const x=new BufferGeometry;x.setAttribute("position",new BufferAttribute(w,g)),x.setAttribute("uv",new BufferAttribute(M,y)),x.setAttribute("faceIndex",new BufferAttribute(_,b)),t.push(x),i>4&&i--}return{_lodPlanes:t,_sizeLods:r,_sigmas:n}}function _createRenderTarget(t){const r=new WebGLRenderTarget(3*qi,3*qi,t);return r.texture.mapping=ge,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _setViewport(t,r,n,i,a){t.viewport.set(r,n,i,a),t.scissor.set(r,n,i,a)}function _getEquirectShader(){const t=new Vector2(1,1);return new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Yi[sr]},outputEncoding:{value:Yi[sr]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${_getEncodings()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function _getCubemapShader(){return new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Yi[sr]},outputEncoding:{value:Yi[sr]}},vertexShader:_getCommonVertexShader(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${_getEncodings()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:x,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function _getEncodings(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(t){let r=new WeakMap,n=null;function onTextureDispose(t){const n=t.target;n.removeEventListener("dispose",onTextureDispose);const i=r.get(n);void 0!==i&&(i.delete(n),i.dispose())}return{get:function get(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping,o=a===pe||a===me,s=a===de||a===fe;if(o||s){if(r.has(i))return r.get(i).texture;{const a=i.image;if(o&&a&&a.height>0||s&&a&&function isCubeTextureComplete(t){let r=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&r++;return r===n}(a)){const a=t.getRenderTarget();null===n&&(n=new PMREMGenerator(t));const s=o?n.fromEquirectangular(i):n.fromCubemap(i);return r.set(i,s),t.setRenderTarget(a),i.addEventListener("dispose",onTextureDispose),s.texture}return null}}}return i},dispose:function dispose(){r=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function WebGLExtensions(t){const r={};function getExtension(n){if(void 0!==r[n])return r[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return r[n]=i,i}return{has:function(t){return null!==getExtension(t)},init:function(t){t.isWebGL2?getExtension("EXT_color_buffer_float"):(getExtension("WEBGL_depth_texture"),getExtension("OES_texture_float"),getExtension("OES_texture_half_float"),getExtension("OES_texture_half_float_linear"),getExtension("OES_standard_derivatives"),getExtension("OES_element_index_uint"),getExtension("OES_vertex_array_object"),getExtension("ANGLE_instanced_arrays")),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float")},get:function(t){const r=getExtension(t);return null===r&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),r}}}function WebGLGeometries(t,r,n,i){const a={},o=new WeakMap;function onGeometryDispose(t){const s=t.target;null!==s.index&&r.remove(s.index);for(const t in s.attributes)r.remove(s.attributes[t]);s.removeEventListener("dispose",onGeometryDispose),delete a[s.id];const h=o.get(s);h&&(r.remove(h),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function updateWireframeAttribute(t){const n=[],i=t.index,a=t.attributes.position;let s=0;if(null!==i){const t=i.array;s=i.version;for(let r=0,i=t.length;r<i;r+=3){const i=t[r+0],a=t[r+1],o=t[r+2];n.push(i,a,a,o,o,i)}}else{const t=a.array;s=a.version;for(let r=0,i=t.length/3-1;r<i;r+=3){const t=r+0,i=r+1,a=r+2;n.push(t,i,i,a,a,t)}}const h=new(arrayMax(n)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(n,1);h.version=s;const l=o.get(t);l&&r.remove(l),o.set(t,h)}return{get:function get(t,r){return!0===a[r.id]||(r.addEventListener("dispose",onGeometryDispose),a[r.id]=!0,n.memory.geometries++),r},update:function update(t){const n=t.attributes;for(const t in n)r.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)r.update(n[t],34962)}},getWireframeAttribute:function getWireframeAttribute(t){const r=o.get(t);if(r){const n=t.index;null!==n&&r.version<n.version&&updateWireframeAttribute(t)}else updateWireframeAttribute(t);return o.get(t)}}}function WebGLIndexedBufferRenderer(t,r,n,i){const a=i.isWebGL2;let o,s,h;this.setMode=function setMode(t){o=t},this.setIndex=function setIndex(t){s=t.type,h=t.bytesPerElement},this.render=function render(r,i){t.drawElements(o,i,s,r*h),n.update(i,o,1)},this.renderInstances=function renderInstances(i,l,c){if(0===c)return;let d,p;if(a)d=t,p="drawElementsInstanced";else if(d=r.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===d)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[p](o,l,s,i*h,c),n.update(l,o,c)}}function WebGLInfo(t){const r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function reset(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function update(t,n,i){switch(r.calls++,n){case 4:r.triangles+=i*(t/3);break;case 1:r.lines+=i*(t/2);break;case 3:r.lines+=i*(t-1);break;case 2:r.lines+=i*t;break;case 0:r.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function numericalSort(t,r){return t[0]-r[0]}function absNumericalSort(t,r){return Math.abs(r[1])-Math.abs(t[1])}function WebGLMorphtargets(t){const r={},n=new Float32Array(8),i=[];for(let t=0;t<8;t++)i[t]=[t,0];return{update:function update(a,o,s,h){const l=a.morphTargetInfluences,c=void 0===l?0:l.length;let d=r[o.id];if(void 0===d||d.length!==c){d=[];for(let t=0;t<c;t++)d[t]=[t,0];r[o.id]=d}for(let t=0;t<c;t++){const r=d[t];r[0]=t,r[1]=l[t]}d.sort(absNumericalSort);for(let t=0;t<8;t++)t<c&&d[t][1]?(i[t][0]=d[t][0],i[t][1]=d[t][1]):(i[t][0]=Number.MAX_SAFE_INTEGER,i[t][1]=0);i.sort(numericalSort);const p=o.morphAttributes.position,m=o.morphAttributes.normal;let g=0;for(let t=0;t<8;t++){const r=i[t],a=r[0],s=r[1];a!==Number.MAX_SAFE_INTEGER&&s?(p&&o.getAttribute("morphTarget"+t)!==p[a]&&o.setAttribute("morphTarget"+t,p[a]),m&&o.getAttribute("morphNormal"+t)!==m[a]&&o.setAttribute("morphNormal"+t,m[a]),n[t]=s,g+=s):(p&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),m&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const y=o.morphTargetsRelative?1:1-g;h.getUniforms().setValue(t,"morphTargetBaseInfluence",y),h.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function WebGLObjects(t,r,n,i){let a=new WeakMap;function onInstancedMeshDispose(t){const r=t.target;r.removeEventListener("dispose",onInstancedMeshDispose),n.remove(r.instanceMatrix),null!==r.instanceColor&&n.remove(r.instanceColor)}return{update:function update(t){const o=i.render.frame,s=t.geometry,h=r.get(t,s);return a.get(h)!==o&&(r.update(h),a.set(h,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",onInstancedMeshDispose)&&t.addEventListener("dispose",onInstancedMeshDispose),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),h},dispose:function dispose(){a=new WeakMap}}}class DataTexture2DArray extends Texture{constructor(t=null,r=1,n=1,i=1){super(null),this.image={data:t,width:r,height:n,depth:i},this.magFilter=Me,this.minFilter=Me,this.wrapR=be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture2DArray.prototype.isDataTexture2DArray=!0;class DataTexture3D extends Texture{constructor(t=null,r=1,n=1,i=1){super(null),this.image={data:t,width:r,height:n,depth:i},this.magFilter=Me,this.minFilter=Me,this.wrapR=be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture3D.prototype.isDataTexture3D=!0;const ua=new Texture,ha=new DataTexture2DArray,la=new DataTexture3D,ca=new CubeTexture,da=[],fa=[],pa=new Float32Array(16),ma=new Float32Array(9),ga=new Float32Array(4);function flatten(t,r,n){const i=t[0];if(i<=0||i>0)return t;const a=r*n;let o=da[a];if(void 0===o&&(o=new Float32Array(a),da[a]=o),0!==r){i.toArray(o,0);for(let i=1,a=0;i!==r;++i)a+=n,t[i].toArray(o,a)}return o}function arraysEqual(t,r){if(t.length!==r.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==r[n])return!1;return!0}function copyArray(t,r){for(let n=0,i=r.length;n<i;n++)t[n]=r[n]}function allocTexUnits(t,r){let n=fa[r];void 0===n&&(n=new Int32Array(r),fa[r]=n);for(let i=0;i!==r;++i)n[i]=t.allocateTextureUnit();return n}function setValueV1f(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;n[0]!==r&&(t.uniform1f(this.addr,r),n[0]=r)}function setValueV2f(t,r){if(void 0===(r=void 0===r?r:r.valueOf()))return;const n=this.cache;if(void 0!==r.x)n[0]===r.x&&n[1]===r.y||(t.uniform2f(this.addr,r.x,r.y),n[0]=r.x,n[1]=r.y);else{if(arraysEqual(n,r))return;t.uniform2fv(this.addr,r),copyArray(n,r)}}function setValueV3f(t,r){if(void 0===(r=void 0===r?r:r.valueOf()))return;const n=this.cache;if(void 0!==r.x)n[0]===r.x&&n[1]===r.y&&n[2]===r.z||(t.uniform3f(this.addr,r.x,r.y,r.z),n[0]=r.x,n[1]=r.y,n[2]=r.z);else if(void 0!==r.r)n[0]===r.r&&n[1]===r.g&&n[2]===r.b||(t.uniform3f(this.addr,r.r,r.g,r.b),n[0]=r.r,n[1]=r.g,n[2]=r.b);else if("number"==typeof r){let i=(r>>16&255)/255,a=(r>>8&255)/255,o=(255&r)/255;t.uniform3f(this.addr,i,a,o),n[0]=i,n[1]=a,n[2]=o}else if("string"==typeof r){let i=((r=parseInt(r.replace("#",""),16))>>16&255)/255,a=(r>>8&255)/255,o=(255&r)/255;t.uniform3f(this.addr,i,a,o),n[0]=i,n[1]=a,n[2]=o}else{if(arraysEqual(n,r))return;t.uniform3fv(this.addr,r),copyArray(n,r)}}function setValueV4f(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;if(void 0!==r.x)n[0]===r.x&&n[1]===r.y&&n[2]===r.z&&n[3]===r.w||(t.uniform4f(this.addr,r.x,r.y,r.z,r.w),n[0]=r.x,n[1]=r.y,n[2]=r.z,n[3]=r.w);else{if(arraysEqual(n,r))return;t.uniform4fv(this.addr,r),copyArray(n,r)}}function setValueM2(t,r){r=void 0===r?r:r.valueOf();const n=this.cache,i=r.elements;if(void 0===i){if(arraysEqual(n,r))return;t.uniformMatrix2fv(this.addr,!1,r),copyArray(n,r)}else{if(arraysEqual(n,i))return;ga.set(i),t.uniformMatrix2fv(this.addr,!1,ga),copyArray(n,i)}}function setValueM3(t,r){r=void 0===r?r:r.valueOf();const n=this.cache,i=r.elements;if(void 0===i){if(arraysEqual(n,r))return;t.uniformMatrix3fv(this.addr,!1,r),copyArray(n,r)}else{if(arraysEqual(n,i))return;ma.set(i),t.uniformMatrix3fv(this.addr,!1,ma),copyArray(n,i)}}function setValueM4(t,r){r=void 0===r?r:r.valueOf();const n=this.cache,i=r.elements;if(void 0===i){if(arraysEqual(n,r))return;t.uniformMatrix4fv(this.addr,!1,r),copyArray(n,r)}else{if(arraysEqual(n,i))return;pa.set(i),t.uniformMatrix4fv(this.addr,!1,pa),copyArray(n,i)}}function setValueV1i(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r)}function setValueV2i(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform2iv(this.addr,r),copyArray(n,r))}function setValueV3i(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform3iv(this.addr,r),copyArray(n,r))}function setValueV4i(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform4iv(this.addr,r),copyArray(n,r))}function setValueV1ui(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;n[0]!==r&&(t.uniform1ui(this.addr,r),n[0]=r)}function setValueV2ui(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform2uiv(this.addr,r),copyArray(n,r))}function setValueV3ui(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform3uiv(this.addr,r),copyArray(n,r))}function setValueV4ui(t,r){r=void 0===r?r:r.valueOf();const n=this.cache;arraysEqual(n,r)||(t.uniform4uiv(this.addr,r),copyArray(n,r))}function setValueT1(t,r,n){r=void 0===r?r:r.valueOf();const i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(t.uniform1i(this.addr,a),i[0]=a),n.safeSetTexture2D(r||ua,a)}function setValueT3D1(t,r,n){r=void 0===r?r:r.valueOf();const i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(t.uniform1i(this.addr,a),i[0]=a),n.setTexture3D(r||la,a)}function setValueT6(t,r,n){r=void 0===r?r:r.valueOf();const i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(t.uniform1i(this.addr,a),i[0]=a),n.safeSetTextureCube(r||ca,a)}function setValueT2DArray1(t,r,n){r=void 0===r?r:r.valueOf();const i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(t.uniform1i(this.addr,a),i[0]=a),n.setTexture2DArray(r||ha,a)}function setValueV1fArray(t,r){t.uniform1fv(this.addr,r)}function setValueV2fArray(t,r){const n=flatten(r,this.size,2);t.uniform2fv(this.addr,n)}function setValueV3fArray(t,r){const n=flatten(r,this.size,3);t.uniform3fv(this.addr,n)}function setValueV4fArray(t,r){const n=flatten(r,this.size,4);t.uniform4fv(this.addr,n)}function setValueM2Array(t,r){const n=flatten(r,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function setValueM3Array(t,r){const n=flatten(r,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function setValueM4Array(t,r){const n=flatten(r,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function setValueV1iArray(t,r){t.uniform1iv(this.addr,r)}function setValueV2iArray(t,r){t.uniform2iv(this.addr,r)}function setValueV3iArray(t,r){t.uniform3iv(this.addr,r)}function setValueV4iArray(t,r){t.uniform4iv(this.addr,r)}function setValueV1uiArray(t,r){t.uniform1uiv(this.addr,r)}function setValueV2uiArray(t,r){t.uniform2uiv(this.addr,r)}function setValueV3uiArray(t,r){t.uniform3uiv(this.addr,r)}function setValueV4uiArray(t,r){t.uniform4uiv(this.addr,r)}function setValueT1Array(t,r,n){const i=r.length,a=allocTexUnits(n,i);t.uniform1iv(this.addr,a);for(let t=0;t!==i;++t)n.safeSetTexture2D(r[t]||ua,a[t])}function setValueT6Array(t,r,n){const i=r.length,a=allocTexUnits(n,i);t.uniform1iv(this.addr,a);for(let t=0;t!==i;++t)n.safeSetTextureCube(r[t]||ca,a[t])}function SingleUniform(t,r,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function getSingularSetter(t){switch(t){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(r.type)}function PureArrayUniform(t,r,n){this.id=t,this.addr=n,this.cache=[],this.size=r.size,this.setValue=function getPureArraySetter(t){switch(t){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}(r.type)}function StructuredUniform(t){this.id=t,this.seq=[],this.map={}}PureArrayUniform.prototype.updateCache=function(t){const r=this.cache;t instanceof Float32Array&&r.length!==t.length&&(this.cache=new Float32Array(t.length)),copyArray(r,t)},StructuredUniform.prototype.setValue=function(t,r,n){const i=this.seq;for(let a=0,o=i.length;a!==o;++a){const o=i[a];o.setValue(t,r[o.id],n)}};const va=/(\w+)(\])?(\[|\.)?/g;function addUniform(t,r){t.seq.push(r),t.map[r.id]=r}function parseUniform(t,r,n){const i=t.name,a=i.length;for(va.lastIndex=0;;){const o=va.exec(i),s=va.lastIndex;let h=o[1];const l="]"===o[2],c=o[3];if(l&&(h|=0),void 0===c||"["===c&&s+2===a){addUniform(n,void 0===c?new SingleUniform(h,t,r):new PureArrayUniform(h,t,r));break}{let t=n.map[h];void 0===t&&(t=new StructuredUniform(h),addUniform(n,t)),n=t}}}function WebGLUniforms(t,r){this.seq=[],this.map={};const n=t.getProgramParameter(r,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(r,i);parseUniform(n,t.getUniformLocation(r,n.name),this)}}function WebGLShader(t,r,n){const i=t.createShader(r);return t.shaderSource(i,n),t.compileShader(i),i}WebGLUniforms.prototype.setValue=function(t,r,n,i){const a=this.map[r];void 0!==a&&a.setValue(t,n,i)},WebGLUniforms.prototype.setOptional=function(t,r,n){const i=r[n];void 0!==i&&this.setValue(t,n,i)},WebGLUniforms.upload=function(t,r,n,i){for(let a=0,o=r.length;a!==o;++a){const o=r[a],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},WebGLUniforms.seqWithValue=function(t,r){const n=[];for(let i=0,a=t.length;i!==a;++i){const a=t[i];a.id in r&&n.push(a)}return n};let ya=0;function getEncodingComponents(t){switch(t){case sr:return["Linear","( value )"];case ur:return["sRGB","( value )"];case lr:return["RGBE","( value )"];case dr:return["RGBM","( value, 7.0 )"];case fr:return["RGBM","( value, 16.0 )"];case pr:return["RGBD","( value, 256.0 )"];case hr:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case cr:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function getShaderErrors(t,r,n){const i=t.getShaderParameter(r,35713),a=t.getShaderInfoLog(r).trim();if(i&&""===a)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+a+function addLineNumbers(t){const r=t.split("\n");for(let t=0;t<r.length;t++)r[t]=t+1+": "+r[t];return r.join("\n")}(t.getShaderSource(r))}function getTexelDecodingFunction(t,r){const n=getEncodingComponents(r);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function getTexelEncodingFunction(t,r){const n=getEncodingComponents(r);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function getToneMappingFunction(t,r){let n;switch(r){case oe:n="Linear";break;case se:n="Reinhard";break;case ue:n="OptimizedCineon";break;case he:n="ACESFilmic";break;case le:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",r),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function filterEmptyLine(t){return""!==t}function replaceLightNums(t,r){return t.replace(/NUM_DIR_LIGHTS/g,r.numDirLights).replace(/NUM_SPOT_LIGHTS/g,r.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,r.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,r.numPointLights).replace(/NUM_HEMI_LIGHTS/g,r.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,r.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,r.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,r.numPointLightShadows)}function replaceClippingPlaneNums(t,r){return t.replace(/NUM_CLIPPING_PLANES/g,r.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,r.numClippingPlanes-r.numClipIntersection)}const ba=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(t){return t.replace(ba,includeReplacer)}function includeReplacer(t,r){const n=Hi[r];if(void 0===n)throw new Error("Can not resolve #include <"+r+">");return resolveIncludes(n)}const wa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ma=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(t){return t.replace(Ma,loopReplacer).replace(wa,deprecatedLoopReplacer)}function deprecatedLoopReplacer(t,r,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(t,r,n,i)}function loopReplacer(t,r,n,i){let a="";for(let t=parseInt(r);t<parseInt(n);t++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return a}function generatePrecision(t){let r="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?r+="\n#define HIGH_PRECISION":"mediump"===t.precision?r+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(r+="\n#define LOW_PRECISION"),r}function WebGLProgram(t,r,n,i){const a=t.getContext(),o=n.defines;let s=n.vertexShader,h=n.fragmentShader;const l=function generateShadowMapTypeDefine(t){let r="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===p?r="SHADOWMAP_TYPE_PCF":t.shadowMapType===m?r="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===g&&(r="SHADOWMAP_TYPE_VSM"),r}(n),c=function generateEnvMapTypeDefine(t){let r="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case de:case fe:r="ENVMAP_TYPE_CUBE";break;case ge:case ve:r="ENVMAP_TYPE_CUBE_UV"}return r}(n),d=function generateEnvMapModeDefine(t){let r="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case fe:case ve:r="ENVMAP_MODE_REFRACTION"}return r}(n),y=function generateEnvMapBlendingDefine(t){let r="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case re:r="ENVMAP_BLENDING_MULTIPLY";break;case ne:r="ENVMAP_BLENDING_MIX";break;case ie:r="ENVMAP_BLENDING_ADD"}return r}(n),b=t.gammaFactor>0?t.gammaFactor:1,w=n.isWebGL2?"":function generateExtensions(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission>0)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}(n),M=function generateDefines(t){const r=[];for(const n in t){const i=t[n];!1!==i&&r.push("#define "+n+" "+i)}return r.join("\n")}(o),_=a.createProgram();let x,A,E=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(x=[M].filter(filterEmptyLine).join("\n"),x.length>0&&(x+="\n"),A=[w,M].filter(filterEmptyLine).join("\n"),A.length>0&&(A+="\n")):(x=[generatePrecision(n),"#define SHADER_NAME "+n.shaderName,M,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),A=[w,generatePrecision(n),"#define SHADER_NAME "+n.shaderName,M,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+d:"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ae?"#define TONE_MAPPING":"",n.toneMapping!==ae?Hi.tonemapping_pars_fragment:"",n.toneMapping!==ae?getToneMappingFunction("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Hi.encodings_pars_fragment,n.map?getTexelDecodingFunction("mapTexelToLinear",n.mapEncoding):"",n.matcap?getTexelDecodingFunction("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?getTexelDecodingFunction("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?getTexelDecodingFunction("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",n.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),s=resolveIncludes(s),s=replaceLightNums(s,n),s=replaceClippingPlaneNums(s,n),h=resolveIncludes(h),h=replaceLightNums(h,n),h=replaceClippingPlaneNums(h,n),s=unrollLoops(s),h=unrollLoops(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(E="#version 300 es\n",x=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,A=["#define varying in",n.glslVersion===Wr?"":"out highp vec4 pc_fragColor;",n.glslVersion===Wr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+A);const B=E+A+h,C=WebGLShader(a,35633,E+x+s),T=WebGLShader(a,35632,B);if(a.attachShader(_,C),a.attachShader(_,T),void 0!==n.index0AttributeName?a.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(_,0,"position"),a.linkProgram(_),t.debug.checkShaderErrors){const t=a.getProgramInfoLog(_).trim(),r=a.getShaderInfoLog(C).trim(),n=a.getShaderInfoLog(T).trim();let i=!0,o=!0;if(!1===a.getProgramParameter(_,35714)){i=!1;const r=getShaderErrors(a,C,"vertex"),n=getShaderErrors(a,T,"fragment");console.error("THREE.WebGLProgram: shader error: ",a.getError(),"35715",a.getProgramParameter(_,35715),"gl.getProgramInfoLog",t,r,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==r&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:r,prefix:x},fragmentShader:{log:n,prefix:A}})}let D,P;return a.deleteShader(C),a.deleteShader(T),this.getUniforms=function(){return void 0===D&&(D=new WebGLUniforms(a,_)),D},this.getAttributes=function(){return void 0===P&&(P=function fetchAttributeLocations(t,r){const n={},i=t.getProgramParameter(r,35721);for(let a=0;a<i;a++){const i=t.getActiveAttrib(r,a).name;n[i]=t.getAttribLocation(r,i)}return n}(a,_)),P},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=ya++,this.cacheKey=r,this.usedTimes=1,this.program=_,this.vertexShader=C,this.fragmentShader=T,this}function WebGLPrograms(t,r,n,i,a,o,s){const h=[],l=a.isWebGL2,c=a.logarithmicDepthBuffer,d=a.floatVertexTextures,p=a.maxVertexUniforms,m=a.vertexTextures;let g=a.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},M=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function getTextureEncodingFromMap(t){let r;return t&&t.isTexture?r=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=t.texture.encoding):r=sr,r}return{getParameters:function getParameters(o,h,M,_,x){const A=_.fog,E=o.isMeshStandardMaterial?_.environment:null,B=(o.isMeshStandardMaterial?n:r).get(o.envMap||E),C=y[o.type],T=x.isSkinnedMesh?function getMaxBones(t){const r=t.skeleton.bones;if(d)return 1024;{const t=p,n=Math.floor((t-20)/4),i=Math.min(n,r.length);return i<r.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+r.length+" bones. This GPU supports "+i+"."),0):i}}(x):0;let D,P;if(null!==o.precision&&(g=a.getMaxPrecision(o.precision),g!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",g,"instead.")),C){const t=Wi[C];D=t.vertexShader,P=t.fragmentShader}else D=o.vertexShader,P=o.fragmentShader;const L=t.getRenderTarget();return{isWebGL2:l,shaderID:C,shaderName:o.type,vertexShader:D,fragmentShader:P,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:g,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:m,outputEncoding:null!==L?getTextureEncodingFromMap(L.texture):t.outputEncoding,map:!!o.map,mapEncoding:getTextureEncodingFromMap(o.map),matcap:!!o.matcap,matcapEncoding:getTextureEncodingFromMap(o.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:getTextureEncodingFromMap(B),envMapCubeUV:!!B&&(B.mapping===ge||B.mapping===ve),lightMap:!!o.lightMap,lightMapEncoding:getTextureEncodingFromMap(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===yr,tangentSpaceNormalMap:o.normalMapType===vr,clearcoatMap:!!o.clearcoatMap,clearcoatRoughnessMap:!!o.clearcoatRoughnessMap,clearcoatNormalMap:!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularTintMap:!!o.specularTintMap,specularTintMapEncoding:getTextureEncodingFromMap(o.specularTintMap),alphaMap:!!o.alphaMap,gradientMap:!!o.gradientMap,sheen:!!o.sheen,transmission:!!o.transmission,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!x.geometry&&!!x.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.geometry&&!!x.geometry.attributes.color&&4===x.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap||!o.displacementMap),fog:!!A,useFog:o.fog,fogExp2:A&&A.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===x.isSkinnedMesh&&T>0,maxBones:T,useVertexTexture:d,morphTargets:!!x.geometry&&!!x.geometry.morphAttributes.position,morphNormals:!!x.geometry&&!!x.geometry.morphAttributes.normal,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&M.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:ae,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,alphaTest:o.alphaTest,doubleSided:o.side===w,flipSided:o.side===b,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function getProgramCacheKey(r){const n=[];if(r.shaderID?n.push(r.shaderID):(n.push(r.fragmentShader),n.push(r.vertexShader)),void 0!==r.defines)for(const t in r.defines)n.push(t),n.push(r.defines[t]);if(!1===r.isRawShaderMaterial){for(let t=0;t<M.length;t++)n.push(r[M[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(r.customProgramCacheKey),n.join()},getUniforms:function getUniforms(t){const r=y[t.type];let n;if(r){const t=Wi[r];n=Ii.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function acquireProgram(r,n){let i;for(let t=0,r=h.length;t<r;t++){const r=h[t];if(r.cacheKey===n){i=r,++i.usedTimes;break}}return void 0===i&&(i=new WebGLProgram(t,n,r,o),h.push(i)),i},releaseProgram:function releaseProgram(t){if(0==--t.usedTimes){const r=h.indexOf(t);h[r]=h[h.length-1],h.pop(),t.destroy()}},programs:h}}function WebGLProperties(){let t=new WeakMap;return{get:function get(r){let n=t.get(r);return void 0===n&&(n={},t.set(r,n)),n},remove:function remove(r){t.delete(r)},update:function update(r,n,i){t.get(r)[n]=i},dispose:function dispose(){t=new WeakMap}}}function painterSortStable(t,r){return t.groupOrder!==r.groupOrder?t.groupOrder-r.groupOrder:t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.program!==r.program?t.program.id-r.program.id:t.material.id!==r.material.id?t.material.id-r.material.id:t.z!==r.z?t.z-r.z:t.id-r.id}function reversePainterSortStable(t,r){return t.groupOrder!==r.groupOrder?t.groupOrder-r.groupOrder:t.renderOrder!==r.renderOrder?t.renderOrder-r.renderOrder:t.z!==r.z?r.z-t.z:t.id-r.id}function WebGLRenderList(t){const r=[];let n=0;const i=[],a=[],o=[],s={id:-1};function getNextRenderItem(i,a,o,h,l,c){let d=r[n];const p=t.get(o);return void 0===d?(d={id:i.id,object:i,geometry:a,material:o,program:p.program||s,groupOrder:h,renderOrder:i.renderOrder,z:l,group:c},r[n]=d):(d.id=i.id,d.object=i,d.geometry=a,d.material=o,d.program=p.program||s,d.groupOrder=h,d.renderOrder=i.renderOrder,d.z=l,d.group=c),n++,d}return{opaque:i,transmissive:a,transparent:o,init:function init(){n=0,i.length=0,a.length=0,o.length=0},push:function push(t,r,n,s,h,l){const c=getNextRenderItem(t,r,n,s,h,l);n.transmission>0?a.push(c):!0===n.transparent?o.push(c):i.push(c)},unshift:function unshift(t,r,n,s,h,l){const c=getNextRenderItem(t,r,n,s,h,l);n.transmission>0?a.unshift(c):!0===n.transparent?o.unshift(c):i.unshift(c)},finish:function finish(){for(let t=n,i=r.length;t<i;t++){const n=r[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function sort(t,r){i.length>1&&i.sort(t||painterSortStable),a.length>1&&a.sort(r||reversePainterSortStable),o.length>1&&o.sort(r||reversePainterSortStable)}}}function WebGLRenderLists(t){let r=new WeakMap;return{get:function get(n,i){let a;return!1===r.has(n)?(a=new WebGLRenderList(t),r.set(n,[a])):i>=r.get(n).length?(a=new WebGLRenderList(t),r.get(n).push(a)):a=r.get(n)[i],a},dispose:function dispose(){r=new WeakMap}}}function UniformsCache(){const t={};return{get:function(r){if(void 0!==t[r.id])return t[r.id];let n;switch(r.type){case"DirectionalLight":n={direction:new Vector3,color:new Color};break;case"SpotLight":n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3}}return t[r.id]=n,n}}}let _a=0;function shadowCastingLightsFirst(t,r){return(r.castShadow?1:0)-(t.castShadow?1:0)}function WebGLLights(t,r){const n=new UniformsCache,i=function ShadowUniformsCache(){const t={};return{get:function(r){if(void 0!==t[r.id])return t[r.id];let n;switch(r.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3}}return t[r.id]=n,n}}}(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)a.probe.push(new Vector3);const o=new Vector3,s=new Matrix4,h=new Matrix4;return{setup:function setup(o){let s=0,h=0,l=0;for(let t=0;t<9;t++)a.probe[t].set(0,0,0);let c=0,d=0,p=0,m=0,g=0,y=0,b=0,w=0;o.sort(shadowCastingLightsFirst);for(let t=0,r=o.length;t<r;t++){const r=o[t],M=r.color,_=r.intensity,x=r.distance,A=r.shadow&&r.shadow.map?r.shadow.map.texture:null;if(r.isAmbientLight)s+=M.r*_,h+=M.g*_,l+=M.b*_;else if(r.isLightProbe)for(let t=0;t<9;t++)a.probe[t].addScaledVector(r.sh.coefficients[t],_);else if(r.isDirectionalLight){const t=n.get(r);if(t.color.copy(r.color).multiplyScalar(r.intensity),r.castShadow){const t=r.shadow,n=i.get(r);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,a.directionalShadow[c]=n,a.directionalShadowMap[c]=A,a.directionalShadowMatrix[c]=r.shadow.matrix,y++}a.directional[c]=t,c++}else if(r.isSpotLight){const t=n.get(r);if(t.position.setFromMatrixPosition(r.matrixWorld),t.color.copy(M).multiplyScalar(_),t.distance=x,t.coneCos=Math.cos(r.angle),t.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),t.decay=r.decay,r.castShadow){const t=r.shadow,n=i.get(r);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,a.spotShadow[p]=n,a.spotShadowMap[p]=A,a.spotShadowMatrix[p]=r.shadow.matrix,w++}a.spot[p]=t,p++}else if(r.isRectAreaLight){const t=n.get(r);t.color.copy(M).multiplyScalar(_),t.halfWidth.set(.5*r.width,0,0),t.halfHeight.set(0,.5*r.height,0),a.rectArea[m]=t,m++}else if(r.isPointLight){const t=n.get(r);if(t.color.copy(r.color).multiplyScalar(r.intensity),t.distance=r.distance,t.decay=r.decay,r.castShadow){const t=r.shadow,n=i.get(r);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,a.pointShadow[d]=n,a.pointShadowMap[d]=A,a.pointShadowMatrix[d]=r.shadow.matrix,b++}a.point[d]=t,d++}else if(r.isHemisphereLight){const t=n.get(r);t.skyColor.copy(r.color).multiplyScalar(_),t.groundColor.copy(r.groundColor).multiplyScalar(_),a.hemi[g]=t,g++}}m>0&&(r.isWebGL2||!0===t.has("OES_texture_float_linear")?(a.rectAreaLTC1=Gi.LTC_FLOAT_1,a.rectAreaLTC2=Gi.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Gi.LTC_HALF_1,a.rectAreaLTC2=Gi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=h,a.ambient[2]=l;const M=a.hash;M.directionalLength===c&&M.pointLength===d&&M.spotLength===p&&M.rectAreaLength===m&&M.hemiLength===g&&M.numDirectionalShadows===y&&M.numPointShadows===b&&M.numSpotShadows===w||(a.directional.length=c,a.spot.length=p,a.rectArea.length=m,a.point.length=d,a.hemi.length=g,a.directionalShadow.length=y,a.directionalShadowMap.length=y,a.pointShadow.length=b,a.pointShadowMap.length=b,a.spotShadow.length=w,a.spotShadowMap.length=w,a.directionalShadowMatrix.length=y,a.pointShadowMatrix.length=b,a.spotShadowMatrix.length=w,M.directionalLength=c,M.pointLength=d,M.spotLength=p,M.rectAreaLength=m,M.hemiLength=g,M.numDirectionalShadows=y,M.numPointShadows=b,M.numSpotShadows=w,a.version=_a++)},setupView:function setupView(t,r){let n=0,i=0,l=0,c=0,d=0;const p=r.matrixWorldInverse;for(let r=0,m=t.length;r<m;r++){const m=t[r];if(m.isDirectionalLight){const t=a.directional[n];t.direction.setFromMatrixPosition(m.matrixWorld),o.setFromMatrixPosition(m.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(p),n++}else if(m.isSpotLight){const t=a.spot[l];t.position.setFromMatrixPosition(m.matrixWorld),t.position.applyMatrix4(p),t.direction.setFromMatrixPosition(m.matrixWorld),o.setFromMatrixPosition(m.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(p),l++}else if(m.isRectAreaLight){const t=a.rectArea[c];t.position.setFromMatrixPosition(m.matrixWorld),t.position.applyMatrix4(p),h.identity(),s.copy(m.matrixWorld),s.premultiply(p),h.extractRotation(s),t.halfWidth.set(.5*m.width,0,0),t.halfHeight.set(0,.5*m.height,0),t.halfWidth.applyMatrix4(h),t.halfHeight.applyMatrix4(h),c++}else if(m.isPointLight){const t=a.point[i];t.position.setFromMatrixPosition(m.matrixWorld),t.position.applyMatrix4(p),i++}else if(m.isHemisphereLight){const t=a.hemi[d];t.direction.setFromMatrixPosition(m.matrixWorld),t.direction.transformDirection(p),t.direction.normalize(),d++}}},state:a}}function WebGLRenderState(t,r){const n=new WebGLLights(t,r),i=[],a=[];return{init:function init(){i.length=0,a.length=0},state:{lightsArray:i,shadowsArray:a,lights:n},setupLights:function setupLights(){n.setup(i)},setupLightsView:function setupLightsView(t){n.setupView(i,t)},pushLight:function pushLight(t){i.push(t)},pushShadow:function pushShadow(t){a.push(t)}}}function WebGLRenderStates(t,r){let n=new WeakMap;return{get:function get(i,a=0){let o;return!1===n.has(i)?(o=new WebGLRenderState(t,r),n.set(i,[o])):a>=n.get(i).length?(o=new WebGLRenderState(t,r),n.get(i).push(o)):o=n.get(i)[a],o},dispose:function dispose(){n=new WeakMap}}}class MeshDepthMaterial extends Material{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=mr,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0;class MeshDistanceMaterial extends Material{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0;function WebGLShadowMap(t,r,n){let i=new Frustum;const a=new Vector2,o=new Vector2,s=new Vector4,h=new MeshDepthMaterial({depthPacking:gr}),l=new MeshDistanceMaterial,c={},d=n.maxTextureSize,m={0:b,1:y,2:w},M=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=M.clone();_.defines.HORIZONTAL_PASS=1;const A=new BufferGeometry;A.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Mesh(A,M),B=this;function VSMPass(n,i){const a=r.update(E);M.uniforms.shadow_pass.value=n.map.texture,M.uniforms.resolution.value=n.mapSize,M.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,a,M,E,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,a,_,E,null)}function getDepthMaterial(r,n,i,a,o,s,d){let p=null;const y=!0===a.isPointLight?r.customDistanceMaterial:r.customDepthMaterial;if(p=void 0!==y?y:!0===a.isPointLight?l:h,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const t=p.uuid,r=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let a=n[r];void 0===a&&(a=p.clone(),n[r]=a),p=a}return p.visible=i.visible,p.wireframe=i.wireframe,p.side=d===g?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:m[i.side],p.clipShadows=i.clipShadows,p.clippingPlanes=i.clippingPlanes,p.clipIntersection=i.clipIntersection,p.wireframeLinewidth=i.wireframeLinewidth,p.linewidth=i.linewidth,!0===a.isPointLight&&!0===p.isMeshDistanceMaterial&&(p.referencePosition.setFromMatrixPosition(a.matrixWorld),p.nearDistance=o,p.farDistance=s),p}function renderObject(n,a,o,s,h){if(!1===n.visible)return;if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&h===g)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=r.update(n),a=n.material;if(Array.isArray(a)){const r=i.groups;for(let l=0,c=r.length;l<c;l++){const c=r[l],d=a[c.materialIndex];if(d&&d.visible){const r=getDepthMaterial(n,0,d,s,o.near,o.far,h);t.renderBufferDirect(o,null,i,r,n,c)}}}else if(a.visible){const r=getDepthMaterial(n,0,a,s,o.near,o.far,h);t.renderBufferDirect(o,null,i,r,n,null)}}const l=n.children;for(let t=0,r=l.length;t<r;t++)renderObject(l[t],a,o,s,h)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(r,n,h){if(!1===B.enabled)return;if(!1===B.autoUpdate&&!1===B.needsUpdate)return;if(0===r.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),m=t.state;m.setBlending(x),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(let l=0,c=r.length;l<c;l++){const c=r[l],p=c.shadow;if(void 0===p){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;a.copy(p.mapSize);const y=p.getFrameExtents();if(a.multiply(y),o.copy(p.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(o.x=Math.floor(d/y.x),a.x=o.x*y.x,p.mapSize.x=o.x),a.y>d&&(o.y=Math.floor(d/y.y),a.y=o.y*y.y,p.mapSize.y=o.y)),null===p.map&&!p.isPointLightShadow&&this.type===g){const t={minFilter:Ee,magFilter:Ee,format:We};p.map=new WebGLRenderTarget(a.x,a.y,t),p.map.texture.name=c.name+".shadowMap",p.mapPass=new WebGLRenderTarget(a.x,a.y,t),p.camera.updateProjectionMatrix()}if(null===p.map){const t={minFilter:Me,magFilter:Me,format:We};p.map=new WebGLRenderTarget(a.x,a.y,t),p.map.texture.name=c.name+".shadowMap",p.camera.updateProjectionMatrix()}t.setRenderTarget(p.map),t.clear();const b=p.getViewportCount();for(let t=0;t<b;t++){const r=p.getViewport(t);s.set(o.x*r.x,o.y*r.y,o.x*r.z,o.y*r.w),m.viewport(s),p.updateMatrices(c,t),i=p.getFrustum(),renderObject(n,h,p.camera,c,this.type)}p.isPointLightShadow||this.type!==g||VSMPass(p,h),p.needsUpdate=!1}B.needsUpdate=!1,t.setRenderTarget(l,c,p)}}function WebGLState(t,r,n){const i=n.isWebGL2;const a=new function ColorBuffer(){let r=!1;const n=new Vector4;let i=null;const a=new Vector4(0,0,0,0);return{setMask:function(n){i===n||r||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){r=t},setClear:function(r,i,o,s,h){!0===h&&(r*=s,i*=s,o*=s),n.set(r,i,o,s),!1===a.equals(n)&&(t.clearColor(r,i,o,s),a.copy(n))},reset:function(){r=!1,i=null,a.set(-1,0,0,0)}}},o=new function DepthBuffer(){let r=!1,n=null,i=null,a=null;return{setTest:function(t){t?enable(2929):disable(2929)},setMask:function(i){n===i||r||(t.depthMask(i),n=i)},setFunc:function(r){if(i!==r){if(r)switch(r){case Q:t.depthFunc(512);break;case X:t.depthFunc(519);break;case Y:t.depthFunc(513);break;case J:t.depthFunc(515);break;case Z:t.depthFunc(514);break;case $:t.depthFunc(518);break;case ee:t.depthFunc(516);break;case te:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=r}},setLocked:function(t){r=t},setClear:function(r){a!==r&&(t.clearDepth(r),a=r)},reset:function(){r=!1,n=null,i=null,a=null}}},c=new function StencilBuffer(){let r=!1,n=null,i=null,a=null,o=null,s=null,h=null,l=null,c=null;return{setTest:function(t){r||(t?enable(2960):disable(2960))},setMask:function(i){n===i||r||(t.stencilMask(i),n=i)},setFunc:function(r,n,s){i===r&&a===n&&o===s||(t.stencilFunc(r,n,s),i=r,a=n,o=s)},setOp:function(r,n,i){s===r&&h===n&&l===i||(t.stencilOp(r,n,i),s=r,h=n,l=i)},setLocked:function(t){r=t},setClear:function(r){c!==r&&(t.clearStencil(r),c=r)},reset:function(){r=!1,n=null,i=null,a=null,o=null,s=null,h=null,l=null,c=null}}};let d={},p=null,m={},g=null,y=!1,M=null,_=null,re=null,ne=null,ie=null,ae=null,oe=null,se=!1,ue=null,he=null,le=null,ce=null,de=null;const fe=t.getParameter(35661);let pe=!1,me=0;const ge=t.getParameter(7938);-1!==ge.indexOf("WebGL")?(me=parseFloat(/^WebGL (\d)/.exec(ge)[1]),pe=me>=1):-1!==ge.indexOf("OpenGL ES")&&(me=parseFloat(/^OpenGL ES (\d)/.exec(ge)[1]),pe=me>=2);let ve=null,ye={};const be=t.getParameter(3088),we=t.getParameter(2978),Me=(new Vector4).fromArray(be),_e=(new Vector4).fromArray(we);function createTexture(r,n,i){const a=new Uint8Array(4),o=t.createTexture();t.bindTexture(r,o),t.texParameteri(r,10241,9728),t.texParameteri(r,10240,9728);for(let r=0;r<i;r++)t.texImage2D(n+r,0,6408,1,1,0,6408,5121,a);return o}const xe={};function enable(r){!0!==d[r]&&(t.enable(r),d[r]=!0)}function disable(r){!1!==d[r]&&(t.disable(r),d[r]=!1)}xe[3553]=createTexture(3553,3553,1),xe[34067]=createTexture(34067,34069,6),a.setClear(0,0,0,1),o.setClear(1),c.setClear(0),enable(2929),o.setFunc(J),setFlipSided(!1),setCullFace(h),enable(2884),setBlending(x);const Ae={[D]:32774,[P]:32778,[L]:32779};if(i)Ae[N]=32775,Ae[F]=32776;else{const t=r.get("EXT_blend_minmax");null!==t&&(Ae[N]=t.MIN_EXT,Ae[F]=t.MAX_EXT)}const Se={[I]:0,[k]:1,[O]:768,[z]:770,[q]:776,[G]:774,[j]:772,[U]:769,[V]:771,[W]:775,[H]:773};function setBlending(r,n,i,a,o,s,h,l){if(r!==x){if(!1===y&&(enable(3042),y=!0),r===T)o=o||n,s=s||i,h=h||a,n===_&&o===ie||(t.blendEquationSeparate(Ae[n],Ae[o]),_=n,ie=o),i===re&&a===ne&&s===ae&&h===oe||(t.blendFuncSeparate(Se[i],Se[a],Se[s],Se[h]),re=i,ne=a,ae=s,oe=h),M=r,se=null;else if(r!==M||l!==se){if(_===D&&ie===D||(t.blendEquation(32774),_=D,ie=D),l)switch(r){case A:t.blendFuncSeparate(1,771,1,771);break;case E:t.blendFunc(1,1);break;case B:t.blendFuncSeparate(0,0,769,771);break;case C:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",r)}else switch(r){case A:t.blendFuncSeparate(770,771,1,771);break;case E:t.blendFunc(770,1);break;case B:t.blendFunc(0,769);break;case C:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",r)}re=null,ne=null,ae=null,oe=null,M=r,se=l}}else!0===y&&(disable(3042),y=!1)}function setFlipSided(r){ue!==r&&(r?t.frontFace(2304):t.frontFace(2305),ue=r)}function setCullFace(r){r!==s?(enable(2884),r!==he&&(r===h?t.cullFace(1029):r===l?t.cullFace(1028):t.cullFace(1032))):disable(2884),he=r}function setPolygonOffset(r,n,i){r?(enable(32823),ce===n&&de===i||(t.polygonOffset(n,i),ce=n,de=i)):disable(32823)}function activeTexture(r){void 0===r&&(r=33984+fe-1),ve!==r&&(t.activeTexture(r),ve=r)}return{buffers:{color:a,depth:o,stencil:c},enable:enable,disable:disable,bindFramebuffer:function bindFramebuffer(r,n){return null===n&&null!==p&&(n=p),m[r]!==n&&(t.bindFramebuffer(r,n),m[r]=n,i&&(36009===r&&(m[36160]=n),36160===r&&(m[36009]=n)),!0)},bindXRFramebuffer:function bindXRFramebuffer(r){r!==p&&(t.bindFramebuffer(36160,r),p=r)},useProgram:function useProgram(r){return g!==r&&(t.useProgram(r),g=r,!0)},setBlending:setBlending,setMaterial:function setMaterial(t,r){t.side===w?disable(2884):enable(2884);let n=t.side===b;r&&(n=!n),setFlipSided(n),t.blending===A&&!1===t.transparent?setBlending(x):setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),a.setMask(t.colorWrite);const i=t.stencilWrite;c.setTest(i),i&&(c.setMask(t.stencilWriteMask),c.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),c.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?enable(32926):disable(32926)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function setLineWidth(r){r!==le&&(pe&&t.lineWidth(r),le=r)},setPolygonOffset:setPolygonOffset,setScissorTest:function setScissorTest(t){t?enable(3089):disable(3089)},activeTexture:activeTexture,bindTexture:function bindTexture(r,n){null===ve&&activeTexture();let i=ye[ve];void 0===i&&(i={type:void 0,texture:void 0},ye[ve]=i),i.type===r&&i.texture===n||(t.bindTexture(r,n||xe[r]),i.type=r,i.texture=n)},unbindTexture:function unbindTexture(){const r=ye[ve];void 0!==r&&void 0!==r.type&&(t.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)},compressedTexImage2D:function compressedTexImage2D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function texImage2D(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function texImage3D(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function scissor(r){!1===Me.equals(r)&&(t.scissor(r.x,r.y,r.z,r.w),Me.copy(r))},viewport:function viewport(r){!1===_e.equals(r)&&(t.viewport(r.x,r.y,r.z,r.w),_e.copy(r))},reset:function reset(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},ve=null,ye={},p=null,m={},g=null,y=!1,M=null,_=null,re=null,ne=null,ie=null,ae=null,oe=null,se=!1,ue=null,he=null,le=null,ce=null,de=null,Me.set(0,0,t.canvas.width,t.canvas.height),_e.set(0,0,t.canvas.width,t.canvas.height),a.reset(),o.reset(),c.reset()}}}function WebGLTextures(t,r,n,i,a,o,s){const h=a.isWebGL2,l=a.maxTextures,c=a.maxCubemapSize,d=a.maxTextureSize,p=a.maxSamples,m=new WeakMap;let g,y=!1;try{y="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function createCanvas(t,r){return y?new OffscreenCanvas(t,r):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function resizeImage(t,r,n,i){let a=1;if((t.width>i||t.height>i)&&(a=i/Math.max(t.width,t.height)),a<1||!0===r){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=r?floorPowerOfTwo:Math.floor,o=i(a*t.width),s=i(a*t.height);void 0===g&&(g=createCanvas(o,s));const h=n?createCanvas(o,s):g;h.width=o,h.height=s;return h.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),h}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function isPowerOfTwo$1(t){return isPowerOfTwo(t.width)&&isPowerOfTwo(t.height)}function textureNeedsGenerateMipmaps(t,r){return t.generateMipmaps&&r&&t.minFilter!==Me&&t.minFilter!==Ee}function generateMipmap(r,n,a,o,s=1){t.generateMipmap(r);i.get(n).__maxMipLevel=Math.log2(Math.max(a,o,s))}function getInternalFormat(n,i,a){if(!1===h)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===a&&(o=33326),5131===a&&(o=33325),5121===a&&(o=33321)),6407===i&&(5126===a&&(o=34837),5131===a&&(o=34843),5121===a&&(o=32849)),6408===i&&(5126===a&&(o=34836),5131===a&&(o=34842),5121===a&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||r.get("EXT_color_buffer_float"),o}function filterFallback(t){return t===Me||t===_e||t===Ae?9728:9729}function onTextureDispose(r){const n=r.target;n.removeEventListener("dispose",onTextureDispose),function deallocateTexture(r){const n=i.get(r);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(r)}(n),n.isVideoTexture&&m.delete(n),s.memory.textures--}function onRenderTargetDispose(r){const n=r.target;n.removeEventListener("dispose",onRenderTargetDispose),function deallocateRenderTarget(r){const n=r.texture,a=i.get(r),o=i.get(n);if(!r)return;void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--);r.depthTexture&&r.depthTexture.dispose();if(r.isWebGLCubeRenderTarget)for(let r=0;r<6;r++)t.deleteFramebuffer(a.__webglFramebuffer[r]),a.__webglDepthbuffer&&t.deleteRenderbuffer(a.__webglDepthbuffer[r]);else t.deleteFramebuffer(a.__webglFramebuffer),a.__webglDepthbuffer&&t.deleteRenderbuffer(a.__webglDepthbuffer),a.__webglMultisampledFramebuffer&&t.deleteFramebuffer(a.__webglMultisampledFramebuffer),a.__webglColorRenderbuffer&&t.deleteRenderbuffer(a.__webglColorRenderbuffer),a.__webglDepthRenderbuffer&&t.deleteRenderbuffer(a.__webglDepthRenderbuffer);if(r.isWebGLMultipleRenderTargets)for(let r=0,a=n.length;r<a;r++){const a=i.get(n[r]);a.__webglTexture&&(t.deleteTexture(a.__webglTexture),s.memory.textures--),i.remove(n[r])}i.remove(n),i.remove(r)}(n)}let b=0;function setTexture2D(t,r){const a=i.get(t);if(t.isVideoTexture&&function updateVideoTexture(t){const r=s.render.frame;m.get(t)!==r&&(m.set(t,r),t.update())}(t),t.version>0&&a.__version!==t.version){const n=t.image;if(void 0===n);else if(!1!==n.complete)return void uploadTexture(a,t,r)}n.activeTexture(33984+r),n.bindTexture(3553,a.__webglTexture)}function setTextureCube(r,a){const s=i.get(r);r.version>0&&s.__version!==r.version?function uploadCubeTexture(r,i,a){if(6!==i.image.length)return;initTexture(r,i),n.activeTexture(33984+a),n.bindTexture(34067,r.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const s=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,d=[];for(let t=0;t<6;t++)d[t]=s||l?l?i.image[t].image:i.image[t]:resizeImage(i.image[t],!1,!0,c);const p=d[0],m=isPowerOfTwo$1(p)||h,g=o.convert(i.format),y=o.convert(i.type),b=getInternalFormat(i.internalFormat,g,y);let w;if(setTextureParameters(34067,i,m),s){for(let t=0;t<6;t++){w=d[t].mipmaps;for(let r=0;r<w.length;r++){const a=w[r];i.format!==We&&i.format!==Ge?null!==g?n.compressedTexImage2D(34069+t,r,b,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,r,b,a.width,a.height,0,g,y,a.data)}}r.__maxMipLevel=w.length-1}else{w=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,b,d[t].width,d[t].height,0,g,y,d[t].data);for(let r=0;r<w.length;r++){const i=w[r].image[t].image;n.texImage2D(34069+t,r+1,b,i.width,i.height,0,g,y,i.data)}}else{n.texImage2D(34069+t,0,b,g,y,d[t]);for(let r=0;r<w.length;r++){const i=w[r];n.texImage2D(34069+t,r+1,b,g,y,i.image[t])}}r.__maxMipLevel=w.length}textureNeedsGenerateMipmaps(i,m)&&generateMipmap(34067,i,p.width,p.height);r.__version=i.version,i.onUpdate&&i.onUpdate(i)}(s,r,a):(n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture))}const w={[ye]:10497,[be]:33071,[we]:33648},M={[Me]:9728,[_e]:9984,[Ae]:9986,[Ee]:9729,[Be]:9985,[Te]:9987};function setTextureParameters(n,o,s){if(s?(t.texParameteri(n,10242,w[o.wrapS]),t.texParameteri(n,10243,w[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,w[o.wrapR]),t.texParameteri(n,10240,M[o.magFilter]),t.texParameteri(n,10241,M[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===be&&o.wrapT===be||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,filterFallback(o.magFilter)),t.texParameteri(n,10241,filterFallback(o.minFilter)),o.minFilter!==Me&&o.minFilter!==Ee&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===r.has("EXT_texture_filter_anisotropic")){const s=r.get("EXT_texture_filter_anisotropic");if(o.type===ke&&!1===r.has("OES_texture_float_linear"))return;if(!1===h&&o.type===Oe&&!1===r.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,a.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function initTexture(r,n){void 0===r.__webglInit&&(r.__webglInit=!0,n.addEventListener("dispose",onTextureDispose),r.__webglTexture=t.createTexture(),s.memory.textures++)}function uploadTexture(r,i,a){let s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),initTexture(r,i),n.activeTexture(33984+a),n.bindTexture(s,r.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const l=function textureNeedsPowerOfTwo(t){return!h&&(t.wrapS!==be||t.wrapT!==be||t.minFilter!==Me&&t.minFilter!==Ee)}(i)&&!1===isPowerOfTwo$1(i.image),c=resizeImage(i.image,l,!1,d),p=isPowerOfTwo$1(c)||h,m=o.convert(i.format);let g,y=o.convert(i.type),b=getInternalFormat(i.internalFormat,m,y);setTextureParameters(s,i,p);const w=i.mipmaps;if(i.isDepthTexture)b=6402,h?b=i.type===ke?36012:i.type===Ie?33190:i.type===je?35056:33189:i.type===ke&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Xe&&6402===b&&i.type!==Ne&&i.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ne,y=o.convert(i.type)),i.format===Ye&&6402===b&&(b=34041,i.type!==je&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=je,y=o.convert(i.type))),n.texImage2D(3553,0,b,c.width,c.height,0,m,y,null);else if(i.isDataTexture)if(w.length>0&&p){for(let t=0,r=w.length;t<r;t++)g=w[t],n.texImage2D(3553,t,b,g.width,g.height,0,m,y,g.data);i.generateMipmaps=!1,r.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,c.width,c.height,0,m,y,c.data),r.__maxMipLevel=0;else if(i.isCompressedTexture){for(let t=0,r=w.length;t<r;t++)g=w[t],i.format!==We&&i.format!==Ge?null!==m?n.compressedTexImage2D(3553,t,b,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,b,g.width,g.height,0,m,y,g.data);r.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,b,c.width,c.height,c.depth,0,m,y,c.data),r.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,b,c.width,c.height,c.depth,0,m,y,c.data),r.__maxMipLevel=0;else if(w.length>0&&p){for(let t=0,r=w.length;t<r;t++)g=w[t],n.texImage2D(3553,t,b,m,y,g);i.generateMipmaps=!1,r.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,m,y,c),r.__maxMipLevel=0;textureNeedsGenerateMipmaps(i,p)&&generateMipmap(s,i,c.width,c.height),r.__version=i.version,i.onUpdate&&i.onUpdate(i)}function setupFrameBufferTexture(r,a,s,h,l){const c=o.convert(s.format),d=o.convert(s.type),p=getInternalFormat(s.internalFormat,c,d);32879===l||35866===l?n.texImage3D(l,0,p,a.width,a.height,a.depth,0,c,d,null):n.texImage2D(l,0,p,a.width,a.height,0,c,d,null),n.bindFramebuffer(36160,r),t.framebufferTexture2D(36160,h,l,i.get(s).__webglTexture,0),n.bindFramebuffer(36160,null)}function setupRenderBufferStorage(r,n,i){if(t.bindRenderbuffer(36161,r),n.depthBuffer&&!n.stencilBuffer){let a=33189;if(i){const r=n.depthTexture;r&&r.isDepthTexture&&(r.type===ke?a=36012:r.type===Ie&&(a=33190));const i=getRenderTargetSamples(n);t.renderbufferStorageMultisample(36161,i,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,r)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const r=getRenderTargetSamples(n);t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,r)}else{const r=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,a=o.convert(r.format),s=o.convert(r.type),h=getInternalFormat(r.internalFormat,a,s);if(i){const r=getRenderTargetSamples(n);t.renderbufferStorageMultisample(36161,r,h,n.width,n.height)}else t.renderbufferStorage(36161,h,n.width,n.height)}t.bindRenderbuffer(36161,null)}function setupDepthRenderbuffer(r){const a=i.get(r),o=!0===r.isWebGLCubeRenderTarget;if(r.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function setupDepthTexture(r,a){if(a&&a.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,r),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),setTexture2D(a.depthTexture,0);const o=i.get(a.depthTexture).__webglTexture;if(a.depthTexture.format===Xe)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(a.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}(a.__webglFramebuffer,r)}else if(o){a.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,a.__webglFramebuffer[i]),a.__webglDepthbuffer[i]=t.createRenderbuffer(),setupRenderBufferStorage(a.__webglDepthbuffer[i],r,!1)}else n.bindFramebuffer(36160,a.__webglFramebuffer),a.__webglDepthbuffer=t.createRenderbuffer(),setupRenderBufferStorage(a.__webglDepthbuffer,r,!1);n.bindFramebuffer(36160,null)}function getRenderTargetSamples(t){return h&&t.isWebGLMultisampleRenderTarget?Math.min(p,t.samples):0}let _=!1,x=!1;this.allocateTextureUnit=function allocateTextureUnit(){const t=b;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),b+=1,t},this.resetTextureUnits=function resetTextureUnits(){b=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function setTexture2DArray(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?uploadTexture(a,t,r):(n.activeTexture(33984+r),n.bindTexture(35866,a.__webglTexture))},this.setTexture3D=function setTexture3D(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?uploadTexture(a,t,r):(n.activeTexture(33984+r),n.bindTexture(32879,a.__webglTexture))},this.setTextureCube=setTextureCube,this.setupRenderTarget=function setupRenderTarget(r){const l=r.texture,c=i.get(r),d=i.get(l);r.addEventListener("dispose",onRenderTargetDispose),!0!==r.isWebGLMultipleRenderTargets&&(d.__webglTexture=t.createTexture(),d.__version=l.version,s.memory.textures++);const p=!0===r.isWebGLCubeRenderTarget,m=!0===r.isWebGLMultipleRenderTargets,g=!0===r.isWebGLMultisampleRenderTarget,y=l.isDataTexture3D||l.isDataTexture2DArray,b=isPowerOfTwo$1(r)||h;if(!h||l.format!==Ge||l.type!==ke&&l.type!==Oe||(l.format=We,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),p){c.__webglFramebuffer=[];for(let r=0;r<6;r++)c.__webglFramebuffer[r]=t.createFramebuffer()}else if(c.__webglFramebuffer=t.createFramebuffer(),m)if(a.drawBuffers){const n=r.texture;for(let r=0,a=n.length;r<a;r++){const a=i.get(n[r]);void 0===a.__webglTexture&&(a.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(g)if(h){c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const i=o.convert(l.format),a=o.convert(l.type),s=getInternalFormat(l.internalFormat,i,a),h=getRenderTargetSamples(r);t.renderbufferStorageMultisample(36161,h,s,r.width,r.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),r.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),setupRenderBufferStorage(c.__webglDepthRenderbuffer,r,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){n.bindTexture(34067,d.__webglTexture),setTextureParameters(34067,l,b);for(let t=0;t<6;t++)setupFrameBufferTexture(c.__webglFramebuffer[t],r,l,36064,34069+t);textureNeedsGenerateMipmaps(l,b)&&generateMipmap(34067,l,r.width,r.height),n.bindTexture(34067,null)}else if(m){const t=r.texture;for(let a=0,o=t.length;a<o;a++){const o=t[a],s=i.get(o);n.bindTexture(3553,s.__webglTexture),setTextureParameters(3553,o,b),setupFrameBufferTexture(c.__webglFramebuffer,r,o,36064+a,3553),textureNeedsGenerateMipmaps(o,b)&&generateMipmap(3553,o,r.width,r.height)}n.bindTexture(3553,null)}else{let t=3553;if(y)if(h){t=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,d.__webglTexture),setTextureParameters(t,l,b),setupFrameBufferTexture(c.__webglFramebuffer,r,l,36064,t),textureNeedsGenerateMipmaps(l,b)&&generateMipmap(t,l,r.width,r.height,r.depth),n.bindTexture(t,null)}r.depthBuffer&&setupDepthRenderbuffer(r)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(t){const r=isPowerOfTwo$1(t)||h,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=a.length;o<s;o++){const s=a[o];if(textureNeedsGenerateMipmaps(s,r)){const r=t.isWebGLCubeRenderTarget?34067:3553,a=i.get(s).__webglTexture;n.bindTexture(r,a),generateMipmap(r,s,t.width,t.height),n.bindTexture(r,null)}}},this.updateMultisampleRenderTarget=function updateMultisampleRenderTarget(r){if(r.isWebGLMultisampleRenderTarget)if(h){const a=r.width,o=r.height;let s=16384;r.depthBuffer&&(s|=256),r.stencilBuffer&&(s|=1024);const h=i.get(r);n.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,h.__webglFramebuffer),t.blitFramebuffer(0,0,a,o,0,0,a,o,s,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function safeSetTexture2D(t,r){t&&t.isWebGLRenderTarget&&(!1===_&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),_=!0),t=t.texture),setTexture2D(t,r)},this.safeSetTextureCube=function safeSetTextureCube(t,r){t&&t.isWebGLCubeRenderTarget&&(!1===x&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),x=!0),t=t.texture),setTextureCube(t,r)}}function WebGLUtils(t,r,n){const i=n.isWebGL2;return{convert:function convert(t){let n;if(t===Pe)return 5121;if(t===Ue)return 32819;if(t===ze)return 32820;if(t===Ve)return 33635;if(t===Re)return 5120;if(t===Le)return 5122;if(t===Ne)return 5123;if(t===Fe)return 5124;if(t===Ie)return 5125;if(t===ke)return 5126;if(t===Oe)return i?5131:(n=r.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===He)return 6406;if(t===Ge)return 6407;if(t===We)return 6408;if(t===qe)return 6409;if(t===Ke)return 6410;if(t===Xe)return 6402;if(t===Ye)return 34041;if(t===Je)return 6403;if(t===Ze)return 36244;if(t===$e)return 33319;if(t===et)return 33320;if(t===tt)return 36248;if(t===rt)return 36249;if(t===nt||t===it||t===at||t===ot){if(n=r.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===nt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===it)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===at)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ot)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===st||t===ut||t===ht||t===ct){if(n=r.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===st)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ut)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ht)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ct)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===dt)return n=r.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===pt||t===mt)&&(n=r.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===pt)return n.COMPRESSED_RGB8_ETC2;if(t===mt)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===vt||t===yt||t===bt||t===wt||t===Mt||t===_t||t===xt||t===At||t===St||t===Et||t===Bt||t===Ct||t===Tt||t===Dt||t===Rt||t===Lt||t===Nt||t===Ft||t===It||t===kt||t===Ot||t===Ut||t===zt||t===Vt||t===jt||t===Ht||t===Gt||t===Wt?(n=r.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===Pt?(n=r.get("EXT_texture_compression_bptc"),null!==n?t:null):t===je?i?34042:(n=r.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class ArrayCamera extends PerspectiveCamera{constructor(t=[]){super(),this.cameras=t}}ArrayCamera.prototype.isArrayCamera=!0;class Group extends Object3D{constructor(t){super(t),this.type="Group"}}Group.prototype.isGroup=!0;const xa={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,r,n){let i=null,a=null,o=null;const s=this._targetRay,h=this._grip,l=this._hand;if(t&&"visible-blurred"!==r.session.visibilityState)if(null!==s&&(i=r.getPose(t.targetRaySpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(xa))),l&&t.hand){o=!0;for(const i of t.hand.values()){const t=r.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const t=new Group;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[i.jointName]=t,l.add(t)}const a=l.joints[i.jointName];null!==t&&(a.matrix.fromArray(t.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=t.radius),a.visible=null!==t}const i=l.joints["index-finger-tip"],a=l.joints["thumb-tip"],s=i.position.distanceTo(a.position),h=.02,c=.005;l.inputState.pinching&&s>h+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=h-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==h&&t.gripSpace&&(a=r.getPose(t.gripSpace,n),null!==a&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1));return null!==s&&(s.visible=null!==i),null!==h&&(h.visible=null!==a),null!==l&&(l.visible=null!==o),this}}class WebXRManager extends EventDispatcher{constructor(t,r){super();const n=this,i=t.state;let a=null,o=1,s=null,h="local-floor",l=null,c=null,d=null,p=null,m=null;const g=[],y=new Map,b=new PerspectiveCamera;b.layers.enable(1),b.viewport=new Vector4;const w=new PerspectiveCamera;w.layers.enable(2),w.viewport=new Vector4;const M=[b,w],_=new ArrayCamera;_.layers.enable(1),_.layers.enable(2);let x=null,A=null;function onSessionEvent(t){const r=y.get(t.inputSource);r&&r.dispatchEvent({type:t.type,data:t.inputSource})}function onSessionEnd(){y.forEach((function(t,r){t.disconnect(r)})),y.clear(),x=null,A=null,i.bindXRFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),T.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(t){const r=a.inputSources;for(let t=0;t<g.length;t++)y.set(r[t],g[t]);for(let r=0;r<t.removed.length;r++){const n=t.removed[r],i=y.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),y.delete(n))}for(let r=0;r<t.added.length;r++){const n=t.added[r],i=y.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let r=g[t];return void 0===r&&(r=new WebXRController,g[t]=r),r.getTargetRaySpace()},this.getControllerGrip=function(t){let r=g[t];return void 0===r&&(r=new WebXRController,g[t]=r),r.getGripSpace()},this.getHand=function(t){let r=g[t];return void 0===r&&(r=new WebXRController,g[t]=r),r.getHandSpace()},this.setFramebufferScaleFactor=function(t){o=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){h=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return a},this.setSession=async function(t){if(a=t,null!==a){a.addEventListener("select",onSessionEvent),a.addEventListener("selectstart",onSessionEvent),a.addEventListener("selectend",onSessionEvent),a.addEventListener("squeeze",onSessionEvent),a.addEventListener("squeezestart",onSessionEvent),a.addEventListener("squeezeend",onSessionEvent),a.addEventListener("end",onSessionEnd),a.addEventListener("inputsourceschange",onInputSourcesChange);const t=r.getContextAttributes();if(!0!==t.xrCompatible&&await r.makeXRCompatible(),void 0===a.renderState.layers){const n={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(a,r,n),a.updateRenderState({baseLayer:m})}else{let n=0;if(t.antialias){const n={antialias:!0,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(a,r,n),a.updateRenderState({layers:[m]})}else{t.depth&&(n=t.stencil?34041:6402);const i={colorFormat:t.alpha?6408:6407,depthFormat:n,scaleFactor:o};c=new XRWebGLBinding(a,r),p=c.createProjectionLayer(i),d=r.createFramebuffer(),a.updateRenderState({layers:[p]})}}s=await a.requestReferenceSpace(h),T.setContext(a),T.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const E=new Vector3,B=new Vector3;function updateCamera(t,r){null===r?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(r.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===a)return;_.near=w.near=b.near=t.near,_.far=w.far=b.far=t.far,x===_.near&&A===_.far||(a.updateRenderState({depthNear:_.near,depthFar:_.far}),x=_.near,A=_.far);const r=t.parent,n=_.cameras;updateCamera(_,r);for(let t=0;t<n.length;t++)updateCamera(n[t],r);_.matrixWorld.decompose(_.position,_.quaternion,_.scale),t.position.copy(_.position),t.quaternion.copy(_.quaternion),t.scale.copy(_.scale),t.matrix.copy(_.matrix),t.matrixWorld.copy(_.matrixWorld);const i=t.children;for(let t=0,r=i.length;t<r;t++)i[t].updateMatrixWorld(!0);2===n.length?function setProjectionFromUnion(t,r,n){E.setFromMatrixPosition(r.matrixWorld),B.setFromMatrixPosition(n.matrixWorld);const i=E.distanceTo(B),a=r.projectionMatrix.elements,o=n.projectionMatrix.elements,s=a[14]/(a[10]-1),h=a[14]/(a[10]+1),l=(a[9]+1)/a[5],c=(a[9]-1)/a[5],d=(a[8]-1)/a[0],p=(o[8]+1)/o[0],m=s*d,g=s*p,y=i/(-d+p),b=y*-d;r.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(b),t.translateZ(y),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const w=s+y,M=h+y,_=m-b,x=g+(i-b),A=l*h/M*w,C=c*h/M*w;t.projectionMatrix.makePerspective(_,x,A,C,w,M)}(_,b,w):_.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return _},this.getFoveation=function(){return null!==p?p.fixedFoveation:null!==m?m.fixedFoveation:void 0},this.setFoveation=function(t){null!==p&&(p.fixedFoveation=t),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=t)};let C=null;const T=new WebGLAnimation;T.setAnimationLoop((function onAnimationFrame(t,n){if(l=n.getViewerPose(s),null!==l){const t=l.views;null!==m&&i.bindXRFramebuffer(m.framebuffer);let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let a=0;a<t.length;a++){const o=t[a];let s=null;if(null!==m)s=m.getViewport(o);else{const t=c.getViewSubImage(p,o);i.bindXRFramebuffer(d),void 0!==t.depthStencilTexture&&r.framebufferTexture2D(36160,36096,3553,t.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,t.colorTexture,0),s=t.viewport}const h=M[a];h.matrix.fromArray(o.transform.matrix),h.projectionMatrix.fromArray(o.projectionMatrix),h.viewport.set(s.x,s.y,s.width,s.height),0===a&&_.matrix.copy(h.matrix),!0===n&&_.cameras.push(h)}}const o=a.inputSources;for(let t=0;t<g.length;t++){const r=g[t],i=o[t];r.update(i,n,s)}C&&C(t,n)})),this.setAnimationLoop=function(t){C=t},this.dispose=function(){}}}function WebGLMaterials(t){function refreshUniformsCommon(r,n){r.opacity.value=n.opacity,n.color&&r.diffuse.value.copy(n.color),n.emissive&&r.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(r.map.value=n.map),n.alphaMap&&(r.alphaMap.value=n.alphaMap),n.specularMap&&(r.specularMap.value=n.specularMap);const i=t.get(n).envMap;if(i){r.envMap.value=i,r.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,r.reflectivity.value=n.reflectivity,r.refractionRatio.value=n.refractionRatio;const a=t.get(i).__maxMipLevel;void 0!==a&&(r.maxMipLevel.value=a)}let a,o;n.lightMap&&(r.lightMap.value=n.lightMap,r.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(r.aoMap.value=n.aoMap,r.aoMapIntensity.value=n.aoMapIntensity),n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.roughnessMap?a=n.roughnessMap:n.metalnessMap?a=n.metalnessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap?a=n.emissiveMap:n.clearcoatMap?a=n.clearcoatMap:n.clearcoatNormalMap?a=n.clearcoatNormalMap:n.clearcoatRoughnessMap?a=n.clearcoatRoughnessMap:n.specularIntensityMap?a=n.specularIntensityMap:n.specularTintMap&&(a=n.specularTintMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),r.uvTransform.value.copy(a.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),r.uv2Transform.value.copy(o.matrix))}function refreshUniformsStandard(r,n){r.roughness.value=n.roughness,r.metalness.value=n.metalness,n.roughnessMap&&(r.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(r.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(r.emissiveMap.value=n.emissiveMap),n.bumpMap&&(r.bumpMap.value=n.bumpMap,r.bumpScale.value=n.bumpScale,n.side===b&&(r.bumpScale.value*=-1)),n.normalMap&&(r.normalMap.value=n.normalMap,r.normalScale.value.copy(n.normalScale),n.side===b&&r.normalScale.value.negate()),n.displacementMap&&(r.displacementMap.value=n.displacementMap,r.displacementScale.value=n.displacementScale,r.displacementBias.value=n.displacementBias);t.get(n).envMap&&(r.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function refreshFogUniforms(t,r){t.fogColor.value.copy(r.color),r.isFog?(t.fogNear.value=r.near,t.fogFar.value=r.far):r.isFogExp2&&(t.fogDensity.value=r.density)},refreshMaterialUniforms:function refreshMaterialUniforms(t,r,n,i,a){r.isMeshBasicMaterial?refreshUniformsCommon(t,r):r.isMeshLambertMaterial?(refreshUniformsCommon(t,r),function refreshUniformsLambert(t,r){r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap)}(t,r)):r.isMeshToonMaterial?(refreshUniformsCommon(t,r),function refreshUniformsToon(t,r){r.gradientMap&&(t.gradientMap.value=r.gradientMap);r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap);r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale,r.side===b&&(t.bumpScale.value*=-1));r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale),r.side===b&&t.normalScale.value.negate());r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}(t,r)):r.isMeshPhongMaterial?(refreshUniformsCommon(t,r),function refreshUniformsPhong(t,r){t.specular.value.copy(r.specular),t.shininess.value=Math.max(r.shininess,1e-4),r.emissiveMap&&(t.emissiveMap.value=r.emissiveMap);r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale,r.side===b&&(t.bumpScale.value*=-1));r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale),r.side===b&&t.normalScale.value.negate());r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}(t,r)):r.isMeshStandardMaterial?(refreshUniformsCommon(t,r),r.isMeshPhysicalMaterial?function refreshUniformsPhysical(t,r,n){refreshUniformsStandard(t,r),t.reflectivity.value=r.reflectivity,t.clearcoat.value=r.clearcoat,t.clearcoatRoughness.value=r.clearcoatRoughness,r.sheen&&t.sheen.value.copy(r.sheen);r.clearcoatMap&&(t.clearcoatMap.value=r.clearcoatMap);r.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=r.clearcoatRoughnessMap);r.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(r.clearcoatNormalScale),t.clearcoatNormalMap.value=r.clearcoatNormalMap,r.side===b&&t.clearcoatNormalScale.value.negate());t.transmission.value=r.transmission,r.transmissionMap&&(t.transmissionMap.value=r.transmissionMap);r.transmission>0&&(t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height));t.thickness.value=r.thickness,r.thicknessMap&&(t.thicknessMap.value=r.thicknessMap);t.attenuationDistance.value=r.attenuationDistance,t.attenuationTint.value.copy(r.attenuationTint),t.specularIntensity.value=r.specularIntensity,t.specularTint.value.copy(r.specularTint),r.specularIntensityMap&&(t.specularIntensityMap.value=r.specularIntensityMap);r.specularTintMap&&(t.specularTintMap.value=r.specularTintMap)}(t,r,a):refreshUniformsStandard(t,r)):r.isMeshMatcapMaterial?(refreshUniformsCommon(t,r),function refreshUniformsMatcap(t,r){r.matcap&&(t.matcap.value=r.matcap);r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale,r.side===b&&(t.bumpScale.value*=-1));r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale),r.side===b&&t.normalScale.value.negate());r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}(t,r)):r.isMeshDepthMaterial?(refreshUniformsCommon(t,r),function refreshUniformsDepth(t,r){r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(refreshUniformsCommon(t,r),function refreshUniformsDistance(t,r){r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias);t.referencePosition.value.copy(r.referencePosition),t.nearDistance.value=r.nearDistance,t.farDistance.value=r.farDistance}(t,r)):r.isMeshNormalMaterial?(refreshUniformsCommon(t,r),function refreshUniformsNormal(t,r){r.bumpMap&&(t.bumpMap.value=r.bumpMap,t.bumpScale.value=r.bumpScale,r.side===b&&(t.bumpScale.value*=-1));r.normalMap&&(t.normalMap.value=r.normalMap,t.normalScale.value.copy(r.normalScale),r.side===b&&t.normalScale.value.negate());r.displacementMap&&(t.displacementMap.value=r.displacementMap,t.displacementScale.value=r.displacementScale,t.displacementBias.value=r.displacementBias)}(t,r)):r.isLineBasicMaterial?(!function refreshUniformsLine(t,r){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity}(t,r),r.isLineDashedMaterial&&function refreshUniformsDash(t,r){t.dashSize.value=r.dashSize,t.totalSize.value=r.dashSize+r.gapSize,t.scale.value=r.scale}(t,r)):r.isPointsMaterial?function refreshUniformsPoints(t,r,n,i){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity,t.size.value=r.size*n,t.scale.value=.5*i,r.map&&(t.map.value=r.map);r.alphaMap&&(t.alphaMap.value=r.alphaMap);let a;r.map?a=r.map:r.alphaMap&&(a=r.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),t.uvTransform.value.copy(a.matrix))}(t,r,n,i):r.isSpriteMaterial?function refreshUniformsSprites(t,r){t.diffuse.value.copy(r.color),t.opacity.value=r.opacity,t.rotation.value=r.rotation,r.map&&(t.map.value=r.map);r.alphaMap&&(t.alphaMap.value=r.alphaMap);let n;r.map?n=r.map:r.alphaMap&&(n=r.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function WebGLRenderer(t={}){const r={current:+new Date,delta:2,update(){let t=+new Date,r=(t-this.current)/(1e3/60);this.current=t,this.delta=r}},n=void 0!==t.canvas?t.canvas:function createCanvasElement(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}(),i=void 0!==t.context?t.context:null,a=void 0!==t.alpha&&t.alpha,o=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,h=void 0!==t.antialias&&t.antialias,l=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,d=void 0!==t.powerPreference?t.powerPreference:"default",p=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let m=null,g=null;const M=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=sr,this.physicallyCorrectLights=!1,this.toneMapping=ae,this.toneMappingExposure=1;const x=this;let A=!1,E=0,B=0,C=null,T=-1,D=null;const P=new Vector4,L=new Vector4;let N=null,F=n.width,I=n.height,k=1,O=null,U=null;const z=new Vector4(0,0,F,I),V=new Vector4(0,0,F,I);let j=!1;const H=[],G=new Frustum;let W=!1,q=!1,Q=null;const X=new Matrix4,Y=new Vector3,J={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===C?k:1}let Z,$,ee,te,re,ne,ie,oe,se,ue,he,le,ce,de,fe,pe,me,ge,ve,ye,we,_e,xe,Ae=i;function getContext(t,r){for(let i=0;i<t.length;i++){const a=t[i],o=n.getContext(a,r);if(null!==o)return o}return null}try{const t={alpha:a,depth:o,stencil:s,antialias:h,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:p};if(n.addEventListener("webglcontextlost",onContextLost,!1),n.addEventListener("webglcontextrestored",onContextRestore,!1),null===Ae){const r=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&r.shift(),Ae=getContext(r,t),null===Ae)throw getContext(r)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ae.getShaderPrecisionFormat&&(Ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function initGLContext(){Z=new WebGLExtensions(Ae),$=new WebGLCapabilities(Ae,Z,t),Z.init($),_e=new WebGLUtils(Ae,Z,$),ee=new WebGLState(Ae,Z,$),H[0]=1029,te=new WebGLInfo(Ae),re=new WebGLProperties,ne=new WebGLTextures(Ae,Z,ee,re,$,_e,te),ie=new WebGLCubeMaps(x),oe=new WebGLCubeUVMaps(x),se=new WebGLAttributes(Ae,$),xe=new WebGLBindingStates(Ae,Z,se,$),ue=new WebGLGeometries(Ae,se,te,xe),he=new WebGLObjects(Ae,ue,se,te),ve=new WebGLMorphtargets(Ae),pe=new WebGLClipping(re),le=new WebGLPrograms(x,ie,oe,Z,$,xe,pe),ce=new WebGLMaterials(re),de=new WebGLRenderLists(re),fe=new WebGLRenderStates(Z,$),ge=new WebGLBackground(x,ie,ee,he,l),me=new WebGLShadowMap(x,he,$),ye=new WebGLBufferRenderer(Ae,Z,te,$),we=new WebGLIndexedBufferRenderer(Ae,Z,te,$),te.programs=le.programs,x.capabilities=$,x.extensions=Z,x.properties=re,x.renderLists=de,x.shadowMap=me,x.state=ee,x.info=te}initGLContext();const Se=new WebXRManager(x,Ae);function onContextLost(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const t=te.autoReset,r=me.enabled,n=me.autoUpdate,i=me.needsUpdate,a=me.type;initGLContext(),te.autoReset=t,me.enabled=r,me.autoUpdate=n,me.needsUpdate=i,me.type=a}function onMaterialDispose(t){const r=t.target;r.removeEventListener("dispose",onMaterialDispose),function deallocateMaterial(t){(function releaseMaterialProgramReferences(t){const r=re.get(t).programs;void 0!==r&&r.forEach((function(t){le.releaseProgram(t)}))})(t),re.remove(t)}(r)}this.xr=Se,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){const t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(t){void 0!==t&&(k=t,this.setSize(F,I,!1))},this.getSize=function(t){return t.set(F,I)},this.setSize=function(t,r,i){Se.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(F=t,I=r,n.width=Math.floor(t*k),n.height=Math.floor(r*k),!1!==i&&(n.style.width=t+"px",n.style.height=r+"px"),this.setViewport(0,0,t,r))},this.getDrawingBufferSize=function(t){return t.set(F*k,I*k).floor()},this.setDrawingBufferSize=function(t,r,i){F=t,I=r,k=i,n.width=Math.floor(t*i),n.height=Math.floor(r*i),this.setViewport(0,0,t,r)},this.getCurrentViewport=function(t){return t.copy(P)},this.getViewport=function(t){return t.copy(z)},this.setViewport=function(t,r,n,i){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,r,n,i),ee.viewport(P.copy(z).multiplyScalar(k).floor())},this.getScissor=function(t){return t.copy(V)},this.setScissor=function(t,r,n,i){t.isVector4?V.set(t.x,t.y,t.z,t.w):V.set(t,r,n,i),ee.scissor(L.copy(V).multiplyScalar(k).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(t){ee.setScissorTest(j=t)},this.setOpaqueSort=function(t){O=t},this.setTransparentSort=function(t){U=t},this.getClearColor=function(t){return t.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(t,r,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===r||r)&&(i|=256),(void 0===n||n)&&(i|=1024),Ae.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",onContextLost,!1),n.removeEventListener("webglcontextrestored",onContextRestore,!1),de.dispose(),fe.dispose(),re.dispose(),ie.dispose(),oe.dispose(),he.dispose(),xe.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",onXRSessionStart),Se.removeEventListener("sessionend",onXRSessionEnd),Q&&(Q.dispose(),Q=null),Be.stop()},this.renderBufferImmediate=function(t,r){xe.initAttributes();const n=re.get(t);t.hasPositions&&!n.position&&(n.position=Ae.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Ae.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Ae.createBuffer()),t.hasColors&&!n.color&&(n.color=Ae.createBuffer());const i=r.getAttributes();t.hasPositions&&(Ae.bindBuffer(34962,n.position),Ae.bufferData(34962,t.positionArray,35048),xe.enableAttribute(i.position),Ae.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(Ae.bindBuffer(34962,n.normal),Ae.bufferData(34962,t.normalArray,35048),xe.enableAttribute(i.normal),Ae.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(Ae.bindBuffer(34962,n.uv),Ae.bufferData(34962,t.uvArray,35048),xe.enableAttribute(i.uv),Ae.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(Ae.bindBuffer(34962,n.color),Ae.bufferData(34962,t.colorArray,35048),xe.enableAttribute(i.color),Ae.vertexAttribPointer(i.color,3,5126,!1,0,0)),xe.disableUnusedAttributes(),Ae.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,r,n,i,a,o){null===r&&(r=J);const s=a.isMesh&&a.matrixWorld.determinant()<0,h=setProgram(t,r,i,a);ee.setMaterial(i,s);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let d,p=1;!0===i.wireframe&&(l=ue.getWireframeAttribute(n),p=2),void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ve.update(a,n,i,h),xe.setup(a,i,h,n,l);let m=ye;null!==l&&(d=se.get(l),m=we,m.setIndex(d));const g=null!==l?l.count:c.count,y=n.drawRange.start*p,b=n.drawRange.count*p,w=null!==o?o.start*p:0,M=null!==o?o.count*p:1/0,_=Math.max(y,w),x=Math.min(g,y+b,w+M)-1,A=Math.max(0,x-_+1);if(0!==A){if(a.isMesh)!0===i.wireframe?(ee.setLineWidth(i.wireframeLinewidth*getTargetPixelRatio()),m.setMode(1)):m.setMode(4);else if(a.isLine){let t=i.linewidth;void 0===t&&(t=1),ee.setLineWidth(t*getTargetPixelRatio()),a.isLineSegments?m.setMode(1):a.isLineLoop?m.setMode(2):m.setMode(3)}else a.isPoints?m.setMode(0):a.isSprite&&m.setMode(4);if(a.isInstancedMesh)m.renderInstances(_,A,a.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);m.renderInstances(_,A,t)}else m.render(_,A)}},this.compile=function(t,r){g=fe.get(t),g.init(),_.push(g),t.traverseVisible((function(t){t.isLight&&t.layers.test(r.layers)&&(g.pushLight(t),t.castShadow&&g.pushShadow(t))})),g.setupLights(),t.traverse((function(r){const n=r.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){getProgram(n[i],t,r)}else getProgram(n,t,r)})),_.pop(),g=null};let Ee=null;function onXRSessionStart(){Be.stop()}function onXRSessionEnd(){Be.start()}const Be=new WebGLAnimation;function projectObject(t,r,n,i,a){if(!1===r.visible)return;if(r.layers.test(n.layers))if(r.isGroup)i=r.renderOrder;else if(r.isMesh||r.isLine||r.isPoints){r.isSkinnedMesh&&r.skeleton.frame!==te.render.frame&&(r.skeleton.update(),r.skeleton.frame=te.render.frame);{a&&Y.setFromMatrixPosition(r.matrixWorld).applyMatrix4(X);const t=he.update(r),n=r.material;if(Array.isArray(n)){const a=t.groups;for(let o=0,s=a.length;o<s;o++){const s=a[o],h=n[s.materialIndex];h&&h.visible&&m.push(r,t,h,i,Y.z,s)}}else n&&n.visible&&m.push(r,t,n,i,Y.z,null)}}const o=r.children;for(let r=0,s=o.length;r<s;r++)projectObject(t,o[r],n,i,a)}function renderObjects(t,r,n){const i=!0===r.isScene?r.overrideMaterial:null;if(n.isArrayCamera){const a=n.cameras;for(let n=0,o=a.length;n<o;n++){const o=a[n];ee.viewport(P.copy(o.viewport)),g.setupLightsView(o);for(let n=0,a=t.length;n<a;n++){const a=t[n],s=a.object,h=a.geometry,l=null===i?a.material:i,c=a.group;s.layers.test(o.layers)&&renderObject(s,r,o,h,l,c)}}}else for(let a=0,o=t.length;a<o;a++){const o=t[a];renderObject(o.object,r,n,o.geometry,null===i?o.material:i,o.group)}}function renderObject(t,r,n,i,a,o){if(t.onBeforeRender(x,r,n,i,a,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const i=setProgram(n,r,a,t);ee.setMaterial(a),xe.reset(),function renderObjectImmediate(t,r){t.render((function(t){x.renderBufferImmediate(t,r)}))}(t,i)}else!0===a.transparent&&a.side===w?(a.side=b,a.needsUpdate=!0,x.renderBufferDirect(n,r,i,a,t,o),a.side=y,a.needsUpdate=!0,x.renderBufferDirect(n,r,i,a,t,o),a.side=w):x.renderBufferDirect(n,r,i,a,t,o);t.onAfterRender(x,r,n,i,a,o)}function getProgram(t,r,n){!0!==r.isScene&&(r=J);const i=re.get(t),a=g.state.lights,o=g.state.shadowsArray,s=a.state.version,h=le.getParameters(t,a.state,o,r,n),l=le.getProgramCacheKey(h);let c=i.programs;i.environment=t.isMeshStandardMaterial?r.environment:null,i.fog=r.fog,i.envMap=(t.isMeshStandardMaterial?oe:ie).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",onMaterialDispose),c=new Map,i.programs=c);let d=c.get(l);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===s)return updateCommonMaterialProperties(t,h),d}else h.uniforms=le.getUniforms(t),t.onBuild(h,x),t.onBeforeCompile(h,x),d=le.acquireProgram(h,l),c.set(l,d),i.uniforms=h.uniforms;const p=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(p.clippingPlanes=pe.uniform),updateCommonMaterialProperties(t,h),i.needsLights=function materialNeedsLights(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=s,i.needsLights&&(p.ambientLightColor.value=a.state.ambient,p.lightProbe.value=a.state.probe,p.directionalLights.value=a.state.directional,p.directionalLightShadows.value=a.state.directionalShadow,p.spotLights.value=a.state.spot,p.spotLightShadows.value=a.state.spotShadow,p.rectAreaLights.value=a.state.rectArea,p.ltc_1.value=a.state.rectAreaLTC1,p.ltc_2.value=a.state.rectAreaLTC2,p.pointLights.value=a.state.point,p.pointLightShadows.value=a.state.pointShadow,p.hemisphereLights.value=a.state.hemi,p.directionalShadowMap.value=a.state.directionalShadowMap,p.directionalShadowMatrix.value=a.state.directionalShadowMatrix,p.spotShadowMap.value=a.state.spotShadowMap,p.spotShadowMatrix.value=a.state.spotShadowMatrix,p.pointShadowMap.value=a.state.pointShadowMap,p.pointShadowMatrix.value=a.state.pointShadowMatrix);const m=d.getUniforms(),y=WebGLUniforms.seqWithValue(m.seq,p);return i.currentProgram=d,i.uniformsList=y,d}function updateCommonMaterialProperties(t,r){const n=re.get(t);n.outputEncoding=r.outputEncoding,n.instancing=r.instancing,n.skinning=r.skinning,n.morphTargets=r.morphTargets,n.morphNormals=r.morphNormals,n.numClippingPlanes=r.numClippingPlanes,n.numIntersection=r.numClipIntersection,n.vertexAlphas=r.vertexAlphas,n.vertexTangents=r.vertexTangents}function setProgram(t,r,n,i){!0!==r.isScene&&(r=J),ne.resetTextureUnits();const a=r.fog,o=n.isMeshStandardMaterial?r.environment:null,s=null===C?x.outputEncoding:C.texture.encoding,h=(n.isMeshStandardMaterial?oe:ie).get(n.envMap||o),l=!0===n.vertexColors&&!!i.geometry&&!!i.geometry.attributes.color&&4===i.geometry.attributes.color.itemSize,c=!!i.geometry&&!!i.geometry.attributes.tangent,d=!!i.geometry&&!!i.geometry.morphAttributes.position,p=!!i.geometry&&!!i.geometry.morphAttributes.normal,m=re.get(n),y=g.state.lights;if(!0===W&&(!0===q||t!==D)){const r=t===D&&n.id===T;pe.setState(n,t,r)}let b=!1;n.version===m.__version?m.needsLights&&m.lightsStateVersion!==y.state.version||m.outputEncoding!==s||i.isInstancedMesh&&!1===m.instancing?b=!0:i.isInstancedMesh||!0!==m.instancing?i.isSkinnedMesh&&!1===m.skinning?b=!0:i.isSkinnedMesh||!0!==m.skinning?m.envMap!==h||n.fog&&m.fog!==a?b=!0:void 0===m.numClippingPlanes||m.numClippingPlanes===pe.numPlanes&&m.numIntersection===pe.numIntersection?(m.vertexAlphas!==l||m.vertexTangents!==c||m.morphTargets!==d||m.morphNormals!==p)&&(b=!0):b=!0:b=!0:b=!0:(b=!0,m.__version=n.version);let w=m.currentProgram;!0===b&&(w=getProgram(n,r,i));let M=!1,_=!1,A=!1;const E=w.getUniforms(),B=m.uniforms;if(ee.useProgram(w.program)&&(M=!0,_=!0,A=!0),n.id!==T&&(T=n.id,_=!0),M||D!==t){if(E.setValue(Ae,"projectionMatrix",t.projectionMatrix),$.logarithmicDepthBuffer&&E.setValue(Ae,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),D!==t&&(D=t,_=!0,A=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const r=E.map.cameraPosition;void 0!==r&&r.setValue(Ae,Y.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&E.setValue(Ae,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||i.isSkinnedMesh)&&E.setValue(Ae,"viewMatrix",t.matrixWorldInverse)}if(i.isSkinnedMesh){E.setOptional(Ae,i,"bindMatrix"),E.setOptional(Ae,i,"bindMatrixInverse");const t=i.skeleton;t&&($.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),E.setValue(Ae,"boneTexture",t.boneTexture,ne),E.setValue(Ae,"boneTextureSize",t.boneTextureSize)):E.setOptional(Ae,t,"boneMatrices"))}return(_||m.receiveShadow!==i.receiveShadow)&&(m.receiveShadow=i.receiveShadow,E.setValue(Ae,"receiveShadow",i.receiveShadow)),_&&(E.setValue(Ae,"toneMappingExposure",x.toneMappingExposure),m.needsLights&&function markUniformsLightsNeedsUpdate(t,r){t.ambientLightColor.needsUpdate=r,t.lightProbe.needsUpdate=r,t.directionalLights.needsUpdate=r,t.directionalLightShadows.needsUpdate=r,t.pointLights.needsUpdate=r,t.pointLightShadows.needsUpdate=r,t.spotLights.needsUpdate=r,t.spotLightShadows.needsUpdate=r,t.rectAreaLights.needsUpdate=r,t.hemisphereLights.needsUpdate=r}(B,A),a&&n.fog&&ce.refreshFogUniforms(B,a),ce.refreshMaterialUniforms(B,n,k,I,Q),WebGLUniforms.upload(Ae,m.uniformsList,B,ne)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(WebGLUniforms.upload(Ae,m.uniformsList,B,ne),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(Ae,"center",i.center),E.setValue(Ae,"modelViewMatrix",i.modelViewMatrix),E.setValue(Ae,"normalMatrix",i.normalMatrix),E.setValue(Ae,"modelMatrix",i.matrixWorld),w}Be.setAnimationLoop((function onAnimationFrame(t){Ee&&Ee(t)})),"undefined"!=typeof window&&Be.setContext(window),this.setAnimationLoop=function(t){Ee=t,Se.setAnimationLoop(t),null===t?Be.stop():Be.start()},Se.addEventListener("sessionstart",onXRSessionStart),Se.addEventListener("sessionend",onXRSessionEnd),this.render=function(t,n){if(void 0!==n&&!0!==n.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===A)return;this.need_render&&!0===t.autoUpdate&&t.updateMatrixWorld(),this.need_render&&null===n.parent&&n.updateMatrixWorld(),!0===Se.enabled&&!0===Se.isPresenting&&(!0===Se.cameraAutoUpdate&&Se.updateCamera(n),n=Se.getCamera()),!0===t.isScene&&t.onBeforeRender(x,t,n,C),g=fe.get(t,_.length),g.init(),_.push(g),X.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),G.setFromProjectionMatrix(X),q=this.localClippingEnabled,W=pe.init(this.clippingPlanes,q,n),m=this.prevRenderList,m&&!this.need_render||(m=de.get(t,M.length),m.init(),M.push(m),r.update(),projectObject(t,t,n,0,x.sortObjects),m.finish(),!0===x.sortObjects&&this.need_render&&m.sort(O,U),this.prevRenderList=m),!0===W&&pe.beginShadows();const i=g.state.shadowsArray;me.render(i,t,n),g.setupLights(),g.setupLightsView(n),!0===W&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ge.render(m,t);const a=m.opaque,o=m.transmissive,s=m.transparent;this.need_render&&(a.length>0&&renderObjects(a,t,n),o.length>0&&function renderTransmissiveObjects(t,r,n,i){if(null===Q){const t=!0===h&&!0===$.isWebGL2;Q=new(t?WebGLMultisampleRenderTarget:WebGLRenderTarget)(1024,1024,{generateMipmaps:!0,type:null!==_e.convert(Oe)?Oe:Pe,minFilter:Te,magFilter:Me,wrapS:be,wrapT:be})}const a=x.getRenderTarget();x.setRenderTarget(Q),x.clear();const o=x.toneMapping;x.toneMapping=ae,renderObjects(t,n,i),x.toneMapping=o,ne.updateMultisampleRenderTarget(Q),ne.updateRenderTargetMipmap(Q),x.setRenderTarget(a),renderObjects(r,n,i)}(a,o,t,n),s.length>0&&renderObjects(s,t,n),this.need_render=!1),null!==C&&(ne.updateMultisampleRenderTarget(C),ne.updateRenderTargetMipmap(C)),!0===t.isScene&&t.onAfterRender(x,t,n),ee.buffers.depth.setTest(!0),ee.buffers.depth.setMask(!0),ee.buffers.color.setMask(!0),ee.setPolygonOffset(!1),xe.resetDefaultState(),T=-1,D=null,_.pop(),g=_.length>0?_[_.length-1]:null,M.pop(),m=M.length>0?M[M.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return C},this.setRenderTarget=function(t,r=0,n=0){C=t,E=r,B=n,t&&void 0===re.get(t).__webglFramebuffer&&ne.setupRenderTarget(t);let i=null,a=!1,o=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const s=re.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=s[r],a=!0):i=t.isWebGLMultisampleRenderTarget?re.get(t).__webglMultisampledFramebuffer:s,P.copy(t.viewport),L.copy(t.scissor),N=t.scissorTest}else P.copy(z).multiplyScalar(k).floor(),L.copy(V).multiplyScalar(k).floor(),N=j;if(ee.bindFramebuffer(36160,i)&&$.drawBuffers){let r=!1;if(t)if(t.isWebGLMultipleRenderTargets){const n=t.texture;if(H.length!==n.length||36064!==H[0]){for(let t=0,r=n.length;t<r;t++)H[t]=36064+t;H.length=n.length,r=!0}}else 1===H.length&&36064===H[0]||(H[0]=36064,H.length=1,r=!0);else 1===H.length&&1029===H[0]||(H[0]=1029,H.length=1,r=!0);r&&($.isWebGL2?Ae.drawBuffers(H):Z.get("WEBGL_draw_buffers").drawBuffersWEBGL(H))}if(ee.viewport(P),ee.scissor(L),ee.setScissorTest(N),a){const i=re.get(t.texture);Ae.framebufferTexture2D(36160,36064,34069+r,i.__webglTexture,n)}else if(o){const i=re.get(t.texture),a=r||0;Ae.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,a)}},this.readRenderTargetPixels=function(t,r,n,i,a,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=re.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(h=h[s]),h){ee.bindFramebuffer(36160,h);try{const s=t.texture,h=s.format,l=s.type;if(h!==We&&_e.convert(h)!==Ae.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Oe&&(Z.has("EXT_color_buffer_half_float")||$.isWebGL2&&Z.has("EXT_color_buffer_float"));if(!(l===Pe||_e.convert(l)===Ae.getParameter(35738)||l===ke&&($.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Ae.checkFramebufferStatus(36160)?r>=0&&r<=t.width-i&&n>=0&&n<=t.height-a&&Ae.readPixels(r,n,i,a,_e.convert(h),_e.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==C?re.get(C).__webglFramebuffer:null;ee.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,r,n=0){const i=Math.pow(2,-n),a=Math.floor(r.image.width*i),o=Math.floor(r.image.height*i);let s=_e.convert(r.format);$.isWebGL2&&(6407===s&&(s=32849),6408===s&&(s=32856)),ne.setTexture2D(r,0),Ae.copyTexImage2D(3553,n,s,t.x,t.y,a,o,0),ee.unbindTexture()},this.copyTextureToTexture=function(t,r,n,i=0){const a=r.image.width,o=r.image.height,s=_e.convert(n.format),h=_e.convert(n.type);ne.setTexture2D(n,0),Ae.pixelStorei(37440,n.flipY),Ae.pixelStorei(37441,n.premultiplyAlpha),Ae.pixelStorei(3317,n.unpackAlignment),r.isDataTexture?Ae.texSubImage2D(3553,i,t.x,t.y,a,o,s,h,r.image.data):r.isCompressedTexture?Ae.compressedTexSubImage2D(3553,i,t.x,t.y,r.mipmaps[0].width,r.mipmaps[0].height,s,r.mipmaps[0].data):Ae.texSubImage2D(3553,i,t.x,t.y,s,h,r.image),0===i&&n.generateMipmaps&&Ae.generateMipmap(3553),ee.unbindTexture()},this.copyTextureToTexture3D=function(t,r,n,i,a=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,h=t.max.z-t.min.z+1,l=_e.convert(i.format),c=_e.convert(i.type);let d;if(i.isDataTexture3D)ne.setTexture3D(i,0),d=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ne.setTexture2DArray(i,0),d=35866}Ae.pixelStorei(37440,i.flipY),Ae.pixelStorei(37441,i.premultiplyAlpha),Ae.pixelStorei(3317,i.unpackAlignment);const p=Ae.getParameter(3314),m=Ae.getParameter(32878),g=Ae.getParameter(3316),y=Ae.getParameter(3315),b=Ae.getParameter(32877),w=n.isCompressedTexture?n.mipmaps[0]:n.image;Ae.pixelStorei(3314,w.width),Ae.pixelStorei(32878,w.height),Ae.pixelStorei(3316,t.min.x),Ae.pixelStorei(3315,t.min.y),Ae.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?Ae.texSubImage3D(d,a,r.x,r.y,r.z,o,s,h,l,c,w.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ae.compressedTexSubImage3D(d,a,r.x,r.y,r.z,o,s,h,l,w.data)):Ae.texSubImage3D(d,a,r.x,r.y,r.z,o,s,h,l,c,w),Ae.pixelStorei(3314,p),Ae.pixelStorei(32878,m),Ae.pixelStorei(3316,g),Ae.pixelStorei(3315,y),Ae.pixelStorei(32877,b),0===a&&i.generateMipmaps&&Ae.generateMipmap(d),ee.unbindTexture()},this.initTexture=function(t){ne.setTexture2D(t,0),ee.unbindTexture()},this.resetState=function(){E=0,B=0,C=null,ee.reset(),xe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class WebGL1Renderer extends WebGLRenderer{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(t,r=25e-5){this.name="",this.color=new Color(t),this.density=r}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}FogExp2.prototype.isFogExp2=!0;class Fog{constructor(t,r=1,n=1e3){this.name="",this.color=new Color(t),this.near=r,this.far=n}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Fog.prototype.isFog=!0;class Scene extends Object3D{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,r){return super.copy(t,r),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const r=super.toJSON(t);return null!==this.fog&&(r.object.fog=this.fog.toJSON()),r}}Scene.prototype.isScene=!0;class InterleavedBuffer{constructor(t,r){this.array=t,this.stride=r,this.count=void 0!==t?t.length/r:0,this.usage=Fr,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,r,n){t*=this.stride,n*=r.stride;for(let i=0,a=this.stride;i<a;i++)this.array[t+i]=r.array[n+i];return this}set(t,r=0){return this.array.set(t,r),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(r,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}InterleavedBuffer.prototype.isInterleavedBuffer=!0;const Aa=new Vector3;class InterleavedBufferAttribute{constructor(t,r,n,i=!1){this.name="",this.data=t,this.itemSize=r,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let r=0,n=this.data.count;r<n;r++)Aa.x=this.getX(r),Aa.y=this.getY(r),Aa.z=this.getZ(r),Aa.applyMatrix4(t),this.setXYZ(r,Aa.x,Aa.y,Aa.z);return this}applyNormalMatrix(t){for(let r=0,n=this.count;r<n;r++)Aa.x=this.getX(r),Aa.y=this.getY(r),Aa.z=this.getZ(r),Aa.applyNormalMatrix(t),this.setXYZ(r,Aa.x,Aa.y,Aa.z);return this}transformDirection(t){for(let r=0,n=this.count;r<n;r++)Aa.x=this.getX(r),Aa.y=this.getY(r),Aa.z=this.getZ(r),Aa.transformDirection(t),this.setXYZ(r,Aa.x,Aa.y,Aa.z);return this}setX(t,r){return this.data.array[t*this.data.stride+this.offset]=r,this}setY(t,r){return this.data.array[t*this.data.stride+this.offset+1]=r,this}setZ(t,r){return this.data.array[t*this.data.stride+this.offset+2]=r,this}setW(t,r){return this.data.array[t*this.data.stride+this.offset+3]=r,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this}setXYZ(t,r,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,r,n,i,a){return t=t*this.data.stride+this.offset,this.data.array[t+0]=r,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=a,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[n+r])}return new BufferAttribute(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new InterleavedBufferAttribute(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[n+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}InterleavedBufferAttribute.prototype.isInterleavedBufferAttribute=!0;class SpriteMaterial extends Material{constructor(t){super(),this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let Sa;SpriteMaterial.prototype.isSpriteMaterial=!0;const Ea=new Vector3,Ba=new Vector3,Ca=new Vector3,Ta=new Vector2,Da=new Vector2,Pa=new Matrix4,Ra=new Vector3,La=new Vector3,Na=new Vector3,Fa=new Vector2,Ia=new Vector2,ka=new Vector2;class Sprite extends Object3D{constructor(t){if(super(),this.type="Sprite",void 0===Sa){Sa=new BufferGeometry;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new InterleavedBuffer(t,5);Sa.setIndex([0,1,2,0,2,3]),Sa.setAttribute("position",new InterleavedBufferAttribute(r,3,0,!1)),Sa.setAttribute("uv",new InterleavedBufferAttribute(r,2,3,!1))}this.geometry=Sa,this.material=void 0!==t?t:new SpriteMaterial,this.center=new Vector2(.5,.5)}raycast(t,r){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ba.setFromMatrixScale(this.matrixWorld),Pa.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ca.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ba.multiplyScalar(-Ca.z);const n=this.material.rotation;let i,a;0!==n&&(a=Math.cos(n),i=Math.sin(n));const o=this.center;transformVertex(Ra.set(-.5,-.5,0),Ca,o,Ba,i,a),transformVertex(La.set(.5,-.5,0),Ca,o,Ba,i,a),transformVertex(Na.set(.5,.5,0),Ca,o,Ba,i,a),Fa.set(0,0),Ia.set(1,0),ka.set(1,1);let s=t.ray.intersectTriangle(Ra,La,Na,!1,Ea);if(null===s&&(transformVertex(La.set(-.5,.5,0),Ca,o,Ba,i,a),Ia.set(0,1),s=t.ray.intersectTriangle(Ra,Na,La,!1,Ea),null===s))return;const h=t.ray.origin.distanceTo(Ea);h<t.near||h>t.far||r.push({distance:h,point:Ea.clone(),uv:Triangle.getUV(Ea,Ra,La,Na,Fa,Ia,ka,new Vector2),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function transformVertex(t,r,n,i,a,o){Ta.subVectors(t,n).addScalar(.5).multiply(i),void 0!==a?(Da.x=o*Ta.x-a*Ta.y,Da.y=a*Ta.x+o*Ta.y):Da.copy(Ta),t.copy(r),t.x+=Da.x,t.y+=Da.y,t.applyMatrix4(Pa)}Sprite.prototype.isSprite=!0;const Oa=new Vector3,Ua=new Vector3;class LOD extends Object3D{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const r=t.levels;for(let t=0,n=r.length;t<n;t++){const n=r[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,r=0){r=Math.abs(r);const n=this.levels;let i;for(i=0;i<n.length&&!(r<n[i].distance);i++);return n.splice(i,0,{distance:r,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const r=this.levels;if(r.length>0){let n,i;for(n=1,i=r.length;n<i&&!(t<r[n].distance);n++);return r[n-1].object}return null}raycast(t,r){if(this.levels.length>0){Oa.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Oa);this.getObjectForDistance(n).raycast(t,r)}}update(t){const r=this.levels;if(r.length>1){Oa.setFromMatrixPosition(t.matrixWorld),Ua.setFromMatrixPosition(this.matrixWorld);const n=Oa.distanceTo(Ua)/t.zoom;let i,a;for(r[0].object.visible=!0,i=1,a=r.length;i<a&&n>=r[i].distance;i++)r[i-1].object.visible=!1,r[i].object.visible=!0;for(this._currentLevel=i-1;i<a;i++)r[i].object.visible=!1}}toJSON(t){const r=super.toJSON(t);!1===this.autoUpdate&&(r.object.autoUpdate=!1),r.object.levels=[];const n=this.levels;for(let t=0,i=n.length;t<i;t++){const i=n[t];r.object.levels.push({object:i.object.uuid,distance:i.distance})}return r}}const za=new Vector3,Va=new Vector4,ja=new Vector4,Ha=new Vector3,Ga=new Matrix4;class SkinnedMesh extends Mesh{constructor(t,r){super(t,r),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,r){this.skeleton=t,void 0===r&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Vector4,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){t.x=r.getX(n),t.y=r.getY(n),t.z=r.getZ(n),t.w=r.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),r.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,r){const n=this.skeleton,i=this.geometry;Va.fromBufferAttribute(i.attributes.skinIndex,t),ja.fromBufferAttribute(i.attributes.skinWeight,t),za.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let t=0;t<4;t++){const i=ja.getComponent(t);if(0!==i){const a=Va.getComponent(t);Ga.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),r.addScaledVector(Ha.copy(za).applyMatrix4(Ga),i)}}return r.applyMatrix4(this.bindMatrixInverse)}}SkinnedMesh.prototype.isSkinnedMesh=!0;class Bone extends Object3D{constructor(){super(),this.type="Bone"}}Bone.prototype.isBone=!0;class DataTexture extends Texture{constructor(t=null,r=1,n=1,i,a,o,s,h,l=Me,c=Me,d,p){super(null,o,s,h,l,c,i,a,d,p),this.image={data:t,width:r,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture.prototype.isDataTexture=!0;const Wa=new Matrix4,qa=new Matrix4;class Skeleton{constructor(t=[],r=[]){this.uuid=generateUUID(),this.bones=t.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===r.length)this.calculateInverses();else if(t.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,r=this.bones.length;t<r;t++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,r=this.bones.length;t<r;t++){const r=new Matrix4;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,r=this.bones.length;t<r;t++){const r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,r=this.bones.length;t<r;t++){const r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const t=this.bones,r=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,a=t.length;i<a;i++){const a=t[i]?t[i].matrixWorld:qa;Wa.multiplyMatrices(a,r[i]),Wa.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=ceilPowerOfTwo(t),t=Math.max(t,4);const r=new Float32Array(t*t*4);r.set(this.boneMatrices);const n=new DataTexture(r,t,t,We,ke);return this.boneMatrices=r,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let r=0,n=this.bones.length;r<n;r++){const n=this.bones[r];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,r){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let a=r[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Bone),this.bones.push(a),this.boneInverses.push((new Matrix4).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const r=this.bones,n=this.boneInverses;for(let i=0,a=r.length;i<a;i++){const a=r[i];t.bones.push(a.uuid);const o=n[i];t.boneInverses.push(o.toArray())}return t}}const Ka=new Matrix4,Qa=new Matrix4,Xa=[],Ya=new Mesh;class InstancedMesh extends Mesh{constructor(t,r,n){super(t,r),this.instanceMatrix=new BufferAttribute(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,r){r.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,r){r.fromArray(this.instanceMatrix.array,16*t)}raycast(t,r){const n=this.matrixWorld,i=this.count;if(Ya.geometry=this.geometry,Ya.material=this.material,void 0!==Ya.material)for(let a=0;a<i;a++){this.getMatrixAt(a,Ka),Qa.multiplyMatrices(n,Ka),Ya.matrixWorld=Qa,Ya.raycast(t,Xa);for(let t=0,n=Xa.length;t<n;t++){const n=Xa[t];n.instanceId=a,n.object=this,r.push(n)}Xa.length=0}}setColorAt(t,r){null===this.instanceColor&&(this.instanceColor=new BufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),r.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,r){r.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}InstancedMesh.prototype.isInstancedMesh=!0;class LineBasicMaterial extends Material{constructor(t){super(),this.type="LineBasicMaterial",this.color=new Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;const Ja=new Vector3,Za=new Vector3,$a=new Matrix4,eo=new Ray,to=new Sphere;class Line extends Object3D{constructor(t=new BufferGeometry,r=new LineBasicMaterial){super(),this.type="Line",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const r=t.attributes.position,n=[0];for(let t=1,i=r.count;t<i;t++)Ja.fromBufferAttribute(r,t-1),Za.fromBufferAttribute(r,t),n[t]=n[t-1],n[t]+=Ja.distanceTo(Za);t.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,r){const n=this.geometry,i=this.matrixWorld,a=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),to.copy(n.boundingSphere),to.applyMatrix4(i),to.radius+=a,!1===t.ray.intersectsSphere(to))return;$a.copy(i).invert(),eo.copy(t.ray).applyMatrix4($a);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=s*s,l=new Vector3,c=new Vector3,d=new Vector3,p=new Vector3,m=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),s=Math.min(i.count,o.start+o.count)-1;n<s;n+=m){const o=i.getX(n),s=i.getX(n+1);l.fromBufferAttribute(a,o),c.fromBufferAttribute(a,s);if(eo.distanceSqToSegment(l,c,p,d)>h)continue;p.applyMatrix4(this.matrixWorld);const m=t.ray.origin.distanceTo(p);m<t.near||m>t.far||r.push({distance:m,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count)-1;n<i;n+=m){l.fromBufferAttribute(a,n),c.fromBufferAttribute(a,n+1);if(eo.distanceSqToSegment(l,c,p,d)>h)continue;p.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(p);i<t.near||i>t.far||r.push({distance:i,point:d.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const r=t.morphAttributes,n=Object.keys(r);if(n.length>0){const t=r[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++){const n=t[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}else{const r=t.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Line.prototype.isLine=!0;const ro=new Vector3,no=new Vector3;class LineSegments extends Line{constructor(t,r){super(t,r),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const r=t.attributes.position,n=[];for(let t=0,i=r.count;t<i;t+=2)ro.fromBufferAttribute(r,t),no.fromBufferAttribute(r,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+ro.distanceTo(no);t.setAttribute("lineDistance",new Float32BufferAttribute(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}LineSegments.prototype.isLineSegments=!0;class LineLoop extends Line{constructor(t,r){super(t,r),this.type="LineLoop"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends Material{constructor(t){super(),this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}PointsMaterial.prototype.isPointsMaterial=!0;const io=new Matrix4,ao=new Ray,oo=new Sphere,so=new Vector3;class Points extends Object3D{constructor(t=new BufferGeometry,r=new PointsMaterial){super(),this.type="Points",this.geometry=t,this.material=r,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,r){const n=this.geometry,i=this.matrixWorld,a=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oo.copy(n.boundingSphere),oo.applyMatrix4(i),oo.radius+=a,!1===t.ray.intersectsSphere(oo))return;io.copy(i).invert(),ao.copy(t.ray).applyMatrix4(io);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),h=s*s;if(n.isBufferGeometry){const a=n.index,s=n.attributes.position;if(null!==a){for(let n=Math.max(0,o.start),l=Math.min(a.count,o.start+o.count);n<l;n++){const o=a.getX(n);so.fromBufferAttribute(s,o),testPoint(so,o,h,i,t,r,this)}}else{for(let n=Math.max(0,o.start),a=Math.min(s.count,o.start+o.count);n<a;n++)so.fromBufferAttribute(s,n),testPoint(so,n,h,i,t,r,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const r=t.morphAttributes,n=Object.keys(r);if(n.length>0){const t=r[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++){const n=t[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}else{const r=t.morphTargets;void 0!==r&&r.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function testPoint(t,r,n,i,a,o,s){const h=ao.distanceSqToPoint(t);if(h<n){const n=new Vector3;ao.closestPointToPoint(t,n),n.applyMatrix4(i);const l=a.ray.origin.distanceTo(n);if(l<a.near||l>a.far)return;o.push({distance:l,distanceToRay:Math.sqrt(h),point:n,index:r,face:null,object:s})}}Points.prototype.isPoints=!0;class VideoTexture extends Texture{constructor(t,r,n,i,a,o,s,h,l){super(t,r,n,i,a,o,s,h,l),this.format=void 0!==s?s:Ge,this.minFilter=void 0!==o?o:Ee,this.magFilter=void 0!==a?a:Ee,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function updateVideo(){c.needsUpdate=!0,t.requestVideoFrameCallback(updateVideo)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}VideoTexture.prototype.isVideoTexture=!0;class CompressedTexture extends Texture{constructor(t,r,n,i,a,o,s,h,l,c,d,p){super(null,o,s,h,l,c,i,a,d,p),this.image={width:r,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;class CanvasTexture extends Texture{constructor(t,r,n,i,a,o,s,h,l){super(t,r,n,i,a,o,s,h,l),this.needsUpdate=!0}}CanvasTexture.prototype.isCanvasTexture=!0;class DepthTexture extends Texture{constructor(t,r,n,i,a,o,s,h,l,c){if((c=void 0!==c?c:Xe)!==Xe&&c!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Xe&&(n=Ne),void 0===n&&c===Ye&&(n=je),super(null,i,a,o,s,h,c,n,l),this.image={width:t,height:r},this.magFilter=void 0!==s?s:Me,this.minFilter=void 0!==h?h:Me,this.flipY=!1,this.generateMipmaps=!1}}DepthTexture.prototype.isDepthTexture=!0;class CircleGeometry extends BufferGeometry{constructor(t=1,r=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:r,thetaStart:n,thetaLength:i},r=Math.max(3,r);const a=[],o=[],s=[],h=[],l=new Vector3,c=new Vector2;o.push(0,0,0),s.push(0,0,1),h.push(.5,.5);for(let a=0,d=3;a<=r;a++,d+=3){const p=n+a/r*i;l.x=t*Math.cos(p),l.y=t*Math.sin(p),o.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(o[d]/t+1)/2,c.y=(o[d+1]/t+1)/2,h.push(c.x,c.y)}for(let t=1;t<=r;t++)a.push(t,t+1,0);this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(s,3)),this.setAttribute("uv",new Float32BufferAttribute(h,2))}static fromJSON(t){return new CircleGeometry(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(t=1,r=1,n=1,i=8,a=1,o=!1,s=0,h=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:r,height:n,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:h};const l=this;i=Math.floor(i),a=Math.floor(a);const c=[],d=[],p=[],m=[];let g=0;const y=[],b=n/2;let w=0;function generateCap(n){const a=g,o=new Vector2,y=new Vector3;let M=0;const _=!0===n?t:r,x=!0===n?1:-1;for(let t=1;t<=i;t++)d.push(0,b*x,0),p.push(0,x,0),m.push(.5,.5),g++;const A=g;for(let t=0;t<=i;t++){const r=t/i*h+s,n=Math.cos(r),a=Math.sin(r);y.x=_*a,y.y=b*x,y.z=_*n,d.push(y.x,y.y,y.z),p.push(0,x,0),o.x=.5*n+.5,o.y=.5*a*x+.5,m.push(o.x,o.y),g++}for(let t=0;t<i;t++){const r=a+t,i=A+t;!0===n?c.push(i,i+1,r):c.push(i+1,i,r),M+=3}l.addGroup(w,M,!0===n?1:2),w+=M}!function generateTorso(){const o=new Vector3,M=new Vector3;let _=0;const x=(r-t)/n;for(let l=0;l<=a;l++){const c=[],w=l/a,_=w*(r-t)+t;for(let t=0;t<=i;t++){const r=t/i,a=r*h+s,l=Math.sin(a),y=Math.cos(a);M.x=_*l,M.y=-w*n+b,M.z=_*y,d.push(M.x,M.y,M.z),o.set(l,x,y).normalize(),p.push(o.x,o.y,o.z),m.push(r,1-w),c.push(g++)}y.push(c)}for(let t=0;t<i;t++)for(let r=0;r<a;r++){const n=y[r][t],i=y[r+1][t],a=y[r+1][t+1],o=y[r][t+1];c.push(n,i,o),c.push(i,a,o),_+=6}l.addGroup(w,_,0),w+=_}(),!1===o&&(t>0&&generateCap(!0),r>0&&generateCap(!1)),this.setIndex(c),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(p,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}static fromJSON(t){return new CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(t=1,r=1,n=8,i=1,a=!1,o=0,s=2*Math.PI){super(0,t,r,n,i,a,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s}}static fromJSON(t){return new ConeGeometry(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(t,r,n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:r,radius:n,detail:i};const a=[],o=[];function subdivideFace(t,r,n,i){const a=i+1,o=[];for(let i=0;i<=a;i++){o[i]=[];const s=t.clone().lerp(n,i/a),h=r.clone().lerp(n,i/a),l=a-i;for(let t=0;t<=l;t++)o[i][t]=0===t&&i===a?s:s.clone().lerp(h,t/l)}for(let t=0;t<a;t++)for(let r=0;r<2*(a-t)-1;r++){const n=Math.floor(r/2);r%2==0?(pushVertex(o[t][n+1]),pushVertex(o[t+1][n]),pushVertex(o[t][n])):(pushVertex(o[t][n+1]),pushVertex(o[t+1][n+1]),pushVertex(o[t+1][n]))}}function pushVertex(t){a.push(t.x,t.y,t.z)}function getVertexByIndex(r,n){const i=3*r;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function correctUV(t,r,n,i){i<0&&1===t.x&&(o[r]=t.x-1),0===n.x&&0===n.z&&(o[r]=i/2/Math.PI+.5)}function azimuth(t){return Math.atan2(t.z,-t.x)}!function subdivide(t){const n=new Vector3,i=new Vector3,a=new Vector3;for(let o=0;o<r.length;o+=3)getVertexByIndex(r[o+0],n),getVertexByIndex(r[o+1],i),getVertexByIndex(r[o+2],a),subdivideFace(n,i,a,t)}(i),function applyRadius(t){const r=new Vector3;for(let n=0;n<a.length;n+=3)r.x=a[n+0],r.y=a[n+1],r.z=a[n+2],r.normalize().multiplyScalar(t),a[n+0]=r.x,a[n+1]=r.y,a[n+2]=r.z}(n),function generateUVs(){const t=new Vector3;for(let n=0;n<a.length;n+=3){t.x=a[n+0],t.y=a[n+1],t.z=a[n+2];const i=azimuth(t)/2/Math.PI+.5,s=(r=t,Math.atan2(-r.y,Math.sqrt(r.x*r.x+r.z*r.z))/Math.PI+.5);o.push(i,1-s)}var r;(function correctUVs(){const t=new Vector3,r=new Vector3,n=new Vector3,i=new Vector3,s=new Vector2,h=new Vector2,l=new Vector2;for(let c=0,d=0;c<a.length;c+=9,d+=6){t.set(a[c+0],a[c+1],a[c+2]),r.set(a[c+3],a[c+4],a[c+5]),n.set(a[c+6],a[c+7],a[c+8]),s.set(o[d+0],o[d+1]),h.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),i.copy(t).add(r).add(n).divideScalar(3);const p=azimuth(i);correctUV(s,d+0,t,p),correctUV(h,d+2,r,p),correctUV(l,d+4,n,p)}})(),function correctSeam(){for(let t=0;t<o.length;t+=6){const r=o[t+0],n=o[t+2],i=o[t+4],a=Math.max(r,n,i),s=Math.min(r,n,i);a>.9&&s<.1&&(r<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(a.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new PolyhedronGeometry(t.vertices,t.indices,t.radius,t.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(t=1,r=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,r),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new DodecahedronGeometry(t.radius,t.detail)}}const uo=new Vector3,ho=new Vector3,lo=new Vector3,co=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(t,r){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:r},r=void 0!==r?r:1,!0===t.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.cos(Qr*r),i=t.getIndex(),a=t.getAttribute("position"),o=i?i.count:a.count,s=[0,0,0],h=["a","b","c"],l=new Array(3),c={},d=[];for(let t=0;t<o;t+=3){i?(s[0]=i.getX(t),s[1]=i.getX(t+1),s[2]=i.getX(t+2)):(s[0]=t,s[1]=t+1,s[2]=t+2);const{a:r,b:o,c:p}=co;if(r.fromBufferAttribute(a,s[0]),o.fromBufferAttribute(a,s[1]),p.fromBufferAttribute(a,s[2]),co.getNormal(lo),l[0]=`${r.x},${r.y},${r.z}`,l[1]=`${o.x},${o.y},${o.z}`,l[2]=`${p.x},${p.y},${p.z}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let t=0;t<3;t++){const r=(t+1)%3,i=l[t],a=l[r],o=co[h[t]],p=co[h[r]],m=`${i}_${a}`,g=`${a}_${i}`;g in c&&c[g]?(lo.dot(c[g].normal)<=n&&(d.push(o.x,o.y,o.z),d.push(p.x,p.y,p.z)),c[g]=null):m in c||(c[m]={index0:s[t],index1:s[r],normal:lo.clone()})}}for(const t in c)if(c[t]){const{index0:r,index1:n}=c[t];uo.fromBufferAttribute(a,r),ho.fromBufferAttribute(a,n),d.push(uo.x,uo.y,uo.z),d.push(ho.x,ho.y,ho.z)}this.setAttribute("position",new Float32BufferAttribute(d,3))}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,r){const n=this.getUtoTmapping(t);return this.getPoint(n,r)}getPoints(t=5){const r=[];for(let n=0;n<=t;n++)r.push(this.getPoint(n/t));return r}getSpacedPoints(t=5){const r=[];for(let n=0;n<=t;n++)r.push(this.getPointAt(n/t));return r}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let n,i=this.getPoint(0),a=0;r.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),a+=n.distanceTo(i),r.push(a),i=n;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,r){const n=this.getLengths();let i=0;const a=n.length;let o;o=r||t*n[a-1];let s,h=0,l=a-1;for(;h<=l;)if(i=Math.floor(h+(l-h)/2),s=n[i]-o,s<0)h=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(a-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(a-1)}getTangent(t,r){const n=1e-4;let i=t-n,a=t+n;i<0&&(i=0),a>1&&(a=1);const o=this.getPoint(i),s=this.getPoint(a),h=r||(o.isVector2?new Vector2:new Vector3);return h.copy(s).sub(o).normalize(),h}getTangentAt(t,r){const n=this.getUtoTmapping(t);return this.getTangent(n,r)}computeFrenetFrames(t,r){const n=new Vector3,i=[],a=[],o=[],s=new Vector3,h=new Matrix4;for(let r=0;r<=t;r++){const n=r/t;i[r]=this.getTangentAt(n,new Vector3),i[r].normalize()}a[0]=new Vector3,o[0]=new Vector3;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),d=Math.abs(i[0].y),p=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),d<=l&&(l=d,n.set(0,1,0)),p<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),a[0].crossVectors(i[0],s),o[0].crossVectors(i[0],a[0]);for(let r=1;r<=t;r++){if(a[r]=a[r-1].clone(),o[r]=o[r-1].clone(),s.crossVectors(i[r-1],i[r]),s.length()>Number.EPSILON){s.normalize();const t=Math.acos(clamp(i[r-1].dot(i[r]),-1,1));a[r].applyMatrix4(h.makeRotationAxis(s,t))}o[r].crossVectors(i[r],a[r])}if(!0===r){let r=Math.acos(clamp(a[0].dot(a[t]),-1,1));r/=t,i[0].dot(s.crossVectors(a[0],a[t]))>0&&(r=-r);for(let n=1;n<=t;n++)a[n].applyMatrix4(h.makeRotationAxis(i[n],r*n)),o[n].crossVectors(i[n],a[n])}return{tangents:i,normals:a,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(t=0,r=0,n=1,i=1,a=0,o=2*Math.PI,s=!1,h=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=r,this.xRadius=n,this.yRadius=i,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=s,this.aRotation=h}getPoint(t,r){const n=r||new Vector2,i=2*Math.PI;let a=this.aEndAngle-this.aStartAngle;const o=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=i;for(;a>i;)a-=i;a<Number.EPSILON&&(a=o?0:i),!0!==this.aClockwise||o||(a===i?a=-i:a-=i);const s=this.aStartAngle+t*a;let h=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const t=Math.cos(this.aRotation),r=Math.sin(this.aRotation),n=h-this.aX,i=l-this.aY;h=n*t-i*r+this.aX,l=n*r+i*t+this.aY}return n.set(h,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(t,r,n,i,a,o){super(t,r,n,n,i,a,o),this.type="ArcCurve"}}function CubicPoly(){let t=0,r=0,n=0,i=0;function init(a,o,s,h){t=a,r=s,n=-3*a+3*o-2*s-h,i=2*a-2*o+s+h}return{initCatmullRom:function(t,r,n,i,a){init(r,n,a*(n-t),a*(i-r))},initNonuniformCatmullRom:function(t,r,n,i,a,o,s){let h=(r-t)/a-(n-t)/(a+o)+(n-r)/o,l=(n-r)/o-(i-r)/(o+s)+(i-n)/s;h*=o,l*=o,init(r,n,h,l)},calc:function(a){const o=a*a;return t+r*a+n*o+i*(o*a)}}}ArcCurve.prototype.isArcCurve=!0;const fo=new Vector3,po=new CubicPoly,mo=new CubicPoly,go=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(t=[],r=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=r,this.curveType=n,this.tension=i}getPoint(t,r=new Vector3){const n=r,i=this.points,a=i.length,o=(a-(this.closed?0:1))*t;let s,h,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:0===c&&l===a-1&&(l=a-2,c=1),this.closed||l>0?s=i[(l-1)%a]:(fo.subVectors(i[0],i[1]).add(i[0]),s=fo);const d=i[l%a],p=i[(l+1)%a];if(this.closed||l+2<a?h=i[(l+2)%a]:(fo.subVectors(i[a-1],i[a-2]).add(i[a-1]),h=fo),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let r=Math.pow(s.distanceToSquared(d),t),n=Math.pow(d.distanceToSquared(p),t),i=Math.pow(p.distanceToSquared(h),t);n<1e-4&&(n=1),r<1e-4&&(r=n),i<1e-4&&(i=n),po.initNonuniformCatmullRom(s.x,d.x,p.x,h.x,r,n,i),mo.initNonuniformCatmullRom(s.y,d.y,p.y,h.y,r,n,i),go.initNonuniformCatmullRom(s.z,d.z,p.z,h.z,r,n,i)}else"catmullrom"===this.curveType&&(po.initCatmullRom(s.x,d.x,p.x,h.x,this.tension),mo.initCatmullRom(s.y,d.y,p.y,h.y,this.tension),go.initCatmullRom(s.z,d.z,p.z,h.z,this.tension));return n.set(po.calc(c),mo.calc(c),go.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const n=t.points[r];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let r=0,n=this.points.length;r<n;r++){const n=this.points[r];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const n=t.points[r];this.points.push((new Vector3).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function CatmullRom(t,r,n,i,a){const o=.5*(i-r),s=.5*(a-n),h=t*t;return(2*n-2*i+o+s)*(t*h)+(-3*n+3*i-2*o-s)*h+o*t+n}function QuadraticBezier(t,r,n,i){return function QuadraticBezierP0(t,r){const n=1-t;return n*n*r}(t,r)+function QuadraticBezierP1(t,r){return 2*(1-t)*t*r}(t,n)+function QuadraticBezierP2(t,r){return t*t*r}(t,i)}function CubicBezier(t,r,n,i,a){return function CubicBezierP0(t,r){const n=1-t;return n*n*n*r}(t,r)+function CubicBezierP1(t,r){const n=1-t;return 3*n*n*t*r}(t,n)+function CubicBezierP2(t,r){return 3*(1-t)*t*t*r}(t,i)+function CubicBezierP3(t,r){return t*t*t*r}(t,a)}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;class CubicBezierCurve extends Curve{constructor(t=new Vector2,r=new Vector2,n=new Vector2,i=new Vector2){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=r,this.v2=n,this.v3=i}getPoint(t,r=new Vector2){const n=r,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return n.set(CubicBezier(t,i.x,a.x,o.x,s.x),CubicBezier(t,i.y,a.y,o.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(t=new Vector3,r=new Vector3,n=new Vector3,i=new Vector3){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=r,this.v2=n,this.v3=i}getPoint(t,r=new Vector3){const n=r,i=this.v0,a=this.v1,o=this.v2,s=this.v3;return n.set(CubicBezier(t,i.x,a.x,o.x,s.x),CubicBezier(t,i.y,a.y,o.y,s.y),CubicBezier(t,i.z,a.z,o.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(t=new Vector2,r=new Vector2){super(),this.type="LineCurve",this.v1=t,this.v2=r}getPoint(t,r=new Vector2){const n=r;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r){const n=r||new Vector2;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}LineCurve.prototype.isLineCurve=!0;class LineCurve3 extends Curve{constructor(t=new Vector3,r=new Vector3){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=r}getPoint(t,r=new Vector3){const n=r;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,r){return this.getPoint(t,r)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class QuadraticBezierCurve extends Curve{constructor(t=new Vector2,r=new Vector2,n=new Vector2){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=r,this.v2=n}getPoint(t,r=new Vector2){const n=r,i=this.v0,a=this.v1,o=this.v2;return n.set(QuadraticBezier(t,i.x,a.x,o.x),QuadraticBezier(t,i.y,a.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(t=new Vector3,r=new Vector3,n=new Vector3){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=r,this.v2=n}getPoint(t,r=new Vector3){const n=r,i=this.v0,a=this.v1,o=this.v2;return n.set(QuadraticBezier(t,i.x,a.x,o.x),QuadraticBezier(t,i.y,a.y,o.y),QuadraticBezier(t,i.z,a.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,r=new Vector2){const n=r,i=this.points,a=(i.length-1)*t,o=Math.floor(a),s=a-o,h=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return n.set(CatmullRom(s,h.x,l.x,c.x,d.x),CatmullRom(s,h.y,l.y,c.y,d.y)),n}copy(t){super.copy(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const n=t.points[r];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let r=0,n=this.points.length;r<n;r++){const n=this.points[r];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let r=0,n=t.points.length;r<n;r++){const n=t.points[r];this.points.push((new Vector2).fromArray(n))}return this}}SplineCurve.prototype.isSplineCurve=!0;var vo=Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});const Earcut_triangulate=function(t,r,n=2){const i=r&&r.length,a=i?r[0]*n:t.length;let o=linkedList(t,0,a,n,!0);const s=[];if(!o||o.next===o.prev)return s;let h,l,c,d,p,m,g;if(i&&(o=function eliminateHoles(t,r,n,i){const a=[];let o,s,h,l,c;for(o=0,s=r.length;o<s;o++)h=r[o]*i,l=o<s-1?r[o+1]*i:t.length,c=linkedList(t,h,l,i,!1),c===c.next&&(c.steiner=!0),a.push(getLeftmost(c));for(a.sort(compareX),o=0;o<a.length;o++)eliminateHole(a[o],n),n=filterPoints(n,n.next);return n}(t,r,o,n)),t.length>80*n){h=c=t[0],l=d=t[1];for(let r=n;r<a;r+=n)p=t[r],m=t[r+1],p<h&&(h=p),m<l&&(l=m),p>c&&(c=p),m>d&&(d=m);g=Math.max(c-h,d-l),g=0!==g?1/g:0}return earcutLinked(o,s,n,h,l,g),s};function linkedList(t,r,n,i,a){let o,s;if(a===function signedArea(t,r,n,i){let a=0;for(let o=r,s=n-i;o<n;o+=i)a+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return a}(t,r,n,i)>0)for(o=r;o<n;o+=i)s=insertNode(o,t[o],t[o+1],s);else for(o=n-i;o>=r;o-=i)s=insertNode(o,t[o],t[o+1],s);return s&&equals(s,s.next)&&(removeNode(s),s=s.next),s}function filterPoints(t,r){if(!t)return t;r||(r=t);let n,i=t;do{if(n=!1,i.steiner||!equals(i,i.next)&&0!==area(i.prev,i,i.next))i=i.next;else{if(removeNode(i),i=r=i.prev,i===i.next)break;n=!0}}while(n||i!==r);return r}function earcutLinked(t,r,n,i,a,o,s){if(!t)return;!s&&o&&function indexCurve(t,r,n,i){let a=t;do{null===a.z&&(a.z=zOrder(a.x,a.y,r,n,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function sortLinked(t){let r,n,i,a,o,s,h,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,h=0,r=0;r<c&&(h++,i=i.nextZ,i);r++);for(l=c;h>0||l>0&&i;)0!==h&&(0===l||!i||n.z<=i.z)?(a=n,n=n.nextZ,h--):(a=i,i=i.nextZ,l--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;n=i}o.nextZ=null,c*=2}while(s>1);return t}(a)}(t,i,a,o);let h,l,c=t;for(;t.prev!==t.next;)if(h=t.prev,l=t.next,o?isEarHashed(t,i,a,o):isEar(t))r.push(h.i/n),r.push(t.i/n),r.push(l.i/n),removeNode(t),t=l.next,c=l.next;else if((t=l)===c){s?1===s?earcutLinked(t=cureLocalIntersections(filterPoints(t),r,n),r,n,i,a,o,2):2===s&&splitEarcut(t,r,n,i,a,o):earcutLinked(filterPoints(t),r,n,i,a,o,1);break}}function isEar(t){const r=t.prev,n=t,i=t.next;if(area(r,n,i)>=0)return!1;let a=t.next.next;for(;a!==t.prev;){if(pointInTriangle(r.x,r.y,n.x,n.y,i.x,i.y,a.x,a.y)&&area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function isEarHashed(t,r,n,i){const a=t.prev,o=t,s=t.next;if(area(a,o,s)>=0)return!1;const h=a.x<o.x?a.x<s.x?a.x:s.x:o.x<s.x?o.x:s.x,l=a.y<o.y?a.y<s.y?a.y:s.y:o.y<s.y?o.y:s.y,c=a.x>o.x?a.x>s.x?a.x:s.x:o.x>s.x?o.x:s.x,d=a.y>o.y?a.y>s.y?a.y:s.y:o.y>s.y?o.y:s.y,p=zOrder(h,l,r,n,i),m=zOrder(c,d,r,n,i);let g=t.prevZ,y=t.nextZ;for(;g&&g.z>=p&&y&&y.z<=m;){if(g!==t.prev&&g!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,g.x,g.y)&&area(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,y!==t.prev&&y!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;g&&g.z>=p;){if(g!==t.prev&&g!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,g.x,g.y)&&area(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;y&&y.z<=m;){if(y!==t.prev&&y!==t.next&&pointInTriangle(a.x,a.y,o.x,o.y,s.x,s.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function cureLocalIntersections(t,r,n){let i=t;do{const a=i.prev,o=i.next.next;!equals(a,o)&&intersects(a,i,i.next,o)&&locallyInside(a,o)&&locallyInside(o,a)&&(r.push(a.i/n),r.push(i.i/n),r.push(o.i/n),removeNode(i),removeNode(i.next),i=t=o),i=i.next}while(i!==t);return filterPoints(i)}function splitEarcut(t,r,n,i,a,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&isValidDiagonal(s,t)){let h=splitPolygon(s,t);return s=filterPoints(s,s.next),h=filterPoints(h,h.next),earcutLinked(s,r,n,i,a,o),void earcutLinked(h,r,n,i,a,o)}t=t.next}s=s.next}while(s!==t)}function compareX(t,r){return t.x-r.x}function eliminateHole(t,r){if(r=function findHoleBridge(t,r){let n=r;const i=t.x,a=t.y;let o,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){const t=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>s){if(s=t,t===i){if(a===n.y)return n;if(a===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==r);if(!o)return null;if(i===s)return o;const h=o,l=o.x,c=o.y;let d,p=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&pointInTriangle(a<c?i:s,a,l,c,a<c?s:i,a,n.x,n.y)&&(d=Math.abs(a-n.y)/(i-n.x),locallyInside(n,t)&&(d<p||d===p&&(n.x>o.x||n.x===o.x&&sectorContainsSector(o,n)))&&(o=n,p=d)),n=n.next}while(n!==h);return o}(t,r)){const n=splitPolygon(r,t);filterPoints(r,r.next),filterPoints(n,n.next)}}function sectorContainsSector(t,r){return area(t.prev,t,r.prev)<0&&area(r.next,t,t.next)<0}function zOrder(t,r,n,i,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-i)*a)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function getLeftmost(t){let r=t,n=t;do{(r.x<n.x||r.x===n.x&&r.y<n.y)&&(n=r),r=r.next}while(r!==t);return n}function pointInTriangle(t,r,n,i,a,o,s,h){return(a-s)*(r-h)-(t-s)*(o-h)>=0&&(t-s)*(i-h)-(n-s)*(r-h)>=0&&(n-s)*(o-h)-(a-s)*(i-h)>=0}function isValidDiagonal(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!function intersectsPolygon(t,r){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==r.i&&n.next.i!==r.i&&intersects(n,n.next,t,r))return!0;n=n.next}while(n!==t);return!1}(t,r)&&(locallyInside(t,r)&&locallyInside(r,t)&&function middleInside(t,r){let n=t,i=!1;const a=(t.x+r.x)/2,o=(t.y+r.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&a<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,r)&&(area(t.prev,t,r.prev)||area(t,r.prev,r))||equals(t,r)&&area(t.prev,t,t.next)>0&&area(r.prev,r,r.next)>0)}function area(t,r,n){return(r.y-t.y)*(n.x-r.x)-(r.x-t.x)*(n.y-r.y)}function equals(t,r){return t.x===r.x&&t.y===r.y}function intersects(t,r,n,i){const a=sign(area(t,r,n)),o=sign(area(t,r,i)),s=sign(area(n,i,t)),h=sign(area(n,i,r));return a!==o&&s!==h||(!(0!==a||!onSegment(t,n,r))||(!(0!==o||!onSegment(t,i,r))||(!(0!==s||!onSegment(n,t,i))||!(0!==h||!onSegment(n,r,i)))))}function onSegment(t,r,n){return r.x<=Math.max(t.x,n.x)&&r.x>=Math.min(t.x,n.x)&&r.y<=Math.max(t.y,n.y)&&r.y>=Math.min(t.y,n.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,r){return area(t.prev,t,t.next)<0?area(t,r,t.next)>=0&&area(t,t.prev,r)>=0:area(t,r,t.prev)<0||area(t,t.next,r)<0}function splitPolygon(t,r){const n=new Node(t.i,t.x,t.y),i=new Node(r.i,r.x,r.y),a=t.next,o=r.prev;return t.next=r,r.prev=t,n.next=a,a.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function insertNode(t,r,n,i){const a=new Node(t,r,n);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,r,n){this.i=t,this.x=r,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ShapeUtils{static area(t){const r=t.length;let n=0;for(let i=r-1,a=0;a<r;i=a++)n+=t[i].x*t[a].y-t[a].x*t[i].y;return.5*n}static isClockWise(t){return ShapeUtils.area(t)<0}static triangulateShape(t,r){const n=[],i=[],a=[];removeDupEndPts(t),addContour(n,t);let o=t.length;r.forEach(removeDupEndPts);for(let t=0;t<r.length;t++)i.push(o),o+=r[t].length,addContour(n,r[t]);const s=Earcut_triangulate(n,i);for(let t=0;t<s.length;t+=3)a.push(s.slice(t,t+3));return a}}function removeDupEndPts(t){const r=t.length;r>2&&t[r-1].equals(t[0])&&t.pop()}function addContour(t,r){for(let n=0;n<r.length;n++)t.push(r[n].x),t.push(r[n].y)}class ExtrudeGeometry extends BufferGeometry{constructor(t,r){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:r},t=Array.isArray(t)?t:[t];const n=this,i=[],a=[];for(let r=0,n=t.length;r<n;r++){addShape(t[r])}function addShape(t){const o=[],s=void 0!==r.curveSegments?r.curveSegments:12,h=void 0!==r.steps?r.steps:1;let l=void 0!==r.depth?r.depth:100,c=void 0===r.bevelEnabled||r.bevelEnabled,d=void 0!==r.bevelThickness?r.bevelThickness:6,p=void 0!==r.bevelSize?r.bevelSize:d-2,m=void 0!==r.bevelOffset?r.bevelOffset:0,g=void 0!==r.bevelSegments?r.bevelSegments:3;const y=r.extrudePath,b=void 0!==r.UVGenerator?r.UVGenerator:yo;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=r.amount);let w,M,_,x,A,E=!1;y&&(w=y.getSpacedPoints(h),E=!0,c=!1,M=y.computeFrenetFrames(h,!1),_=new Vector3,x=new Vector3,A=new Vector3),c||(g=0,d=0,p=0,m=0);const B=t.extractPoints(s);let C=B.shape;const T=B.holes;if(!ShapeUtils.isClockWise(C)){C=C.reverse();for(let t=0,r=T.length;t<r;t++){const r=T[t];ShapeUtils.isClockWise(r)&&(T[t]=r.reverse())}}const D=ShapeUtils.triangulateShape(C,T),P=C;for(let t=0,r=T.length;t<r;t++){const r=T[t];C=C.concat(r)}function scalePt2(t,r,n){return r||console.error("THREE.ExtrudeGeometry: vec does not exist"),r.clone().multiplyScalar(n).add(t)}const L=C.length,N=D.length;function getBevelVec(t,r,n){let i,a,o;const s=t.x-r.x,h=t.y-r.y,l=n.x-t.x,c=n.y-t.y,d=s*s+h*h,p=s*c-h*l;if(Math.abs(p)>Number.EPSILON){const p=Math.sqrt(d),m=Math.sqrt(l*l+c*c),g=r.x-h/p,y=r.y+s/p,b=((n.x-c/m-g)*c-(n.y+l/m-y)*l)/(s*c-h*l);i=g+s*b-t.x,a=y+h*b-t.y;const w=i*i+a*a;if(w<=2)return new Vector2(i,a);o=Math.sqrt(w/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(h)===Math.sign(c)&&(t=!0),t?(i=-h,a=s,o=Math.sqrt(d)):(i=s,a=h,o=Math.sqrt(d/2))}return new Vector2(i/o,a/o)}const F=[];for(let t=0,r=P.length,n=r-1,i=t+1;t<r;t++,n++,i++)n===r&&(n=0),i===r&&(i=0),F[t]=getBevelVec(P[t],P[n],P[i]);const I=[];let k,O=F.concat();for(let t=0,r=T.length;t<r;t++){const r=T[t];k=[];for(let t=0,n=r.length,i=n-1,a=t+1;t<n;t++,i++,a++)i===n&&(i=0),a===n&&(a=0),k[t]=getBevelVec(r[t],r[i],r[a]);I.push(k),O=O.concat(k)}for(let t=0;t<g;t++){const r=t/g,n=d*Math.cos(r*Math.PI/2),i=p*Math.sin(r*Math.PI/2)+m;for(let t=0,r=P.length;t<r;t++){const r=scalePt2(P[t],F[t],i);v(r.x,r.y,-n)}for(let t=0,r=T.length;t<r;t++){const r=T[t];k=I[t];for(let t=0,a=r.length;t<a;t++){const a=scalePt2(r[t],k[t],i);v(a.x,a.y,-n)}}}const U=p+m;for(let t=0;t<L;t++){const r=c?scalePt2(C[t],O[t],U):C[t];E?(x.copy(M.normals[0]).multiplyScalar(r.x),_.copy(M.binormals[0]).multiplyScalar(r.y),A.copy(w[0]).add(x).add(_),v(A.x,A.y,A.z)):v(r.x,r.y,0)}for(let t=1;t<=h;t++)for(let r=0;r<L;r++){const n=c?scalePt2(C[r],O[r],U):C[r];E?(x.copy(M.normals[t]).multiplyScalar(n.x),_.copy(M.binormals[t]).multiplyScalar(n.y),A.copy(w[t]).add(x).add(_),v(A.x,A.y,A.z)):v(n.x,n.y,l/h*t)}for(let t=g-1;t>=0;t--){const r=t/g,n=d*Math.cos(r*Math.PI/2),i=p*Math.sin(r*Math.PI/2)+m;for(let t=0,r=P.length;t<r;t++){const r=scalePt2(P[t],F[t],i);v(r.x,r.y,l+n)}for(let t=0,r=T.length;t<r;t++){const r=T[t];k=I[t];for(let t=0,a=r.length;t<a;t++){const a=scalePt2(r[t],k[t],i);E?v(a.x,a.y+w[h-1].y,w[h-1].x+n):v(a.x,a.y,l+n)}}}function sidewalls(t,r){let n=t.length;for(;--n>=0;){const i=n;let a=n-1;a<0&&(a=t.length-1);for(let t=0,n=h+2*g;t<n;t++){const n=L*t,o=L*(t+1);f4(r+i+n,r+a+n,r+a+o,r+i+o)}}}function v(t,r,n){o.push(t),o.push(r),o.push(n)}function f3(t,r,a){addVertex(t),addVertex(r),addVertex(a);const o=i.length/3,s=b.generateTopUV(n,i,o-3,o-2,o-1);addUV(s[0]),addUV(s[1]),addUV(s[2])}function f4(t,r,a,o){addVertex(t),addVertex(r),addVertex(o),addVertex(r),addVertex(a),addVertex(o);const s=i.length/3,h=b.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);addUV(h[0]),addUV(h[1]),addUV(h[3]),addUV(h[1]),addUV(h[2]),addUV(h[3])}function addVertex(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function addUV(t){a.push(t.x),a.push(t.y)}!function buildLidFaces(){const t=i.length/3;if(c){let t=0,r=L*t;for(let t=0;t<N;t++){const n=D[t];f3(n[2]+r,n[1]+r,n[0]+r)}t=h+2*g,r=L*t;for(let t=0;t<N;t++){const n=D[t];f3(n[0]+r,n[1]+r,n[2]+r)}}else{for(let t=0;t<N;t++){const r=D[t];f3(r[2],r[1],r[0])}for(let t=0;t<N;t++){const r=D[t];f3(r[0]+L*h,r[1]+L*h,r[2]+L*h)}}n.addGroup(t,i.length/3-t,0)}(),function buildSideFaces(){const t=i.length/3;let r=0;sidewalls(P,r),r+=P.length;for(let t=0,n=T.length;t<n;t++){const n=T[t];sidewalls(n,r),r+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new Float32BufferAttribute(i,3)),this.setAttribute("uv",new Float32BufferAttribute(a,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function toJSON$1(t,r,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const i=t[r];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==r.extrudePath&&(n.options.extrudePath=r.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,r){const n=[];for(let i=0,a=t.shapes.length;i<a;i++){const a=r[t.shapes[i]];n.push(a)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new vo[i.type]).fromJSON(i)),new ExtrudeGeometry(n,t.options)}}const yo={generateTopUV:function(t,r,n,i,a){const o=r[3*n],s=r[3*n+1],h=r[3*i],l=r[3*i+1],c=r[3*a],d=r[3*a+1];return[new Vector2(o,s),new Vector2(h,l),new Vector2(c,d)]},generateSideWallUV:function(t,r,n,i,a,o){const s=r[3*n],h=r[3*n+1],l=r[3*n+2],c=r[3*i],d=r[3*i+1],p=r[3*i+2],m=r[3*a],g=r[3*a+1],y=r[3*a+2],b=r[3*o],w=r[3*o+1],M=r[3*o+2];return Math.abs(h-d)<Math.abs(s-c)?[new Vector2(s,1-l),new Vector2(c,1-p),new Vector2(m,1-y),new Vector2(b,1-M)]:[new Vector2(h,1-l),new Vector2(d,1-p),new Vector2(g,1-y),new Vector2(w,1-M)]}};class IcosahedronGeometry extends PolyhedronGeometry{constructor(t=1,r=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,r),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new IcosahedronGeometry(t.radius,t.detail)}}class LatheGeometry extends BufferGeometry{constructor(t,r=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:r,phiStart:n,phiLength:i},r=Math.floor(r),i=clamp(i,0,2*Math.PI);const a=[],o=[],s=[],h=1/r,l=new Vector3,c=new Vector2;for(let a=0;a<=r;a++){const d=n+a*h*i,p=Math.sin(d),m=Math.cos(d);for(let n=0;n<=t.length-1;n++)l.x=t[n].x*p,l.y=t[n].y,l.z=t[n].x*m,o.push(l.x,l.y,l.z),c.x=a/r,c.y=n/(t.length-1),s.push(c.x,c.y)}for(let n=0;n<r;n++)for(let r=0;r<t.length-1;r++){const i=r+n*t.length,o=i,s=i+t.length,h=i+t.length+1,l=i+1;a.push(o,s,l),a.push(s,h,l)}if(this.setIndex(a),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("uv",new Float32BufferAttribute(s,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new Vector3,a=new Vector3,o=new Vector3,s=r*t.length*3;for(let r=0,h=0;r<t.length;r++,h+=3)i.x=n[h+0],i.y=n[h+1],i.z=n[h+2],a.x=n[s+h+0],a.y=n[s+h+1],a.z=n[s+h+2],o.addVectors(i,a).normalize(),n[h+0]=n[s+h+0]=o.x,n[h+1]=n[s+h+1]=o.y,n[h+2]=n[s+h+2]=o.z}}static fromJSON(t){return new LatheGeometry(t.points,t.segments,t.phiStart,t.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(t=1,r=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,r),this.type="OctahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new OctahedronGeometry(t.radius,t.detail)}}class ParametricGeometry extends BufferGeometry{constructor(t,r,n){super(),this.type="ParametricGeometry",this.parameters={func:t,slices:r,stacks:n};const i=[],a=[],o=[],s=[],h=1e-5,l=new Vector3,c=new Vector3,d=new Vector3,p=new Vector3,m=new Vector3;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const g=r+1;for(let i=0;i<=n;i++){const g=i/n;for(let n=0;n<=r;n++){const i=n/r;t(i,g,c),a.push(c.x,c.y,c.z),i-h>=0?(t(i-h,g,d),p.subVectors(c,d)):(t(i+h,g,d),p.subVectors(d,c)),g-h>=0?(t(i,g-h,d),m.subVectors(c,d)):(t(i,g+h,d),m.subVectors(d,c)),l.crossVectors(p,m).normalize(),o.push(l.x,l.y,l.z),s.push(i,g)}}for(let t=0;t<n;t++)for(let n=0;n<r;n++){const r=t*g+n,a=t*g+n+1,o=(t+1)*g+n+1,s=(t+1)*g+n;i.push(r,a,s),i.push(a,o,s)}this.setIndex(i),this.setAttribute("position",new Float32BufferAttribute(a,3)),this.setAttribute("normal",new Float32BufferAttribute(o,3)),this.setAttribute("uv",new Float32BufferAttribute(s,2))}}class RingGeometry extends BufferGeometry{constructor(t=.5,r=1,n=8,i=1,a=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:r,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:o},n=Math.max(3,n);const s=[],h=[],l=[],c=[],d=[];let p=t;const m=(r-t)/(i=Math.max(1,i)),g=new Vector3;new Vector2;for(let t=0;t<=i;t++){for(let r=0;r<=n;r++){const s=a+r/n*o;g.x=p*Math.cos(s),g.y=p*Math.sin(s),l.push(g.x,g.y,g.z),l.push(g.x,g.y,g.z),h.push(r),h.push(r+1),c.push(0,0,1),c.push(0,0,1),d.push(0,t/i),d.push(1,t/i)}p+=m}for(let t=0;t<i;t++){const r=t*(n+1);for(let t=0;t<n;t++){let i=2*(t+r);t%2!=0&&i++;const a=i,o=i+2*n+2,h=i+2*n+4,l=i+2;s.push(a,o,l),s.push(o,h,l)}}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(l,3)),this.setAttribute("normal",new Float32BufferAttribute(c,3)),this.setAttribute("uv",new Float32BufferAttribute(d,2)),this.setAttribute("b_indices",new Float32BufferAttribute(h,1))}static fromJSON(t){return new RingGeometry(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(t,r=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:r};const n=[],i=[],a=[],o=[];let s=0,h=0;if(!1===Array.isArray(t))addShape(t);else for(let r=0;r<t.length;r++)addShape(t[r]),this.addGroup(s,h,r),s+=h,h=0;function addShape(t){const s=i.length/3,l=t.extractPoints(r);let c=l.shape;const d=l.holes;!1===ShapeUtils.isClockWise(c)&&(c=c.reverse());for(let t=0,r=d.length;t<r;t++){const r=d[t];!0===ShapeUtils.isClockWise(r)&&(d[t]=r.reverse())}const p=ShapeUtils.triangulateShape(c,d);for(let t=0,r=d.length;t<r;t++){const r=d[t];c=c.concat(r)}for(let t=0,r=c.length;t<r;t++){const r=c[t];i.push(r.x,r.y,0),a.push(0,0,1),o.push(r.x,r.y)}for(let t=0,r=p.length;t<r;t++){const r=p[t],i=r[0]+s,a=r[1]+s,o=r[2]+s;n.push(i,a,o),h+=3}}this.setIndex(n),this.setAttribute("position",new Float32BufferAttribute(i,3)),this.setAttribute("normal",new Float32BufferAttribute(a,3)),this.setAttribute("uv",new Float32BufferAttribute(o,2))}toJSON(){const t=super.toJSON();return function toJSON(t,r){if(r.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];r.shapes.push(i.uuid)}else r.shapes.push(t.uuid);return r}(this.parameters.shapes,t)}static fromJSON(t,r){const n=[];for(let i=0,a=t.shapes.length;i<a;i++){const a=r[t.shapes[i]];n.push(a)}return new ShapeGeometry(n,t.curveSegments)}}class SphereGeometry extends BufferGeometry{constructor(t=1,r=32,n=16,i=0,a=2*Math.PI,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:r,heightSegments:n,phiStart:i,phiLength:a,thetaStart:o,thetaLength:s},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));const h=Math.min(o+s,Math.PI);let l=0;const c=[],d=new Vector3,p=new Vector3,m=[],g=[],y=[],b=[];for(let m=0;m<=n;m++){const w=[],M=m/n;let _=0;0==m&&0==o?_=.5/r:m==n&&h==Math.PI&&(_=-.5/r);for(let n=0;n<=r;n++){const h=n/r;d.x=-t*Math.cos(i+h*a)*Math.sin(o+M*s),d.y=t*Math.cos(o+M*s),d.z=t*Math.sin(i+h*a)*Math.sin(o+M*s),g.push(d.x,d.y,d.z),p.copy(d).normalize(),y.push(p.x,p.y,p.z),b.push(h+_,1-M),w.push(l++)}c.push(w)}for(let t=0;t<n;t++)for(let i=0;i<r;i++){const r=c[t][i+1],a=c[t][i],s=c[t+1][i],l=c[t+1][i+1];(0!==t||o>0)&&m.push(r,a,l),(t!==n-1||h<Math.PI)&&m.push(a,s,l)}this.setIndex(m),this.setAttribute("position",new Float32BufferAttribute(g,3)),this.setAttribute("normal",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(b,2))}static fromJSON(t){return new SphereGeometry(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(t=1,r=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,r),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:r}}static fromJSON(t){return new TetrahedronGeometry(t.radius,t.detail)}}class TextGeometry extends ExtrudeGeometry{constructor(t,r={}){const n=r.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new BufferGeometry;const i=n.generateShapes(t,r.size);r.depth=void 0!==r.height?r.height:50,void 0===r.bevelThickness&&(r.bevelThickness=10),void 0===r.bevelSize&&(r.bevelSize=8),void 0===r.bevelEnabled&&(r.bevelEnabled=!1),super(i,r),this.type="TextGeometry"}}class TorusGeometry extends BufferGeometry{constructor(t=1,r=.4,n=8,i=6,a=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:r,radialSegments:n,tubularSegments:i,arc:a},n=Math.floor(n),i=Math.floor(i);const o=[],s=[],h=[],l=[],c=new Vector3,d=new Vector3,p=new Vector3;for(let o=0;o<=n;o++)for(let m=0;m<=i;m++){const g=m/i*a,y=o/n*Math.PI*2;d.x=(t+r*Math.cos(y))*Math.cos(g),d.y=(t+r*Math.cos(y))*Math.sin(g),d.z=r*Math.sin(y),s.push(d.x,d.y,d.z),c.x=t*Math.cos(g),c.y=t*Math.sin(g),p.subVectors(d,c).normalize(),h.push(p.x,p.y,p.z),l.push(m/i),l.push(o/n)}for(let t=1;t<=n;t++)for(let r=1;r<=i;r++){const n=(i+1)*t+r-1,a=(i+1)*(t-1)+r-1,s=(i+1)*(t-1)+r,h=(i+1)*t+r;o.push(n,a,h),o.push(a,s,h)}this.setIndex(o),this.setAttribute("position",new Float32BufferAttribute(s,3)),this.setAttribute("normal",new Float32BufferAttribute(h,3)),this.setAttribute("uv",new Float32BufferAttribute(l,2))}static fromJSON(t){return new TorusGeometry(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(t=1,r=.4,n=64,i=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:r,tubularSegments:n,radialSegments:i,p:a,q:o},n=Math.floor(n),i=Math.floor(i);const s=[],h=[],l=[],c=[],d=new Vector3,p=new Vector3,m=new Vector3,g=new Vector3,y=new Vector3,b=new Vector3,w=new Vector3;for(let s=0;s<=n;++s){const M=s/n*a*Math.PI*2;calculatePositionOnCurve(M,a,o,t,m),calculatePositionOnCurve(M+.01,a,o,t,g),b.subVectors(g,m),w.addVectors(g,m),y.crossVectors(b,w),w.crossVectors(y,b),y.normalize(),w.normalize();for(let t=0;t<=i;++t){const a=t/i*Math.PI*2,o=-r*Math.cos(a),g=r*Math.sin(a);d.x=m.x+(o*w.x+g*y.x),d.y=m.y+(o*w.y+g*y.y),d.z=m.z+(o*w.z+g*y.z),h.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),l.push(p.x,p.y,p.z),c.push(s/n),c.push(t/i)}}for(let t=1;t<=n;t++)for(let r=1;r<=i;r++){const n=(i+1)*(t-1)+(r-1),a=(i+1)*t+(r-1),o=(i+1)*t+r,h=(i+1)*(t-1)+r;s.push(n,a,h),s.push(a,o,h)}function calculatePositionOnCurve(t,r,n,i,a){const o=Math.cos(t),s=Math.sin(t),h=n/r*t,l=Math.cos(h);a.x=i*(2+l)*.5*o,a.y=i*(2+l)*s*.5,a.z=i*Math.sin(h)*.5}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(h,3)),this.setAttribute("normal",new Float32BufferAttribute(l,3)),this.setAttribute("uv",new Float32BufferAttribute(c,2))}static fromJSON(t){return new TorusKnotGeometry(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class TubeGeometry extends BufferGeometry{constructor(t,r=64,n=1,i=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:r,radius:n,radialSegments:i,closed:a};const o=t.computeFrenetFrames(r,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new Vector3,h=new Vector3,l=new Vector2;let c=new Vector3;const d=[],p=[],m=[],g=[];function generateSegment(a){c=t.getPointAt(a/r,c);const l=o.normals[a],m=o.binormals[a];for(let t=0;t<=i;t++){const r=t/i*Math.PI*2,a=Math.sin(r),o=-Math.cos(r);h.x=o*l.x+a*m.x,h.y=o*l.y+a*m.y,h.z=o*l.z+a*m.z,h.normalize(),p.push(h.x,h.y,h.z),s.x=c.x+n*h.x,s.y=c.y+n*h.y,s.z=c.z+n*h.z,d.push(s.x,s.y,s.z)}}!function generateBufferData(){for(let t=0;t<r;t++)generateSegment(t);generateSegment(!1===a?r:0),function generateUVs(){for(let t=0;t<=r;t++)for(let n=0;n<=i;n++)l.x=t/r,l.y=n/i,m.push(l.x,l.y)}(),function generateIndices(){for(let t=1;t<=r;t++)for(let r=1;r<=i;r++){const n=(i+1)*(t-1)+(r-1),a=(i+1)*t+(r-1),o=(i+1)*t+r,s=(i+1)*(t-1)+r;g.push(n,a,s),g.push(a,o,s)}}()}(),this.setIndex(g),this.setAttribute("position",new Float32BufferAttribute(d,3)),this.setAttribute("normal",new Float32BufferAttribute(p,3)),this.setAttribute("uv",new Float32BufferAttribute(m,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new TubeGeometry((new vo[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class WireframeGeometry extends BufferGeometry{constructor(t){if(super(),this.type="WireframeGeometry",!0===t.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const r=[],n=new Set,i=new Vector3,a=new Vector3;if(null!==t.index){const o=t.attributes.position,s=t.index;let h=t.groups;0===h.length&&(h=[{start:0,count:s.count,materialIndex:0}]);for(let t=0,l=h.length;t<l;++t){const l=h[t],c=l.start;for(let t=c,h=c+l.count;t<h;t+=3)for(let h=0;h<3;h++){const l=s.getX(t+h),c=s.getX(t+(h+1)%3);i.fromBufferAttribute(o,l),a.fromBufferAttribute(o,c),!0===isUniqueEdge(i,a,n)&&(r.push(i.x,i.y,i.z),r.push(a.x,a.y,a.z))}}}else{const o=t.attributes.position;for(let t=0,s=o.count/3;t<s;t++)for(let s=0;s<3;s++){const h=3*t+s,l=3*t+(s+1)%3;i.fromBufferAttribute(o,h),a.fromBufferAttribute(o,l),!0===isUniqueEdge(i,a,n)&&(r.push(i.x,i.y,i.z),r.push(a.x,a.y,a.z))}}this.setAttribute("position",new Float32BufferAttribute(r,3))}}function isUniqueEdge(t,r,n){const i=`${t.x},${t.y},${t.z}-${r.x},${r.y},${r.z}`,a=`${r.x},${r.y},${r.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(a)&&(n.add(i,a),!0)}var bo=Object.freeze({__proto__:null,BoxGeometry:BoxGeometry,BoxBufferGeometry:BoxGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronGeometry,EdgesGeometry:EdgesGeometry,ExtrudeGeometry:ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronGeometry,TextGeometry:TextGeometry,TextBufferGeometry:TextGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeGeometry,WireframeGeometry:WireframeGeometry});class ShadowMaterial extends Material{constructor(t){super(),this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class MeshStandardMaterial extends Material{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vr,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Color(1,1,1),this.specularTintMap=null,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Color).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationTint.copy(t.attenuationTint),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularTint.copy(t.specularTint),this.specularTintMap=t.specularTintMap,this}}MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;class MeshPhongMaterial extends Material{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vr,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends Material{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vr,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends Material{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vr,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends Material{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=re,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;class MeshMatcapMaterial extends Material{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vr,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;var wo=Object.freeze({__proto__:null,ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material});const Mo={arraySlice:function(t,r,n){return Mo.isTypedArray(t)?new t.constructor(t.subarray(r,void 0!==n?n:t.length)):t.slice(r,n)},convertArray:function(t,r,n){return!t||!n&&t.constructor===r?t:"number"==typeof r.BYTES_PER_ELEMENT?new r(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const r=t.length,n=new Array(r);for(let t=0;t!==r;++t)n[t]=t;return n.sort((function compareTime(r,n){return t[r]-t[n]})),n},sortedArray:function(t,r,n){const i=t.length,a=new t.constructor(i);for(let o=0,s=0;s!==i;++o){const i=n[o]*r;for(let n=0;n!==r;++n)a[s++]=t[i+n]}return a},flattenJSON:function(t,r,n,i){let a=1,o=t[0];for(;void 0!==o&&void 0===o[i];)o=t[a++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(r.push(o.time),n.push.apply(n,s)),o=t[a++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(r.push(o.time),s.toArray(n,n.length)),o=t[a++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(r.push(o.time),n.push(s)),o=t[a++]}while(void 0!==o)},subclip:function(t,r,n,i,a=30){const o=t.clone();o.name=r;const s=[];for(let t=0;t<o.tracks.length;++t){const r=o.tracks[t],h=r.getValueSize(),l=[],c=[];for(let t=0;t<r.times.length;++t){const o=r.times[t]*a;if(!(o<n||o>=i)){l.push(r.times[t]);for(let n=0;n<h;++n)c.push(r.values[t*h+n])}}0!==l.length&&(r.times=Mo.convertArray(l,r.times.constructor),r.values=Mo.convertArray(c,r.values.constructor),s.push(r))}o.tracks=s;let h=1/0;for(let t=0;t<o.tracks.length;++t)h>o.tracks[t].times[0]&&(h=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*h);return o.resetDuration(),o},makeClipAdditive:function(t,r=0,n=t,i=30){i<=0&&(i=30);const a=n.tracks.length,o=r/i;for(let r=0;r<a;++r){const i=n.tracks[r],a=i.ValueTypeName;if("bool"===a||"string"===a)continue;const s=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===a}));if(void 0===s)continue;let h=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=l/3);let c=0;const d=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=d/3);const p=i.times.length-1;let m;if(o<=i.times[0]){const t=h,r=l-h;m=Mo.arraySlice(i.values,t,r)}else if(o>=i.times[p]){const t=p*l+h,r=t+l-h;m=Mo.arraySlice(i.values,t,r)}else{const t=i.createInterpolant(),r=h,n=l-h;t.evaluate(o),m=Mo.arraySlice(t.resultBuffer,r,n)}if("quaternion"===a){(new Quaternion).fromArray(m).normalize().conjugate().toArray(m)}const g=s.times.length;for(let t=0;t<g;++t){const r=t*d+c;if("quaternion"===a)Quaternion.multiplyQuaternionsFlat(s.values,r,m,0,s.values,r);else{const t=d-2*c;for(let n=0;n<t;++n)s.values[r+n]-=m[n]}}}return t.blendMode=rr,t}};class Interpolant{constructor(t,r,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const r=this.parameterPositions;let n=this._cachedIndex,i=r[n],a=r[n-1];e:{t:{let o;r:{n:if(!(t<i)){for(let o=n+2;;){if(void 0===i){if(t<a)break n;return n=r.length,this._cachedIndex=n,this.afterEnd_(n-1,t,a)}if(n===o)break;if(a=i,i=r[++n],t<i)break t}o=r.length;break r}if(t>=a)break e;{const s=r[1];t<s&&(n=2,a=s);for(let o=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=a,a=r[--n-1],t>=a)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;t<r[i]?o=i:n=i+1}if(i=r[n],a=r[n-1],void 0===a)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=r.length,this._cachedIndex=n,this.afterEnd_(n-1,a,t)}this._cachedIndex=n,this.intervalChanged_(n,a,i)}return this.interpolate_(n,a,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,a=t*i;for(let t=0;t!==i;++t)r[t]=n[a+t];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Interpolant.prototype.beforeStart_=Interpolant.prototype.copySampleValue_,Interpolant.prototype.afterEnd_=Interpolant.prototype.copySampleValue_;class CubicInterpolant extends Interpolant{constructor(t,r,n,i){super(t,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Zt,endingEnd:Zt}}intervalChanged_(t,r,n){const i=this.parameterPositions;let a=t-2,o=t+1,s=i[a],h=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case $t:a=t,s=2*r-n;break;case er:a=i.length-2,s=r+i[a]-i[a+1];break;default:a=t,s=n}if(void 0===h)switch(this.getSettings_().endingEnd){case $t:o=t,h=2*n-r;break;case er:o=1,h=n+i[1]-i[0];break;default:o=t-1,h=r}const l=.5*(n-r),c=this.valueSize;this._weightPrev=l/(r-s),this._weightNext=l/(h-n),this._offsetPrev=a*c,this._offsetNext=o*c}interpolate_(t,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,h=t*s,l=h-s,c=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(n-r)/(i-r),y=g*g,b=y*g,w=-p*b+2*p*y-p*g,M=(1+p)*b+(-1.5-2*p)*y+(-.5+p)*g+1,_=(-1-m)*b+(1.5+m)*y+.5*g,x=m*b-m*y;for(let t=0;t!==s;++t)a[t]=w*o[c+t]+M*o[l+t]+_*o[h+t]+x*o[d+t];return a}}class LinearInterpolant extends Interpolant{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,h=t*s,l=h-s,c=(n-r)/(i-r),d=1-c;for(let t=0;t!==s;++t)a[t]=o[l+t]*d+o[h+t]*c;return a}}class DiscreteInterpolant extends Interpolant{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class KeyframeTrack{constructor(t,r,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===r||0===r.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Mo.convertArray(r,this.TimeBufferType),this.values=Mo.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const r=t.constructor;let n;if(r.toJSON!==this.toJSON)n=r.toJSON(t);else{n={name:t.name,times:Mo.convertArray(t.times,Array),values:Mo.convertArray(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new LinearInterpolant(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new CubicInterpolant(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let r;switch(t){case Xt:r=this.InterpolantFactoryMethodDiscrete;break;case Yt:r=this.InterpolantFactoryMethodLinear;break;case Jt:r=this.InterpolantFactoryMethodSmooth}if(void 0===r){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xt;case this.InterpolantFactoryMethodLinear:return Yt;case this.InterpolantFactoryMethodSmooth:return Jt}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=t}return this}scale(t){if(1!==t){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=t}return this}trim(t,r){const n=this.times,i=n.length;let a=0,o=i-1;for(;a!==i&&n[a]<t;)++a;for(;-1!==o&&n[o]>r;)--o;if(++o,0!==a||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const t=this.getValueSize();this.times=Mo.arraySlice(n,a,o),this.values=Mo.arraySlice(this.values,a*t,o*t)}return this}validate(){let t=!0;const r=this.getValueSize();r-Math.floor(r)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,a=n.length;0===a&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let r=0;r!==a;r++){const i=n[r];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,r,i),t=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,r,i,o),t=!1;break}o=i}if(void 0!==i&&Mo.isTypedArray(i))for(let r=0,n=i.length;r!==n;++r){const n=i[r];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,r,n),t=!1;break}}return t}optimize(){const t=Mo.arraySlice(this.times),r=Mo.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Jt,a=t.length-1;let o=1;for(let s=1;s<a;++s){let a=!1;const h=t[s];if(h!==t[s+1]&&(1!==s||h!==t[0]))if(i)a=!0;else{const t=s*n,i=t-n,o=t+n;for(let s=0;s!==n;++s){const n=r[t+s];if(n!==r[i+s]||n!==r[o+s]){a=!0;break}}}if(a){if(s!==o){t[o]=t[s];const i=s*n,a=o*n;for(let t=0;t!==n;++t)r[a+t]=r[i+t]}++o}}if(a>0){t[o]=t[a];for(let t=a*n,i=o*n,s=0;s!==n;++s)r[i+s]=r[t+s];++o}return o!==t.length?(this.times=Mo.arraySlice(t,0,o),this.values=Mo.arraySlice(r,0,o*n)):(this.times=t,this.values=r),this}clone(){const t=Mo.arraySlice(this.times,0),r=Mo.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,r);return n.createInterpolant=this.createInterpolant,n}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=Yt;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=Xt,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(t,r,n,i){super(t,r,n,i)}interpolate_(t,r,n,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,h=(n-r)/(i-r);let l=t*s;for(let t=l+s;l!==t;l+=4)Quaternion.slerpFlat(a,0,o,l-s,o,l,h);return a}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(t){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),t)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=Yt,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=Xt,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(t,r=-1,n,i=tr){this.name=t,this.tracks=n,this.duration=r,this.blendMode=i,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(t){const r=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,a=n.length;t!==a;++t)r.push(parseKeyframeTrack(n[t]).scale(i));const a=new this(t.name,t.duration,r,t.blendMode);return a.uuid=t.uuid,a}static toJSON(t){const r=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:r,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)r.push(KeyframeTrack.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,r,n,i){const a=r.length,o=[];for(let t=0;t<a;t++){let s=[],h=[];s.push((t+a-1)%a,t,(t+1)%a),h.push(0,1,0);const l=Mo.getKeyframeOrder(s);s=Mo.sortedArray(s,1,l),h=Mo.sortedArray(h,1,l),i||0!==s[0]||(s.push(a),h.push(h[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+r[t].name+"]",s,h).scale(1/n))}return new this(t,-1,o)}static findByName(t,r){let n=t;if(!Array.isArray(t)){const r=t;n=r.geometry&&r.geometry.animations||r.animations}for(let t=0;t<n.length;t++)if(n[t].name===r)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,r,n){const i={},a=/^([\w-]*?)([\d]+)$/;for(let r=0,n=t.length;r<n;r++){const n=t[r],o=n.name.match(a);if(o&&o.length>1){const t=o[1];let r=i[t];r||(i[t]=r=[]),r.push(n)}}const o=[];for(const t in i)o.push(this.CreateFromMorphTargetSequence(t,i[t],r,n));return o}static parseAnimation(t,r){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const addNonemptyTrack=function(t,r,n,i,a){if(0!==n.length){const o=[],s=[];Mo.flattenJSON(n,o,s,i),0!==o.length&&a.push(new t(r,o,s))}},n=[],i=t.name||"default",a=t.fps||30,o=t.blendMode;let s=t.length||-1;const h=t.hierarchy||[];for(let t=0;t<h.length;t++){const i=h[t].keys;if(i&&0!==i.length)if(i[0].morphTargets){const t={};let r;for(r=0;r<i.length;r++)if(i[r].morphTargets)for(let n=0;n<i[r].morphTargets.length;n++)t[i[r].morphTargets[n]]=-1;for(const a in t){const t=[],o=[];for(let n=0;n!==i[r].morphTargets.length;++n){const n=i[r];t.push(n.time),o.push(n.morphTarget===a?1:0)}n.push(new NumberKeyframeTrack(".morphTargetInfluence["+a+"]",t,o))}s=t.length*(a||1)}else{const a=".bones["+r[t].name+"]";addNonemptyTrack(VectorKeyframeTrack,a+".position",i,"pos",n),addNonemptyTrack(QuaternionKeyframeTrack,a+".quaternion",i,"rot",n),addNonemptyTrack(VectorKeyframeTrack,a+".scale",i,"scl",n)}}if(0===n.length)return null;return new this(i,s,n,o)}resetDuration(){let t=0;for(let r=0,n=this.tracks.length;r!==n;++r){const n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let r=0;r<this.tracks.length;r++)t=t&&this.tracks[r].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let r=0;r<this.tracks.length;r++)t.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function parseKeyframeTrack(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const r=function getTrackTypeForValueTypeName(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const r=[],n=[];Mo.flattenJSON(t.keys,r,n,"value"),t.times=r,t.values=n}return void 0!==r.parse?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)}const _o={enabled:!1,files:{},add:function(t,r){!1!==this.enabled&&(this.files[t]=r)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class LoadingManager{constructor(t,r,n){const i=this;let a,o=!1,s=0,h=0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=r,this.onError=n,this.itemStart=function(t){h++,!1===o&&void 0!==i.onStart&&i.onStart(t,s,h),o=!0},this.itemEnd=function(t){s++,void 0!==i.onProgress&&i.onProgress(t,s,h),s===h&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return a?a(t):t},this.setURLModifier=function(t){return a=t,this},this.addHandler=function(t,r){return l.push(t,r),this},this.removeHandler=function(t){const r=l.indexOf(t);return-1!==r&&l.splice(r,2),this},this.getHandler=function(t){for(let r=0,n=l.length;r<n;r+=2){const n=l[r],i=l[r+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const xo=new LoadingManager;class Loader{constructor(t){this.manager=void 0!==t?t:xo,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,r){const n=this;return new Promise((function(i,a){n.load(t,i,r,a)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Ao={};class FileLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=_o.get(t);if(void 0!==o)return a.manager.itemStart(t),setTimeout((function(){r&&r(o),a.manager.itemEnd(t)}),0),o;if(void 0!==Ao[t])return void Ao[t].push({onLoad:r,onProgress:n,onError:i});const s=t.match(/^data:(.*?)(;base64)?,(.*)$/);let h;if(s){const n=s[1],o=!!s[2];let h=s[3];h=decodeURIComponent(h),o&&(h=atob(h));try{let i;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const t=new Uint8Array(h.length);for(let r=0;r<h.length;r++)t[r]=h.charCodeAt(r);i="blob"===o?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const r=new DOMParser;i=r.parseFromString(h,n);break;case"json":i=JSON.parse(h);break;default:i=h}setTimeout((function(){r&&r(i),a.manager.itemEnd(t)}),0)}catch(r){setTimeout((function(){i&&i(r),a.manager.itemError(t),a.manager.itemEnd(t)}),0)}}else{Ao[t]=[],Ao[t].push({onLoad:r,onProgress:n,onError:i}),h=new XMLHttpRequest,h.open("GET",t,!0),h.addEventListener("load",(function(r){const n=this.response,i=Ao[t];if(delete Ao[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),_o.add(t,n);for(let t=0,r=i.length;t<r;t++){const r=i[t];r.onLoad&&r.onLoad(n)}a.manager.itemEnd(t)}else{for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(r)}a.manager.itemError(t),a.manager.itemEnd(t)}}),!1),h.addEventListener("progress",(function(r){const n=Ao[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onProgress&&i.onProgress(r)}}),!1),h.addEventListener("error",(function(r){const n=Ao[t];delete Ao[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(r)}a.manager.itemError(t),a.manager.itemEnd(t)}),!1),h.addEventListener("abort",(function(r){const n=Ao[t];delete Ao[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(r)}a.manager.itemError(t),a.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(h.responseType=this.responseType),void 0!==this.withCredentials&&(h.withCredentials=this.withCredentials),h.overrideMimeType&&h.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)h.setRequestHeader(t,this.requestHeader[t]);h.send(null)}return a.manager.itemStart(t),h}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class AnimationLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=new FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{r(a.parse(JSON.parse(n)))}catch(r){i?i(r):console.error(r),a.manager.itemError(t)}}),n,i)}parse(t){const r=[];for(let n=0;n<t.length;n++){const i=AnimationClip.parse(t[n]);r.push(i)}return r}}class CompressedTextureLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=[],s=new CompressedTexture,h=new FileLoader(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(a.withCredentials);let l=0;function loadTexture(c){h.load(t[c],(function(t){const n=a.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=Ee),s.image=o,s.format=n.format,s.needsUpdate=!0,r&&r(s))}),n,i)}if(Array.isArray(t))for(let r=0,n=t.length;r<n;++r)loadTexture(r);else h.load(t,(function(t){const n=a.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let r=0;r<t;r++){o[r]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[r].mipmaps.push(n.mipmaps[r*n.mipmapCount+t]),o[r].format=n.format,o[r].width=n.width,o[r].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Ee),s.format=n.format,s.needsUpdate=!0,r&&r(s)}),n,i);return s}}class ImageLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=_o.get(t);if(void 0!==o)return a.manager.itemStart(t),setTimeout((function(){r&&r(o),a.manager.itemEnd(t)}),0),o;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function onImageLoad(){s.removeEventListener("load",onImageLoad,!1),s.removeEventListener("error",onImageError,!1),_o.add(t,this),r&&r(this),a.manager.itemEnd(t)}function onImageError(r){s.removeEventListener("load",onImageLoad,!1),s.removeEventListener("error",onImageError,!1),i&&i(r),a.manager.itemError(t),a.manager.itemEnd(t)}return s.addEventListener("load",onImageLoad,!1),s.addEventListener("error",onImageError,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(t),s.src=t,s}}class CubeTextureLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function loadTexture(n){o.load(t[n],(function(t){a.images[n]=t,s++,6===s&&(a.needsUpdate=!0,r&&r(a))}),void 0,i)}for(let r=0;r<t.length;++r)loadTexture(r);return a}}class DataTextureLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=new DataTexture,s=new FileLoader(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(a.withCredentials),s.load(t,(function(t){const n=a.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:be,o.wrapT=void 0!==n.wrapT?n.wrapT:be,o.magFilter=void 0!==n.magFilter?n.magFilter:Ee,o.minFilter=void 0!==n.minFilter?n.minFilter:Ee,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Te),1===n.mipmapCount&&(o.minFilter=Ee),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,r&&r(o,n))}),n,i),o}}class TextureLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=new Texture,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){a.image=n;const i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);a.format=i?Ge:We,a.needsUpdate=!0,void 0!==r&&r(a)}),n,i),a}}class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);t.equals(r)||this.curves.push(new LineCurve(r,t))}getPoint(t){const r=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=r){const t=n[i]-r,a=this.curves[i],o=a.getLength(),s=0===o?0:1-t/o;return a.getPointAt(s)}i++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let r=0;for(let n=0,i=this.curves.length;n<i;n++)r+=this.curves[n].getLength(),t.push(r);return this.cacheLengths=t,t}getSpacedPoints(t=40){const r=[];for(let n=0;n<=t;n++)r.push(this.getPoint(n/t));return this.autoClose&&r.push(r[0]),r}getPoints(t=12){const r=[];let n;for(let i=0,a=this.curves;i<a.length;i++){const o=a[i],s=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,h=o.getPoints(s);for(let t=0;t<h.length;t++){const i=h[t];n&&n.equals(i)||(r.push(i),n=i)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(t){super.copy(t),this.curves=[];for(let r=0,n=t.curves.length;r<n;r++){const n=t.curves[r];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let r=0,n=this.curves.length;r<n;r++){const n=this.curves[r];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let r=0,n=t.curves.length;r<n;r++){const n=t.curves[r];this.curves.push((new vo[n.type]).fromJSON(n))}return this}}class Path extends CurvePath{constructor(t){super(),this.type="Path",this.currentPoint=new Vector2,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let r=1,n=t.length;r<n;r++)this.lineTo(t[r].x,t[r].y);return this}moveTo(t,r){return this.currentPoint.set(t,r),this}lineTo(t,r){const n=new LineCurve(this.currentPoint.clone(),new Vector2(t,r));return this.curves.push(n),this.currentPoint.set(t,r),this}quadraticCurveTo(t,r,n,i){const a=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(t,r),new Vector2(n,i));return this.curves.push(a),this.currentPoint.set(n,i),this}bezierCurveTo(t,r,n,i,a,o){const s=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(t,r),new Vector2(n,i),new Vector2(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this}splineThru(t){const r=[this.currentPoint.clone()].concat(t),n=new SplineCurve(r);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,r,n,i,a,o){const s=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+s,r+h,n,i,a,o),this}absarc(t,r,n,i,a,o){return this.absellipse(t,r,n,n,i,a,o),this}ellipse(t,r,n,i,a,o,s,h){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,r+c,n,i,a,o,s,h),this}absellipse(t,r,n,i,a,o,s,h){const l=new EllipseCurve(t,r,n,i,a,o,s,h);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Shape extends Path{constructor(t){super(t),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(t){const r=[];for(let n=0,i=this.holes.length;n<i;n++)r[n]=this.holes[n].getPoints(t);return r}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let r=0,n=t.holes.length;r<n;r++){const n=t.holes[r];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let r=0,n=this.holes.length;r<n;r++){const n=this.holes[r];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let r=0,n=t.holes.length;r<n;r++){const n=t.holes[r];this.holes.push((new Path).fromJSON(n))}return this}}class Light extends Object3D{constructor(t){super(t={color:16777215,intensity:1,...t}),this.type="Light",this.color=new Color(t.color),this.intensity=t.intensity}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const r=super.toJSON(t);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,void 0!==this.groundColor&&(r.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(r.object.distance=this.distance),void 0!==this.angle&&(r.object.angle=this.angle),void 0!==this.decay&&(r.object.decay=this.decay),void 0!==this.penumbra&&(r.object.penumbra=this.penumbra),void 0!==this.shadow&&(r.object.shadow=this.shadow.toJSON()),r}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(t,r,n){super(t,n),this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(r)}copy(t){return Light.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const So=new Matrix4,Eo=new Vector3,Bo=new Vector3;class LightShadow{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const r=this.camera,n=this.matrix;Eo.setFromMatrixPosition(t.matrixWorld),r.position.copy(Eo),Bo.setFromMatrixPosition(t.target.matrixWorld),r.lookAt(Bo),r.updateMatrixWorld(),So.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(So),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(r.projectionMatrix),n.multiply(r.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.focus=1}updateMatrices(t){const r=this.camera,n=2*Xr*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=t.distance||r.far;n===r.fov&&i===r.aspect&&a===r.far||(r.fov=n,r.aspect=i,r.far=a,r.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(t,r,n=0,i=Math.PI/3,a=0,o=1){super(t,r),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.distance=n,this.angle=i,this.penumbra=a,this.decay=o,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const Co=new Matrix4,To=new Vector3,Do=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(t,r=0){const n=this.camera,i=this.matrix,a=t.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),To.setFromMatrixPosition(t.matrixWorld),n.position.copy(To),Do.copy(n.position),Do.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt(Do),n.updateMatrixWorld(),i.makeTranslation(-To.x,-To.y,-To.z),Co.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Co)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(t){super(t={color:16777215,intensity:1,distance:0,decay:1,...t}),this.type="PointLight",this.distance=t.distance,this.decay=t.decay,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(t,r){super(t,r),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(t,r){super(t,r),this.type="AmbientLight"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(t,r,n=10,i=10){super(t,r),this.type="RectAreaLight",this.width=n,this.height=i}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const r=super.toJSON(t);return r.object.width=this.width,r.object.height=this.height,r}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Vector3)}set(t){for(let r=0;r<9;r++)this.coefficients[r].copy(t[r]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,r){const n=t.x,i=t.y,a=t.z,o=this.coefficients;return r.copy(o[0]).multiplyScalar(.282095),r.addScaledVector(o[1],.488603*i),r.addScaledVector(o[2],.488603*a),r.addScaledVector(o[3],.488603*n),r.addScaledVector(o[4],n*i*1.092548),r.addScaledVector(o[5],i*a*1.092548),r.addScaledVector(o[6],.315392*(3*a*a-1)),r.addScaledVector(o[7],n*a*1.092548),r.addScaledVector(o[8],.546274*(n*n-i*i)),r}getIrradianceAt(t,r){const n=t.x,i=t.y,a=t.z,o=this.coefficients;return r.copy(o[0]).multiplyScalar(.886227),r.addScaledVector(o[1],1.023328*i),r.addScaledVector(o[2],1.023328*a),r.addScaledVector(o[3],1.023328*n),r.addScaledVector(o[4],.858086*n*i),r.addScaledVector(o[5],.858086*i*a),r.addScaledVector(o[6],.743125*a*a-.247708),r.addScaledVector(o[7],.858086*n*a),r.addScaledVector(o[8],.429043*(n*n-i*i)),r}add(t){for(let r=0;r<9;r++)this.coefficients[r].add(t.coefficients[r]);return this}addScaledSH(t,r){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],r);return this}scale(t){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(t);return this}lerp(t,r){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],r);return this}equals(t){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(t.coefficients[r]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,r=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,r+3*i);return this}toArray(t=[],r=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,r+3*i);return t}static getBasisAt(t,r){const n=t.x,i=t.y,a=t.z;r[0]=.282095,r[1]=.488603*i,r[2]=.488603*a,r[3]=.488603*n,r[4]=1.092548*n*i,r[5]=1.092548*i*a,r[6]=.315392*(3*a*a-1),r[7]=1.092548*n*a,r[8]=.546274*(n*n-i*i)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(t=new SphericalHarmonics3,r=1){super(void 0,r),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const r=super.toJSON(t);return r.object.sh=this.sh.toArray(),r}}LightProbe.prototype.isLightProbe=!0;class MaterialLoader extends Loader{constructor(t){super(t),this.textures={}}load(t,r,n,i){const a=this,o=new FileLoader(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,(function(n){try{r(a.parse(JSON.parse(n)))}catch(r){i?i(r):console.error(r),a.manager.itemError(t)}}),n,i)}parse(t){const r=this.textures;function getTexture(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}const n=new wo[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&void 0!==n.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.sheen&&(n.sheen=(new Color).setHex(t.sheen)),void 0!==t.emissive&&void 0!==n.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==n.specular&&n.specular.setHex(t.specular),void 0!==t.specularIntensity&&(n.specularIntensity=t.specularIntensity),void 0!==t.specularTint&&void 0!==n.specularTint&&n.specularTint.setHex(t.specularTint),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearcoat&&(n.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(n.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(n.transmission=t.transmission),void 0!==t.thickness&&(n.thickness=t.thickness),void 0!==t.attenuationDistance&&(n.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationTint&&void 0!==n.attenuationTint&&n.attenuationTint.setHex(t.attenuationTint),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.shadowSide&&(n.shadowSide=t.shadowSide),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(n.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(n.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(n.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(n.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(n.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(n.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(n.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(n.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.alphaToCoverage&&(n.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(n.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.toneMapped&&(n.toneMapped=t.toneMapped),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?n.vertexColors=t.vertexColors>0:n.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const r in t.uniforms){const i=t.uniforms[r];switch(n.uniforms[r]={},i.type){case"t":n.uniforms[r].value=getTexture(i.value);break;case"c":n.uniforms[r].value=(new Color).setHex(i.value);break;case"v2":n.uniforms[r].value=(new Vector2).fromArray(i.value);break;case"v3":n.uniforms[r].value=(new Vector3).fromArray(i.value);break;case"v4":n.uniforms[r].value=(new Vector4).fromArray(i.value);break;case"m3":n.uniforms[r].value=(new Matrix3).fromArray(i.value);break;case"m4":n.uniforms[r].value=(new Matrix4).fromArray(i.value);break;default:n.uniforms[r].value=i.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const r in t.extensions)n.extensions[r]=t.extensions[r];if(void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=getTexture(t.map)),void 0!==t.matcap&&(n.matcap=getTexture(t.matcap)),void 0!==t.alphaMap&&(n.alphaMap=getTexture(t.alphaMap)),void 0!==t.bumpMap&&(n.bumpMap=getTexture(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=getTexture(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale){let r=t.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new Vector2).fromArray(r)}return void 0!==t.displacementMap&&(n.displacementMap=getTexture(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=getTexture(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=getTexture(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=getTexture(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=getTexture(t.specularMap)),void 0!==t.specularIntensityMap&&(n.specularIntensityMap=getTexture(t.specularIntensityMap)),void 0!==t.specularTintMap&&(n.specularTintMap=getTexture(t.specularTintMap)),void 0!==t.envMap&&(n.envMap=getTexture(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(n.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(n.lightMap=getTexture(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=getTexture(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=getTexture(t.gradientMap)),void 0!==t.clearcoatMap&&(n.clearcoatMap=getTexture(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=getTexture(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(n.clearcoatNormalMap=getTexture(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Vector2).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(n.transmissionMap=getTexture(t.transmissionMap)),void 0!==t.thicknessMap&&(n.thicknessMap=getTexture(t.thicknessMap)),n}setTextures(t){return this.textures=t,this}}class LoaderUtils{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let r="";for(let n=0,i=t.length;n<i;n++)r+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(r))}catch(t){return r}}static extractUrlBase(t){const r=t.lastIndexOf("/");return-1===r?"./":t.substr(0,r+1)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0;class InstancedBufferAttribute extends BufferAttribute{constructor(t,r,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,r,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0;class BufferGeometryLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=new FileLoader(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,(function(n){try{r(a.parse(JSON.parse(n)))}catch(r){i?i(r):console.error(r),a.manager.itemError(t)}}),n,i)}parse(t){const r={},n={};function getInterleavedBuffer(t,i){if(void 0!==r[i])return r[i];const a=t.interleavedBuffers[i],o=function getArrayBuffer(t,r){if(void 0!==n[r])return n[r];const i=t.arrayBuffers[r],a=new Uint32Array(i).buffer;return n[r]=a,a}(t,a.buffer),s=getTypedArray(a.type,o),h=new InterleavedBuffer(s,a.stride);return h.uuid=a.uuid,r[i]=h,h}const i=t.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,a=t.data.index;if(void 0!==a){const t=getTypedArray(a.type,a.array);i.setIndex(new BufferAttribute(t,1))}const o=t.data.attributes;for(const r in o){const n=o[r];let a;if(n.isInterleavedBufferAttribute){const r=getInterleavedBuffer(t.data,n.data);a=new InterleavedBufferAttribute(r,n.itemSize,n.offset,n.normalized)}else{const t=getTypedArray(n.type,n.array);a=new(n.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(t,n.itemSize,n.normalized)}void 0!==n.name&&(a.name=n.name),void 0!==n.usage&&a.setUsage(n.usage),void 0!==n.updateRange&&(a.updateRange.offset=n.updateRange.offset,a.updateRange.count=n.updateRange.count),i.setAttribute(r,a)}const s=t.data.morphAttributes;if(s)for(const r in s){const n=s[r],a=[];for(let r=0,i=n.length;r<i;r++){const i=n[r];let o;if(i.isInterleavedBufferAttribute){const r=getInterleavedBuffer(t.data,i.data);o=new InterleavedBufferAttribute(r,i.itemSize,i.offset,i.normalized)}else{const t=getTypedArray(i.type,i.array);o=new BufferAttribute(t,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),a.push(o)}i.morphAttributes[r]=a}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const h=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==h)for(let t=0,r=h.length;t!==r;++t){const r=h[t];i.addGroup(r.start,r.count,r.materialIndex)}const l=t.data.boundingSphere;if(void 0!==l){const t=new Vector3;void 0!==l.center&&t.fromArray(l.center),i.boundingSphere=new Sphere(t,l.radius)}return t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}}class ObjectLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=""===this.path?LoaderUtils.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const s=new FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(r){return void 0!==i&&i(r),void console.error("THREE:ObjectLoader: Can't parse "+t+".",r.message)}const s=o.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?a.parse(o,r):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)}async loadAsync(t,r){const n=""===this.path?LoaderUtils.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new FileLoader(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const a=await i.loadAsync(t,r),o=JSON.parse(a),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(o)}parse(t,r){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,(function(){void 0!==r&&r(l)})),s=this.parseTextures(t.textures,o),h=this.parseMaterials(t.materials,s),l=this.parseObject(t.object,a,h,s,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==r){let t=!1;for(const r in o)if(o[r]instanceof HTMLImageElement){t=!0;break}!1===t&&r(l)}return l}async parseAsync(t){const r=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),a=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),h=this.parseObject(t.object,i,s,o,r),l=this.parseSkeletons(t.skeletons,h);return this.bindSkeletons(h,l),h}parseShapes(t){const r={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new Shape).fromJSON(t[n]);r[i.uuid]=i}return r}parseSkeletons(t,r){const n={},i={};if(r.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let r=0,a=t.length;r<a;r++){const a=(new Skeleton).fromJSON(t[r],i);n[a.uuid]=a}return n}parseGeometries(t,r){const n={};if(void 0!==t){const i=new BufferGeometryLoader;for(let a=0,o=t.length;a<o;a++){let o;const s=t[a];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in bo?o=bo[s.type].fromJSON(s,r):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(t,r){const n={},i={};if(void 0!==t){const a=new MaterialLoader;a.setTextures(r);for(let r=0,o=t.length;r<o;r++){const o=t[r];if("MultiMaterial"===o.type){const t=[];for(let r=0;r<o.materials.length;r++){const i=o.materials[r];void 0===n[i.uuid]&&(n[i.uuid]=a.parse(i)),t.push(n[i.uuid])}i[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=a.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(t){const r={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],a=AnimationClip.parse(i);r[a.uuid]=a}return r}parseImages(t,r){const n=this,i={};let a;function deserializeImage(t){if("string"==typeof t){const r=t;return function loadImage(t){return n.manager.itemStart(t),a.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r)?r:n.resourcePath+r)}return t.data?{data:getTypedArray(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new LoadingManager(r);a=new ImageLoader(n),a.setCrossOrigin(this.crossOrigin);for(let r=0,n=t.length;r<n;r++){const n=t[r],a=n.url;if(Array.isArray(a)){i[n.uuid]=[];for(let t=0,r=a.length;t<r;t++){const r=deserializeImage(a[t]);null!==r&&(r instanceof HTMLImageElement?i[n.uuid].push(r):i[n.uuid].push(new DataTexture(r.data,r.width,r.height)))}}else{const t=deserializeImage(n.url);null!==t&&(i[n.uuid]=t)}}}return i}async parseImagesAsync(t){const r=this,n={};let i;async function deserializeImage(t){if("string"==typeof t){const n=t,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:r.resourcePath+n;return await i.loadAsync(a)}return t.data?{data:getTypedArray(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new ImageLoader(this.manager),i.setCrossOrigin(this.crossOrigin);for(let r=0,i=t.length;r<i;r++){const i=t[r],a=i.url;if(Array.isArray(a)){n[i.uuid]=[];for(let t=0,r=a.length;t<r;t++){const r=a[t],o=await deserializeImage(r);null!==o&&(o instanceof HTMLImageElement?n[i.uuid].push(o):n[i.uuid].push(new DataTexture(o.data,o.width,o.height)))}}else{const t=await deserializeImage(i.url);null!==t&&(n[i.uuid]=t)}}}return n}parseTextures(t,r){function parseConstant(t,r){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),r[t])}const n={};if(void 0!==t)for(let i=0,a=t.length;i<a;i++){const a=t[i];let o;void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===r[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=r[a.image];Array.isArray(s)?(o=new CubeTexture(s),6===s.length&&(o.needsUpdate=!0)):(o=s&&s.data?new DataTexture(s.data,s.width,s.height):new Texture(s),s&&(o.needsUpdate=!0)),o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=parseConstant(a.mapping,Po)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=parseConstant(a.wrap[0],Ro),o.wrapT=parseConstant(a.wrap[1],Ro)),void 0!==a.format&&(o.format=a.format),void 0!==a.type&&(o.type=a.type),void 0!==a.encoding&&(o.encoding=a.encoding),void 0!==a.minFilter&&(o.minFilter=parseConstant(a.minFilter,Lo)),void 0!==a.magFilter&&(o.magFilter=parseConstant(a.magFilter,Lo)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(o.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(o.unpackAlignment=a.unpackAlignment),n[a.uuid]=o}return n}parseObject(t,r,n,i,a){let o,s,h;function getGeometry(t){return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),r[t]}function getMaterial(t){if(void 0!==t){if(Array.isArray(t)){const r=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),r.push(n[a])}return r}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function getTexture(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":o=new Scene,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new Color(t.background):o.background=getTexture(t.background)),void 0!==t.environment&&(o.environment=getTexture(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Fog(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new FogExp2(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new AmbientLight(t.color,t.intensity);break;case"DirectionalLight":o=new DirectionalLight(t.color,t.intensity);break;case"PointLight":o=new PointLight(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new RectAreaLight(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new HemisphereLight(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new LightProbe).fromJSON(t);break;case"SkinnedMesh":s=getGeometry(t.geometry),h=getMaterial(t.material),o=new SkinnedMesh(s,h),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":s=getGeometry(t.geometry),h=getMaterial(t.material),o=new Mesh(s,h);break;case"InstancedMesh":s=getGeometry(t.geometry),h=getMaterial(t.material);const r=t.count,n=t.instanceMatrix,i=t.instanceColor;o=new InstancedMesh(s,h,r),o.instanceMatrix=new BufferAttribute(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new BufferAttribute(new Float32Array(i.array),i.itemSize));break;case"LOD":o=new LOD;break;case"Line":o=new Line(getGeometry(t.geometry),getMaterial(t.material));break;case"LineLoop":o=new LineLoop(getGeometry(t.geometry),getMaterial(t.material));break;case"LineSegments":o=new LineSegments(getGeometry(t.geometry),getMaterial(t.material));break;case"PointCloud":case"Points":o=new Points(getGeometry(t.geometry),getMaterial(t.material));break;case"Sprite":o=new Sprite(getMaterial(t.material));break;case"Group":o=new Group;break;case"Bone":o=new Bone;break;default:o=new Object3D}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const s=t.children;for(let t=0;t<s.length;t++)o.add(this.parseObject(s[t],r,n,i,a))}if(void 0!==t.animations){const r=t.animations;for(let t=0;t<r.length;t++){const n=r[t];o.animations.push(a[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const r=t.levels;for(let t=0;t<r.length;t++){const n=r[t],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance)}}return o}bindSkeletons(t,r){0!==Object.keys(r).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=r[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Po={UVMapping:ce,CubeReflectionMapping:de,CubeRefractionMapping:fe,EquirectangularReflectionMapping:pe,EquirectangularRefractionMapping:me,CubeUVReflectionMapping:ge,CubeUVRefractionMapping:ve},Ro={RepeatWrapping:ye,ClampToEdgeWrapping:be,MirroredRepeatWrapping:we},Lo={NearestFilter:Me,NearestMipmapNearestFilter:_e,NearestMipmapLinearFilter:Ae,LinearFilter:Ee,LinearMipmapNearestFilter:Be,LinearMipmapLinearFilter:Te};class ImageBitmapLoader extends Loader{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,r,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const a=this,o=_o.get(t);if(void 0!==o)return a.manager.itemStart(t),setTimeout((function(){r&&r(o),a.manager.itemEnd(t)}),0),o;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(t,s).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(a.options,{colorSpaceConversion:"none"}))})).then((function(n){_o.add(t,n),r&&r(n),a.manager.itemEnd(t)})).catch((function(r){i&&i(r),a.manager.itemError(t),a.manager.itemEnd(t)})),a.manager.itemStart(t)}}ImageBitmapLoader.prototype.isImageBitmapLoader=!0;class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(t,r){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,r),this}lineTo(t,r){return this.currentPath.lineTo(t,r),this}quadraticCurveTo(t,r,n,i){return this.currentPath.quadraticCurveTo(t,r,n,i),this}bezierCurveTo(t,r,n,i,a,o){return this.currentPath.bezierCurveTo(t,r,n,i,a,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t,r){function toShapesNoHoles(t){const r=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],a=new Shape;a.curves=i.curves,r.push(a)}return r}function isPointInsidePolygon(t,r){const n=r.length;let i=!1;for(let a=n-1,o=0;o<n;a=o++){let n=r[a],s=r[o],h=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=r[o],h=-h,s=r[a],l=-l),t.y<n.y||t.y>s.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const r=l*(t.x-n.x)-h*(t.y-n.y);if(0===r)return!0;if(r<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(s.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=s.x)return!0}}return i}const n=ShapeUtils.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===r)return toShapesNoHoles(i);let a,o,s;const h=[];if(1===i.length)return o=i[0],s=new Shape,s.curves=o.curves,h.push(s),h;let l=!n(i[0].getPoints());l=t?!l:l;const c=[],d=[];let p,m,g=[],y=0;d[y]=void 0,g[y]=[];for(let r=0,s=i.length;r<s;r++)o=i[r],p=o.getPoints(),a=n(p),a=t?!a:a,a?(!l&&d[y]&&y++,d[y]={s:new Shape,p:p},d[y].s.curves=o.curves,l&&y++,g[y]=[]):g[y].push({h:o,p:p[0]});if(!d[0])return toShapesNoHoles(i);if(d.length>1){let t=!1;const r=[];for(let t=0,r=d.length;t<r;t++)c[t]=[];for(let n=0,i=d.length;n<i;n++){const i=g[n];for(let a=0;a<i.length;a++){const o=i[a];let s=!0;for(let i=0;i<d.length;i++)isPointInsidePolygon(o.p,d[i].p)&&(n!==i&&r.push({froms:n,tos:i,hole:a}),s?(s=!1,c[i].push(o)):t=!0);s&&c[n].push(o)}}r.length>0&&(t||(g=c))}for(let t=0,r=d.length;t<r;t++){s=d[t].s,h.push(s),m=g[t];for(let t=0,r=m.length;t<r;t++)s.holes.push(m[t].h)}return h}}class Font{constructor(t){this.type="Font",this.data=t}generateShapes(t,r=100){const n=[],i=function createPaths(t,r,n){const i=Array.from(t),a=r/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*a,s=[];let h=0,l=0;for(let t=0;t<i.length;t++){const r=i[t];if("\n"===r)h=0,l-=o;else{const t=createPath(r,a,h,l,n);h+=t.offsetX,s.push(t.path)}}return s}(t,r,this.data);for(let t=0,r=i.length;t<r;t++)Array.prototype.push.apply(n,i[t].toShapes());return n}}function createPath(t,r,n,i,a){const o=a.glyphs[t]||a.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+a.familyName+".");const s=new ShapePath;let h,l,c,d,p,m,g,y;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let a=0,o=t.length;a<o;){switch(t[a++]){case"m":h=t[a++]*r+n,l=t[a++]*r+i,s.moveTo(h,l);break;case"l":h=t[a++]*r+n,l=t[a++]*r+i,s.lineTo(h,l);break;case"q":c=t[a++]*r+n,d=t[a++]*r+i,p=t[a++]*r+n,m=t[a++]*r+i,s.quadraticCurveTo(p,m,c,d);break;case"b":c=t[a++]*r+n,d=t[a++]*r+i,p=t[a++]*r+n,m=t[a++]*r+i,g=t[a++]*r+n,y=t[a++]*r+i,s.bezierCurveTo(p,m,g,y,c,d)}}}return{offsetX:o.ha*r,path:s}}Font.prototype.isFont=!0;class FontLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=new FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,(function(t){let n;try{n=JSON.parse(t)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const i=a.parse(n);r&&r(i)}),n,i)}parse(t){return new Font(t)}}let No;const Fo={getContext:function(){return void 0===No&&(No=new(window.AudioContext||window.webkitAudioContext)),No},setContext:function(t){No=t}};class AudioLoader extends Loader{constructor(t){super(t)}load(t,r,n,i){const a=this,o=new FileLoader(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);Fo.getContext().decodeAudioData(t,(function(t){r(t)}))}catch(r){i?i(r):console.error(r),a.manager.itemError(t)}}),n,i)}}class HemisphereLightProbe extends LightProbe{constructor(t,r,n=1){super(void 0,n);const i=(new Color).set(t),a=(new Color).set(r),o=new Vector3(i.r,i.g,i.b),s=new Vector3(a.r,a.g,a.b),h=Math.sqrt(Math.PI),l=h*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(h),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}}HemisphereLightProbe.prototype.isHemisphereLightProbe=!0;class AmbientLightProbe extends LightProbe{constructor(t,r=1){super(void 0,r);const n=(new Color).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}AmbientLightProbe.prototype.isAmbientLightProbe=!0;const Io=new Matrix4,ko=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const r=this._cache;if(r.focus!==t.focus||r.fov!==t.fov||r.aspect!==t.aspect*this.aspect||r.near!==t.near||r.far!==t.far||r.zoom!==t.zoom||r.eyeSep!==this.eyeSep){r.focus=t.focus,r.fov=t.fov,r.aspect=t.aspect*this.aspect,r.near=t.near,r.far=t.far,r.zoom=t.zoom,r.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),i=r.eyeSep/2,a=i*r.near/r.focus,o=r.near*Math.tan(Qr*r.fov*.5)/r.zoom;let s,h;ko.elements[12]=-i,Io.elements[12]=i,s=-o*r.aspect+a,h=o*r.aspect+a,n.elements[0]=2*r.near/(h-s),n.elements[8]=(h+s)/(h-s),this.cameraL.projectionMatrix.copy(n),s=-o*r.aspect-a,h=o*r.aspect-a,n.elements[0]=2*r.near/(h-s),n.elements[8]=(h+s)/(h-s),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(ko),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Io)}}class Clock{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=now();t=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=t}return t}}function now(){return("undefined"==typeof performance?Date:performance).now()}const Oo=new Vector3,Uo=new Quaternion,zo=new Vector3,Vo=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=Fo.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const r=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Oo,Uo,zo),Vo.set(0,0,-1).applyQuaternion(Uo),r.positionX){const t=this.context.currentTime+this.timeDelta;r.positionX.linearRampToValueAtTime(Oo.x,t),r.positionY.linearRampToValueAtTime(Oo.y,t),r.positionZ.linearRampToValueAtTime(Oo.z,t),r.forwardX.linearRampToValueAtTime(Vo.x,t),r.forwardY.linearRampToValueAtTime(Vo.y,t),r.forwardZ.linearRampToValueAtTime(Vo.z,t),r.upX.linearRampToValueAtTime(n.x,t),r.upY.linearRampToValueAtTime(n.y,t),r.upZ.linearRampToValueAtTime(n.z,t)}else r.setPosition(Oo.x,Oo.y,Oo.z),r.setOrientation(Vo.x,Vo.y,Vo.z,n.x,n.y,n.z)}}class Audio extends Object3D{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.loopStart=this.loopStart,r.loopEnd=this.loopEnd,r.onended=this.onEnded.bind(this),r.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=r,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,r=this.filters.length;t<r;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const jo=new Vector3,Ho=new Quaternion,Go=new Vector3,Wo=new Vector3;class PositionalAudio extends Audio{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,r,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=r,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(jo,Ho,Go),Wo.set(0,0,1).applyQuaternion(Ho);const r=this.panner;if(r.positionX){const t=this.context.currentTime+this.listener.timeDelta;r.positionX.linearRampToValueAtTime(jo.x,t),r.positionY.linearRampToValueAtTime(jo.y,t),r.positionZ.linearRampToValueAtTime(jo.z,t),r.orientationX.linearRampToValueAtTime(Wo.x,t),r.orientationY.linearRampToValueAtTime(Wo.y,t),r.orientationZ.linearRampToValueAtTime(Wo.z,t)}else r.setPosition(jo.x,jo.y,jo.z),r.setOrientation(Wo.x,Wo.y,Wo.z)}}class AudioAnalyser{constructor(t,r=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=r,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const r=this.getFrequencyData();for(let n=0;n<r.length;n++)t+=r[n];return t/r.length}}class PropertyMixer{constructor(t,r,n){let i,a,o;switch(this.binding=t,this.valueSize=n,r){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,r){const n=this.buffer,i=this.valueSize,a=t*i+i;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==i;++t)n[a+t]=n[t];o=r}else{o+=r;const t=r/o;this._mixBufferRegion(n,a,0,t,i)}this.cumulativeWeight=o}accumulateAdditive(t){const r=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(r,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const r=this.valueSize,n=this.buffer,i=t*r+r,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const t=r*this._origIndex;this._mixBufferRegion(n,i,t,1-a,r)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*r,1,r);for(let t=r,a=r+r;t!==a;++t)if(n[t]!==n[t+r]){s.setValue(n,i);break}}saveOriginalState(){const t=this.binding,r=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(r,i);for(let t=n,a=i;t!==a;++t)r[t]=r[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,r=t+this.valueSize;for(let n=t;n<r;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[r+n]=this.buffer[t+n]}_select(t,r,n,i,a){if(i>=.5)for(let i=0;i!==a;++i)t[r+i]=t[n+i]}_slerp(t,r,n,i){Quaternion.slerpFlat(t,r,t,r,t,n,i)}_slerpAdditive(t,r,n,i,a){const o=this._workIndex*a;Quaternion.multiplyQuaternionsFlat(t,o,t,r,t,n),Quaternion.slerpFlat(t,r,t,r,t,o,i)}_lerp(t,r,n,i,a){const o=1-i;for(let s=0;s!==a;++s){const a=r+s;t[a]=t[a]*o+t[n+s]*i}}_lerpAdditive(t,r,n,i,a){for(let o=0;o!==a;++o){const a=r+o;t[a]=t[a]+t[n+o]*i}}}const qo="\\[\\]\\.:\\/",Ko=new RegExp("[\\[\\]\\.:\\/]","g"),Qo="[^\\[\\]\\.:\\/]",Xo="[^"+qo.replace("\\.","")+"]",Yo=/((?:WC+[\/:])*)/.source.replace("WC",Qo),Jo=/(WCOD+)?/.source.replace("WCOD",Xo),Zo=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qo),$o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qo),es=new RegExp("^"+Yo+Jo+Zo+$o+"$"),ts=["material","materials","bones"];class PropertyBinding{constructor(t,r,n){this.path=r,this.parsedPath=n||PropertyBinding.parseTrackName(r),this.node=PropertyBinding.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,n){return t&&t.isAnimationObjectGroup?new PropertyBinding.Composite(t,r,n):new PropertyBinding(t,r,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Ko,"")}static parseTrackName(t){const r=es.exec(t);if(!r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==ts.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,r){if(!r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(r);if(void 0!==n)return n}if(t.children){const searchNodeSubtree=function(t){for(let n=0;n<t.length;n++){const i=t[n];if(i.name===r||i.uuid===r)return i;const a=searchNodeSubtree(i.children);if(a)return a}return null},n=searchNodeSubtree(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.node[this.propertyName]}_getValue_array(t,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)t[r++]=n[i]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const n=this.resolvedProperty;for(let i=0,a=n.length;i!==a;++i)n[i]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,n=r.objectName,i=r.propertyName;let a=r.propertyIndex;if(t||(t=PropertyBinding.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=r.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let r=0;r<t.length;r++)if(t[r].name===i){i=r;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const o=t[i];if(void 0===o){const n=r.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else void 0!==o.fromArray&&void 0!==o.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class Composite{constructor(t,r,n){const i=n||PropertyBinding.parseTrackName(r);this._targetGroup=t,this._bindings=t.subscribe_(r,i)}getValue(t,r){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,r)}setValue(t,r){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=n.length;i!==a;++i)n[i].setValue(t,r)}bind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].bind()}unbind(){const t=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=t.length;r!==n;++r)t[r].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let r=0,n=arguments.length;r!==n;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}add(){const t=this._objects,r=this._indicesByUUID,n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length;let s,h=t.length,l=this.nCachedObjects_;for(let c=0,d=arguments.length;c!==d;++c){const d=arguments[c],p=d.uuid;let m=r[p];if(void 0===m){m=h++,r[p]=m,t.push(d);for(let t=0,r=o;t!==r;++t)a[t].push(new PropertyBinding(d,n[t],i[t]))}else if(m<l){s=t[m];const h=--l,c=t[h];r[c.uuid]=m,t[m]=c,r[p]=h,t[h]=d;for(let t=0,r=o;t!==r;++t){const r=a[t],o=r[h];let s=r[m];r[m]=o,void 0===s&&(s=new PropertyBinding(d,n[t],i[t])),r[h]=s}}else t[m]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,r=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],h=s.uuid,l=r[h];if(void 0!==l&&l>=a){const o=a++,c=t[o];r[c.uuid]=l,t[l]=c,r[h]=o,t[o]=s;for(let t=0,r=i;t!==r;++t){const r=n[t],i=r[o],a=r[l];r[l]=i,r[o]=a}}}this.nCachedObjects_=a}uncache(){const t=this._objects,r=this._indicesByUUID,n=this._bindings,i=n.length;let a=this.nCachedObjects_,o=t.length;for(let s=0,h=arguments.length;s!==h;++s){const h=arguments[s].uuid,l=r[h];if(void 0!==l)if(delete r[h],l<a){const s=--a,h=t[s],c=--o,d=t[c];r[h.uuid]=l,t[l]=h,r[d.uuid]=s,t[s]=d,t.pop();for(let t=0,r=i;t!==r;++t){const r=n[t],i=r[s],a=r[c];r[l]=i,r[s]=a,r.pop()}}else{const a=--o,s=t[a];a>0&&(r[s.uuid]=l),t[l]=s,t.pop();for(let t=0,r=i;t!==r;++t){const r=n[t];r[l]=r[a],r.pop()}}}this.nCachedObjects_=a}subscribe_(t,r){const n=this._bindingsIndicesByPath;let i=n[t];const a=this._bindings;if(void 0!==i)return a[i];const o=this._paths,s=this._parsedPaths,h=this._objects,l=h.length,c=this.nCachedObjects_,d=new Array(l);i=a.length,n[t]=i,o.push(t),s.push(r),a.push(d);for(let n=c,i=h.length;n!==i;++n){const i=h[n];d[n]=new PropertyBinding(i,t,r)}return d}unsubscribe_(t){const r=this._bindingsIndicesByPath,n=r[t];if(void 0!==n){const i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length-1,h=o[s];r[t[s]]=n,o[n]=h,o.pop(),a[n]=a[s],a.pop(),i[n]=i[s],i.pop()}}}AnimationObjectGroup.prototype.isAnimationObjectGroup=!0;class AnimationAction{constructor(t,r,n=null,i=r.blendMode){this._mixer=t,this._clip=r,this._localRoot=n,this.blendMode=i;const a=r.tracks,o=a.length,s=new Array(o),h={endingStart:Zt,endingEnd:Zt};for(let t=0;t!==o;++t){const r=a[t].createInterpolant(null);s[t]=r,r.settings=h}this._interpolantSettings=h,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Kt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,r){return this.loop=t,this.repetitions=r,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,r,n){if(t.fadeOut(r),this.fadeIn(r),n){const n=this._clip.duration,i=t._clip.duration,a=i/n,o=n/i;t.warp(1,a,r),this.warp(o,1,r)}return this}crossFadeTo(t,r,n){return t.crossFadeFrom(this,r,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,r,n){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const h=s.parameterPositions,l=s.sampleValues;return h[0]=a,h[1]=a+n,l[0]=t/o,l[1]=r/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,r,n,i){if(!this.enabled)return void this._updateWeight(t);const a=this._startTime;if(null!==a){const i=(t-a)*n;if(i<0||0===n)return;this._startTime=null,r=n*i}r*=this._updateTimeScale(t);const o=this._updateTime(r),s=this._updateWeight(t);if(s>0){const t=this._interpolants,r=this._propertyBindings;switch(this.blendMode){case rr:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),r[n].accumulateAdditive(s);break;case tr:default:for(let n=0,a=t.length;n!==a;++n)t[n].evaluate(o),r[n].accumulate(i,s)}}}_updateWeight(t){let r=0;if(this.enabled){r=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];r*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(t){let r=0;if(!this.paused){r=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){r*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===r?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r,r}_updateTime(t){const r=this._clip.duration,n=this.loop;let i=this.time+t,a=this._loopCount;const o=n===Qt;if(0===t)return-1===a?i:o&&1==(1&a)?r-i:i;if(n===qt){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=r)i=r;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===a&&(t>=0?(a=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=r||i<0){const n=Math.floor(i/r);i-=r*n,a+=Math.abs(n);const s=this.repetitions-a;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?r:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){const r=t<0;this._setEndings(r,!r,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&a))return r-i}return i}_setEndings(t,r,n){const i=this._interpolantSettings;n?(i.endingStart=$t,i.endingEnd=$t):(i.endingStart=t?this.zeroSlopeAtStart?$t:Zt:er,i.endingEnd=r?this.zeroSlopeAtEnd?$t:Zt:er)}_scheduleFading(t,r,n){const i=this._mixer,a=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,h=o.sampleValues;return s[0]=a,h[0]=r,s[1]=a+t,h[1]=n,this}}class AnimationMixer extends EventDispatcher{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,r){const n=t._localRoot||this._root,i=t._clip.tracks,a=i.length,o=t._propertyBindings,s=t._interpolants,h=n.uuid,l=this._bindingsByRootAndName;let c=l[h];void 0===c&&(c={},l[h]=c);for(let t=0;t!==a;++t){const a=i[t],l=a.name;let d=c[l];if(void 0!==d)o[t]=d;else{if(d=o[t],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,h,l));continue}const i=r&&r._propertyBindings[t].binding.parsedPath;d=new PropertyMixer(PropertyBinding.create(n,l,i),a.ValueTypeName,a.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,h,l),o[t]=d}s[t].resultBuffer=d.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const r=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,r)}const r=t._propertyBindings;for(let t=0,n=r.length;t!==n;++t){const n=r[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const r=t._propertyBindings;for(let t=0,n=r.length;t!==n;++t){const n=r[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const r=t._cacheIndex;return null!==r&&r<this._nActiveActions}_addInactiveAction(t,r,n){const i=this._actions,a=this._actionsByClip;let o=a[r];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[r]=o;else{const r=o.knownActions;t._byClipCacheIndex=r.length,r.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const r=this._actions,n=r[r.length-1],i=t._cacheIndex;n._cacheIndex=i,r[i]=n,r.pop(),t._cacheIndex=null;const a=t._clip.uuid,o=this._actionsByClip,s=o[a],h=s.knownActions,l=h[h.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,h[c]=l,h.pop(),t._byClipCacheIndex=null;delete s.actionByRoot[(t._localRoot||this._root).uuid],0===h.length&&delete o[a],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const r=t._propertyBindings;for(let t=0,n=r.length;t!==n;++t){const n=r[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const r=this._actions,n=t._cacheIndex,i=this._nActiveActions++,a=r[i];t._cacheIndex=i,r[i]=t,a._cacheIndex=n,r[n]=a}_takeBackAction(t){const r=this._actions,n=t._cacheIndex,i=--this._nActiveActions,a=r[i];t._cacheIndex=i,r[i]=t,a._cacheIndex=n,r[n]=a}_addInactiveBinding(t,r,n){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[r];void 0===o&&(o={},i[r]=o),o[n]=t,t._cacheIndex=a.length,a.push(t)}_removeInactiveBinding(t){const r=this._bindings,n=t.binding,i=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,s=o[i],h=r[r.length-1],l=t._cacheIndex;h._cacheIndex=l,r[l]=h,r.pop(),delete s[a],0===Object.keys(s).length&&delete o[i]}_lendBinding(t){const r=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,a=r[i];t._cacheIndex=i,r[i]=t,a._cacheIndex=n,r[n]=a}_takeBackBinding(t){const r=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,a=r[i];t._cacheIndex=i,r[i]=t,a._cacheIndex=n,r[n]=a}_lendControlInterpolant(){const t=this._controlInterpolants,r=this._nActiveControlInterpolants++;let n=t[r];return void 0===n&&(n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=r,t[r]=n),n}_takeBackControlInterpolant(t){const r=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,a=r[i];t.__cacheIndex=i,r[i]=t,a.__cacheIndex=n,r[n]=a}clipAction(t,r,n){const i=r||this._root,a=i.uuid;let o="string"==typeof t?AnimationClip.findByName(i,t):t;const s=null!==o?o.uuid:t,h=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:tr),void 0!==h){const t=h.actionByRoot[a];if(void 0!==t&&t.blendMode===n)return t;l=h.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new AnimationAction(this,o,r,n);return this._bindAction(c,l),this._addInactiveAction(c,s,a),c}existingAction(t,r){const n=r||this._root,i=n.uuid,a="string"==typeof t?AnimationClip.findByName(n,t):t,o=a?a.uuid:t,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;const r=this._actions,n=this._nActiveActions,i=this.time+=t,a=Math.sign(t),o=this._accuIndex^=1;for(let s=0;s!==n;++s){r[s]._update(i,t,a,o)}const s=this._bindings,h=this._nActiveBindings;for(let t=0;t!==h;++t)s[t].apply(o);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const r=this._actions,n=t.uuid,i=this._actionsByClip,a=i[n];if(void 0!==a){const t=a.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const a=i._cacheIndex,o=r[r.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=a,r[a]=o,r.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const r=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[r];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[r];if(void 0!==i)for(const t in i){const r=i[t];r.restoreOriginalState(),this._removeInactiveBinding(r)}}uncacheAction(t,r){const n=this.existingAction(t,r);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}AnimationMixer.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Uniform{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(t,r,n=1){super(t,r),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const r=super.clone(t);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(t){const r=super.toJSON(t);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0;class GLBufferAttribute{constructor(t,r,n,i,a){this.buffer=t,this.type=r,this.itemSize=n,this.elementSize=i,this.count=a,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,r){return this.type=t,this.elementSize=r,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}GLBufferAttribute.prototype.isGLBufferAttribute=!0;class Raycaster{constructor(t,r,n=0,i=1/0){this.ray=new Ray(t,r),this.near=n,this.far=i,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,r){this.ray.set(t,r)}setFromCamera(t,r){r&&r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r&&r.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}intersectObject(t,r=!1,n=[]){return intersectObject(t,this,n,r),n.sort(ascSort),n}intersectObjects(t,r=!1,n=[]){for(let i=0,a=t.length;i<a;i++)intersectObject(t[i],this,n,r);return n.sort(ascSort),n}intersect_objects(t,r=[]){let n=r.length;for(let i=0,a=t.length;i<a;i++)if(t[i].raycast(this,r),r.length!==n)return r;return r}}function ascSort(t,r){return t.distance-r.distance}function intersectObject(t,r,n,i){if(t.layers.test(r.layers)&&t.raycast(r,n),!0===i){const i=t.children;for(let t=0,a=i.length;t<a;t++)intersectObject(i[t],r,n,!0)}}class Spherical{constructor(t=1,r=0,n=0){return this.radius=t,this.phi=r,this.theta=n,this}set(t,r,n){return this.radius=t,this.phi=r,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,n){return this.radius=Math.sqrt(t*t+r*r+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(clamp(r/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Cylindrical{constructor(t=1,r=0,n=0){return this.radius=t,this.theta=r,this.y=n,this}set(t,r,n){return this.radius=t,this.theta=r,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,r,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=r,this}clone(){return(new this.constructor).copy(this)}}const rs=new Vector2;class Box2{constructor(t=new Vector2(1/0,1/0),r=new Vector2(-1/0,-1/0)){this.min=t,this.max=r}set(t,r){return this.min.copy(t),this.max.copy(r),this}setFromPoints(t){this.makeEmpty();for(let r=0,n=t.length;r<n;r++)this.expandByPoint(t[r]);return this}setFromCenterAndSize(t,r){const n=rs.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,r){return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,r){return r.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return rs.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}Box2.prototype.isBox2=!0;const ns=new Vector3,is=new Vector3;class Line3{constructor(t=new Vector3,r=new Vector3){this.start=t,this.end=r}set(t,r){return this.start.copy(t),this.end.copy(r),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,r){return this.delta(r).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,r){ns.subVectors(t,this.start),is.subVectors(this.end,this.start);const n=is.dot(is);let i=is.dot(ns)/n;return r&&(i=clamp(i,0,1)),i}closestPointToPoint(t,r,n){const i=this.closestPointToPointParameter(t,r);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class ImmediateRenderObject extends Object3D{constructor(t){super(),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}ImmediateRenderObject.prototype.isImmediateRenderObject=!0;const as=new Vector3;class SpotLightHelper extends Object3D{constructor(t,r){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;const n=new BufferGeometry,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let t=0,r=1,n=32;t<n;t++,r++){const a=t/n*Math.PI*2,o=r/n*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new Float32BufferAttribute(i,3));const a=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,r=t*Math.tan(this.light.angle);this.cone.scale.set(r,r,t),as.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(as),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const os=new Vector3,ss=new Matrix4,us=new Matrix4;class SkeletonHelper extends LineSegments{constructor(t){const r=getBoneList(t),n=new BufferGeometry,i=[],a=[],o=new Color(0,0,1),s=new Color(0,1,0);for(let t=0;t<r.length;t++){const n=r[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b))}n.setAttribute("position",new Float32BufferAttribute(i,3)),n.setAttribute("color",new Float32BufferAttribute(a,3));super(n,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=r,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const r=this.bones,n=this.geometry,i=n.getAttribute("position");us.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<r.length;t++){const a=r[t];a.parent&&a.parent.isBone&&(ss.multiplyMatrices(us,a.matrixWorld),os.setFromMatrixPosition(ss),i.setXYZ(n,os.x,os.y,os.z),ss.multiplyMatrices(us,a.parent.matrixWorld),os.setFromMatrixPosition(ss),i.setXYZ(n+1,os.x,os.y,os.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function getBoneList(t){const r=[];t&&t.isBone&&r.push(t);for(let n=0;n<t.children.length;n++)r.push.apply(r,getBoneList(t.children[n]));return r}class PointLightHelper extends Mesh{constructor(t,r,n){super(new SphereGeometry(r,4,2),new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1})),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hs=new Vector3,ls=new Color,cs=new Color;class HemisphereLightHelper extends Object3D{constructor(t,r,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new OctahedronGeometry(r);i.rotateY(.5*Math.PI),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const a=i.getAttribute("position"),o=new Float32Array(3*a.count);i.setAttribute("color",new BufferAttribute(o,3)),this.add(new Mesh(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const r=t.geometry.getAttribute("color");ls.copy(this.light.color),cs.copy(this.light.groundColor);for(let t=0,n=r.count;t<n;t++){const i=t<n/2?ls:cs;r.setXYZ(t,i.r,i.g,i.b)}r.needsUpdate=!0}t.lookAt(hs.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(t=10,r=10,n=4473924,i=8947848){n=new Color(n),i=new Color(i);const a=r/2,o=t/r,s=t/2,h=[],l=[];for(let t=0,c=0,d=-s;t<=r;t++,d+=o){h.push(-s,0,d,s,0,d),h.push(d,0,-s,d,0,s);const r=t===a?n:i;r.toArray(l,c),c+=3,r.toArray(l,c),c+=3,r.toArray(l,c),c+=3,r.toArray(l,c),c+=3}const c=new BufferGeometry;c.setAttribute("position",new Float32BufferAttribute(h,3)),c.setAttribute("color",new Float32BufferAttribute(l,3));super(c,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class PolarGridHelper extends LineSegments{constructor(t=10,r=16,n=8,i=64,a=4473924,o=8947848){a=new Color(a),o=new Color(o);const s=[],h=[];for(let n=0;n<=r;n++){const i=n/r*(2*Math.PI),l=Math.sin(i)*t,c=Math.cos(i)*t;s.push(0,0,0),s.push(l,0,c);const d=1&n?a:o;h.push(d.r,d.g,d.b),h.push(d.r,d.g,d.b)}for(let r=0;r<=n;r++){const l=1&r?a:o,c=t-t/n*r;for(let t=0;t<i;t++){let r=t/i*(2*Math.PI),n=Math.sin(r)*c,a=Math.cos(r)*c;s.push(n,0,a),h.push(l.r,l.g,l.b),r=(t+1)/i*(2*Math.PI),n=Math.sin(r)*c,a=Math.cos(r)*c,s.push(n,0,a),h.push(l.r,l.g,l.b)}}const l=new BufferGeometry;l.setAttribute("position",new Float32BufferAttribute(s,3)),l.setAttribute("color",new Float32BufferAttribute(h,3));super(l,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const ds=new Vector3,fs=new Vector3,ps=new Vector3;class DirectionalLightHelper extends Object3D{constructor(t,r,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===r&&(r=1);let i=new BufferGeometry;i.setAttribute("position",new Float32BufferAttribute([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));const a=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(i,a),this.add(this.lightPlane),i=new BufferGeometry,i.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(i,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){ds.setFromMatrixPosition(this.light.matrixWorld),fs.setFromMatrixPosition(this.light.target.matrixWorld),ps.subVectors(fs,ds),this.lightPlane.lookAt(fs),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(fs),this.targetLine.scale.z=ps.length()}}const ms=new Vector3,gs=new Camera;class CameraHelper extends LineSegments{constructor(t){const r=new BufferGeometry,n=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],a=[],o={},s=new Color(16755200),h=new Color(16711680),l=new Color(43775),c=new Color(16777215),d=new Color(3355443);function addLine(t,r,n){addPoint(t,n),addPoint(r,n)}function addPoint(t,r){i.push(0,0,0),a.push(r.r,r.g,r.b),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}addLine("n1","n2",s),addLine("n2","n4",s),addLine("n4","n3",s),addLine("n3","n1",s),addLine("f1","f2",s),addLine("f2","f4",s),addLine("f4","f3",s),addLine("f3","f1",s),addLine("n1","f1",s),addLine("n2","f2",s),addLine("n3","f3",s),addLine("n4","f4",s),addLine("p","n1",h),addLine("p","n2",h),addLine("p","n3",h),addLine("p","n4",h),addLine("u1","u2",l),addLine("u2","u3",l),addLine("u3","u1",l),addLine("c","t",c),addLine("p","c",d),addLine("cn1","cn2",d),addLine("cn3","cn4",d),addLine("cf1","cf2",d),addLine("cf3","cf4",d),r.setAttribute("position",new Float32BufferAttribute(i,3)),r.setAttribute("color",new Float32BufferAttribute(a,3)),super(r,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,r=this.pointMap;gs.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),setPoint("c",r,t,gs,0,0,-1),setPoint("t",r,t,gs,0,0,1),setPoint("n1",r,t,gs,-1,-1,-1),setPoint("n2",r,t,gs,1,-1,-1),setPoint("n3",r,t,gs,-1,1,-1),setPoint("n4",r,t,gs,1,1,-1),setPoint("f1",r,t,gs,-1,-1,1),setPoint("f2",r,t,gs,1,-1,1),setPoint("f3",r,t,gs,-1,1,1),setPoint("f4",r,t,gs,1,1,1),setPoint("u1",r,t,gs,.7,1.1,-1),setPoint("u2",r,t,gs,-.7,1.1,-1),setPoint("u3",r,t,gs,0,2,-1),setPoint("cf1",r,t,gs,-1,0,1),setPoint("cf2",r,t,gs,1,0,1),setPoint("cf3",r,t,gs,0,-1,1),setPoint("cf4",r,t,gs,0,1,1),setPoint("cn1",r,t,gs,-1,0,-1),setPoint("cn2",r,t,gs,1,0,-1),setPoint("cn3",r,t,gs,0,-1,-1),setPoint("cn4",r,t,gs,0,1,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(t,r,n,i,a,o,s){ms.set(a,o,s).unproject(i);const h=r[t];if(void 0!==h){const t=n.getAttribute("position");for(let r=0,n=h.length;r<n;r++)t.setXYZ(h[r],ms.x,ms.y,ms.z)}}const vs=new Box3;class BoxHelper extends LineSegments{constructor(t,r=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),a=new BufferGeometry;a.setIndex(new BufferAttribute(n,1)),a.setAttribute("position",new BufferAttribute(i,3)),super(a,new LineBasicMaterial({color:r,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&vs.setFromObject(this.object),vs.isEmpty())return;const r=vs.min,n=vs.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=r.x,a[4]=n.y,a[5]=n.z,a[6]=r.x,a[7]=r.y,a[8]=n.z,a[9]=n.x,a[10]=r.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=r.z,a[15]=r.x,a[16]=n.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=n.x,a[22]=r.y,a[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return LineSegments.prototype.copy.call(this,t),this.object=t.object,this}}class Box3Helper extends LineSegments{constructor(t,r=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new BufferGeometry;i.setIndex(new BufferAttribute(n,1)),i.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new LineBasicMaterial({color:r,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const r=this.box;r.isEmpty()||(r.getCenter(this.position),r.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class PlaneHelper extends Line{constructor(t,r=1,n=16776960){const i=n,a=new BufferGeometry;a.setAttribute("position",new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),a.computeBoundingSphere(),super(a,new LineBasicMaterial({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=r;const o=new BufferGeometry;o.setAttribute("position",new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Mesh(o,new MeshBasicMaterial({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let r=-this.plane.constant;Math.abs(r)<1e-8&&(r=1e-8),this.scale.set(.5*this.size,.5*this.size,r),this.children[0].material.side=r<0?b:y,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const ys=new Vector3;let bs,ws;class ArrowHelper extends Object3D{constructor(t=new Vector3(0,0,1),r=new Vector3(0,0,0),n=1,i=16776960,a=.2*n,o=.2*a){super(),this.type="ArrowHelper",void 0===bs&&(bs=new BufferGeometry,bs.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),ws=new CylinderGeometry(0,.5,1,5,1),ws.translate(0,-.5,0)),this.position.copy(r),this.line=new Line(bs,new LineBasicMaterial({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(ws,new MeshBasicMaterial({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,a,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{ys.set(t.z,0,-t.x).normalize();const r=Math.acos(t.y);this.quaternion.setFromAxisAngle(ys,r)}}setLength(t,r=.2*t,n=.2*r){this.line.scale.set(1,Math.max(1e-4,t-r),1),this.line.updateMatrix(),this.cone.scale.set(n,r,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class AxesHelper extends LineSegments{constructor(t=1){const r=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new BufferGeometry;n.setAttribute("position",new Float32BufferAttribute(r,3)),n.setAttribute("color",new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,r,n){const i=new Color,a=this.geometry.attributes.color.array;return i.set(t),i.toArray(a,0),i.toArray(a,3),i.set(r),i.toArray(a,6),i.toArray(a,9),i.set(n),i.toArray(a,12),i.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ms=new Float32Array(1),_s=new Int32Array(Ms.buffer);class DataUtils{static toHalfFloat(t){Ms[0]=t;const r=_s[0];let n=r>>16&32768,i=r>>12&2047;const a=r>>23&255;return a<103?n:a>142?(n|=31744,n|=(255==a?0:1)&&8388607&r,n):a<113?(i|=2048,n|=(i>>114-a)+(i>>113-a&1),n):(n|=a-112<<10|i>>1,n+=1&i,n)}}const xs=0,As=1,Ss=0,Es=1,Bs=2;function MeshFaceMaterial(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function MultiMaterial(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function PointCloud(t,r){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(t,r)}function Particle(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(t)}function ParticleSystem(t,r){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(t,r)}function PointCloudMaterial(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(t)}function ParticleBasicMaterial(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(t)}function ParticleSystemMaterial(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(t)}function Vertex(t,r,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Vector3(t,r,n)}function DynamicBufferAttribute(t,r){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new BufferAttribute(t,r).setUsage(Ir)}function Int8Attribute(t,r){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Int8BufferAttribute(t,r)}function Uint8Attribute(t,r){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Uint8BufferAttribute(t,r)}function Uint8ClampedAttribute(t,r){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Uint8ClampedBufferAttribute(t,r)}function Int16Attribute(t,r){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Int16BufferAttribute(t,r)}function Uint16Attribute(t,r){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Uint16BufferAttribute(t,r)}function Int32Attribute(t,r){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Int32BufferAttribute(t,r)}function Uint32Attribute(t,r){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Uint32BufferAttribute(t,r)}function Float32Attribute(t,r){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Float32BufferAttribute(t,r)}function Float64Attribute(t,r){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Float64BufferAttribute(t,r)}function AxisHelper(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(t)}function BoundingBoxHelper(t,r){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(t,r)}function EdgesHelper(t,r){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(t.geometry),new LineBasicMaterial({color:void 0!==r?r:16777215}))}function WireframeHelper(t,r){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(t.geometry),new LineBasicMaterial({color:void 0!==r?r:16777215}))}function XHRLoader(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(t)}function BinaryTextureLoader(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(t)}function WebGLRenderTargetCube(t,r,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(t,n)}function CanvasRenderer(){console.error("THREE.CanvasRenderer has been removed")}function JSONLoader(){console.error("THREE.JSONLoader has been removed.")}Curve.create=function(t,r){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Curve.prototype),t.prototype.constructor=t,t.prototype.getPoint=r,t},Path.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},GridHelper.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},SkeletonHelper.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Loader.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(t)},Loader.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Box2.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},Box2.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box2.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Box2.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},Box3.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Box3.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box3.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Box3.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Box3.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},Sphere.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Frustum.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Line3.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Matrix3.prototype.flattenToArrayOffset=function(t,r){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},Matrix3.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Matrix3.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Matrix3.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},Matrix3.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Matrix3.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Matrix4.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Matrix4.prototype.flattenToArrayOffset=function(t,r){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,r)},Matrix4.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Vector3).setFromMatrixColumn(this,3)},Matrix4.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Matrix4.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Matrix4.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Matrix4.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Matrix4.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Matrix4.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Matrix4.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Matrix4.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Matrix4.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Matrix4.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Matrix4.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Matrix4.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Matrix4.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Matrix4.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Matrix4.prototype.makeFrustum=function(t,r,n,i,a,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,r,i,n,a,o)},Matrix4.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Plane.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Quaternion.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Quaternion.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ray.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Ray.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Ray.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Triangle.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Triangle.prototype.barycoordFromPoint=function(t,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,r)},Triangle.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Triangle.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Triangle.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Triangle.barycoordFromPoint=function(t,r,n,i,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Triangle.getBarycoord(t,r,n,i,a)},Triangle.normal=function(t,r,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Triangle.getNormal(t,r,n,i)},Shape.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Shape.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,t)},Shape.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,t)},Vector2.prototype.fromAttribute=function(t,r,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},Vector2.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Vector2.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector3.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Vector3.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Vector3.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Vector3.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Vector3.prototype.getColumnFromMatrix=function(t,r){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(r,t)},Vector3.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Vector3.prototype.fromAttribute=function(t,r,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},Vector3.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Vector3.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Vector4.prototype.fromAttribute=function(t,r,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,r,n)},Vector4.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Object3D.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Object3D.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Object3D.prototype.translate=function(t,r){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(r,t)},Object3D.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Object3D.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Mesh.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Mesh.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),nr},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},PerspectiveCamera.prototype.setLens=function(t,r){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==r&&(this.filmGauge=r),this.setFocalLength(t)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ir},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ir)}}}),BufferAttribute.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ir:Fr),this},BufferAttribute.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},BufferAttribute.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},BufferGeometry.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},BufferGeometry.prototype.addAttribute=function(t,r){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),r&&r.isBufferAttribute||r&&r.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(r),this):this.setAttribute(t,r):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new BufferAttribute(arguments[1],arguments[2])))},BufferGeometry.prototype.addDrawCall=function(t,r,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,r)},BufferGeometry.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},BufferGeometry.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},BufferGeometry.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},BufferGeometry.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),InterleavedBuffer.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ir:Fr),this},InterleavedBuffer.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ExtrudeGeometry.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ExtrudeGeometry.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ExtrudeGeometry.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Scene.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Uniform.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Color}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===M}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),WebGLRenderer.prototype.clearTarget=function(t,r,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(r,n,i)},WebGLRenderer.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},WebGLRenderer.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},WebGLRenderer.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},WebGLRenderer.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},WebGLRenderer.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},WebGLRenderer.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},WebGLRenderer.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},WebGLRenderer.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},WebGLRenderer.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},WebGLRenderer.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},WebGLRenderer.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},WebGLRenderer.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},WebGLRenderer.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},WebGLRenderer.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},WebGLRenderer.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},WebGLRenderer.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},WebGLRenderer.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},WebGLRenderer.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},WebGLRenderer.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},WebGLRenderer.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},WebGLRenderer.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},WebGLRenderer.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},WebGLRenderer.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},WebGLRenderer.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?ur:sr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Audio.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const r=this;return(new AudioLoader).load(t,(function(t){r.setBuffer(t)})),this},AudioAnalyser.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(t,r){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,r)},CubeCamera.prototype.clear=function(t,r,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,r,n,i)},ImageUtils.crossOrigin=void 0,ImageUtils.loadTexture=function(t,r,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const a=new TextureLoader;a.setCrossOrigin(this.crossOrigin);const o=a.load(t,n,void 0,i);return r&&(o.mapping=r),o},ImageUtils.loadTextureCube=function(t,r,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const a=new CubeTextureLoader;a.setCrossOrigin(this.crossOrigin);const o=a.load(t,n,void 0,i);return r&&(o.mapping=r),o},ImageUtils.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ImageUtils.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Cs={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function LensFlare(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i)},function(t,r){t.exports=function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){function _getPrototypeOf(r){return t.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,_getPrototypeOf(r)}t.exports=_getPrototypeOf,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){t.exports=function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){"function"==typeof Object.create?t.exports=function inherits(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function inherits(t,r){if(r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}}},function(t,r){function _defineProperties(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function _createClass(t,r,n){return r&&_defineProperties(t.prototype,r),n&&_defineProperties(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(101);t.exports=function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&i(t,r)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(56).default,a=n(2);t.exports=function _possibleConstructorReturn(t,r){return!r||"object"!==i(r)&&"function"!=typeof r?a(t):r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(13),a=i.Buffer;function copyProps(t,r){for(var n in t)r[n]=t[n]}function SafeBuffer(t,r,n){return a(t,r,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(copyProps(i,r),r.Buffer=SafeBuffer),copyProps(a,SafeBuffer),SafeBuffer.from=function(t,r,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,r,n)},SafeBuffer.alloc=function(t,r,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=a(t);return void 0!==r?"string"==typeof n?i.fill(r,n):i.fill(r):i.fill(0),i},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,r,n){"use strict";var i=n(56),a=n.n(i),o=n(4),s=n.n(o),h=n(6),l=n.n(h),c=n(2),d=n.n(c),p=n(7),m=n.n(p),g=n(8),y=n.n(g),b=n(3),w=n.n(b),M=n(0),_=n.n(M),x=n(45),A=n(69);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var E=0,B=function(t){m()(Component,t);var r=_createSuper(Component);function Component(t){var n;return s()(this,Component),n=r.call(this,t),_()(d()(n),"object",null),_()(d()(n),"_enabled",!0),_()(d()(n),"tick_skip",1),_()(d()(n),"tick",0),_()(d()(n),"_params_applied",!1),_()(d()(n),"globals",void 0),Component.patch_props(d()(n)),n.id=E,E++,n._params=t,n.topics&&n.topics.forEach((function(t){return n.listen(t)})),n.tick=Math.floor(Math.random()*n.tick_skip),n}return l()(Component,[{key:"apply_params",value:function apply_params(){if(!this._params_applied)for(var t in this._params_applied=!0,this._params)Object.defineProperty(this,t,{value:this._params[t],configurable:!0,enumerable:!0,writable:!0})}},{key:"on_created",value:function on_created(){}},{key:"on_destoy",value:function on_destoy(){}},{key:"on_tick",value:function on_tick(t){}},{key:"on_enabled",value:function on_enabled(){}},{key:"on_disabled",value:function on_disabled(){}},{key:"parent",get:function get(){var t=null;return this.object&&this.object.parent&&(t=this.object.parent),t}},{key:"enabled",get:function get(){return this._enabled},set:function set(t){t!==this._enabled&&(t?this.on_enabled():this.on_disabled(),this._enabled=t)}},{key:"refs",get:function get(){return this.object.refs}},{key:"camera",get:function get(){return this.globals.camera}},{key:"scene",get:function get(){return this.globals.scene}},{key:"children",get:function get(){return this.object.children}},{key:"components",get:function get(){return this.object.components}},{key:"states",get:function get(){return this.object.states}},{key:"tasks",get:function get(){return this.object.tasks}},{key:"component_name",get:function get(){return this.constructor.component_name}},{key:"listen",value:function listen(t){return this.object.listen(t)}},{key:"broadcast",value:function broadcast(t,r){return this.object.broadcast(t,r)}},{key:"get_component",value:function get_component(t){return this.object.get_component(t)}},{key:"find_component_of_type",value:function find_component_of_type(t){return this.object.find_component_of_type(t)}},{key:"find_components_of_type",value:function find_components_of_type(t){return this.object.find_components_of_type(t)}},{key:"setup_components",value:function setup_components(t){Array.isArray(t)&&this.object.setup_components(t)}},{key:"add_component",value:function add_component(t){"object"===a()(t)&&this.object.add_component(t)}},{key:"get_components",value:function get_components(t){return this.object.get_components(t)}},{key:"lerp",value:function lerp(t,r,n){return(1-n)*t+n*r}},{key:"log",value:function log(){x.a.apply(void 0,arguments)}},{key:"shuffle_array",value:function shuffle_array(t){return t.sort((function(){return Math.random()>.5?1:-1}))}}],[{key:"patch_props",value:function patch_props(){}}]),Component}(A.a);B.component_name="Component",r.a=B},function(t,r,n){"use strict";r.a=function isObject(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}},function(t,r){var n,i,a=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(r){try{return n.call(null,t,0)}catch(r){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){n=defaultSetTimout}try{i="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){i=defaultClearTimeout}}();var o,s=[],h=!1,l=-1;function cleanUpNextTick(){h&&o&&(h=!1,o.length?s=o.concat(s):l=-1,s.length&&drainQueue())}function drainQueue(){if(!h){var t=runTimeout(cleanUpNextTick);h=!0;for(var r=s.length;r;){for(o=s,s=[];++l<r;)o&&o[l].run();l=-1,r=s.length}o=null,h=!1,function runClearTimeout(t){if(i===clearTimeout)return clearTimeout(t);if((i===defaultClearTimeout||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(r){try{return i.call(null,t)}catch(r){return i.call(this,t)}}}(t)}}function Item(t,r){this.fun=t,this.array=r}function noop(){}a.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];s.push(new Item(t,r)),1!==s.length||h||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,r,n){"use strict";(function(t){var i=n(185),a=n(186),o=n(105);function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,r){if(kMaxLength()<r)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=Buffer.prototype:(null===t&&(t=new Buffer(r)),t.length=r),t}function Buffer(t,r,n){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,r,n);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,r,n)}function from(t,r,n,i){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function fromArrayBuffer(t,r,n,i){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");r=void 0===n&&void 0===i?new Uint8Array(r):void 0===i?new Uint8Array(r,n):new Uint8Array(r,n,i);Buffer.TYPED_ARRAY_SUPPORT?(t=r).__proto__=Buffer.prototype:t=fromArrayLike(t,r);return t}(t,r,n,i):"string"==typeof r?function fromString(t,r,n){"string"==typeof n&&""!==n||(n="utf8");if(!Buffer.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|byteLength(r,n),a=(t=createBuffer(t,i)).write(r,n);a!==i&&(t=t.slice(0,a));return t}(t,r,n):function fromObject(t,r){if(Buffer.isBuffer(r)){var n=0|checked(r.length);return 0===(t=createBuffer(t,n)).length||r.copy(t,0,0,n),t}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||function isnan(t){return t!=t}(r.length)?createBuffer(t,0):fromArrayLike(t,r);if("Buffer"===r.type&&o(r.data))return fromArrayLike(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,r)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(t,r){if(assertSize(r),t=createBuffer(t,r<0?0:0|checked(r)),!Buffer.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)t[n]=0;return t}function fromArrayLike(t,r){var n=r.length<0?0:0|checked(r.length);t=createBuffer(t,n);for(var i=0;i<n;i+=1)t[i]=255&r[i];return t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function byteLength(t,r){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(t).length;default:if(i)return utf8ToBytes(t).length;r=(""+r).toLowerCase(),i=!0}}function slowToString(t,r,n){var i=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,r,n);case"utf8":case"utf-8":return utf8Slice(this,r,n);case"ascii":return asciiSlice(this,r,n);case"latin1":case"binary":return latin1Slice(this,r,n);case"base64":return base64Slice(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,r,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function swap(t,r,n){var i=t[r];t[r]=t[n],t[n]=i}function bidirectionalIndexOf(t,r,n,i,a){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof r&&(r=Buffer.from(r,i)),Buffer.isBuffer(r))return 0===r.length?-1:arrayIndexOf(t,r,n,i,a);if("number"==typeof r)return r&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):arrayIndexOf(t,[r],n,i,a);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,r,n,i,a){var o,s=1,h=t.length,l=r.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||r.length<2)return-1;s=2,h/=2,l/=2,n/=2}function read(t,r){return 1===s?t[r]:t.readUInt16BE(r*s)}if(a){var c=-1;for(o=n;o<h;o++)if(read(t,o)===read(r,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+l>h&&(n=h-l),o=n;o>=0;o--){for(var d=!0,p=0;p<l;p++)if(read(t,o+p)!==read(r,p)){d=!1;break}if(d)return o}return-1}function hexWrite(t,r,n,i){n=Number(n)||0;var a=t.length-n;i?(i=Number(i))>a&&(i=a):i=a;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var h=parseInt(r.substr(2*s,2),16);if(isNaN(h))return s;t[n+s]=h}return s}function utf8Write(t,r,n,i){return blitBuffer(utf8ToBytes(r,t.length-n),t,n,i)}function asciiWrite(t,r,n,i){return blitBuffer(function asciiToBytes(t){for(var r=[],n=0;n<t.length;++n)r.push(255&t.charCodeAt(n));return r}(r),t,n,i)}function latin1Write(t,r,n,i){return asciiWrite(t,r,n,i)}function base64Write(t,r,n,i){return blitBuffer(base64ToBytes(r),t,n,i)}function ucs2Write(t,r,n,i){return blitBuffer(function utf16leToBytes(t,r){for(var n,i,a,o=[],s=0;s<t.length&&!((r-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,a=n%256,o.push(a),o.push(i);return o}(r,t.length-n),t,n,i)}function base64Slice(t,r,n){return 0===r&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(r,n))}function utf8Slice(t,r,n){n=Math.min(t.length,n);for(var i=[],a=r;a<n;){var o,h,l,c,d=t[a],p=null,m=d>239?4:d>223?3:d>191?2:1;if(a+m<=n)switch(m){case 1:d<128&&(p=d);break;case 2:128==(192&(o=t[a+1]))&&(c=(31&d)<<6|63&o)>127&&(p=c);break;case 3:o=t[a+1],h=t[a+2],128==(192&o)&&128==(192&h)&&(c=(15&d)<<12|(63&o)<<6|63&h)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:o=t[a+1],h=t[a+2],l=t[a+3],128==(192&o)&&128==(192&h)&&128==(192&l)&&(c=(15&d)<<18|(63&o)<<12|(63&h)<<6|63&l)>65535&&c<1114112&&(p=c)}null===p?(p=65533,m=1):p>65535&&(p-=65536,i.push(p>>>10&1023|55296),p=56320|1023&p),i.push(p),a+=m}return function decodeCodePointsArray(t){var r=t.length;if(r<=s)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<r;)n+=String.fromCharCode.apply(String,t.slice(i,i+=s));return n}(i)}r.Buffer=Buffer,r.SlowBuffer=function SlowBuffer(t){+t!=t&&(t=0);return Buffer.alloc(+t)},r.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),r.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,r,n){return from(null,t,r,n)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,r,n){return function alloc(t,r,n,i){return assertSize(r),r<=0?createBuffer(t,r):void 0!==n?"string"==typeof i?createBuffer(t,r).fill(n,i):createBuffer(t,r).fill(n):createBuffer(t,r)}(null,t,r,n)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function isBuffer(t){return!(null==t||!t._isBuffer)},Buffer.compare=function compare(t,r){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,i=r.length,a=0,o=Math.min(n,i);a<o;++a)if(t[a]!==r[a]){n=t[a],i=r[a];break}return n<i?-1:i<n?1:0},Buffer.isEncoding=function isEncoding(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function concat(t,r){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=Buffer.allocUnsafe(r),a=0;for(n=0;n<t.length;++n){var s=t[n];if(!Buffer.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,a),a+=s.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function swap16(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)swap(this,r,r+1);return this},Buffer.prototype.swap32=function swap32(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)swap(this,r,r+3),swap(this,r+1,r+2);return this},Buffer.prototype.swap64=function swap64(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)swap(this,r,r+7),swap(this,r+1,r+6),swap(this,r+2,r+5),swap(this,r+3,r+4);return this},Buffer.prototype.toString=function toString(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function equals(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function inspect(){var t="",n=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function compare(t,r,n,i,a){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),r<0||n>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(this===t)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(n>>>=0)-(r>>>=0),h=Math.min(o,s),l=this.slice(i,a),c=t.slice(r,n),d=0;d<h;++d)if(l[d]!==c[d]){o=l[d],s=c[d];break}return o<s?-1:s<o?1:0},Buffer.prototype.includes=function includes(t,r,n){return-1!==this.indexOf(t,r,n)},Buffer.prototype.indexOf=function indexOf(t,r,n){return bidirectionalIndexOf(this,t,r,n,!0)},Buffer.prototype.lastIndexOf=function lastIndexOf(t,r,n){return bidirectionalIndexOf(this,t,r,n,!1)},Buffer.prototype.write=function write(t,r,n,i){if(void 0===r)i="utf8",n=this.length,r=0;else if(void 0===n&&"string"==typeof r)i=r,n=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var a=this.length-r;if((void 0===n||n>a)&&(n=a),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return hexWrite(this,t,r,n);case"utf8":case"utf-8":return utf8Write(this,t,r,n);case"ascii":return asciiWrite(this,t,r,n);case"latin1":case"binary":return latin1Write(this,t,r,n);case"base64":return base64Write(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var s=4096;function asciiSlice(t,r,n){var i="";n=Math.min(t.length,n);for(var a=r;a<n;++a)i+=String.fromCharCode(127&t[a]);return i}function latin1Slice(t,r,n){var i="";n=Math.min(t.length,n);for(var a=r;a<n;++a)i+=String.fromCharCode(t[a]);return i}function hexSlice(t,r,n){var i=t.length;(!r||r<0)&&(r=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=r;o<n;++o)a+=toHex(t[o]);return a}function utf16leSlice(t,r,n){for(var i=t.slice(r,n),a="",o=0;o<i.length;o+=2)a+=String.fromCharCode(i[o]+256*i[o+1]);return a}function checkOffset(t,r,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,r,n,i,a,o){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>a||r<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,r,n,i){r<0&&(r=65535+r+1);for(var a=0,o=Math.min(t.length-n,2);a<o;++a)t[n+a]=(r&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function objectWriteUInt32(t,r,n,i){r<0&&(r=4294967295+r+1);for(var a=0,o=Math.min(t.length-n,4);a<o;++a)t[n+a]=r>>>8*(i?a:3-a)&255}function checkIEEE754(t,r,n,i,a,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(t,r,n,i,o){return o||checkIEEE754(t,0,n,4),a.write(t,r,n,i,23,4),n+4}function writeDouble(t,r,n,i,o){return o||checkIEEE754(t,0,n,8),a.write(t,r,n,i,52,8),n+8}Buffer.prototype.slice=function slice(t,r){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):r>i&&(r=i),r<t&&(r=t),Buffer.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,r)).__proto__=Buffer.prototype;else{var a=r-t;n=new Buffer(a,void 0);for(var o=0;o<a;++o)n[o]=this[o+t]}return n},Buffer.prototype.readUIntLE=function readUIntLE(t,r,n){t|=0,r|=0,n||checkOffset(t,r,this.length);for(var i=this[t],a=1,o=0;++o<r&&(a*=256);)i+=this[t+o]*a;return i},Buffer.prototype.readUIntBE=function readUIntBE(t,r,n){t|=0,r|=0,n||checkOffset(t,r,this.length);for(var i=this[t+--r],a=1;r>0&&(a*=256);)i+=this[t+--r]*a;return i},Buffer.prototype.readUInt8=function readUInt8(t,r){return r||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function readUInt16LE(t,r){return r||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function readUInt16BE(t,r){return r||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function readUInt32LE(t,r){return r||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function readUInt32BE(t,r){return r||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function readIntLE(t,r,n){t|=0,r|=0,n||checkOffset(t,r,this.length);for(var i=this[t],a=1,o=0;++o<r&&(a*=256);)i+=this[t+o]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*r)),i},Buffer.prototype.readIntBE=function readIntBE(t,r,n){t|=0,r|=0,n||checkOffset(t,r,this.length);for(var i=r,a=1,o=this[t+--i];i>0&&(a*=256);)o+=this[t+--i]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*r)),o},Buffer.prototype.readInt8=function readInt8(t,r){return r||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function readInt16LE(t,r){r||checkOffset(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function readInt16BE(t,r){r||checkOffset(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function readInt32LE(t,r){return r||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function readInt32BE(t,r){return r||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function readFloatLE(t,r){return r||checkOffset(t,4,this.length),a.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function readFloatBE(t,r){return r||checkOffset(t,4,this.length),a.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function readDoubleLE(t,r){return r||checkOffset(t,8,this.length),a.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function readDoubleBE(t,r){return r||checkOffset(t,8,this.length),a.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function writeUIntLE(t,r,n,i){(t=+t,r|=0,n|=0,i)||checkInt(this,t,r,n,Math.pow(2,8*n)-1,0);var a=1,o=0;for(this[r]=255&t;++o<n&&(a*=256);)this[r+o]=t/a&255;return r+n},Buffer.prototype.writeUIntBE=function writeUIntBE(t,r,n,i){(t=+t,r|=0,n|=0,i)||checkInt(this,t,r,n,Math.pow(2,8*n)-1,0);var a=n-1,o=1;for(this[r+a]=255&t;--a>=0&&(o*=256);)this[r+a]=t/o&255;return r+n},Buffer.prototype.writeUInt8=function writeUInt8(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},Buffer.prototype.writeUInt16LE=function writeUInt16LE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},Buffer.prototype.writeUInt16BE=function writeUInt16BE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},Buffer.prototype.writeUInt32LE=function writeUInt32LE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):objectWriteUInt32(this,t,r,!0),r+4},Buffer.prototype.writeUInt32BE=function writeUInt32BE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},Buffer.prototype.writeIntLE=function writeIntLE(t,r,n,i){if(t=+t,r|=0,!i){var a=Math.pow(2,8*n-1);checkInt(this,t,r,n,a-1,-a)}var o=0,s=1,h=0;for(this[r]=255&t;++o<n&&(s*=256);)t<0&&0===h&&0!==this[r+o-1]&&(h=1),this[r+o]=(t/s>>0)-h&255;return r+n},Buffer.prototype.writeIntBE=function writeIntBE(t,r,n,i){if(t=+t,r|=0,!i){var a=Math.pow(2,8*n-1);checkInt(this,t,r,n,a-1,-a)}var o=n-1,s=1,h=0;for(this[r+o]=255&t;--o>=0&&(s*=256);)t<0&&0===h&&0!==this[r+o+1]&&(h=1),this[r+o]=(t/s>>0)-h&255;return r+n},Buffer.prototype.writeInt8=function writeInt8(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},Buffer.prototype.writeInt16LE=function writeInt16LE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):objectWriteUInt16(this,t,r,!0),r+2},Buffer.prototype.writeInt16BE=function writeInt16BE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):objectWriteUInt16(this,t,r,!1),r+2},Buffer.prototype.writeInt32LE=function writeInt32LE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):objectWriteUInt32(this,t,r,!0),r+4},Buffer.prototype.writeInt32BE=function writeInt32BE(t,r,n){return t=+t,r|=0,n||checkInt(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):objectWriteUInt32(this,t,r,!1),r+4},Buffer.prototype.writeFloatLE=function writeFloatLE(t,r,n){return writeFloat(this,t,r,!0,n)},Buffer.prototype.writeFloatBE=function writeFloatBE(t,r,n){return writeFloat(this,t,r,!1,n)},Buffer.prototype.writeDoubleLE=function writeDoubleLE(t,r,n){return writeDouble(this,t,r,!0,n)},Buffer.prototype.writeDoubleBE=function writeDoubleBE(t,r,n){return writeDouble(this,t,r,!1,n)},Buffer.prototype.copy=function copy(t,r,n,i){if(n||(n=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var a,o=i-n;if(this===t&&n<r&&r<i)for(a=o-1;a>=0;--a)t[a+r]=this[a+n];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)t[a+r]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),r);return o},Buffer.prototype.fill=function fill(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var a=t.charCodeAt(0);a<256&&(t=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var o;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=r;o<n;++o)this[o]=t;else{var s=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,i).toString()),h=s.length;for(o=0;o<n-r;++o)this[o+r]=s[o%h]}return this};var h=/[^+\/0-9A-Za-z-_]/g;function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,r){var n;r=r||1/0;for(var i=t.length,a=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(r-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(r-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(r-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((r-=1)<0)break;o.push(n)}else if(n<2048){if((r-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((r-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function base64ToBytes(t){return i.toByteArray(function base64clean(t){if((t=function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(h,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function blitBuffer(t,r,n,i){for(var a=0;a<i&&!(a+n>=r.length||a>=t.length);++a)r[a+n]=t[a];return a}}).call(this,n(14))},function(t,r){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,r,n){"use strict";var i=n(65),a="object"==typeof self&&self&&self.Object===Object&&self,o=i.a||a||Function("return this")();r.a=o},function(t,r,n){"use strict";var i=Array.isArray;r.a=i},function(t,r,n){var i=n(353),a=n(354),o=n(355),s=n(356);t.exports=function _toConsumableArray(t){return i(t)||a(t)||o(t)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}t.exports=assert,assert.equal=function assertEqual(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)}},function(t,r,n){"use strict";var i=r,a=n(23),o=n(18),s=n(143);i.assert=o,i.toArray=s.toArray,i.zero2=s.zero2,i.toHex=s.toHex,i.encode=s.encode,i.getNAF=function getNAF(t,r,n){var i=new Array(Math.max(t.bitLength(),n)+1);i.fill(0);for(var a=1<<r+1,o=t.clone(),s=0;s<i.length;s++){var h,l=o.andln(a-1);o.isOdd()?(h=l>(a>>1)-1?(a>>1)-l:l,o.isubn(h)):h=0,i[s]=h,o.iushrn(1)}return i},i.getJSF=function getJSF(t,r){var n=[[],[]];t=t.clone(),r=r.clone();for(var i,a=0,o=0;t.cmpn(-a)>0||r.cmpn(-o)>0;){var s,h,l=t.andln(3)+a&3,c=r.andln(3)+o&3;3===l&&(l=-1),3===c&&(c=-1),s=0==(1&l)?0:3!==(i=t.andln(7)+a&7)&&5!==i||2!==c?l:-l,n[0].push(s),h=0==(1&c)?0:3!==(i=r.andln(7)+o&7)&&5!==i||2!==l?c:-c,n[1].push(h),2*a===s+1&&(a=1-a),2*o===h+1&&(o=1-o),t.iushrn(1),r.iushrn(1)}return n},i.cachedProperty=function cachedProperty(t,r,n){var i="_"+r;t.prototype[r]=function cachedProperty(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}},i.parseBytes=function parseBytes(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function intFromLE(t){return new a(t,"hex","le")}},function(t,r,n){"use strict";r.a=function isObjectLike(t){return null!=t&&"object"==typeof t}},function(t,r,n){"use strict";var i=n(18),a=n(5);function isSurrogatePair(t,r){return 55296==(64512&t.charCodeAt(r))&&(!(r<0||r+1>=t.length)&&56320==(64512&t.charCodeAt(r+1)))}function htonl(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function zero2(t){return 1===t.length?"0"+t:t}function zero8(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}r.inherits=a,r.toArray=function toArray(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(r){if("hex"===r)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),a=0;a<t.length;a+=2)n.push(parseInt(t[a]+t[a+1],16))}else for(var i=0,a=0;a<t.length;a++){var o=t.charCodeAt(a);o<128?n[i++]=o:o<2048?(n[i++]=o>>6|192,n[i++]=63&o|128):isSurrogatePair(t,a)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++a)),n[i++]=o>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=63&o|128):(n[i++]=o>>12|224,n[i++]=o>>6&63|128,n[i++]=63&o|128)}else for(a=0;a<t.length;a++)n[a]=0|t[a];return n},r.toHex=function toHex(t){for(var r="",n=0;n<t.length;n++)r+=zero2(t[n].toString(16));return r},r.htonl=htonl,r.toHex32=function toHex32(t,r){for(var n="",i=0;i<t.length;i++){var a=t[i];"little"===r&&(a=htonl(a)),n+=zero8(a.toString(16))}return n},r.zero2=zero2,r.zero8=zero8,r.join32=function join32(t,r,n,a){var o=n-r;i(o%4==0);for(var s=new Array(o/4),h=0,l=r;h<s.length;h++,l+=4){var c;c="big"===a?t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3]:t[l+3]<<24|t[l+2]<<16|t[l+1]<<8|t[l],s[h]=c>>>0}return s},r.split32=function split32(t,r){for(var n=new Array(4*t.length),i=0,a=0;i<t.length;i++,a+=4){var o=t[i];"big"===r?(n[a]=o>>>24,n[a+1]=o>>>16&255,n[a+2]=o>>>8&255,n[a+3]=255&o):(n[a+3]=o>>>24,n[a+2]=o>>>16&255,n[a+1]=o>>>8&255,n[a]=255&o)}return n},r.rotr32=function rotr32(t,r){return t>>>r|t<<32-r},r.rotl32=function rotl32(t,r){return t<<r|t>>>32-r},r.sum32=function sum32(t,r){return t+r>>>0},r.sum32_3=function sum32_3(t,r,n){return t+r+n>>>0},r.sum32_4=function sum32_4(t,r,n,i){return t+r+n+i>>>0},r.sum32_5=function sum32_5(t,r,n,i,a){return t+r+n+i+a>>>0},r.sum64=function sum64(t,r,n,i){var a=t[r],o=i+t[r+1]>>>0,s=(o<i?1:0)+n+a;t[r]=s>>>0,t[r+1]=o},r.sum64_hi=function sum64_hi(t,r,n,i){return(r+i>>>0<r?1:0)+t+n>>>0},r.sum64_lo=function sum64_lo(t,r,n,i){return r+i>>>0},r.sum64_4_hi=function sum64_4_hi(t,r,n,i,a,o,s,h){var l=0,c=r;return l+=(c=c+i>>>0)<r?1:0,l+=(c=c+o>>>0)<o?1:0,t+n+a+s+(l+=(c=c+h>>>0)<h?1:0)>>>0},r.sum64_4_lo=function sum64_4_lo(t,r,n,i,a,o,s,h){return r+i+o+h>>>0},r.sum64_5_hi=function sum64_5_hi(t,r,n,i,a,o,s,h,l,c){var d=0,p=r;return d+=(p=p+i>>>0)<r?1:0,d+=(p=p+o>>>0)<o?1:0,d+=(p=p+h>>>0)<h?1:0,t+n+a+s+l+(d+=(p=p+c>>>0)<c?1:0)>>>0},r.sum64_5_lo=function sum64_5_lo(t,r,n,i,a,o,s,h,l,c){return r+i+o+h+c>>>0},r.rotr64_hi=function rotr64_hi(t,r,n){return(r<<32-n|t>>>n)>>>0},r.rotr64_lo=function rotr64_lo(t,r,n){return(t<<32-n|r>>>n)>>>0},r.shr64_hi=function shr64_hi(t,r,n){return t>>>n},r.shr64_lo=function shr64_lo(t,r,n){return(t<<32-n|r>>>n)>>>0}},function(t,r,n){"use strict";var i=n(24),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,h=i.a?i.a.toStringTag:void 0;var l=function getRawTag(t){var r=o.call(t,h),n=t[h];try{t[h]=void 0;var i=!0}catch(t){}var a=s.call(t);return i&&(r?t[h]=n:delete t[h]),a},c=Object.prototype.toString;var d=function objectToString(t){return c.call(t)},p=i.a?i.a.toStringTag:void 0;r.a=function baseGetTag(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":p&&p in Object(t)?l(t):d(t)}},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(248).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r,n){"use strict";var i=n(15).a.Symbol;r.a=i},function(t,r,n){var i=n(9).Buffer,a=n(200).Transform,o=n(33).StringDecoder;function CipherBase(t){a.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(5)(CipherBase,a),CipherBase.prototype.update=function(t,r,n){"string"==typeof t&&(t=i.from(t,r));var a=this._update(t);return this.hashMode?this:(n&&(a=this._toString(a,n)),a)},CipherBase.prototype.setAutoPadding=function(){},CipherBase.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},CipherBase.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},CipherBase.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},CipherBase.prototype._transform=function(t,r,n){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){i=t}finally{n(i)}},CipherBase.prototype._flush=function(t){var r;try{this.push(this.__final())}catch(t){r=t}t(r)},CipherBase.prototype._finalOrDigest=function(t){var r=this.__final()||i.alloc(0);return t&&(r=this._toString(r,t,!0)),r},CipherBase.prototype._toString=function(t,r,n){if(this._decoder||(this._decoder=new o(r),this._encoding=r),this._encoding!==r)throw new Error("can't switch encodings");var i=this._decoder.write(t);return n&&(i+=this._decoder.end()),i},t.exports=CipherBase},function(t,r,n){"use strict";var i=n(22),a=n(20);r.a=function isSymbol(t){return"symbol"==typeof t||Object(a.a)(t)&&"[object Symbol]"==Object(i.a)(t)}},function(t,r,n){"use strict";r.a=function eq(t,r){return t===r||t!=t&&r!=r}},function(t,r,n){"use strict";var i=/^(?:0|[1-9]\d*)$/;r.a=function isIndex(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<r}},function(t,r,n){"use strict";var i=function listCacheClear(){this.__data__=[],this.size=0},a=n(27);var o=function assocIndexOf(t,r){for(var n=t.length;n--;)if(Object(a.a)(t[n][0],r))return n;return-1},s=Array.prototype.splice;var h=function listCacheDelete(t){var r=this.__data__,n=o(r,t);return!(n<0)&&(n==r.length-1?r.pop():s.call(r,n,1),--this.size,!0)};var l=function listCacheGet(t){var r=this.__data__,n=o(r,t);return n<0?void 0:r[n][1]};var c=function listCacheHas(t){return o(this.__data__,t)>-1};var d=function listCacheSet(t,r){var n=this.__data__,i=o(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this};function ListCache(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}ListCache.prototype.clear=i,ListCache.prototype.delete=h,ListCache.prototype.get=l,ListCache.prototype.has=c,ListCache.prototype.set=d;r.a=ListCache},function(t,r,n){t.exports=n(172)},,function(t,r,n){"use strict";var i,a="object"==typeof Reflect?Reflect:null,o=a&&"function"==typeof a.apply?a.apply:function ReflectApply(t,r,n){return Function.prototype.apply.call(t,r,n)};i=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function ReflectOwnKeys(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function ReflectOwnKeys(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function NumberIsNaN(t){return t!=t};function EventEmitter(){EventEmitter.init.call(this)}t.exports=EventEmitter,t.exports.once=function once(t,r){return new Promise((function(n,i){function errorListener(n){t.removeListener(r,resolver),i(n)}function resolver(){"function"==typeof t.removeListener&&t.removeListener("error",errorListener),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,r,resolver,{once:!0}),"error"!==r&&function addErrorHandlerIfEventEmitter(t,r,n){"function"==typeof t.on&&eventTargetAgnosticAddListener(t,"error",r,n)}(t,errorListener,{once:!0})}))},EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var h=10;function checkListener(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _getMaxListeners(t){return void 0===t._maxListeners?EventEmitter.defaultMaxListeners:t._maxListeners}function _addListener(t,r,n,i){var a,o,s;if(checkListener(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",r,n.listener?n.listener:n),o=t._events),s=o[r]),void 0===s)s=o[r]=n,++t._eventsCount;else if("function"==typeof s?s=o[r]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(a=_getMaxListeners(t))>0&&s.length>a&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=r,h.count=s.length,function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}(h)}return t}function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,r,n){var i={fired:!1,wrapFn:void 0,target:t,type:r,listener:n},a=onceWrapper.bind(i);return a.listener=n,i.wrapFn=a,a}function _listeners(t,r,n){var i=t._events;if(void 0===i)return[];var a=i[r];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function unwrapListeners(t){for(var r=new Array(t.length),n=0;n<r.length;++n)r[n]=t[n].listener||t[n];return r}(a):arrayClone(a,a.length)}function listenerCount(t){var r=this._events;if(void 0!==r){var n=r[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function arrayClone(t,r){for(var n=new Array(r),i=0;i<r;++i)n[i]=t[i];return n}function eventTargetAgnosticAddListener(t,r,n,i){if("function"==typeof t.on)i.once?t.once(r,n):t.on(r,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(r,(function wrapListener(a){i.once&&t.removeEventListener(r,wrapListener),n(a)}))}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),EventEmitter.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function setMaxListeners(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function emit(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i="error"===t,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var h=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw h.context=s,h}var l=a[t];if(void 0===l)return!1;if("function"==typeof l)o(l,this,r);else{var c=l.length,d=arrayClone(l,c);for(n=0;n<c;++n)o(d[n],this,r)}return!0},EventEmitter.prototype.addListener=function addListener(t,r){return _addListener(this,t,r,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function prependListener(t,r){return _addListener(this,t,r,!0)},EventEmitter.prototype.once=function once(t,r){return checkListener(r),this.on(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.prependOnceListener=function prependOnceListener(t,r){return checkListener(r),this.prependListener(t,_onceWrap(this,t,r)),this},EventEmitter.prototype.removeListener=function removeListener(t,r){var n,i,a,o,s;if(checkListener(r),void 0===(i=this._events))return this;if(void 0===(n=i[t]))return this;if(n===r||n.listener===r)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function spliceOne(t,r){for(;r+1<t.length;r++)t[r]=t[r+1];t.pop()}(n,a),1===n.length&&(i[t]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",t,s||r)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var a,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(a=o[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=n[t]))this.removeListener(t,r);else if(void 0!==r)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this},EventEmitter.prototype.listeners=function listeners(t){return _listeners(this,t,!0)},EventEmitter.prototype.rawListeners=function rawListeners(t){return _listeners(this,t,!1)},EventEmitter.listenerCount=function(t,r){return"function"==typeof t.listenerCount?t.listenerCount(r):listenerCount.call(t,r)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?i(this._events):[]}},function(t,r,n){"use strict";var i=n(9).Buffer,a=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(t){var r;switch(this.encoding=function normalizeEncoding(t){var r=function _normalizeEncoding(t){if(!t)return"utf8";for(var r;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(r)return;t=(""+t).toLowerCase(),r=!0}}(t);if("string"!=typeof r&&(i.isEncoding===a||!a(t)))throw new Error("Unknown encoding: "+t);return r||t}(t),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,r=4;break;case"utf8":this.fillLast=utf8FillLast,r=4;break;case"base64":this.text=base64Text,this.end=base64End,r=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(r)}function utf8CheckByte(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function utf8FillLast(t){var r=this.lastTotal-this.lastNeed,n=function utf8CheckExtraBytes(t,r,n){if(128!=(192&r[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&r.length>1){if(128!=(192&r[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&r.length>2&&128!=(192&r[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,r,0,t.length),void(this.lastNeed-=t.length))}function utf16Text(t,r){if((t.length-r)%2==0){var n=t.toString("utf16le",r);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",r,t.length-1)}function utf16End(t){var r=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,n)}return r}function base64Text(t,r){var n=(t.length-r)%3;return 0===n?t.toString("base64",r):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",r,t.length-n))}function base64End(t){var r=t&&t.length?this.write(t):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}r.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(t){if(0===t.length)return"";var r,n;if(this.lastNeed){if(void 0===(r=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?r?r+this.text(t,n):this.text(t,n):r||""},StringDecoder.prototype.end=function utf8End(t){var r=t&&t.length?this.write(t):"";return this.lastNeed?r+"":r},StringDecoder.prototype.text=function utf8Text(t,r){var n=function utf8CheckIncomplete(t,r,n){var i=r.length-1;if(i<n)return 0;var a=utf8CheckByte(r[i]);if(a>=0)return a>0&&(t.lastNeed=a-1),a;if(--i<n||-2===a)return 0;if((a=utf8CheckByte(r[i]))>=0)return a>0&&(t.lastNeed=a-2),a;if(--i<n||-2===a)return 0;if((a=utf8CheckByte(r[i]))>=0)return a>0&&(2===a?a=0:t.lastNeed=a-3),a;return 0}(this,t,r);if(!this.lastNeed)return t.toString("utf8",r);this.lastTotal=n;var i=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",r,i)},StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,r,n){"use strict";var i=n(60),a=Object.keys||function(t){var r=[];for(var n in t)r.push(n);return r};t.exports=Duplex;var o=Object.create(n(52));o.inherits=n(5);var s=n(115),h=n(76);o.inherits(Duplex,s);for(var l=a(h.prototype),c=0;c<l.length;c++){var d=l[c];Duplex.prototype[d]||(Duplex.prototype[d]=h.prototype[d])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);s.call(this,t),h.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||i.nextTick(onEndNT,this)}function onEndNT(t){t.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),Duplex.prototype._destroy=function(t,r){this.push(null),this.end(),i.nextTick(r,t)}},function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,r,n){"use strict";var i=n(168),a=n.n(i),o=n(17),s=n.n(o),h=n(4),l=n.n(h),c=n(6),d=n.n(c),p=n(0),m=n.n(p),g=n(1),y=n(45),b=n(29);var w=function stackClear(){this.__data__=new b.a,this.size=0};var M=function stackDelete(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n};var _=function stackGet(t){return this.__data__.get(t)};var x=function stackHas(t){return this.__data__.has(t)},A=n(66),E=n(58);var B=function stackSet(t,r){var n=this.__data__;if(n instanceof b.a){var i=n.__data__;if(!A.a||i.length<199)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new E.a(i)}return n.set(t,r),this.size=n.size,this};function Stack(t){var r=this.__data__=new b.a(t);this.size=r.size}Stack.prototype.clear=w,Stack.prototype.delete=M,Stack.prototype.get=_,Stack.prototype.has=x,Stack.prototype.set=B;var C=Stack,T=n(48),D=n(27);var P=function assignMergeValue(t,r,n){(void 0!==n&&!Object(D.a)(t[r],n)||void 0===n&&!(r in t))&&Object(T.a)(t,r,n)};var L=function createBaseFor(t){return function(r,n,i){for(var a=-1,o=Object(r),s=i(r),h=s.length;h--;){var l=s[t?h:++a];if(!1===n(o[l],l,o))break}return r}}(),N=n(170),F=n(15).a.Uint8Array;var I=function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new F(r).set(new F(t)),r};var k=function cloneTypedArray(t,r){var n=r?I(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var O=function copyArray(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r},U=n(11),z=Object.create,V=function(){function object(){}return function(t){if(!Object(U.a)(t))return{};if(z)return z(t);object.prototype=t;var r=new object;return object.prototype=void 0,r}}();var j=function overArg(t,r){return function(n){return t(r(n))}}(Object.getPrototypeOf,Object),H=Object.prototype;var G=function isPrototype(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||H)};var W=function initCloneObject(t){return"function"!=typeof t.constructor||G(t)?{}:V(j(t))},q=n(37),Q=n(16),X=n(46),Y=n(47);var J=function isArrayLike(t){return null!=t&&Object(Y.a)(t.length)&&!Object(X.a)(t)},Z=n(20);var $=function isArrayLikeObject(t){return Object(Z.a)(t)&&J(t)},ee=n(68),te=n(22),re=Function.prototype,ne=Object.prototype,ie=re.toString,ae=ne.hasOwnProperty,oe=ie.call(Object);var se=function isPlainObject(t){if(!Object(Z.a)(t)||"[object Object]"!=Object(te.a)(t))return!1;var r=j(t);if(null===r)return!0;var n=ae.call(r,"constructor")&&r.constructor;return"function"==typeof n&&n instanceof n&&ie.call(n)==oe},ue={};ue["[object Float32Array]"]=ue["[object Float64Array]"]=ue["[object Int8Array]"]=ue["[object Int16Array]"]=ue["[object Int32Array]"]=ue["[object Uint8Array]"]=ue["[object Uint8ClampedArray]"]=ue["[object Uint16Array]"]=ue["[object Uint32Array]"]=!0,ue["[object Arguments]"]=ue["[object Array]"]=ue["[object ArrayBuffer]"]=ue["[object Boolean]"]=ue["[object DataView]"]=ue["[object Date]"]=ue["[object Error]"]=ue["[object Function]"]=ue["[object Map]"]=ue["[object Number]"]=ue["[object Object]"]=ue["[object RegExp]"]=ue["[object Set]"]=ue["[object String]"]=ue["[object WeakMap]"]=!1;var he=function baseIsTypedArray(t){return Object(Z.a)(t)&&Object(Y.a)(t.length)&&!!ue[Object(te.a)(t)]};var le=function baseUnary(t){return function(r){return t(r)}},ce=n(100),de=ce.a&&ce.a.isTypedArray,fe=de?le(de):he;var pe=function safeGet(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]},me=n(67);var ge=function copyObject(t,r,n,i){var a=!n;n||(n={});for(var o=-1,s=r.length;++o<s;){var h=r[o],l=i?i(n[h],t[h],h,n,t):void 0;void 0===l&&(l=t[h]),a?Object(T.a)(n,h,l):Object(me.a)(n,h,l)}return n};var ve=function baseTimes(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i},ye=n(28),be=Object.prototype.hasOwnProperty;var we=function arrayLikeKeys(t,r){var n=Object(Q.a)(t),i=!n&&Object(q.a)(t),a=!n&&!i&&Object(ee.a)(t),o=!n&&!i&&!a&&fe(t),s=n||i||a||o,h=s?ve(t.length,String):[],l=h.length;for(var c in t)!r&&!be.call(t,c)||s&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Object(ye.a)(c,l))||h.push(c);return h};var Me=function nativeKeysIn(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r},_e=Object.prototype.hasOwnProperty;var xe=function baseKeysIn(t){if(!Object(U.a)(t))return Me(t);var r=G(t),n=[];for(var i in t)("constructor"!=i||!r&&_e.call(t,i))&&n.push(i);return n};var Ae=function keysIn(t){return J(t)?we(t,!0):xe(t)};var Se=function toPlainObject(t){return ge(t,Ae(t))};var Ee=function baseMergeDeep(t,r,n,i,a,o,s){var h=pe(t,n),l=pe(r,n),c=s.get(l);if(c)P(t,n,c);else{var d=o?o(h,l,n+"",t,r,s):void 0,p=void 0===d;if(p){var m=Object(Q.a)(l),g=!m&&Object(ee.a)(l),y=!m&&!g&&fe(l);d=l,m||g||y?Object(Q.a)(h)?d=h:$(h)?d=O(h):g?(p=!1,d=Object(N.a)(l,!0)):y?(p=!1,d=k(l,!0)):d=[]:se(l)||Object(q.a)(l)?(d=h,Object(q.a)(h)?d=Se(h):Object(U.a)(h)&&!Object(X.a)(h)||(d=W(l))):p=!1}p&&(s.set(l,d),a(d,l,i,o,s),s.delete(l)),P(t,n,d)}};var Be=function baseMerge(t,r,n,i,a){t!==r&&L(r,(function(o,s){if(a||(a=new C),Object(U.a)(o))Ee(t,r,s,n,baseMerge,i,a);else{var h=i?i(pe(t,s),o,s+"",t,r,a):void 0;void 0===h&&(h=o),P(t,s,h)}}),Ae)};var Ce=function identity(t){return t};var Te=function apply(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)},De=Math.max;var Pe=function overRest(t,r,n){return r=De(void 0===r?t.length-1:r,0),function(){for(var i=arguments,a=-1,o=De(i.length-r,0),s=Array(o);++a<o;)s[a]=i[r+a];a=-1;for(var h=Array(r+1);++a<r;)h[a]=i[a];return h[r]=n(s),Te(t,this,h)}};var Re=function constant(t){return function(){return t}},Le=n(50),Ne=Le.a?function(t,r){return Object(Le.a)(t,"toString",{configurable:!0,enumerable:!1,value:Re(r),writable:!0})}:Ce,Fe=Date.now;var Ie=function shortOut(t){var r=0,n=0;return function(){var i=Fe(),a=16-(i-n);if(n=i,a>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}(Ne);var ke=function baseRest(t,r){return Ie(Pe(t,r,Ce),t+"")};var Oe=function isIterateeCall(t,r,n){if(!Object(U.a)(n))return!1;var i=typeof r;return!!("number"==i?J(n)&&Object(ye.a)(r,n.length):"string"==i&&r in n)&&Object(D.a)(n[r],t)};var Ue=function createAssigner(t){return ke((function(r,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&Oe(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),r=Object(r);++i<a;){var h=n[i];h&&t(r,h,i,o)}return r}))}((function(t,r,n){Be(t,r,n)}));function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){m()(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}var ze=n(357);ze.keys().forEach((function(t){var r=ze(t).default;g.Object3D.register_component(r)}));var Ve={},je=n(365);je.keys().forEach((function(t){var r=t.replace("./","").replace(".yaml","");Ve[r]=je(t)}));var He={},Ge=n(370);Ge.keys().forEach((function(t){var r=t.replace("./","").replace(".yaml","");He[r]=Ge(t)}));var We={},qe=n(374);qe.keys().forEach((function(t){var r=t.replace("./","").replace(".yaml",""),n=qe(t);We[r]=n}));var Ke=n(376);Ke.keys().forEach((function(t){var r=t.replace("./","").replace(".js","");g[r]=Ke(t).default}));var Qe=n(380);Qe.keys().forEach((function(t){var r=t.replace("./","").replace(".js","");g[r]=Qe(t).default}));var Xe=function(){function AssetManager(){l()(this,AssetManager)}return d()(AssetManager,null,[{key:"create_material_with_template",value:function create_material_with_template(t,r,n){t=t.replace("@","");var i=Ve[t],a=Object.assign({},i.params),o=Ue(_objectSpread({},a),_objectSpread({},r));return new g[i.type](o).clone()}},{key:"slick_merge",value:function slick_merge(t,r){return AssetManager.for_each(r,(function(r,n){return t[n]=r})),t}},{key:"create_material",value:function create_material(t,r,n){var i=AssetManager.cached_materials[n];if(void 0===i||void 0===n){if(0===t.indexOf("@"))return this.create_material_with_template(t,r,n);i=new g[t](r),void 0!==n&&(AssetManager.cached_materials[n]=i)}return i}},{key:"load_obj_geometry",value:function load_obj_geometry(t){obj_loader.load("res/hex_cyl.obj",(function(t){console.log(t)}),(function(t){console.log(t.loaded/t.total*100+"% loaded")}),(function(t){console.log("An error happened")}))}},{key:"create_geometry_with_template",value:function create_geometry_with_template(t,r,n){var i,a,o,s=t.replace("@",""),h=He[s],l=null!==(i=null==h||null===(a=h.params)||void 0===a?void 0:a.args)&&void 0!==i?i:[],c=null!==(o=null==h?void 0:h.params.scale)&&void 0!==o?o:[1,1,1];null==r||r.forEach((function(t,r){l[r]=t}));var d=AssetManager.create_geometry(h.type,l,n);return d.scale(c[0],c[1],c[2]),d}},{key:"create_obj_geometry",value:function create_obj_geometry(t,r,n){var i=t.replace("url:",""),a=this.load_obj_geometry(i);console.log(a)}},{key:"create_geometry",value:function create_geometry(t,r,n){var i=AssetManager.cached_geometries[n];if(void 0===i||void 0===n){if(0===t.indexOf("@"))return this.create_geometry_with_template(t,r,n);if(0===t.indexOf("url:"))return this.create_obj_geometry(t,r,n);i=a()(g[t],s()(r)),void 0!==n&&(AssetManager.cached_geometries[n]=i)}return i}},{key:"load_from_texture_lib",value:function load_from_texture_lib(t,r){var n=t.replace("@",""),i=new Image,a=new g.Texture;return i.src=We[n].base64,a.image=i,i.onload=function(){for(var t in r)a[t]=r[t];a.needsUpdate=!0},a}},{key:"load_texture",value:function load_texture(t,r){var n=AssetManager.textures_cache[t];if(!n)if(0===t.indexOf("@"))for(var i in n=AssetManager.textures_cache[t]=AssetManager.load_from_texture_lib(t,r),r)n[i]=r[i];else n=AssetManager.textures_cache[t]=(new g.TextureLoader).load(t);return n.needsUpdate=!0,n}},{key:"load_image",value:function load_image(t){return new Promise((function(r){var n=AssetManager.images_cache[t];void 0!==n?r(n):((n=new Image).src=t,n.onload=function(){AssetManager.images_cache[t]=n,r(n)})}))}}]),AssetManager}();m()(Xe,"textures_cache",{}),m()(Xe,"cached_geometries",{}),m()(Xe,"cached_materials",{}),m()(Xe,"images_cache",{}),Object(y.a)("AssetManaget","initialized"),window.AssetManager=Xe;r.a=Xe},function(t,r,n){"use strict";var i=n(22),a=n(20);var o=function baseIsArguments(t){return Object(a.a)(t)&&"[object Arguments]"==Object(i.a)(t)},s=Object.prototype,h=s.hasOwnProperty,l=s.propertyIsEnumerable,c=o(function(){return arguments}())?o:function(t){return Object(a.a)(t)&&h.call(t,"callee")&&!l.call(t,"callee")};r.a=c},function(t,r,n){"use strict";(function(r,i){var a=65536,o=4294967295;var s=n(9).Buffer,h=r.crypto||r.msCrypto;h&&h.getRandomValues?t.exports=function randomBytes(t,r){if(t>o)throw new RangeError("requested too many random bytes");var n=s.allocUnsafe(t);if(t>0)if(t>a)for(var l=0;l<t;l+=a)h.getRandomValues(n.slice(l,l+a));else h.getRandomValues(n);if("function"==typeof r)return i.nextTick((function(){r(null,n)}));return n}:t.exports=function oldBrowser(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(14),n(12))},function(t,r,n){"use strict";var i={};function createErrorType(t,r,n){n||(n=Error);var a=function(t){function NodeError(n,i,a){return t.call(this,function getMessage(t,n,i){return"string"==typeof r?r:r(t,n,i)}(n,i,a))||this}return function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}(NodeError,t),NodeError}(n);a.prototype.name=n.name,a.prototype.code=t,i[t]=a}function oneOf(t,r){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(r," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(r," ").concat(t[0]," or ").concat(t[1]):"of ".concat(r," ").concat(t[0])}return"of ".concat(r," ").concat(String(t))}createErrorType("ERR_INVALID_OPT_VALUE",(function(t,r){return'The value "'+r+'" is invalid for option "'+t+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(t,r,n){var i,a;if("string"==typeof r&&function startsWith(t,r,n){return t.substr(!n||n<0?0:+n,r.length)===r}(r,"not ")?(i="must not be",r=r.replace(/^not /,"")):i="must be",function endsWith(t,r,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-r.length,n)===r}(t," argument"))a="The ".concat(t," ").concat(i," ").concat(oneOf(r,"type"));else{var o=function includes(t,r,n){return"number"!=typeof n&&(n=0),!(n+r.length>t.length)&&-1!==t.indexOf(r,n)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(o," ").concat(i," ").concat(oneOf(r,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},function(t,r,n){"use strict";(function(r){var i=Object.keys||function(t){var r=[];for(var n in t)r.push(n);return r};t.exports=Duplex;var a=n(107),o=n(111);n(5)(Duplex,a);for(var s=i(o.prototype),h=0;h<s.length;h++){var l=s[h];Duplex.prototype[l]||(Duplex.prototype[l]=o.prototype[l])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);a.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||r.nextTick(onEndNT,this)}function onEndNT(t){t.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,n(12))},function(t,r,n){var i=n(9).Buffer;function Hash(t,r){this._block=i.alloc(t),this._finalSize=r,this._blockSize=t,this._len=0}Hash.prototype.update=function(t,r){"string"==typeof t&&(r=r||"utf8",t=i.from(t,r));for(var n=this._block,a=this._blockSize,o=t.length,s=this._len,h=0;h<o;){for(var l=s%a,c=Math.min(o-h,a-l),d=0;d<c;d++)n[l+d]=t[h+d];h+=c,(s+=c)%a==0&&this._update(n)}return this._len+=o,this},Hash.prototype.digest=function(t){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0,a=(n-i)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=Hash},function(t,r,n){"use strict";var i={};function createErrorType(t,r,n){n||(n=Error);var a=function(t){function NodeError(n,i,a){return t.call(this,function getMessage(t,n,i){return"string"==typeof r?r:r(t,n,i)}(n,i,a))||this}return function _inheritsLoose(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}(NodeError,t),NodeError}(n);a.prototype.name=n.name,a.prototype.code=t,i[t]=a}function oneOf(t,r){if(Array.isArray(t)){var n=t.length;return t=t.map((function(t){return String(t)})),n>2?"one of ".concat(r," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(r," ").concat(t[0]," or ").concat(t[1]):"of ".concat(r," ").concat(t[0])}return"of ".concat(r," ").concat(String(t))}createErrorType("ERR_INVALID_OPT_VALUE",(function(t,r){return'The value "'+r+'" is invalid for option "'+t+'"'}),TypeError),createErrorType("ERR_INVALID_ARG_TYPE",(function(t,r,n){var i,a;if("string"==typeof r&&function startsWith(t,r,n){return t.substr(!n||n<0?0:+n,r.length)===r}(r,"not ")?(i="must not be",r=r.replace(/^not /,"")):i="must be",function endsWith(t,r,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-r.length,n)===r}(t," argument"))a="The ".concat(t," ").concat(i," ").concat(oneOf(r,"type"));else{var o=function includes(t,r,n){return"number"!=typeof n&&(n=0),!(n+r.length>t.length)&&-1!==t.indexOf(r,n)}(t,".")?"property":"argument";a='The "'.concat(t,'" ').concat(o," ").concat(i," ").concat(oneOf(r,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close"),createErrorType("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end"),createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),createErrorType("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=i},function(t,r,n){"use strict";(function(r){var i=Object.keys||function(t){var r=[];for(var n in t)r.push(n);return r};t.exports=Duplex;var a=n(137),o=n(141);n(5)(Duplex,a);for(var s=i(o.prototype),h=0;h<s.length;h++){var l=s[h];Duplex.prototype[l]||(Duplex.prototype[l]=o.prototype[l])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);a.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",onend)))}function onend(){this._writableState.ended||r.nextTick(onEndNT,this)}function onEndNT(t){t.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function set(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,n(12))},function(t,r,n){"use strict";function checkDataType(t,r,n,i){var a=i?" !== ":" === ",o=i?" || ":" && ",s=i?"!":"",h=i?"":"!";switch(t){case"null":return r+a+"null";case"array":return s+"Array.isArray("+r+")";case"object":return"("+s+r+o+"typeof "+r+a+'"object"'+o+h+"Array.isArray("+r+"))";case"integer":return"(typeof "+r+a+'"number"'+o+h+"("+r+" % 1)"+o+r+a+r+(n?o+s+"isFinite("+r+")":"")+")";case"number":return"(typeof "+r+a+'"'+t+'"'+(n?o+s+"isFinite("+r+")":"")+")";default:return"typeof "+r+a+'"'+t+'"'}}t.exports={copy:function copy(t,r){for(var n in r=r||{},t)r[n]=t[n];return r},checkDataType:checkDataType,checkDataTypes:function checkDataTypes(t,r,n){switch(t.length){case 1:return checkDataType(t[0],r,n,!0);default:var i="",a=toHash(t);for(var o in a.array&&a.object&&(i=a.null?"(":"(!"+r+" || ",i+="typeof "+r+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)i+=(i?" && ":"")+checkDataType(o,r,n,!0);return i}},coerceToTypes:function coerceToTypes(t,r){if(Array.isArray(r)){for(var n=[],a=0;a<r.length;a++){var o=r[a];(i[o]||"array"===t&&"array"===o)&&(n[n.length]=o)}if(n.length)return n}else{if(i[r])return[r];if("array"===t&&"array"===r)return["array"]}},toHash:toHash,getProperty:getProperty,escapeQuotes:escapeQuotes,equal:n(94),ucs2length:n(296),varOccurences:function varOccurences(t,r){r+="[^0-9]";var n=t.match(new RegExp(r,"g"));return n?n.length:0},varReplace:function varReplace(t,r,n){return r+="([^0-9])",n=n.replace(/\$/g,"$$$$"),t.replace(new RegExp(r,"g"),n+"$1")},schemaHasRules:function schemaHasRules(t,r){if("boolean"==typeof t)return!t;for(var n in t)if(r[n])return!0},schemaHasRulesExcept:function schemaHasRulesExcept(t,r,n){if("boolean"==typeof t)return!t&&"not"!=n;for(var i in t)if(i!=n&&r[i])return!0},schemaUnknownRules:function schemaUnknownRules(t,r){if("boolean"==typeof t)return;for(var n in t)if(!r[n])return n},toQuotedString:toQuotedString,getPathExpr:function getPathExpr(t,r,n,i){return joinPaths(t,n?"'/' + "+r+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+r+" + ']'":"'[\\'' + "+r+" + '\\']'")},getPath:function getPath(t,r,n){var i=toQuotedString(n?"/"+escapeJsonPointer(r):getProperty(r));return joinPaths(t,i)},getData:function getData(t,r,n){var i,a,o,l;if(""===t)return"rootData";if("/"==t[0]){if(!s.test(t))throw new Error("Invalid JSON-pointer: "+t);a=t,o="rootData"}else{if(!(l=t.match(h)))throw new Error("Invalid JSON-pointer: "+t);if(i=+l[1],"#"==(a=l[2])){if(i>=r)throw new Error("Cannot access property/index "+i+" levels up, current level is "+r);return n[r-i]}if(i>r)throw new Error("Cannot access data "+i+" levels up, current level is "+r);if(o="data"+(r-i||""),!a)return o}for(var c=o,d=a.split("/"),p=0;p<d.length;p++){var m=d[p];m&&(o+=getProperty(unescapeJsonPointer(m)),c+=" && "+o)}return c},unescapeFragment:function unescapeFragment(t){return unescapeJsonPointer(decodeURIComponent(t))},unescapeJsonPointer:unescapeJsonPointer,escapeFragment:function escapeFragment(t){return encodeURIComponent(escapeJsonPointer(t))},escapeJsonPointer:escapeJsonPointer};var i=toHash(["string","number","integer","boolean","null"]);function toHash(t){for(var r={},n=0;n<t.length;n++)r[t[n]]=!0;return r}var a=/^[a-z$_][a-z$_0-9]*$/i,o=/'|\\/g;function getProperty(t){return"number"==typeof t?"["+t+"]":a.test(t)?"."+t:"['"+escapeQuotes(t)+"']"}function escapeQuotes(t){return t.replace(o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function toQuotedString(t){return"'"+escapeQuotes(t)+"'"}var s=/^\/(?:[^~]|~0|~1)*$/,h=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function joinPaths(t,r){return'""'==t?r:(t+" + "+r).replace(/([^\\])' \+ '/g,"$1")}function escapeJsonPointer(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapeJsonPointer(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},function(t,r,n){"use strict";function log(t){for(var r,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=console).log.apply(r,["%c[".concat(t,"]"),"color: magenta"].concat(i))}n.d(r,"a",(function(){return log}))},function(t,r,n){"use strict";var i=n(22),a=n(11);r.a=function isFunction(t){if(!Object(a.a)(t))return!1;var r=Object(i.a)(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}},function(t,r,n){"use strict";r.a=function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,r,n){"use strict";var i=n(50);r.a=function baseAssignValue(t,r,n){"__proto__"==r&&i.a?Object(i.a)(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}},function(t,r,n){"use strict";var i,a=n(46),o=n(15).a["__core-js_shared__"],s=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";var h=function isMasked(t){return!!s&&s in t},l=n(11),c=Function.prototype.toString;var d=function toSource(t){if(null!=t){try{return c.call(t)}catch(t){}try{return t+""}catch(t){}}return""},p=/^\[object .+?Constructor\]$/,m=Function.prototype,g=Object.prototype,y=m.toString,b=g.hasOwnProperty,w=RegExp("^"+y.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var M=function baseIsNative(t){return!(!Object(l.a)(t)||h(t))&&(Object(a.a)(t)?w:p).test(d(t))};var _=function getValue(t,r){return null==t?void 0:t[r]};r.a=function getNative(t,r){var n=_(t,r);return M(n)?n:void 0}},function(t,r,n){"use strict";var i=n(49),a=function(){try{var t=Object(i.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();r.a=a},function(t,r,n){"use strict";var i=n(5),a=n(70),o=n(73),s=n(74),h=n(25);function Hash(t){h.call(this,"digest"),this._hash=t}i(Hash,h),Hash.prototype._update=function(t){this._hash.update(t)},Hash.prototype._final=function(){return this._hash.digest()},t.exports=function createHash(t){return"md5"===(t=t.toLowerCase())?new a:"rmd160"===t||"ripemd160"===t?new o:new Hash(s(t))}},function(t,r,n){(function(t){function objectToString(t){return Object.prototype.toString.call(t)}r.isArray=function isArray(t){return Array.isArray?Array.isArray(t):"[object Array]"===objectToString(t)},r.isBoolean=function isBoolean(t){return"boolean"==typeof t},r.isNull=function isNull(t){return null===t},r.isNullOrUndefined=function isNullOrUndefined(t){return null==t},r.isNumber=function isNumber(t){return"number"==typeof t},r.isString=function isString(t){return"string"==typeof t},r.isSymbol=function isSymbol(t){return"symbol"==typeof t},r.isUndefined=function isUndefined(t){return void 0===t},r.isRegExp=function isRegExp(t){return"[object RegExp]"===objectToString(t)},r.isObject=function isObject(t){return"object"==typeof t&&null!==t},r.isDate=function isDate(t){return"[object Date]"===objectToString(t)},r.isError=function isError(t){return"[object Error]"===objectToString(t)||t instanceof Error},r.isFunction=function isFunction(t){return"function"==typeof t},r.isPrimitive=function isPrimitive(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t.isBuffer}).call(this,n(13).Buffer)},function(t,r,n){(function(r){t.exports=function xor(t,n){for(var i=Math.min(t.length,n.length),a=new r(i),o=0;o<i;++o)a[o]=t[o]^n[o];return a}}).call(this,n(13).Buffer)},function(t,r,n){"use strict";var i=n(21),a=n(18);function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}r.BlockHash=BlockHash,BlockHash.prototype.update=function update(t,r){if(t=i.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=i.join32(t,0,t.length-n,this.endian);for(var a=0;a<t.length;a+=this._delta32)this._update(t,a,a+this._delta32)}return this},BlockHash.prototype.digest=function digest(t){return this.update(this._pad()),a(null===this.pending),this._digest(t)},BlockHash.prototype._pad=function pad(){var t=this.pendingTotal,r=this._delta8,n=r-(t+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var a=1;a<n;a++)i[a]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[a++]=0;i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=t>>>24&255,i[a++]=t>>>16&255,i[a++]=t>>>8&255,i[a++]=255&t}else for(i[a++]=255&t,i[a++]=t>>>8&255,i[a++]=t>>>16&255,i[a++]=t>>>24&255,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,o=8;o<this.padLength;o++)i[a++]=0;return i}},function(t,r,n){"use strict";const i=n(5),a=n(90).Reporter,o=n(88).Buffer;function DecoderBuffer(t,r){a.call(this,r),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function EncoderBuffer(t,r){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return EncoderBuffer.isEncoderBuffer(t)||(t=new EncoderBuffer(t,r)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return r.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return r.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}i(DecoderBuffer,a),r.DecoderBuffer=DecoderBuffer,DecoderBuffer.isDecoderBuffer=function isDecoderBuffer(t){if(t instanceof DecoderBuffer)return!0;return"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},DecoderBuffer.prototype.save=function save(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},DecoderBuffer.prototype.restore=function restore(t){const r=new DecoderBuffer(this.base);return r.offset=t.offset,r.length=this.offset,this.offset=t.offset,a.prototype.restore.call(this,t.reporter),r},DecoderBuffer.prototype.isEmpty=function isEmpty(){return this.offset===this.length},DecoderBuffer.prototype.readUInt8=function readUInt8(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},DecoderBuffer.prototype.skip=function skip(t,r){if(!(this.offset+t<=this.length))return this.error(r||"DecoderBuffer overrun");const n=new DecoderBuffer(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},DecoderBuffer.prototype.raw=function raw(t){return this.base.slice(t?t.offset:this.offset,this.length)},r.EncoderBuffer=EncoderBuffer,EncoderBuffer.isEncoderBuffer=function isEncoderBuffer(t){if(t instanceof EncoderBuffer)return!0;return"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},EncoderBuffer.prototype.join=function join(t,r){return t||(t=o.alloc(this.length)),r||(r=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(t,r),r+=n.length})):("number"==typeof this.value?t[r]=this.value:"string"==typeof this.value?t.write(this.value,r):o.isBuffer(this.value)&&this.value.copy(t,r),r+=this.length)),t}},function(t,r){function _typeof(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=_typeof=function _typeof(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=_typeof=function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),_typeof(r)}t.exports=_typeof,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){function asyncGeneratorStep(t,r,n,i,a,o,s){try{var h=t[o](s),l=h.value}catch(t){return void n(t)}h.done?r(l):Promise.resolve(l).then(i,a)}t.exports=function _asyncToGenerator(t){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=t.apply(r,n);function _next(t){asyncGeneratorStep(o,i,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(o,i,a,_next,_throw,"throw",t)}_next(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){"use strict";var i=n(49),a=Object(i.a)(Object,"create");var o=function hashClear(){this.__data__=a?a(null):{},this.size=0};var s=function hashDelete(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},h=Object.prototype.hasOwnProperty;var l=function hashGet(t){var r=this.__data__;if(a){var n=r[t];return"__lodash_hash_undefined__"===n?void 0:n}return h.call(r,t)?r[t]:void 0},c=Object.prototype.hasOwnProperty;var d=function hashHas(t){var r=this.__data__;return a?void 0!==r[t]:c.call(r,t)};var p=function hashSet(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=a&&void 0===r?"__lodash_hash_undefined__":r,this};function Hash(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}Hash.prototype.clear=o,Hash.prototype.delete=s,Hash.prototype.get=l,Hash.prototype.has=d,Hash.prototype.set=p;var m=Hash,g=n(29),y=n(66);var b=function mapCacheClear(){this.size=0,this.__data__={hash:new m,map:new(y.a||g.a),string:new m}};var w=function isKeyable(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t};var M=function getMapData(t,r){var n=t.__data__;return w(r)?n["string"==typeof r?"string":"hash"]:n.map};var _=function mapCacheDelete(t){var r=M(this,t).delete(t);return this.size-=r?1:0,r};var x=function mapCacheGet(t){return M(this,t).get(t)};var A=function mapCacheHas(t){return M(this,t).has(t)};var E=function mapCacheSet(t,r){var n=M(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this};function MapCache(t){var r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}MapCache.prototype.clear=b,MapCache.prototype.delete=_,MapCache.prototype.get=x,MapCache.prototype.has=A,MapCache.prototype.set=E;r.a=MapCache},function(t,r,n){(function(t){function normalizeArray(t,r){for(var n=0,i=t.length-1;i>=0;i--){var a=t[i];"."===a?t.splice(i,1):".."===a?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(r)for(;n--;n)t.unshift("..");return t}function filter(t,r){if(t.filter)return t.filter(r);for(var n=[],i=0;i<t.length;i++)r(t[i],i,t)&&n.push(t[i]);return n}r.resolve=function(){for(var r="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,n="/"===a.charAt(0))}return(n?"/":"")+(r=normalizeArray(filter(r.split("/"),(function(t){return!!t})),!n).join("/"))||"."},r.normalize=function(t){var i=r.isAbsolute(t),a="/"===n(t,-1);return(t=normalizeArray(filter(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},r.isAbsolute=function(t){return"/"===t.charAt(0)},r.join=function(){var t=Array.prototype.slice.call(arguments,0);return r.normalize(filter(t,(function(t,r){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},r.relative=function(t,n){function trim(t){for(var r=0;r<t.length&&""===t[r];r++);for(var n=t.length-1;n>=0&&""===t[n];n--);return r>n?[]:t.slice(r,n-r+1)}t=r.resolve(t).substr(1),n=r.resolve(n).substr(1);for(var i=trim(t.split("/")),a=trim(n.split("/")),o=Math.min(i.length,a.length),s=o,h=0;h<o;h++)if(i[h]!==a[h]){s=h;break}var l=[];for(h=s;h<i.length;h++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var r=t.charCodeAt(0),n=47===r,i=-1,a=!0,o=t.length-1;o>=1;--o)if(47===(r=t.charCodeAt(o))){if(!a){i=o;break}}else a=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},r.basename=function(t,r){var n=function basename(t){"string"!=typeof t&&(t+="");var r,n=0,i=-1,a=!0;for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!a){n=r+1;break}}else-1===i&&(a=!1,i=r+1);return-1===i?"":t.slice(n,i)}(t);return r&&n.substr(-1*r.length)===r&&(n=n.substr(0,n.length-r.length)),n},r.extname=function(t){"string"!=typeof t&&(t+="");for(var r=-1,n=0,i=-1,a=!0,o=0,s=t.length-1;s>=0;--s){var h=t.charCodeAt(s);if(47!==h)-1===i&&(a=!1,i=s+1),46===h?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1);else if(!a){n=s+1;break}}return-1===r||-1===i||0===o||1===o&&r===i-1&&r===n+1?"":t.slice(r,i)};var n="b"==="ab".substr(-1)?function(t,r,n){return t.substr(r,n)}:function(t,r,n){return r<0&&(r=t.length+r),t.substr(r,n)}}).call(this,n(12))},function(t,r,n){"use strict";(function(r){void 0===r||!r.version||0===r.version.indexOf("v0.")||0===r.version.indexOf("v1.")&&0!==r.version.indexOf("v1.8.")?t.exports={nextTick:function nextTick(t,n,i,a){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,h=arguments.length;switch(h){case 0:case 1:return r.nextTick(t);case 2:return r.nextTick((function afterTickOne(){t.call(null,n)}));case 3:return r.nextTick((function afterTickTwo(){t.call(null,n,i)}));case 4:return r.nextTick((function afterTickThree(){t.call(null,n,i,a)}));default:for(o=new Array(h-1),s=0;s<o.length;)o[s++]=arguments[s];return r.nextTick((function afterTick(){t.apply(null,o)}))}}}:t.exports=r}).call(this,n(12))},function(t,r,n){var i=n(9).Buffer;function asUInt32Array(t){i.isBuffer(t)||(t=i.from(t));for(var r=t.length/4|0,n=new Array(r),a=0;a<r;a++)n[a]=t.readUInt32BE(4*a);return n}function scrubVec(t){for(;0<t.length;t++)t[0]=0}function cryptBlock(t,r,n,i,a){for(var o,s,h,l,c=n[0],d=n[1],p=n[2],m=n[3],g=t[0]^r[0],y=t[1]^r[1],b=t[2]^r[2],w=t[3]^r[3],M=4,_=1;_<a;_++)o=c[g>>>24]^d[y>>>16&255]^p[b>>>8&255]^m[255&w]^r[M++],s=c[y>>>24]^d[b>>>16&255]^p[w>>>8&255]^m[255&g]^r[M++],h=c[b>>>24]^d[w>>>16&255]^p[g>>>8&255]^m[255&y]^r[M++],l=c[w>>>24]^d[g>>>16&255]^p[y>>>8&255]^m[255&b]^r[M++],g=o,y=s,b=h,w=l;return o=(i[g>>>24]<<24|i[y>>>16&255]<<16|i[b>>>8&255]<<8|i[255&w])^r[M++],s=(i[y>>>24]<<24|i[b>>>16&255]<<16|i[w>>>8&255]<<8|i[255&g])^r[M++],h=(i[b>>>24]<<24|i[w>>>16&255]<<16|i[g>>>8&255]<<8|i[255&y])^r[M++],l=(i[w>>>24]<<24|i[g>>>16&255]<<16|i[y>>>8&255]<<8|i[255&b])^r[M++],[o>>>=0,s>>>=0,h>>>=0,l>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],o=function(){for(var t=new Array(256),r=0;r<256;r++)t[r]=r<128?r<<1:r<<1^283;for(var n=[],i=[],a=[[],[],[],[]],o=[[],[],[],[]],s=0,h=0,l=0;l<256;++l){var c=h^h<<1^h<<2^h<<3^h<<4;c=c>>>8^255&c^99,n[s]=c,i[c]=s;var d=t[s],p=t[d],m=t[p],g=257*t[c]^16843008*c;a[0][s]=g<<24|g>>>8,a[1][s]=g<<16|g>>>16,a[2][s]=g<<8|g>>>24,a[3][s]=g,g=16843009*m^65537*p^257*d^16843008*s,o[0][c]=g<<24|g>>>8,o[1][c]=g<<16|g>>>16,o[2][c]=g<<8|g>>>24,o[3][c]=g,0===s?s=h=1:(s=d^t[t[t[m^d]]],h^=t[t[h]])}return{SBOX:n,INV_SBOX:i,SUB_MIX:a,INV_SUB_MIX:o}}();function AES(t){this._key=asUInt32Array(t),this._reset()}AES.blockSize=16,AES.keySize=32,AES.prototype.blockSize=AES.blockSize,AES.prototype.keySize=AES.keySize,AES.prototype._reset=function(){for(var t=this._key,r=t.length,n=r+6,i=4*(n+1),s=[],h=0;h<r;h++)s[h]=t[h];for(h=r;h<i;h++){var l=s[h-1];h%r==0?(l=l<<8|l>>>24,l=o.SBOX[l>>>24]<<24|o.SBOX[l>>>16&255]<<16|o.SBOX[l>>>8&255]<<8|o.SBOX[255&l],l^=a[h/r|0]<<24):r>6&&h%r==4&&(l=o.SBOX[l>>>24]<<24|o.SBOX[l>>>16&255]<<16|o.SBOX[l>>>8&255]<<8|o.SBOX[255&l]),s[h]=s[h-r]^l}for(var c=[],d=0;d<i;d++){var p=i-d,m=s[p-(d%4?0:4)];c[d]=d<4||p<=4?m:o.INV_SUB_MIX[0][o.SBOX[m>>>24]]^o.INV_SUB_MIX[1][o.SBOX[m>>>16&255]]^o.INV_SUB_MIX[2][o.SBOX[m>>>8&255]]^o.INV_SUB_MIX[3][o.SBOX[255&m]]}this._nRounds=n,this._keySchedule=s,this._invKeySchedule=c},AES.prototype.encryptBlockRaw=function(t){return cryptBlock(t=asUInt32Array(t),this._keySchedule,o.SUB_MIX,o.SBOX,this._nRounds)},AES.prototype.encryptBlock=function(t){var r=this.encryptBlockRaw(t),n=i.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},AES.prototype.decryptBlock=function(t){var r=(t=asUInt32Array(t))[1];t[1]=t[3],t[3]=r;var n=cryptBlock(t,this._invKeySchedule,o.INV_SUB_MIX,o.INV_SBOX,this._nRounds),a=i.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a},AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)},t.exports.AES=AES},function(t,r,n){var i=n(9).Buffer,a=n(70);t.exports=function EVP_BytesToKey(t,r,n,o){if(i.isBuffer(t)||(t=i.from(t,"binary")),r&&(i.isBuffer(r)||(r=i.from(r,"binary")),8!==r.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,h=i.alloc(s),l=i.alloc(o||0),c=i.alloc(0);s>0||o>0;){var d=new a;d.update(c),d.update(t),r&&d.update(r),c=d.digest();var p=0;if(s>0){var m=h.length-s;p=Math.min(s,c.length),c.copy(h,m,0,p),s-=p}if(p<c.length&&o>0){var g=l.length-o,y=Math.min(o,c.length-p);c.copy(l,g,p,p+y),o-=y}}return c.fill(0),{key:h,iv:l}}},function(t,r,n){"use strict";var i=n(23),a=n(19),o=a.getNAF,s=a.getJSF,h=a.assert;function BaseCurve(t,r){this.type=t,this.p=new i(r.p,16),this.red=r.prime?i.red(r.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=r.n&&new i(r.n,16),this.g=r.g&&this.pointFromJSON(r.g,r.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(t,r){this.curve=t,this.type=r,this.precomputed=null}t.exports=BaseCurve,BaseCurve.prototype.point=function point(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function validate(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function _fixedNafMul(t,r){h(t.precomputed);var n=t._getDoubles(),i=o(r,1,this._bitLength),a=(1<<n.step+1)-(n.step%2==0?2:1);a/=3;var s,l,c=[];for(s=0;s<i.length;s+=n.step){l=0;for(var d=s+n.step-1;d>=s;d--)l=(l<<1)+i[d];c.push(l)}for(var p=this.jpoint(null,null,null),m=this.jpoint(null,null,null),g=a;g>0;g--){for(s=0;s<c.length;s++)(l=c[s])===g?m=m.mixedAdd(n.points[s]):l===-g&&(m=m.mixedAdd(n.points[s].neg()));p=p.add(m)}return p.toP()},BaseCurve.prototype._wnafMul=function _wnafMul(t,r){var n=4,i=t._getNAFPoints(n);n=i.wnd;for(var a=i.points,s=o(r,n,this._bitLength),l=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var d=0;c>=0&&0===s[c];c--)d++;if(c>=0&&d++,l=l.dblp(d),c<0)break;var p=s[c];h(0!==p),l="affine"===t.type?p>0?l.mixedAdd(a[p-1>>1]):l.mixedAdd(a[-p-1>>1].neg()):p>0?l.add(a[p-1>>1]):l.add(a[-p-1>>1].neg())}return"affine"===t.type?l.toP():l},BaseCurve.prototype._wnafMulAdd=function _wnafMulAdd(t,r,n,i,a){var h,l,c,d=this._wnafT1,p=this._wnafT2,m=this._wnafT3,g=0;for(h=0;h<i;h++){var y=(c=r[h])._getNAFPoints(t);d[h]=y.wnd,p[h]=y.points}for(h=i-1;h>=1;h-=2){var b=h-1,w=h;if(1===d[b]&&1===d[w]){var M=[r[b],null,null,r[w]];0===r[b].y.cmp(r[w].y)?(M[1]=r[b].add(r[w]),M[2]=r[b].toJ().mixedAdd(r[w].neg())):0===r[b].y.cmp(r[w].y.redNeg())?(M[1]=r[b].toJ().mixedAdd(r[w]),M[2]=r[b].add(r[w].neg())):(M[1]=r[b].toJ().mixedAdd(r[w]),M[2]=r[b].toJ().mixedAdd(r[w].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],x=s(n[b],n[w]);for(g=Math.max(x[0].length,g),m[b]=new Array(g),m[w]=new Array(g),l=0;l<g;l++){var A=0|x[0][l],E=0|x[1][l];m[b][l]=_[3*(A+1)+(E+1)],m[w][l]=0,p[b]=M}}else m[b]=o(n[b],d[b],this._bitLength),m[w]=o(n[w],d[w],this._bitLength),g=Math.max(m[b].length,g),g=Math.max(m[w].length,g)}var B=this.jpoint(null,null,null),C=this._wnafT4;for(h=g;h>=0;h--){for(var T=0;h>=0;){var D=!0;for(l=0;l<i;l++)C[l]=0|m[l][h],0!==C[l]&&(D=!1);if(!D)break;T++,h--}if(h>=0&&T++,B=B.dblp(T),h<0)break;for(l=0;l<i;l++){var P=C[l];0!==P&&(P>0?c=p[l][P-1>>1]:P<0&&(c=p[l][-P-1>>1].neg()),B="affine"===c.type?B.mixedAdd(c):B.add(c))}}for(h=0;h<i;h++)p[h]=null;return a?B:B.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function eq(){throw new Error("Not implemented")},BasePoint.prototype.validate=function validate(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function decodePoint(t,r){t=a.toArray(t,r);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?h(t[t.length-1]%2==0):7===t[0]&&h(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function encodeCompressed(t){return this.encode(t,!0)},BasePoint.prototype._encode=function _encode(t){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))},BasePoint.prototype.encode=function encode(t,r){return a.encode(this._encode(r),t)},BasePoint.prototype.precompute=function precompute(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,t),r.beta=this._getBeta(),this.precomputed=r,this},BasePoint.prototype._hasDoubles=function _hasDoubles(t){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return!!r&&r.points.length>=Math.ceil((t.bitLength()+1)/r.step)},BasePoint.prototype._getDoubles=function _getDoubles(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,a=0;a<r;a+=t){for(var o=0;o<t;o++)i=i.dbl();n.push(i)}return{step:t,points:n}},BasePoint.prototype._getNAFPoints=function _getNAFPoints(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<t)-1,i=1===n?null:this.dbl(),a=1;a<n;a++)r[a]=r[a-1].add(i);return{wnd:t,points:r}},BasePoint.prototype._getBeta=function _getBeta(){return null},BasePoint.prototype.dblp=function dblp(t){for(var r=this,n=0;n<t;n++)r=r.dbl();return r}},function(t,r,n){var i=n(266),a=n(274),o=n(275),s=n(78),h=n(122),l=n(9).Buffer;function parseKeys(t){var r;"object"!=typeof t||l.isBuffer(t)||(r=t.passphrase,t=t.key),"string"==typeof t&&(t=l.from(t));var n,c,d=o(t,r),p=d.tag,m=d.data;switch(p){case"CERTIFICATE":c=i.certificate.decode(m,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=i.PublicKey.decode(m,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=i.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":m=function decrypt(t,r){var n=t.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=a[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,d=t.subjectPrivateKey,p=parseInt(o.split("-")[1],10)/8,m=h.pbkdf2Sync(r,n,i,p,"sha1"),g=s.createDecipheriv(o,m,c),y=[];return y.push(g.update(d)),y.push(g.final()),l.concat(y)}(m=i.EncryptedPrivateKey.decode(m,"der"),r);case"PRIVATE KEY":switch(n=(c=i.PrivateKey.decode(m,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:i.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=i.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return{curve:(m=i.ECPrivateKey.decode(m,"der")).parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+p)}}t.exports=parseKeys,parseKeys.signature=i.signature},function(t,r,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;r.a=n}).call(this,n(14))},function(t,r,n){"use strict";var i=n(49),a=n(15),o=Object(i.a)(a.a,"Map");r.a=o},function(t,r,n){"use strict";var i=n(48),a=n(27),o=Object.prototype.hasOwnProperty;r.a=function assignValue(t,r,n){var s=t[r];o.call(t,r)&&Object(a.a)(s,n)&&(void 0!==n||r in t)||Object(i.a)(t,r,n)}},function(t,r,n){"use strict";(function(t){var i=n(15),a=n(169),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,h=s&&s.exports===o?i.a.Buffer:void 0,l=(h?h.isBuffer:void 0)||a.a;r.a=l}).call(this,n(97)(t))},function(t,r,n){"use strict";var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(7),l=n.n(h),c=n(8),d=n.n(c),p=n(3),m=n.n(p),g=n(45);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=m()(t);if(r){var a=m()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d()(this,n)}}var y=function(t){l()(EventDispatcher,t);var r=_createSuper(EventDispatcher);function EventDispatcher(t){var n;return a()(this,EventDispatcher),(n=r.call(this,t)).sub_id=0,n.subs={id:{},name:{}},n}return s()(EventDispatcher,[{key:"on",value:function on(t,r){var n=this.sub_id;return this.subs.name[t]=this.subs.name[t]||{},this.subs.id[n]=this.subs.name[t][n]={event_name:t,id:n,callback:r},this.sub_id++,n}},{key:"emit",value:function emit(t,r){if(this.subs.name[t])for(var n in this.subs.name[t])this.subs.name[t][n].callback(r)}},{key:"unsub",value:function unsub(t){if(this.subs.id[t]){var r=this.subs.id[t];delete this.subs.id[t],delete this.subs.name[r][t]}}}]),EventDispatcher}(function(){function BasicObject(){a()(this,BasicObject)}return s()(BasicObject,[{key:"log",value:function log(){return BasicObject.log.apply(BasicObject,arguments)}},{key:"round",value:function round(t,r){return t%5==0?Math.floor(t/r)*r:Math.floor(t/r)*r+r}},{key:"wait",value:function wait(t){return new Promise((function(r){setTimeout((function(){r()}),t)}))}},{key:"lerp",value:function lerp(t,r,n){return(1-n)*t+n*r}},{key:"clamp",value:function clamp(t,r,n){return t=Math.max(r,t),t=Math.min(n,t)}}],[{key:"log",value:function log(){g.a.apply(void 0,arguments)}}]),BasicObject}());r.a=y},function(t,r,n){"use strict";var i=n(5),a=n(106),o=n(9).Buffer,s=new Array(16);function MD5(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function rotl(t,r){return t<<r|t>>>32-r}function fnF(t,r,n,i,a,o,s){return rotl(t+(r&n|~r&i)+a+o|0,s)+r|0}function fnG(t,r,n,i,a,o,s){return rotl(t+(r&i|n&~i)+a+o|0,s)+r|0}function fnH(t,r,n,i,a,o,s){return rotl(t+(r^n^i)+a+o|0,s)+r|0}function fnI(t,r,n,i,a,o,s){return rotl(t+(n^(r|~i))+a+o|0,s)+r|0}i(MD5,a),MD5.prototype._update=function(){for(var t=s,r=0;r<16;++r)t[r]=this._block.readInt32LE(4*r);var n=this._a,i=this._b,a=this._c,o=this._d;n=fnF(n,i,a,o,t[0],3614090360,7),o=fnF(o,n,i,a,t[1],3905402710,12),a=fnF(a,o,n,i,t[2],606105819,17),i=fnF(i,a,o,n,t[3],3250441966,22),n=fnF(n,i,a,o,t[4],4118548399,7),o=fnF(o,n,i,a,t[5],1200080426,12),a=fnF(a,o,n,i,t[6],2821735955,17),i=fnF(i,a,o,n,t[7],4249261313,22),n=fnF(n,i,a,o,t[8],1770035416,7),o=fnF(o,n,i,a,t[9],2336552879,12),a=fnF(a,o,n,i,t[10],4294925233,17),i=fnF(i,a,o,n,t[11],2304563134,22),n=fnF(n,i,a,o,t[12],1804603682,7),o=fnF(o,n,i,a,t[13],4254626195,12),a=fnF(a,o,n,i,t[14],2792965006,17),n=fnG(n,i=fnF(i,a,o,n,t[15],1236535329,22),a,o,t[1],4129170786,5),o=fnG(o,n,i,a,t[6],3225465664,9),a=fnG(a,o,n,i,t[11],643717713,14),i=fnG(i,a,o,n,t[0],3921069994,20),n=fnG(n,i,a,o,t[5],3593408605,5),o=fnG(o,n,i,a,t[10],38016083,9),a=fnG(a,o,n,i,t[15],3634488961,14),i=fnG(i,a,o,n,t[4],3889429448,20),n=fnG(n,i,a,o,t[9],568446438,5),o=fnG(o,n,i,a,t[14],3275163606,9),a=fnG(a,o,n,i,t[3],4107603335,14),i=fnG(i,a,o,n,t[8],1163531501,20),n=fnG(n,i,a,o,t[13],2850285829,5),o=fnG(o,n,i,a,t[2],4243563512,9),a=fnG(a,o,n,i,t[7],1735328473,14),n=fnH(n,i=fnG(i,a,o,n,t[12],2368359562,20),a,o,t[5],4294588738,4),o=fnH(o,n,i,a,t[8],2272392833,11),a=fnH(a,o,n,i,t[11],1839030562,16),i=fnH(i,a,o,n,t[14],4259657740,23),n=fnH(n,i,a,o,t[1],2763975236,4),o=fnH(o,n,i,a,t[4],1272893353,11),a=fnH(a,o,n,i,t[7],4139469664,16),i=fnH(i,a,o,n,t[10],3200236656,23),n=fnH(n,i,a,o,t[13],681279174,4),o=fnH(o,n,i,a,t[0],3936430074,11),a=fnH(a,o,n,i,t[3],3572445317,16),i=fnH(i,a,o,n,t[6],76029189,23),n=fnH(n,i,a,o,t[9],3654602809,4),o=fnH(o,n,i,a,t[12],3873151461,11),a=fnH(a,o,n,i,t[15],530742520,16),n=fnI(n,i=fnH(i,a,o,n,t[2],3299628645,23),a,o,t[0],4096336452,6),o=fnI(o,n,i,a,t[7],1126891415,10),a=fnI(a,o,n,i,t[14],2878612391,15),i=fnI(i,a,o,n,t[5],4237533241,21),n=fnI(n,i,a,o,t[12],1700485571,6),o=fnI(o,n,i,a,t[3],2399980690,10),a=fnI(a,o,n,i,t[10],4293915773,15),i=fnI(i,a,o,n,t[1],2240044497,21),n=fnI(n,i,a,o,t[8],1873313359,6),o=fnI(o,n,i,a,t[15],4264355552,10),a=fnI(a,o,n,i,t[6],2734768916,15),i=fnI(i,a,o,n,t[13],1309151649,21),n=fnI(n,i,a,o,t[4],4149444226,6),o=fnI(o,n,i,a,t[11],3174756917,10),a=fnI(a,o,n,i,t[2],718787259,15),i=fnI(i,a,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+a|0,this._d=this._d+o|0},MD5.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=MD5},function(t,r,n){(function(r){function config(t){try{if(!r.localStorage)return!1}catch(t){return!1}var n=r.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function deprecate(t,r){if(config("noDeprecation"))return t;var n=!1;return function deprecated(){if(!n){if(config("throwDeprecation"))throw new Error(r);config("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return t.apply(this,arguments)}}}).call(this,n(14))},function(t,r,n){"use strict";var i=n(39).codes.ERR_STREAM_PREMATURE_CLOSE;function noop(){}t.exports=function eos(t,r,n){if("function"==typeof r)return eos(t,null,r);r||(r={}),n=function once(t){var r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.apply(this,i)}}}(n||noop);var a=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,s=function onlegacyfinish(){t.writable||l()},h=t._writableState&&t._writableState.finished,l=function onfinish(){o=!1,h=!0,a||n.call(t)},c=t._readableState&&t._readableState.endEmitted,d=function onend(){a=!1,c=!0,o||n.call(t)},p=function onerror(r){n.call(t,r)},m=function onclose(){var r;return a&&!c?(t._readableState&&t._readableState.ended||(r=new i),n.call(t,r)):o&&!h?(t._writableState&&t._writableState.ended||(r=new i),n.call(t,r)):void 0},g=function onrequest(){t.req.on("finish",l)};return!function isRequest(t){return t.setHeader&&"function"==typeof t.abort}(t)?o&&!t._writableState&&(t.on("end",s),t.on("close",s)):(t.on("complete",l),t.on("abort",m),t.req?g():t.on("request",g)),t.on("end",d),t.on("finish",l),!1!==r.error&&t.on("error",p),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",m)}}},function(t,r,n){"use strict";var i=n(13).Buffer,a=n(5),o=n(106),s=new Array(16),h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],m=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function rotl(t,r){return t<<r|t>>>32-r}function fn1(t,r,n,i,a,o,s,h){return rotl(t+(r^n^i)+o+s|0,h)+a|0}function fn2(t,r,n,i,a,o,s,h){return rotl(t+(r&n|~r&i)+o+s|0,h)+a|0}function fn3(t,r,n,i,a,o,s,h){return rotl(t+((r|~n)^i)+o+s|0,h)+a|0}function fn4(t,r,n,i,a,o,s,h){return rotl(t+(r&i|n&~i)+o+s|0,h)+a|0}function fn5(t,r,n,i,a,o,s,h){return rotl(t+(r^(n|~i))+o+s|0,h)+a|0}a(RIPEMD160,o),RIPEMD160.prototype._update=function(){for(var t=s,r=0;r<16;++r)t[r]=this._block.readInt32LE(4*r);for(var n=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,g=0|this._e,y=0|this._a,b=0|this._b,w=0|this._c,M=0|this._d,_=0|this._e,x=0;x<80;x+=1){var A,E;x<16?(A=fn1(n,i,a,o,g,t[h[x]],p[0],c[x]),E=fn5(y,b,w,M,_,t[l[x]],m[0],d[x])):x<32?(A=fn2(n,i,a,o,g,t[h[x]],p[1],c[x]),E=fn4(y,b,w,M,_,t[l[x]],m[1],d[x])):x<48?(A=fn3(n,i,a,o,g,t[h[x]],p[2],c[x]),E=fn3(y,b,w,M,_,t[l[x]],m[2],d[x])):x<64?(A=fn4(n,i,a,o,g,t[h[x]],p[3],c[x]),E=fn2(y,b,w,M,_,t[l[x]],m[3],d[x])):(A=fn5(n,i,a,o,g,t[h[x]],p[4],c[x]),E=fn1(y,b,w,M,_,t[l[x]],m[4],d[x])),n=g,g=o,o=rotl(a,10),a=i,i=A,y=_,_=M,M=rotl(w,10),w=b,b=E}var B=this._b+a+M|0;this._b=this._c+o+_|0,this._c=this._d+g+y|0,this._d=this._e+n+b|0,this._e=this._a+i+w|0,this._a=B},RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=i.alloc?i.alloc(20):new i(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=RIPEMD160},function(t,r,n){(r=t.exports=function SHA(t){t=t.toLowerCase();var n=r[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(196),r.sha1=n(197),r.sha224=n(198),r.sha256=n(113),r.sha384=n(199),r.sha512=n(114)},function(t,r,n){(r=t.exports=n(115)).Stream=r,r.Readable=r,r.Writable=n(76),r.Duplex=n(34),r.Transform=n(118),r.PassThrough=n(206)},function(t,r,n){"use strict";(function(r,i,a){var o=n(60);function CorkedRequest(t){var r=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(t,r,n){var i=t.entry;t.entry=null;for(;i;){var a=i.callback;r.pendingcb--,a(n),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=t:r.corkedRequestsFree=t}(r,t)}}t.exports=Writable;var s,h=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?i:o.nextTick;Writable.WritableState=WritableState;var l=Object.create(n(52));l.inherits=n(5);var c={deprecate:n(71)},d=n(116),p=n(9).Buffer,m=a.Uint8Array||function(){};var g,y=n(117);function nop(){}function WritableState(t,r){s=s||n(34),t=t||{};var i=r instanceof s;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var a=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===t.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function onwrite(t,r){var n=t._writableState,i=n.sync,a=n.writecb;if(function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),r)!function onwriteError(t,r,n,i,a){--r.pendingcb,n?(o.nextTick(a,i),o.nextTick(finishMaybe,t,r),t._writableState.errorEmitted=!0,t.emit("error",i)):(a(i),t._writableState.errorEmitted=!0,t.emit("error",i),finishMaybe(t,r))}(t,n,i,r,a);else{var s=needFinish(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||clearBuffer(t,n),i?h(afterWrite,t,n,s,a):afterWrite(t,n,s,a)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(t){if(s=s||n(34),!(g.call(Writable,this)||this instanceof s))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function doWrite(t,r,n,i,a,o,s){r.writelen=i,r.writecb=s,r.writing=!0,r.sync=!0,n?t._writev(a,r.onwrite):t._write(a,o,r.onwrite),r.sync=!1}function afterWrite(t,r,n,i){n||function onwriteDrain(t,r){0===r.length&&r.needDrain&&(r.needDrain=!1,t.emit("drain"))}(t,r),r.pendingcb--,i(),finishMaybe(t,r)}function clearBuffer(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,a=new Array(i),o=r.corkedRequestsFree;o.entry=n;for(var s=0,h=!0;n;)a[s]=n,n.isBuf||(h=!1),n=n.next,s+=1;a.allBuffers=h,doWrite(t,r,!0,r.length,a,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new CorkedRequest(r),r.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(doWrite(t,r,!1,r.objectMode?1:l.length,l,c,d),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function needFinish(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function callFinal(t,r){t._final((function(n){r.pendingcb--,n&&t.emit("error",n),r.prefinished=!0,t.emit("prefinish"),finishMaybe(t,r)}))}function finishMaybe(t,r){var n=needFinish(r);return n&&(!function prefinish(t,r){r.prefinished||r.finalCalled||("function"==typeof t._final?(r.pendingcb++,r.finalCalled=!0,o.nextTick(callFinal,t,r)):(r.prefinished=!0,t.emit("prefinish")))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"))),n}l.inherits(Writable,d),WritableState.prototype.getBuffer=function getBuffer(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(t){return!!g.call(this,t)||this===Writable&&(t&&t._writableState instanceof WritableState)}})):g=function(t){return t instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(t,r,n){var i=this._writableState,a=!1,s=!i.objectMode&&function _isUint8Array(t){return p.isBuffer(t)||t instanceof m}(t);return s&&!p.isBuffer(t)&&(t=function _uint8ArrayToBuffer(t){return p.from(t)}(t)),"function"==typeof r&&(n=r,r=null),s?r="buffer":r||(r=i.defaultEncoding),"function"!=typeof n&&(n=nop),i.ended?function writeAfterEnd(t,r){var n=new Error("write after end");t.emit("error",n),o.nextTick(r,n)}(this,n):(s||function validChunk(t,r,n,i){var a=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||r.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(i,s),a=!1),a}(this,i,t,n))&&(i.pendingcb++,a=function writeOrBuffer(t,r,n,i,a,o){if(!n){var s=function decodeChunk(t,r,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof r||(r=p.from(r,n));return r}(r,i,a);i!==s&&(n=!0,a="buffer",i=s)}var h=r.objectMode?1:i.length;r.length+=h;var l=r.length<r.highWaterMark;l||(r.needDrain=!0);if(r.writing||r.corked){var c=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:o,next:null},c?c.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else doWrite(t,r,!1,h,i,a,o);return l}(this,i,s,t,r,n)),a},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||clearBuffer(this,t))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(t,r,n){n(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(t,r,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t&&this.write(t,r),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function endWritable(t,r,n){r.ending=!0,finishMaybe(t,r),n&&(r.finished?o.nextTick(n):t.once("finish",n));r.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),Writable.prototype.destroy=y.destroy,Writable.prototype._undestroy=y.undestroy,Writable.prototype._destroy=function(t,r){this.end(),r(t)}}).call(this,n(12),n(204).setImmediate,n(14))},function(t,r,n){"use strict";var i=n(18);function Cipher(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=Cipher,Cipher.prototype._init=function _init(){},Cipher.prototype.update=function update(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},Cipher.prototype._buffer=function _buffer(t,r){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-r),i=0;i<n;i++)this.buffer[this.bufferOff+i]=t[r+i];return this.bufferOff+=n,n},Cipher.prototype._flushBuffer=function _flushBuffer(t,r){return this._update(this.buffer,0,t,r),this.bufferOff=0,this.blockSize},Cipher.prototype._updateEncrypt=function _updateEncrypt(t){var r=0,n=0,i=(this.bufferOff+t.length)/this.blockSize|0,a=new Array(i*this.blockSize);0!==this.bufferOff&&(r+=this._buffer(t,r),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(a,n)));for(var o=t.length-(t.length-r)%this.blockSize;r<o;r+=this.blockSize)this._update(t,r,a,n),n+=this.blockSize;for(;r<t.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=t[r];return a},Cipher.prototype._updateDecrypt=function _updateDecrypt(t){for(var r=0,n=0,i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,a=new Array(i*this.blockSize);i>0;i--)r+=this._buffer(t,r),n+=this._flushBuffer(a,n);return r+=this._buffer(t,r),a},Cipher.prototype.final=function final(t){var r,n;return t&&(r=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),r?r.concat(n):n},Cipher.prototype._pad=function _pad(t,r){if(0===r)return!1;for(;r<t.length;)t[r++]=0;return!0},Cipher.prototype._finalEncrypt=function _finalEncrypt(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},Cipher.prototype._unpad=function _unpad(t){return t},Cipher.prototype._finalDecrypt=function _finalDecrypt(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,r,n){var i=n(219),a=n(227),o=n(131);r.createCipher=r.Cipher=i.createCipher,r.createCipheriv=r.Cipheriv=i.createCipheriv,r.createDecipher=r.Decipher=a.createDecipher,r.createDecipheriv=r.Decipheriv=a.createDecipheriv,r.listCiphers=r.getCiphers=function getCiphers(){return Object.keys(o)}},function(t,r,n){var i={ECB:n(220),CBC:n(221),CFB:n(222),CFB8:n(223),CFB1:n(224),OFB:n(225),CTR:n(129),GCM:n(129)},a=n(131);for(var o in a)a[o].module=i[a[o].mode];t.exports=a},function(t,r,n){var i;function Rand(t){this.rand=t}if(t.exports=function rand(t){return i||(i=new Rand(null)),i.generate(t)},t.exports.Rand=Rand,Rand.prototype.generate=function generate(t){return this._rand(t)},Rand.prototype._rand=function _rand(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var r=new Uint8Array(t),n=0;n<r.length;n++)r[n]=this.rand.getByte();return r},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function _rand(t){var r=new Uint8Array(t);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function _rand(t){var r=new Uint8Array(t);return self.msCrypto.getRandomValues(r),r}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(233);if("function"!=typeof a.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function _rand(t){return a.randomBytes(t)}}catch(t){}},function(t,r,n){var i=n(13),a=i.Buffer;function copyProps(t,r){for(var n in t)r[n]=t[n]}function SafeBuffer(t,r,n){return a(t,r,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(copyProps(i,r),r.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(a.prototype),copyProps(a,SafeBuffer),SafeBuffer.from=function(t,r,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,r,n)},SafeBuffer.alloc=function(t,r,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=a(t);return void 0!==r?"string"==typeof n?i.fill(r,n):i.fill(r):i.fill(0),i},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,r,n){"use strict";var i=n(42).codes.ERR_STREAM_PREMATURE_CLOSE;function noop(){}t.exports=function eos(t,r,n){if("function"==typeof r)return eos(t,null,r);r||(r={}),n=function once(t){var r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];t.apply(this,i)}}}(n||noop);var a=r.readable||!1!==r.readable&&t.readable,o=r.writable||!1!==r.writable&&t.writable,s=function onlegacyfinish(){t.writable||l()},h=t._writableState&&t._writableState.finished,l=function onfinish(){o=!1,h=!0,a||n.call(t)},c=t._readableState&&t._readableState.endEmitted,d=function onend(){a=!1,c=!0,o||n.call(t)},p=function onerror(r){n.call(t,r)},m=function onclose(){var r;return a&&!c?(t._readableState&&t._readableState.ended||(r=new i),n.call(t,r)):o&&!h?(t._writableState&&t._writableState.ended||(r=new i),n.call(t,r)):void 0},g=function onrequest(){t.req.on("finish",l)};return!function isRequest(t){return t.setHeader&&"function"==typeof t.abort}(t)?o&&!t._writableState&&(t.on("end",s),t.on("close",s)):(t.on("complete",l),t.on("abort",m),t.req?g():t.on("request",g)),t.on("end",d),t.on("finish",l),!1!==r.error&&t.on("error",p),t.on("close",m),function(){t.removeListener("complete",l),t.removeListener("abort",m),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",m)}}},function(t,r,n){(function(r){var i=n(84),a=n(38);function getr(t){var r,n=t.modulus.byteLength();do{r=new i(a(n))}while(r.cmp(t.modulus)>=0||!r.umod(t.prime1)||!r.umod(t.prime2));return r}function crt(t,n){var a=function blind(t){var r=getr(t);return{blinder:r.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed(),unblinder:r.invm(t.modulus)}}(n),o=n.modulus.byteLength(),s=new i(t).mul(a.blinder).umod(n.modulus),h=s.toRed(i.mont(n.prime1)),l=s.toRed(i.mont(n.prime2)),c=n.coefficient,d=n.prime1,p=n.prime2,m=h.redPow(n.exponent1).fromRed(),g=l.redPow(n.exponent2).fromRed(),y=m.isub(g).imul(c).umod(d).imul(p);return g.iadd(y).imul(a.unblinder).umod(n.modulus).toArrayLike(r,"be",o)}crt.getr=getr,t.exports=crt}).call(this,n(13).Buffer)},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(246).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void assert(!1,"Invalid character in "+t)}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=0,s=Math.min(t.length,n),h=r;h<s;h++){var l=t.charCodeAt(h)-48;a*=i,o=l>=49?l-49+10:l>=17?l-17+10:l,assert(l>=0&&o<i,"Invalid character"),a+=o}return a}function move(t,r){t.words=r.words,t.length=r.length,t.negative=r.negative,t.red=r.red}if(BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this._strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this._strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype._move=function _move(t){move(t,this)},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype._strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(t){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modrn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16,2)},i&&(BN.prototype.toBuffer=function toBuffer(t,r){return this.toArrayLike(i,t,r)}),BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)};function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n._strip()}BN.prototype.toArrayLike=function toArrayLike(t,r,n){this._strip();var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0");var o=function allocate(t,r){return t.allocUnsafe?t.allocUnsafe(r):new t(r)}(t,a);return this["_toArrayLike"+("le"===r?"LE":"BE")](o,i),o},BN.prototype._toArrayLikeLE=function _toArrayLikeLE(t,r){for(var n=0,i=0,a=0,o=0;a<this.length;a++){var s=this.words[a]<<o|i;t[n++]=255&s,n<t.length&&(t[n++]=s>>8&255),n<t.length&&(t[n++]=s>>16&255),6===o?(n<t.length&&(t[n++]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n<t.length)for(t[n++]=i;n<t.length;)t[n++]=0},BN.prototype._toArrayLikeBE=function _toArrayLikeBE(t,r){for(var n=t.length-1,i=0,a=0,o=0;a<this.length;a++){var s=this.words[a]<<o|i;t[n--]=255&s,n>=0&&(t[n--]=s>>8&255),n>=0&&(t[n--]=s>>16&255),6===o?(n>=0&&(t[n--]=s>>24&255),i=0,o=0):(i=s>>>24,o+=2)}if(n>=0)for(t[n--]=i;n>=0;)t[n--]=0},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this._strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this._strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this._strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n._strip()}function jumboMulTo(t,r,n){return bigMulTo(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?bigMulTo(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n._strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){var r=t<0;r&&(t=-t),assert("number"==typeof t),assert(t<67108864);for(var n=0,i=0;i<this.length;i++){var a=(0|this.words[i])*t,o=(67108863&a)+(67108863&n);n>>=26,n+=a/67108864|0,n+=o>>>26,this.words[i]=67108863&o}return 0!==n&&(this.words[i]=n,this.length++),r?this.ineg():this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=t.words[i]>>>a&1}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this._strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this._strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this._strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this._strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this._strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s._strip(),i._strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modrn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modrn=function modrn(t){var r=t<0;r&&(t=-t),assert(t<=67108863);for(var n=(1<<26)%t,i=0,a=this.length-1;a>=0;a--)i=(n*i+(0|this.words[a]))%t;return r?-i:i},BN.prototype.modn=function modn(t){return this.modrn(t)},BN.prototype.idivn=function idivn(t){var r=t<0;r&&(t=-t),assert(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var a=(0|this.words[i])+67108864*n;this.words[i]=a/t|0,n=a%t}return this._strip(),r?this.ineg():this},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(move(t,t.umod(this.m)._forceRed(this)),t)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r,n){"use strict";var i=r;i.version=n(247).version,i.utils=n(19),i.rand=n(80),i.curve=n(144),i.curves=n(86),i.ec=n(259),i.eddsa=n(263)},function(t,r,n){"use strict";var i,a=r,o=n(87),s=n(144),h=n(19).assert;function PresetCurve(t){"short"===t.type?this.curve=new s.short(t):"edwards"===t.type?this.curve=new s.edwards(t):this.curve=new s.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,h(this.g.validate(),"Invalid curve"),h(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(t,r){Object.defineProperty(a,t,{configurable:!0,enumerable:!0,get:function(){var n=new PresetCurve(r);return Object.defineProperty(a,t,{configurable:!0,enumerable:!0,value:n}),n}})}a.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n(258)}catch(t){i=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(t,r,n){var i=r;i.utils=n(21),i.common=n(54),i.sha=n(252),i.ripemd=n(256),i.hmac=n(257),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},function(t,r,n){"use strict";(function(r){var i,a=n(13),o=a.Buffer,s={};for(i in a)a.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(s[i]=a[i]);var h=s.Buffer={};for(i in o)o.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(h[i]=o[i]);if(s.Buffer.prototype=o.prototype,h.from&&h.from!==Uint8Array.from||(h.from=function(t,r,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,r,n)}),h.alloc||(h.alloc=function(t,r,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=o(t);return r&&0!==r.length?"string"==typeof n?i.fill(r,n):i.fill(r):i.fill(0),i}),!s.kStringMaxLength)try{s.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(t){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),t.exports=s}).call(this,n(12))},function(t,r,n){"use strict";const i=n(90).Reporter,a=n(55).EncoderBuffer,o=n(55).DecoderBuffer,s=n(18),h=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(h);function Node(t,r,n){const i={};this._baseState=i,i.name=n,i.enc=t,i.parent=r||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=Node;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node.prototype.clone=function clone(){const t=this._baseState,r={};c.forEach((function(n){r[n]=t[n]}));const n=new this.constructor(r.parent);return n._baseState=r,n},Node.prototype._wrap=function wrap(){const t=this._baseState;l.forEach((function(r){this[r]=function _wrappedMethod(){const n=new this.constructor(this);return t.children.push(n),n[r].apply(n,arguments)}}),this)},Node.prototype._init=function init(t){const r=this._baseState;s(null===r.parent),t.call(this),r.children=r.children.filter((function(t){return t._baseState.parent===this}),this),s.equal(r.children.length,1,"Root node can have only one child")},Node.prototype._useArgs=function useArgs(t){const r=this._baseState,n=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==n.length&&(s(null===r.children),r.children=n,n.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(s(null===r.args),r.args=t,r.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const r={};return Object.keys(t).forEach((function(n){n==(0|n)&&(n|=0);const i=t[n];r[i]=n})),r})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){Node.prototype[t]=function _overrided(){const r=this._baseState;throw new Error(t+" not implemented for encoding: "+r.enc)}})),h.forEach((function(t){Node.prototype[t]=function _tagMethod(){const r=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===r.tag),r.tag=t,this._useArgs(n),this}})),Node.prototype.use=function use(t){s(t);const r=this._baseState;return s(null===r.use),r.use=t,this},Node.prototype.optional=function optional(){return this._baseState.optional=!0,this},Node.prototype.def=function def(t){const r=this._baseState;return s(null===r.default),r.default=t,r.optional=!0,this},Node.prototype.explicit=function explicit(t){const r=this._baseState;return s(null===r.explicit&&null===r.implicit),r.explicit=t,this},Node.prototype.implicit=function implicit(t){const r=this._baseState;return s(null===r.explicit&&null===r.implicit),r.implicit=t,this},Node.prototype.obj=function obj(){const t=this._baseState,r=Array.prototype.slice.call(arguments);return t.obj=!0,0!==r.length&&this._useArgs(r),this},Node.prototype.key=function key(t){const r=this._baseState;return s(null===r.key),r.key=t,this},Node.prototype.any=function any(){return this._baseState.any=!0,this},Node.prototype.choice=function choice(t){const r=this._baseState;return s(null===r.choice),r.choice=t,this._useArgs(Object.keys(t).map((function(r){return t[r]}))),this},Node.prototype.contains=function contains(t){const r=this._baseState;return s(null===r.use),r.contains=t,this},Node.prototype._decode=function decode(t,r){const n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,r));let i,a=n.default,s=!0,h=null;if(null!==n.key&&(h=t.enterKey(n.key)),n.optional){let i=null;if(null!==n.explicit?i=n.explicit:null!==n.implicit?i=n.implicit:null!==n.tag&&(i=n.tag),null!==i||n.any){if(s=this._peekTag(t,i,n.any),t.isError(s))return s}else{const i=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,r):this._decodeChoice(t,r),s=!0}catch(t){s=!1}t.restore(i)}}if(n.obj&&s&&(i=t.enterObject()),s){if(null!==n.explicit){const r=this._decodeTag(t,n.explicit);if(t.isError(r))return r;t=r}const i=t.offset;if(null===n.use&&null===n.choice){let r;n.any&&(r=t.save());const i=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(i))return i;n.any?a=t.raw(r):t=i}if(r&&r.track&&null!==n.tag&&r.track(t.path(),i,t.length,"tagged"),r&&r.track&&null!==n.tag&&r.track(t.path(),t.offset,t.length,"content"),n.any||(a=null===n.choice?this._decodeGeneric(n.tag,t,r):this._decodeChoice(t,r)),t.isError(a))return a;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function decodeChildren(n){n._decode(t,r)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const i=new o(a);a=this._getUse(n.contains,t._reporterState.obj)._decode(i,r)}}return n.obj&&s&&(a=t.leaveObject(i)),null===n.key||null===a&&!0!==s?null!==h&&t.exitKey(h):t.leaveKey(h,n.key,a),a},Node.prototype._decodeGeneric=function decodeGeneric(t,r,n){const i=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(r,t,i.args[0],n):/str$/.test(t)?this._decodeStr(r,t,n):"objid"===t&&i.args?this._decodeObjid(r,i.args[0],i.args[1],n):"objid"===t?this._decodeObjid(r,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(r,t,n):"null_"===t?this._decodeNull(r,n):"bool"===t?this._decodeBool(r,n):"objDesc"===t?this._decodeStr(r,t,n):"int"===t||"enum"===t?this._decodeInt(r,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,r._reporterState.obj)._decode(r,n):r.error("unknown tag: "+t)},Node.prototype._getUse=function _getUse(t,r){const n=this._baseState;return n.useDecoder=this._use(t,r),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},Node.prototype._decodeChoice=function decodeChoice(t,r){const n=this._baseState;let i=null,a=!1;return Object.keys(n.choice).some((function(o){const s=t.save(),h=n.choice[o];try{const n=h._decode(t,r);if(t.isError(n))return!1;i={type:o,value:n},a=!0}catch(r){return t.restore(s),!1}return!0}),this),a?i:t.error("Choice not matched")},Node.prototype._createEncoderBuffer=function createEncoderBuffer(t){return new a(t,this.reporter)},Node.prototype._encode=function encode(t,r,n){const i=this._baseState;if(null!==i.default&&i.default===t)return;const a=this._encodeValue(t,r,n);return void 0===a||this._skipDefault(a,r,n)?void 0:a},Node.prototype._encodeValue=function encode(t,r,n){const a=this._baseState;if(null===a.parent)return a.children[0]._encode(t,r||new i);let o=null;if(this.reporter=r,a.optional&&void 0===t){if(null===a.default)return;t=a.default}let s=null,h=!1;if(a.any)o=this._createEncoderBuffer(t);else if(a.choice)o=this._encodeChoice(t,r);else if(a.contains)s=this._getUse(a.contains,n)._encode(t,r),h=!0;else if(a.children)s=a.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,r,t);if(null===n._baseState.key)return r.error("Child should have a key");const i=r.enterKey(n._baseState.key);if("object"!=typeof t)return r.error("Child expected, but input is not object");const a=n._encode(t[n._baseState.key],r,t);return r.leaveKey(i),a}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===a.tag||"setof"===a.tag){if(!a.args||1!==a.args.length)return r.error("Too many args for : "+a.tag);if(!Array.isArray(t))return r.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(n){const i=this._baseState;return this._getUse(i.args[0],t)._encode(n,r)}),n))}else null!==a.use?o=this._getUse(a.use,n)._encode(t,r):(s=this._encodePrimitive(a.tag,t),h=!0);if(!a.any&&null===a.choice){const t=null!==a.implicit?a.implicit:a.tag,n=null===a.implicit?"universal":"context";null===t?null===a.use&&r.error("Tag could be omitted only for .use()"):null===a.use&&(o=this._encodeComposite(t,h,n,s))}return null!==a.explicit&&(o=this._encodeComposite(a.explicit,!1,"context",o)),o},Node.prototype._encodeChoice=function encodeChoice(t,r){const n=this._baseState,i=n.choice[t.type];return i||s(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(t.value,r)},Node.prototype._encodePrimitive=function encodePrimitive(t,r){const n=this._baseState;if(/str$/.test(t))return this._encodeStr(r,t);if("objid"===t&&n.args)return this._encodeObjid(r,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(r,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(r,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(r,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(r);if("objDesc"===t)return this._encodeStr(r,t);throw new Error("Unsupported tag: "+t)},Node.prototype._isNumstr=function isNumstr(t){return/^[0-9 ]*$/.test(t)},Node.prototype._isPrintstr=function isPrintstr(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},function(t,r,n){"use strict";const i=n(5);function Reporter(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function ReporterError(t,r){this.path=t,this.rethrow(r)}r.Reporter=Reporter,Reporter.prototype.isError=function isError(t){return t instanceof ReporterError},Reporter.prototype.save=function save(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},Reporter.prototype.restore=function restore(t){const r=this._reporterState;r.obj=t.obj,r.path=r.path.slice(0,t.pathLen)},Reporter.prototype.enterKey=function enterKey(t){return this._reporterState.path.push(t)},Reporter.prototype.exitKey=function exitKey(t){const r=this._reporterState;r.path=r.path.slice(0,t-1)},Reporter.prototype.leaveKey=function leaveKey(t,r,n){const i=this._reporterState;this.exitKey(t),null!==i.obj&&(i.obj[r]=n)},Reporter.prototype.path=function path(){return this._reporterState.path.join("/")},Reporter.prototype.enterObject=function enterObject(){const t=this._reporterState,r=t.obj;return t.obj={},r},Reporter.prototype.leaveObject=function leaveObject(t){const r=this._reporterState,n=r.obj;return r.obj=t,n},Reporter.prototype.error=function error(t){let r;const n=this._reporterState,i=t instanceof ReporterError;if(r=i?t:new ReporterError(n.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!n.options.partial)throw r;return i||n.errors.push(r),r},Reporter.prototype.wrapResult=function wrapResult(t){const r=this._reporterState;return r.options.partial?{result:this.isError(t)?null:t,errors:r.errors}:t},i(ReporterError,Error),ReporterError.prototype.rethrow=function rethrow(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},function(t,r,n){"use strict";function reverse(t){const r={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);const i=t[n];r[i]=n})),r}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=reverse(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=reverse(r.tag)},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(282).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r,n){"use strict";var i=n(295),a=n(94),o=n(44),s=n(158),h=n(297);function resolve(t,r,n){var i=this._refs[n];if("string"==typeof i){if(!this._refs[i])return resolve.call(this,t,r,i);i=this._refs[i]}if((i=i||this._schemas[n])instanceof s)return inlineRef(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var a,o,h,l=resolveSchema.call(this,r,n);return l&&(a=l.schema,r=l.root,h=l.baseId),a instanceof s?o=a.validate||t.call(this,a.schema,r,void 0,h):void 0!==a&&(o=inlineRef(a,this._opts.inlineRefs)?a:t.call(this,a,r,void 0,h)),o}function resolveSchema(t,r){var n=i.parse(r),a=_getFullPath(n),o=getFullPath(this._getId(t.schema));if(0===Object.keys(t.schema).length||a!==o){var h=normalizeId(a),l=this._refs[h];if("string"==typeof l)return resolveRecursive.call(this,t,l,n);if(l instanceof s)l.validate||this._compile(l),t=l;else{if(!((l=this._schemas[h])instanceof s))return;if(l.validate||this._compile(l),h==normalizeId(r))return{schema:l,root:t,baseId:o};t=l}if(!t.schema)return;o=getFullPath(this._getId(t.schema))}return getJsonPointer.call(this,n,o,t.schema,t)}function resolveRecursive(t,r,n){var i=resolveSchema.call(this,t,r);if(i){var a=i.schema,o=i.baseId;t=i.root;var s=this._getId(a);return s&&(o=resolveUrl(o,s)),getJsonPointer.call(this,n,o,a,t)}}t.exports=resolve,resolve.normalizeId=normalizeId,resolve.fullPath=getFullPath,resolve.url=resolveUrl,resolve.ids=function resolveIds(t){var r=normalizeId(this._getId(t)),n={"":r},s={"":getFullPath(r,!1)},l={},c=this;return h(t,{allKeys:!0},(function(t,r,h,d,p,m,g){if(""!==r){var y=c._getId(t),b=n[d],w=s[d]+"/"+p;if(void 0!==g&&(w+="/"+("number"==typeof g?g:o.escapeFragment(g))),"string"==typeof y){y=b=normalizeId(b?i.resolve(b,y):y);var M=c._refs[y];if("string"==typeof M&&(M=c._refs[M]),M&&M.schema){if(!a(t,M.schema))throw new Error('id "'+y+'" resolves to more than one schema')}else if(y!=normalizeId(w))if("#"==y[0]){if(l[y]&&!a(t,l[y]))throw new Error('id "'+y+'" resolves to more than one schema');l[y]=t}else c._refs[y]=w}n[r]=b,s[r]=w}})),l},resolve.inlineRef=inlineRef,resolve.schema=resolveSchema;var l=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(t,r,n,i){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var a=t.fragment.split("/"),s=1;s<a.length;s++){var h=a[s];if(h){if(void 0===(n=n[h=o.unescapeFragment(h)]))break;var c;if(!l[h]&&((c=this._getId(n))&&(r=resolveUrl(r,c)),n.$ref)){var d=resolveUrl(r,n.$ref),p=resolveSchema.call(this,i,d);p&&(n=p.schema,i=p.root,r=p.baseId)}}}return void 0!==n&&n!==i.schema?{schema:n,root:i,baseId:r}:void 0}}var c=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function inlineRef(t,r){return!1!==r&&(void 0===r||!0===r?checkNoRef(t):r?countKeys(t)<=r:void 0)}function checkNoRef(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!checkNoRef(r))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(r=t[i])&&!checkNoRef(r))return!1}return!0}function countKeys(t){var r,n=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(r=t[i])&&(n+=countKeys(r)),n==1/0)return 1/0}else for(var a in t){if("$ref"==a)return 1/0;if(c[a])n++;else if("object"==typeof(r=t[a])&&(n+=countKeys(r)+1),n==1/0)return 1/0}return n}function getFullPath(t,r){return!1!==r&&(t=normalizeId(t)),_getFullPath(i.parse(t))}function _getFullPath(t){return i.serialize(t).split("#")[0]+"#"}var d=/#\/?$/;function normalizeId(t){return t?t.replace(d,""):""}function resolveUrl(t,r){return r=normalizeId(r),i.resolve(t,r)}},function(t,r,n){"use strict";t.exports=function equal(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,a;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!equal(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(a=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=n;0!=i--;){var o=a[i];if(!equal(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},function(t,r,n){"use strict";var i=n(93);function MissingRefError(t,r,n){this.message=n||MissingRefError.message(t,r),this.missingRef=i.url(t,r),this.missingSchema=i.normalizeId(i.fullPath(this.missingRef))}function errorSubclass(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}t.exports={Validation:errorSubclass((function ValidationError(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0})),MissingRef:errorSubclass(MissingRefError)},MissingRefError.message=function(t,r){return"can't resolve reference "+r+" from id "+t}},function(t,r,n){"use strict";t.exports={metaSchemaRef:function metaSchemaRef(t){var r=t._opts.defaultMeta;return"string"==typeof r?{$ref:r}:t.getSchema(i)?{$ref:i}:(console.warn("meta schema not defined"),{})}};var i="http://json-schema.org/draft-07/schema"},function(t,r){t.exports=function(t){if(!t.webpackPolyfill){var r=Object.create(t);r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),Object.defineProperty(r,"exports",{enumerable:!0}),r.webpackPolyfill=1}return r}},function(t,r,n){"use strict";var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(7),l=n.n(h),c=n(8),d=n.n(c),p=n(3),m=n.n(p),g=n(1);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=m()(t);if(r){var a=m()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d()(this,n)}}var y=function(t){l()(HMPCamera,t);var r=_createSuper(HMPCamera);function HMPCamera(t){return a()(this,HMPCamera),r.call(this,t)}return s()(HMPCamera,[{key:"on_tick",value:function on_tick(t){}},{key:"get_viewport_size",value:function get_viewport_size(){var t=g.MathUtils.degToRad(this.fov/2),r=2*Math.tan(t)*this.position.z;return[r*this.aspect,r]}},{key:"screen_to_world",value:function screen_to_world(t){var r=new g.Vector3(t[0],t[1],0).unproject(this);return[r.x,r.y,0]}},{key:"update_camera",value:function update_camera(){}}]),HMPCamera}(g.PerspectiveCamera);r.a=y},function(t,r,n){"use strict";var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b),M=n(1);function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var _=function(t){d()(HMOCamera,t);var r=_createSuper(HMOCamera);function HMOCamera(t){var n,i;return a()(this,HMOCamera),t=function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){w()(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({},t),i=r.call(this,t),w()(l()(i),"width_ortho",1),w()(l()(i),"height_ortho",1),w()(l()(i),"prev_width",-1),w()(l()(i),"prev_height",-1),w()(l()(i),"prev_position_z",-99999999999),i.fov=null!==(n=t.fov)&&void 0!==n?n:90,i.update_camera(),i}return s()(HMOCamera,[{key:"on_tick",value:function on_tick(t){var r=this.globals.uniforms.resolution.value.x,n=this.globals.uniforms.resolution.value.y,i=this.position.z;r==this.prev_width&&n===this.prev_height&&i===this.prev_position_z||(this.prev_width=r,this.prev_height=n,this.prev_position_z=i,this.update_camera(),this.globals.need_render=!0)}},{key:"get_viewport_size",value:function get_viewport_size(){return[this.width_ortho,this.height_ortho]}},{key:"update_camera",value:function update_camera(){var t=this.globals.uniforms.resolution.value.x/this.globals.uniforms.resolution.value.y,r=2*this.position.z*Math.atan(2*this.fov*(Math.PI/180)/2),n=r*t;this.left=-n/2,this.right=n/2,this.top=r/2,this.bottom=-r/2,this.width_ortho=n,this.height_ortho=r,this.updateProjectionMatrix()}},{key:"screen_to_world",value:function screen_to_world(t){var r=new M.Vector3(t[0],t[1],0).unproject(this);return[r.x,r.y,0]}}]),HMOCamera}(M.OrthographicCamera);r.a=_},function(t,r,n){"use strict";(function(t){var i=n(65),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a&&i.a.process,h=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();r.a=h}).call(this,n(97)(t))},function(t,r){function _setPrototypeOf(r,n){return t.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},t.exports.default=t.exports,t.exports.__esModule=!0,_setPrototypeOf(r,n)}t.exports=_setPrototypeOf,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){"use strict";const i=n(173);t.exports=i.default,t.exports.raw=i.raw},function(t,r,n){"use strict";const i=n(176),a={null:null,true:!0,false:!1};t.exports=function parseQuery(t){if("?"!==t.substr(0,1))throw new Error("A valid query string passed to parseQuery should begin with '?'");if(!(t=t.substr(1)))return{};if("{"===t.substr(0,1)&&"}"===t.substr(-1))return i.parse(t);const r=t.split(/[,&]/g),n={};return r.forEach((t=>{const r=t.indexOf("=");if(r>=0){let i=t.substr(0,r),o=decodeURIComponent(t.substr(r+1));a.hasOwnProperty(o)&&(o=a[o]),"[]"===i.substr(-2)?(i=decodeURIComponent(i.substr(0,i.length-2)),Array.isArray(n[i])||(n[i]=[]),n[i].push(o)):(i=decodeURIComponent(i),n[i]=o)}else"-"===t.substr(0,1)?n[decodeURIComponent(t.substr(1))]=!1:"+"===t.substr(0,1)?n[decodeURIComponent(t.substr(1))]=!0:n[decodeURIComponent(t)]=!0})),n}},function(t,r,n){"use strict";const i={26:"abcdefghijklmnopqrstuvwxyz",32:"123456789abcdefghjkmnpqrstuvwxyz",36:"0123456789abcdefghijklmnopqrstuvwxyz",49:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",64:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"};t.exports=function getHashDigest(t,r,a,o){r=r||"md4",o=o||9999;const s=n(184).createHash(r);return s.update(t),"base26"===a||"base32"===a||"base36"===a||"base49"===a||"base52"===a||"base58"===a||"base62"===a||"base64"===a?function encodeBufferToBase(t,r){const a=i[r];if(!a)throw new Error("Unknown encoding base"+r);const o=t.length,s=n(183);s.RM=s.DP=0;let h=new s(0);for(let r=o-1;r>=0;r--)h=h.times(256).plus(t[r]);let l="";for(;h.gt(0);)l=a[h.mod(r)]+l,h=h.div(r);return s.DP=20,s.RM=1,l}(s.digest(),a.substr(4)).substr(0,o):s.digest(a||"hex").substr(0,o)}},function(t,r){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,r,n){"use strict";var i=n(187).Buffer,a=n(188).Transform;function HashBase(t){a.call(this),this._block=i.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(5)(HashBase,a),HashBase.prototype._transform=function(t,r,n){var i=null;try{this.update(t,r)}catch(t){i=t}n(i)},HashBase.prototype._flush=function(t){var r=null;try{this.push(this.digest())}catch(t){r=t}t(r)},HashBase.prototype.update=function(t,r){if(function throwIfNotStringOrBuffer(t,r){if(!i.isBuffer(t)&&"string"!=typeof t)throw new TypeError(r+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");i.isBuffer(t)||(t=i.from(t,r));for(var n=this._block,a=0;this._blockOffset+t.length-a>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[a++];this._update(),this._blockOffset=0}for(;a<t.length;)n[this._blockOffset++]=t[a++];for(var s=0,h=8*t.length;h>0;++s)this._length[s]+=h,(h=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*h);return this},HashBase.prototype._update=function(){throw new Error("_update is not implemented")},HashBase.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var r=this._digest();void 0!==t&&(r=r.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return r},HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=HashBase},function(t,r,n){"use strict";(function(r,i){var a;t.exports=Readable,Readable.ReadableState=ReadableState;n(32).EventEmitter;var o=function EElistenerCount(t,r){return t.listeners(r).length},s=n(108),h=n(13).Buffer,l=r.Uint8Array||function(){};var c,d=n(189);c=d&&d.debuglog?d.debuglog("stream"):function debug(){};var p,m,g,y=n(190),b=n(109),w=n(110).getHighWaterMark,M=n(39).codes,_=M.ERR_INVALID_ARG_TYPE,x=M.ERR_STREAM_PUSH_AFTER_EOF,A=M.ERR_METHOD_NOT_IMPLEMENTED,E=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5)(Readable,s);var B=b.errorOrDestroy,C=["error","close","destroy","pause","resume"];function ReadableState(t,r,i){a=a||n(40),t=t||{},"boolean"!=typeof i&&(i=r instanceof a),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",i),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(33).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function Readable(t){if(a=a||n(40),!(this instanceof Readable))return new Readable(t);var r=this instanceof a;this._readableState=new ReadableState(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function readableAddChunk(t,r,n,i,a){c("readableAddChunk",r);var o,s=t._readableState;if(null===r)s.reading=!1,function onEofChunk(t,r){if(c("onEofChunk"),r.ended)return;if(r.decoder){var n=r.decoder.end();n&&n.length&&(r.buffer.push(n),r.length+=r.objectMode?1:n.length)}r.ended=!0,r.sync?emitReadable(t):(r.needReadable=!1,r.emittedReadable||(r.emittedReadable=!0,emitReadable_(t)))}(t,s);else if(a||(o=function chunkInvalid(t,r){var n;(function _isUint8Array(t){return h.isBuffer(t)||t instanceof l})(r)||"string"==typeof r||void 0===r||t.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],r));return n}(s,r)),o)B(t,o);else if(s.objectMode||r&&r.length>0)if("string"==typeof r||s.objectMode||Object.getPrototypeOf(r)===h.prototype||(r=function _uint8ArrayToBuffer(t){return h.from(t)}(r)),i)s.endEmitted?B(t,new E):addChunk(t,s,r,!0);else if(s.ended)B(t,new x);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(r=s.decoder.write(r),s.objectMode||0!==r.length?addChunk(t,s,r,!1):maybeReadMore(t,s)):addChunk(t,s,r,!1)}else i||(s.reading=!1,maybeReadMore(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk(t,r,n,i){r.flowing&&0===r.length&&!r.sync?(r.awaitDrain=0,t.emit("data",n)):(r.length+=r.objectMode?1:n.length,i?r.buffer.unshift(n):r.buffer.push(n),r.needReadable&&emitReadable(t)),maybeReadMore(t,r)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(t){this._readableState&&(this._readableState.destroyed=t)}}),Readable.prototype.destroy=b.destroy,Readable.prototype._undestroy=b.undestroy,Readable.prototype._destroy=function(t,r){r(t)},Readable.prototype.push=function(t,r){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((r=r||i.defaultEncoding)!==i.encoding&&(t=h.from(t,r),r=""),n=!0),readableAddChunk(this,t,r,!1,n)},Readable.prototype.unshift=function(t){return readableAddChunk(this,t,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(t){p||(p=n(33).StringDecoder);var r=new p(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,a="";null!==i;)a+=r.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var T=1073741824;function howMuchToRead(t,r){return t<=0||0===r.length&&r.ended?0:r.objectMode?1:t!=t?r.flowing&&r.length?r.buffer.head.data.length:r.length:(t>r.highWaterMark&&(r.highWaterMark=function computeNewHighWaterMark(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=r.length?t:r.ended?r.length:(r.needReadable=!0,0))}function emitReadable(t){var r=t._readableState;c("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(c("emitReadable",r.flowing),r.emittedReadable=!0,i.nextTick(emitReadable_,t))}function emitReadable_(t){var r=t._readableState;c("emitReadable_",r.destroyed,r.length,r.ended),r.destroyed||!r.length&&!r.ended||(t.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,flow(t)}function maybeReadMore(t,r){r.readingMore||(r.readingMore=!0,i.nextTick(maybeReadMore_,t,r))}function maybeReadMore_(t,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&0===r.length);){var n=r.length;if(c("maybeReadMore read 0"),t.read(0),n===r.length)break}r.readingMore=!1}function updateReadableListening(t){var r=t._readableState;r.readableListening=t.listenerCount("readable")>0,r.resumeScheduled&&!r.paused?r.flowing=!0:t.listenerCount("data")>0&&t.resume()}function nReadingNextTick(t){c("readable nexttick read 0"),t.read(0)}function resume_(t,r){c("resume",r.reading),r.reading||t.read(0),r.resumeScheduled=!1,t.emit("resume"),flow(t),r.flowing&&!r.reading&&t.read(0)}function flow(t){var r=t._readableState;for(c("flow",r.flowing);r.flowing&&null!==t.read(););}function fromList(t,r){return 0===r.length?null:(r.objectMode?n=r.buffer.shift():!t||t>=r.length?(n=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.first():r.buffer.concat(r.length),r.buffer.clear()):n=r.buffer.consume(t,r.decoder),n);var n}function endReadable(t){var r=t._readableState;c("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,i.nextTick(endReadableNT,r,t))}function endReadableNT(t,r){if(c("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,r.readable=!1,r.emit("end"),t.autoDestroy)){var n=r._writableState;(!n||n.autoDestroy&&n.finished)&&r.destroy()}}function indexOf(t,r){for(var n=0,i=t.length;n<i;n++)if(t[n]===r)return n;return-1}Readable.prototype.read=function(t){c("read",t),t=parseInt(t,10);var r=this._readableState,n=t;if(0!==t&&(r.emittedReadable=!1),0===t&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return c("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(t=howMuchToRead(t,r))&&r.ended)return 0===r.length&&endReadable(this),null;var i,a=r.needReadable;return c("need readable",a),(0===r.length||r.length-t<r.highWaterMark)&&c("length less than watermark",a=!0),r.ended||r.reading?c("reading or ended",a=!1):a&&(c("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(t=howMuchToRead(n,r))),null===(i=t>0?fromList(t,r):null)?(r.needReadable=r.length<=r.highWaterMark,t=0):(r.length-=t,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==t&&r.ended&&endReadable(this)),null!==i&&this.emit("data",i),i},Readable.prototype._read=function(t){B(this,new A("_read()"))},Readable.prototype.pipe=function(t,r){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var s=(!r||!1!==r.end)&&t!==i.stdout&&t!==i.stderr?onend:unpipe;function onunpipe(r,i){c("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,function cleanup(){c("cleanup"),t.removeListener("close",onclose),t.removeListener("finish",onfinish),t.removeListener("drain",h),t.removeListener("error",onerror),t.removeListener("unpipe",onunpipe),n.removeListener("end",onend),n.removeListener("end",unpipe),n.removeListener("data",ondata),l=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}())}function onend(){c("onend"),t.end()}a.endEmitted?i.nextTick(s):n.once("end",s),t.on("unpipe",onunpipe);var h=function pipeOnDrain(t){return function pipeOnDrainFunctionResult(){var r=t._readableState;c("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&o(t,"data")&&(r.flowing=!0,flow(t))}}(n);t.on("drain",h);var l=!1;function ondata(r){c("ondata");var i=t.write(r);c("dest.write",i),!1===i&&((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==indexOf(a.pipes,t))&&!l&&(c("false write response, pause",a.awaitDrain),a.awaitDrain++),n.pause())}function onerror(r){c("onerror",r),unpipe(),t.removeListener("error",onerror),0===o(t,"error")&&B(t,r)}function onclose(){t.removeListener("finish",onfinish),unpipe()}function onfinish(){c("onfinish"),t.removeListener("close",onclose),unpipe()}function unpipe(){c("unpipe"),n.unpipe(t)}return n.on("data",ondata),function prependListener(t,r,n){if("function"==typeof t.prependListener)return t.prependListener(r,n);t._events&&t._events[r]?Array.isArray(t._events[r])?t._events[r].unshift(n):t._events[r]=[n,t._events[r]]:t.on(r,n)}(t,"error",onerror),t.once("close",onclose),t.once("finish",onfinish),t.emit("pipe",n),a.flowing||(c("pipe resume"),n.resume()),t},Readable.prototype.unpipe=function(t){var r=this._readableState,n={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return t&&t!==r.pipes||(t||(t=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=r.pipes,a=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var o=0;o<a;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf(r.pipes,t);return-1===s||(r.pipes.splice(s,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),t.emit("unpipe",this,n)),this},Readable.prototype.on=function(t,r){var n=s.prototype.on.call(this,t,r),a=this._readableState;return"data"===t?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===t&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,c("on readable",a.length,a.reading),a.length?emitReadable(this):a.reading||i.nextTick(nReadingNextTick,this))),n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(t,r){var n=s.prototype.removeListener.call(this,t,r);return"readable"===t&&i.nextTick(updateReadableListening,this),n},Readable.prototype.removeAllListeners=function(t){var r=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(updateReadableListening,this),r},Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(c("resume"),t.flowing=!t.readableListening,function resume(t,r){r.resumeScheduled||(r.resumeScheduled=!0,i.nextTick(resume_,t,r))}(this,t)),t.paused=!1,this},Readable.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(t){var r=this,n=this._readableState,i=!1;for(var a in t.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(a){(c("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a)||(n.objectMode||a&&a.length)&&(r.push(a)||(i=!0,t.pause()))})),t)void 0===this[a]&&"function"==typeof t[a]&&(this[a]=function methodWrap(r){return function methodWrapReturnFunction(){return t[r].apply(t,arguments)}}(a));for(var o=0;o<C.length;o++)t.on(C[o],this.emit.bind(this,C[o]));return this._read=function(r){c("wrapped _read",r),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===m&&(m=n(192)),m(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(t){this._readableState&&(this._readableState.flowing=t)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(t,r){return void 0===g&&(g=n(193)),g(Readable,t,r)})}).call(this,n(14),n(12))},function(t,r,n){t.exports=n(32).EventEmitter},function(t,r,n){"use strict";(function(r){function emitErrorAndCloseNT(t,r){emitErrorNT(t,r),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function emitErrorNT(t,r){t.emit("error",r)}t.exports={destroy:function destroy(t,n){var i=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(emitErrorNT,this,t)):r.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?i._writableState?i._writableState.errorEmitted?r.nextTick(emitCloseNT,i):(i._writableState.errorEmitted=!0,r.nextTick(emitErrorAndCloseNT,i,t)):r.nextTick(emitErrorAndCloseNT,i,t):n?(r.nextTick(emitCloseNT,i),n(t)):r.nextTick(emitCloseNT,i)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(t,r){var n=t._readableState,i=t._writableState;n&&n.autoDestroy||i&&i.autoDestroy?t.destroy(r):t.emit("error",r)}}}).call(this,n(12))},function(t,r,n){"use strict";var i=n(39).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function getHighWaterMark(t,r,n,a){var o=function highWaterMarkFrom(t,r,n){return null!=t.highWaterMark?t.highWaterMark:r?t[n]:null}(r,a,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(a?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,r,n){"use strict";(function(r,i){function CorkedRequest(t){var r=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(t,r,n){var i=t.entry;t.entry=null;for(;i;){var a=i.callback;r.pendingcb--,a(n),i=i.next}r.corkedRequestsFree.next=t}(r,t)}}var a;t.exports=Writable,Writable.WritableState=WritableState;var o={deprecate:n(71)},s=n(108),h=n(13).Buffer,l=r.Uint8Array||function(){};var c,d=n(109),p=n(110).getHighWaterMark,m=n(39).codes,g=m.ERR_INVALID_ARG_TYPE,y=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_MULTIPLE_CALLBACK,w=m.ERR_STREAM_CANNOT_PIPE,M=m.ERR_STREAM_DESTROYED,_=m.ERR_STREAM_NULL_VALUES,x=m.ERR_STREAM_WRITE_AFTER_END,A=m.ERR_UNKNOWN_ENCODING,E=d.errorOrDestroy;function nop(){}function WritableState(t,r,o){a=a||n(40),t=t||{},"boolean"!=typeof o&&(o=r instanceof a),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function onwrite(t,r){var n=t._writableState,a=n.sync,o=n.writecb;if("function"!=typeof o)throw new b;if(function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),r)!function onwriteError(t,r,n,a,o){--r.pendingcb,n?(i.nextTick(o,a),i.nextTick(finishMaybe,t,r),t._writableState.errorEmitted=!0,E(t,a)):(o(a),t._writableState.errorEmitted=!0,E(t,a),finishMaybe(t,r))}(t,n,a,r,o);else{var s=needFinish(n)||t.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||clearBuffer(t,n),a?i.nextTick(afterWrite,t,n,s,o):afterWrite(t,n,s,o)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(t){var r=this instanceof(a=a||n(40));if(!r&&!c.call(Writable,this))return new Writable(t);this._writableState=new WritableState(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function doWrite(t,r,n,i,a,o,s){r.writelen=i,r.writecb=s,r.writing=!0,r.sync=!0,r.destroyed?r.onwrite(new M("write")):n?t._writev(a,r.onwrite):t._write(a,o,r.onwrite),r.sync=!1}function afterWrite(t,r,n,i){n||function onwriteDrain(t,r){0===r.length&&r.needDrain&&(r.needDrain=!1,t.emit("drain"))}(t,r),r.pendingcb--,i(),finishMaybe(t,r)}function clearBuffer(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,a=new Array(i),o=r.corkedRequestsFree;o.entry=n;for(var s=0,h=!0;n;)a[s]=n,n.isBuf||(h=!1),n=n.next,s+=1;a.allBuffers=h,doWrite(t,r,!0,r.length,a,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new CorkedRequest(r),r.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(doWrite(t,r,!1,r.objectMode?1:l.length,l,c,d),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function needFinish(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function callFinal(t,r){t._final((function(n){r.pendingcb--,n&&E(t,n),r.prefinished=!0,t.emit("prefinish"),finishMaybe(t,r)}))}function finishMaybe(t,r){var n=needFinish(r);if(n&&(function prefinish(t,r){r.prefinished||r.finalCalled||("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,i.nextTick(callFinal,t,r)))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"),r.autoDestroy))){var a=t._readableState;(!a||a.autoDestroy&&a.endEmitted)&&t.destroy()}return n}n(5)(Writable,s),WritableState.prototype.getBuffer=function getBuffer(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:o.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(t){return!!c.call(this,t)||this===Writable&&(t&&t._writableState instanceof WritableState)}})):c=function realHasInstance(t){return t instanceof this},Writable.prototype.pipe=function(){E(this,new w)},Writable.prototype.write=function(t,r,n){var a=this._writableState,o=!1,s=!a.objectMode&&function _isUint8Array(t){return h.isBuffer(t)||t instanceof l}(t);return s&&!h.isBuffer(t)&&(t=function _uint8ArrayToBuffer(t){return h.from(t)}(t)),"function"==typeof r&&(n=r,r=null),s?r="buffer":r||(r=a.defaultEncoding),"function"!=typeof n&&(n=nop),a.ending?function writeAfterEnd(t,r){var n=new x;E(t,n),i.nextTick(r,n)}(this,n):(s||function validChunk(t,r,n,a){var o;return null===n?o=new _:"string"==typeof n||r.objectMode||(o=new g("chunk",["string","Buffer"],n)),!o||(E(t,o),i.nextTick(a,o),!1)}(this,a,t,n))&&(a.pendingcb++,o=function writeOrBuffer(t,r,n,i,a,o){if(!n){var s=function decodeChunk(t,r,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof r||(r=h.from(r,n));return r}(r,i,a);i!==s&&(n=!0,a="buffer",i=s)}var l=r.objectMode?1:i.length;r.length+=l;var c=r.length<r.highWaterMark;c||(r.needDrain=!0);if(r.writing||r.corked){var d=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:o,next:null},d?d.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else doWrite(t,r,!1,l,i,a,o);return c}(this,a,s,t,r,n)),o},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||clearBuffer(this,t))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new A(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(t,r,n){n(new y("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(t,r,n){var a=this._writableState;return"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t&&this.write(t,r),a.corked&&(a.corked=1,this.uncork()),a.ending||function endWritable(t,r,n){r.ending=!0,finishMaybe(t,r),n&&(r.finished?i.nextTick(n):t.once("finish",n));r.ended=!0,t.writable=!1}(this,a,n),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(t){this._writableState&&(this._writableState.destroyed=t)}}),Writable.prototype.destroy=d.destroy,Writable.prototype._undestroy=d.undestroy,Writable.prototype._destroy=function(t,r){r(t)}}).call(this,n(14),n(12))},function(t,r,n){"use strict";t.exports=Transform;var i=n(39).codes,a=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(40);function afterTransform(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);l.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(r,n){done(t,r,n)}))}function done(t,r,n){if(r)return t.emit("error",r);if(null!=n&&t.push(n),t._writableState.length)throw new h;if(t._transformState.transforming)throw new s;return t.push(null)}n(5)(Transform,l),Transform.prototype.push=function(t,r){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,r)},Transform.prototype._transform=function(t,r,n){n(new a("_transform()"))},Transform.prototype._write=function(t,r,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=r,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},Transform.prototype._destroy=function(t,r){l.prototype._destroy.call(this,t,(function(t){r(t)}))}},function(t,r,n){var i=n(5),a=n(41),o=n(9).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=new Array(64);function Sha256(){this.init(),this._w=h,a.call(this,64,56)}function ch(t,r,n){return n^t&(r^n)}function maj(t,r,n){return t&r|n&(t|r)}function sigma0(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}i(Sha256,a),Sha256.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Sha256.prototype._update=function(t){for(var r,n=this._w,i=0|this._a,a=0|this._b,o=0|this._c,h=0|this._d,l=0|this._e,c=0|this._f,d=0|this._g,p=0|this._h,m=0;m<16;++m)n[m]=t.readInt32BE(4*m);for(;m<64;++m)n[m]=0|(((r=n[m-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)+n[m-7]+gamma0(n[m-15])+n[m-16];for(var g=0;g<64;++g){var y=p+sigma1(l)+ch(l,c,d)+s[g]+n[g]|0,b=sigma0(i)+maj(i,a,o)|0;p=d,d=c,c=l,l=h+y|0,h=o,o=a,a=i,i=y+b|0}this._a=i+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=h+this._d|0,this._e=l+this._e|0,this._f=c+this._f|0,this._g=d+this._g|0,this._h=p+this._h|0},Sha256.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=Sha256},function(t,r,n){var i=n(5),a=n(41),o=n(9).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],h=new Array(160);function Sha512(){this.init(),this._w=h,a.call(this,128,112)}function Ch(t,r,n){return n^t&(r^n)}function maj(t,r,n){return t&r|n&(t|r)}function sigma0(t,r){return(t>>>28|r<<4)^(r>>>2|t<<30)^(r>>>7|t<<25)}function sigma1(t,r){return(t>>>14|r<<18)^(t>>>18|r<<14)^(r>>>9|t<<23)}function Gamma0(t,r){return(t>>>1|r<<31)^(t>>>8|r<<24)^t>>>7}function Gamma0l(t,r){return(t>>>1|r<<31)^(t>>>8|r<<24)^(t>>>7|r<<25)}function Gamma1(t,r){return(t>>>19|r<<13)^(r>>>29|t<<3)^t>>>6}function Gamma1l(t,r){return(t>>>19|r<<13)^(r>>>29|t<<3)^(t>>>6|r<<26)}function getCarry(t,r){return t>>>0<r>>>0?1:0}i(Sha512,a),Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},Sha512.prototype._update=function(t){for(var r=this._w,n=0|this._ah,i=0|this._bh,a=0|this._ch,o=0|this._dh,h=0|this._eh,l=0|this._fh,c=0|this._gh,d=0|this._hh,p=0|this._al,m=0|this._bl,g=0|this._cl,y=0|this._dl,b=0|this._el,w=0|this._fl,M=0|this._gl,_=0|this._hl,x=0;x<32;x+=2)r[x]=t.readInt32BE(4*x),r[x+1]=t.readInt32BE(4*x+4);for(;x<160;x+=2){var A=r[x-30],E=r[x-30+1],B=Gamma0(A,E),C=Gamma0l(E,A),T=Gamma1(A=r[x-4],E=r[x-4+1]),D=Gamma1l(E,A),P=r[x-14],L=r[x-14+1],N=r[x-32],F=r[x-32+1],I=C+L|0,k=B+P+getCarry(I,C)|0;k=(k=k+T+getCarry(I=I+D|0,D)|0)+N+getCarry(I=I+F|0,F)|0,r[x]=k,r[x+1]=I}for(var O=0;O<160;O+=2){k=r[O],I=r[O+1];var U=maj(n,i,a),z=maj(p,m,g),V=sigma0(n,p),j=sigma0(p,n),H=sigma1(h,b),G=sigma1(b,h),W=s[O],q=s[O+1],Q=Ch(h,l,c),X=Ch(b,w,M),Y=_+G|0,J=d+H+getCarry(Y,_)|0;J=(J=(J=J+Q+getCarry(Y=Y+X|0,X)|0)+W+getCarry(Y=Y+q|0,q)|0)+k+getCarry(Y=Y+I|0,I)|0;var Z=j+z|0,$=V+U+getCarry(Z,j)|0;d=c,_=M,c=l,M=w,l=h,w=b,h=o+J+getCarry(b=y+Y|0,y)|0,o=a,y=g,a=i,g=m,i=n,m=p,n=J+$+getCarry(p=Y+Z|0,Y)|0}this._al=this._al+p|0,this._bl=this._bl+m|0,this._cl=this._cl+g|0,this._dl=this._dl+y|0,this._el=this._el+b|0,this._fl=this._fl+w|0,this._gl=this._gl+M|0,this._hl=this._hl+_|0,this._ah=this._ah+n+getCarry(this._al,p)|0,this._bh=this._bh+i+getCarry(this._bl,m)|0,this._ch=this._ch+a+getCarry(this._cl,g)|0,this._dh=this._dh+o+getCarry(this._dl,y)|0,this._eh=this._eh+h+getCarry(this._el,b)|0,this._fh=this._fh+l+getCarry(this._fl,w)|0,this._gh=this._gh+c+getCarry(this._gl,M)|0,this._hh=this._hh+d+getCarry(this._hl,_)|0},Sha512.prototype._hash=function(){var t=o.allocUnsafe(64);function writeInt64BE(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),writeInt64BE(this._gh,this._gl,48),writeInt64BE(this._hh,this._hl,56),t},t.exports=Sha512},function(t,r,n){"use strict";(function(r,i){var a=n(60);t.exports=Readable;var o,s=n(105);Readable.ReadableState=ReadableState;n(32).EventEmitter;var EElistenerCount=function(t,r){return t.listeners(r).length},h=n(116),l=n(9).Buffer,c=r.Uint8Array||function(){};var d=Object.create(n(52));d.inherits=n(5);var p=n(201),m=void 0;m=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y=n(202),b=n(117);d.inherits(Readable,h);var w=["error","close","destroy","pause","resume"];function ReadableState(t,r){t=t||{};var i=r instanceof(o=o||n(34));this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var a=t.highWaterMark,s=t.readableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i&&(s||0===s)?s:h,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=n(33).StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function Readable(t){if(o=o||n(34),!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function readableAddChunk(t,r,n,i,a){var o,s=t._readableState;null===r?(s.reading=!1,function onEofChunk(t,r){if(r.ended)return;if(r.decoder){var n=r.decoder.end();n&&n.length&&(r.buffer.push(n),r.length+=r.objectMode?1:n.length)}r.ended=!0,emitReadable(t)}(t,s)):(a||(o=function chunkInvalid(t,r){var n;(function _isUint8Array(t){return l.isBuffer(t)||t instanceof c})(r)||"string"==typeof r||void 0===r||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(s,r)),o?t.emit("error",o):s.objectMode||r&&r.length>0?("string"==typeof r||s.objectMode||Object.getPrototypeOf(r)===l.prototype||(r=function _uint8ArrayToBuffer(t){return l.from(t)}(r)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):addChunk(t,s,r,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(r=s.decoder.write(r),s.objectMode||0!==r.length?addChunk(t,s,r,!1):maybeReadMore(t,s)):addChunk(t,s,r,!1))):i||(s.reading=!1));return function needMoreData(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function addChunk(t,r,n,i){r.flowing&&0===r.length&&!r.sync?(t.emit("data",n),t.read(0)):(r.length+=r.objectMode?1:n.length,i?r.buffer.unshift(n):r.buffer.push(n),r.needReadable&&emitReadable(t)),maybeReadMore(t,r)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),Readable.prototype.destroy=b.destroy,Readable.prototype._undestroy=b.undestroy,Readable.prototype._destroy=function(t,r){this.push(null),r(t)},Readable.prototype.push=function(t,r){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((r=r||i.defaultEncoding)!==i.encoding&&(t=l.from(t,r),r=""),n=!0),readableAddChunk(this,t,r,!1,n)},Readable.prototype.unshift=function(t){return readableAddChunk(this,t,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(t){return g||(g=n(33).StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var M=8388608;function howMuchToRead(t,r){return t<=0||0===r.length&&r.ended?0:r.objectMode?1:t!=t?r.flowing&&r.length?r.buffer.head.data.length:r.length:(t>r.highWaterMark&&(r.highWaterMark=function computeNewHighWaterMark(t){return t>=M?t=M:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=r.length?t:r.ended?r.length:(r.needReadable=!0,0))}function emitReadable(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(m("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?a.nextTick(emitReadable_,t):emitReadable_(t))}function emitReadable_(t){m("emit readable"),t.emit("readable"),flow(t)}function maybeReadMore(t,r){r.readingMore||(r.readingMore=!0,a.nextTick(maybeReadMore_,t,r))}function maybeReadMore_(t,r){for(var n=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(m("maybeReadMore read 0"),t.read(0),n!==r.length);)n=r.length;r.readingMore=!1}function nReadingNextTick(t){m("readable nexttick read 0"),t.read(0)}function resume_(t,r){r.reading||(m("resume read 0"),t.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,t.emit("resume"),flow(t),r.flowing&&!r.reading&&t.read(0)}function flow(t){var r=t._readableState;for(m("flow",r.flowing);r.flowing&&null!==t.read(););}function fromList(t,r){return 0===r.length?null:(r.objectMode?n=r.buffer.shift():!t||t>=r.length?(n=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.head.data:r.buffer.concat(r.length),r.buffer.clear()):n=function fromListPartial(t,r,n){var i;t<r.head.data.length?(i=r.head.data.slice(0,t),r.head.data=r.head.data.slice(t)):i=t===r.head.data.length?r.shift():n?function copyFromBufferString(t,r){var n=r.head,i=1,a=n.data;t-=a.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?a+=o:a+=o.slice(0,t),0===(t-=s)){s===o.length?(++i,n.next?r.head=n.next:r.head=r.tail=null):(r.head=n,n.data=o.slice(s));break}++i}return r.length-=i,a}(t,r):function copyFromBuffer(t,r){var n=l.allocUnsafe(t),i=r.head,a=1;i.data.copy(n),t-=i.data.length;for(;i=i.next;){var o=i.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++a,i.next?r.head=i.next:r.head=r.tail=null):(r.head=i,i.data=o.slice(s));break}++a}return r.length-=a,n}(t,r);return i}(t,r.buffer,r.decoder),n);var n}function endReadable(t){var r=t._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,a.nextTick(endReadableNT,r,t))}function endReadableNT(t,r){t.endEmitted||0!==t.length||(t.endEmitted=!0,r.readable=!1,r.emit("end"))}function indexOf(t,r){for(var n=0,i=t.length;n<i;n++)if(t[n]===r)return n;return-1}Readable.prototype.read=function(t){m("read",t),t=parseInt(t,10);var r=this._readableState,n=t;if(0!==t&&(r.emittedReadable=!1),0===t&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return m("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(t=howMuchToRead(t,r))&&r.ended)return 0===r.length&&endReadable(this),null;var i,a=r.needReadable;return m("need readable",a),(0===r.length||r.length-t<r.highWaterMark)&&m("length less than watermark",a=!0),r.ended||r.reading?m("reading or ended",a=!1):a&&(m("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(t=howMuchToRead(n,r))),null===(i=t>0?fromList(t,r):null)?(r.needReadable=!0,t=0):r.length-=t,0===r.length&&(r.ended||(r.needReadable=!0),n!==t&&r.ended&&endReadable(this)),null!==i&&this.emit("data",i),i},Readable.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(t,r){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,m("pipe count=%d opts=%j",o.pipesCount,r);var h=(!r||!1!==r.end)&&t!==i.stdout&&t!==i.stderr?onend:unpipe;function onunpipe(r,i){m("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,function cleanup(){m("cleanup"),t.removeListener("close",onclose),t.removeListener("finish",onfinish),t.removeListener("drain",l),t.removeListener("error",onerror),t.removeListener("unpipe",onunpipe),n.removeListener("end",onend),n.removeListener("end",unpipe),n.removeListener("data",ondata),c=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l()}())}function onend(){m("onend"),t.end()}o.endEmitted?a.nextTick(h):n.once("end",h),t.on("unpipe",onunpipe);var l=function pipeOnDrain(t){return function(){var r=t._readableState;m("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&EElistenerCount(t,"data")&&(r.flowing=!0,flow(t))}}(n);t.on("drain",l);var c=!1;var d=!1;function ondata(r){m("ondata"),d=!1,!1!==t.write(r)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==indexOf(o.pipes,t))&&!c&&(m("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function onerror(r){m("onerror",r),unpipe(),t.removeListener("error",onerror),0===EElistenerCount(t,"error")&&t.emit("error",r)}function onclose(){t.removeListener("finish",onfinish),unpipe()}function onfinish(){m("onfinish"),t.removeListener("close",onclose),unpipe()}function unpipe(){m("unpipe"),n.unpipe(t)}return n.on("data",ondata),function prependListener(t,r,n){if("function"==typeof t.prependListener)return t.prependListener(r,n);t._events&&t._events[r]?s(t._events[r])?t._events[r].unshift(n):t._events[r]=[n,t._events[r]]:t.on(r,n)}(t,"error",onerror),t.once("close",onclose),t.once("finish",onfinish),t.emit("pipe",n),o.flowing||(m("pipe resume"),n.resume()),t},Readable.prototype.unpipe=function(t){var r=this._readableState,n={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return t&&t!==r.pipes||(t||(t=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=r.pipes,a=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var o=0;o<a;o++)i[o].emit("unpipe",this,n);return this}var s=indexOf(r.pipes,t);return-1===s||(r.pipes.splice(s,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),t.emit("unpipe",this,n)),this},Readable.prototype.on=function(t,r){var n=h.prototype.on.call(this,t,r);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&emitReadable(this):a.nextTick(nReadingNextTick,this))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(m("resume"),t.flowing=!0,function resume(t,r){r.resumeScheduled||(r.resumeScheduled=!0,a.nextTick(resume_,t,r))}(this,t)),this},Readable.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(t){var r=this,n=this._readableState,i=!1;for(var a in t.on("end",(function(){if(m("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(a){(m("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a)||(n.objectMode||a&&a.length)&&(r.push(a)||(i=!0,t.pause()))})),t)void 0===this[a]&&"function"==typeof t[a]&&(this[a]=function(r){return function(){return t[r].apply(t,arguments)}}(a));for(var o=0;o<w.length;o++)t.on(w[o],this.emit.bind(this,w[o]));return this._read=function(r){m("wrapped _read",r),i&&(i=!1,t.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,n(14),n(12))},function(t,r,n){t.exports=n(32).EventEmitter},function(t,r,n){"use strict";var i=n(60);function emitErrorNT(t,r){t.emit("error",r)}t.exports={destroy:function destroy(t,r){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(r?r(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(emitErrorNT,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?(i.nextTick(emitErrorNT,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):r&&r(t)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,r,n){"use strict";t.exports=Transform;var i=n(34),a=Object.create(n(52));function afterTransform(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);i.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;"function"==typeof this._flush?this._flush((function(r,n){done(t,r,n)})):done(this,null,null)}function done(t,r,n){if(r)return t.emit("error",r);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}a.inherits=n(5),a.inherits(Transform,i),Transform.prototype.push=function(t,r){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,r)},Transform.prototype._transform=function(t,r,n){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(t,r,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=r,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(t){var r=this._transformState;null!==r.writechunk&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0},Transform.prototype._destroy=function(t,r){var n=this;i.prototype._destroy.call(this,t,(function(t){r(t),n.emit("close")}))}},function(t,r,n){"use strict";var i=n(5),a=n(211),o=n(25),s=n(9).Buffer,h=n(120),l=n(73),c=n(74),d=s.alloc(128);function Hmac(t,r){o.call(this,"digest"),"string"==typeof r&&(r=s.from(r));var n="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=r,r.length>n)?r=("rmd160"===t?new l:c(t)).update(r).digest():r.length<n&&(r=s.concat([r,d],n));for(var i=this._ipad=s.allocUnsafe(n),a=this._opad=s.allocUnsafe(n),h=0;h<n;h++)i[h]=54^r[h],a[h]=92^r[h];this._hash="rmd160"===t?new l:c(t),this._hash.update(i)}i(Hmac,o),Hmac.prototype._update=function(t){this._hash.update(t)},Hmac.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new l:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function createHmac(t,r){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new Hmac("rmd160",r):"md5"===t?new a(h,r):new Hmac(t,r)}},function(t,r,n){var i=n(70);t.exports=function(t){return(new i).update(t).digest()}},function(t){t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(t,r,n){r.pbkdf2=n(213),r.pbkdf2Sync=n(125)},function(t,r){var n=Math.pow(2,30)-1;t.exports=function(t,r){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof r)throw new TypeError("Key length not a number");if(r<0||r>n||r!=r)throw new TypeError("Bad key length")}},function(t,r,n){(function(r,n){var i;if(r.process&&r.process.browser)i="utf-8";else if(r.process&&r.process.version){i=parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else i="utf-8";t.exports=i}).call(this,n(14),n(12))},function(t,r,n){var i=n(120),a=n(73),o=n(74),s=n(9).Buffer,h=n(123),l=n(124),c=n(126),d=s.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac(t,r,n){var h=function getDigest(t){function shaFunc(r){return o(t).update(r).digest()}function rmd160Func(t){return(new a).update(t).digest()}return"rmd160"===t||"ripemd160"===t?rmd160Func:"md5"===t?i:shaFunc}(t),l="sha512"===t||"sha384"===t?128:64;r.length>l?r=h(r):r.length<l&&(r=s.concat([r,d],l));for(var c=s.allocUnsafe(l+p[t]),m=s.allocUnsafe(l+p[t]),g=0;g<l;g++)c[g]=54^r[g],m[g]=92^r[g];var y=s.allocUnsafe(l+n+4);c.copy(y,0,0,l),this.ipad1=y,this.ipad2=c,this.opad=m,this.alg=t,this.blocksize=l,this.hash=h,this.size=p[t]}Hmac.prototype.run=function(t,r){return t.copy(r,this.blocksize),this.hash(r).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function pbkdf2(t,r,n,i,a){h(n,i);var o=new Hmac(a=a||"sha1",t=c(t,l,"Password"),(r=c(r,l,"Salt")).length),d=s.allocUnsafe(i),m=s.allocUnsafe(r.length+4);r.copy(m,0,0,r.length);for(var g=0,y=p[a],b=Math.ceil(i/y),w=1;w<=b;w++){m.writeUInt32BE(w,r.length);for(var M=o.run(m,o.ipad1),_=M,x=1;x<n;x++){_=o.run(_,o.ipad2);for(var A=0;A<y;A++)M[A]^=_[A]}M.copy(d,g),g+=y}return d}},function(t,r,n){var i=n(9).Buffer;t.exports=function(t,r,n){if(i.isBuffer(t))return t;if("string"==typeof t)return i.from(t,r);if(ArrayBuffer.isView(t))return i.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},function(t,r,n){"use strict";r.readUInt32BE=function readUInt32BE(t,r){return(t[0+r]<<24|t[1+r]<<16|t[2+r]<<8|t[3+r])>>>0},r.writeUInt32BE=function writeUInt32BE(t,r,n){t[0+n]=r>>>24,t[1+n]=r>>>16&255,t[2+n]=r>>>8&255,t[3+n]=255&r},r.ip=function ip(t,r,n,i){for(var a=0,o=0,s=6;s>=0;s-=2){for(var h=0;h<=24;h+=8)a<<=1,a|=r>>>h+s&1;for(h=0;h<=24;h+=8)a<<=1,a|=t>>>h+s&1}for(s=6;s>=0;s-=2){for(h=1;h<=25;h+=8)o<<=1,o|=r>>>h+s&1;for(h=1;h<=25;h+=8)o<<=1,o|=t>>>h+s&1}n[i+0]=a>>>0,n[i+1]=o>>>0},r.rip=function rip(t,r,n,i){for(var a=0,o=0,s=0;s<4;s++)for(var h=24;h>=0;h-=8)a<<=1,a|=r>>>h+s&1,a<<=1,a|=t>>>h+s&1;for(s=4;s<8;s++)for(h=24;h>=0;h-=8)o<<=1,o|=r>>>h+s&1,o<<=1,o|=t>>>h+s&1;n[i+0]=a>>>0,n[i+1]=o>>>0},r.pc1=function pc1(t,r,n,i){for(var a=0,o=0,s=7;s>=5;s--){for(var h=0;h<=24;h+=8)a<<=1,a|=r>>h+s&1;for(h=0;h<=24;h+=8)a<<=1,a|=t>>h+s&1}for(h=0;h<=24;h+=8)a<<=1,a|=r>>h+s&1;for(s=1;s<=3;s++){for(h=0;h<=24;h+=8)o<<=1,o|=r>>h+s&1;for(h=0;h<=24;h+=8)o<<=1,o|=t>>h+s&1}for(h=0;h<=24;h+=8)o<<=1,o|=t>>h+s&1;n[i+0]=a>>>0,n[i+1]=o>>>0},r.r28shl=function r28shl(t,r){return t<<r&268435455|t>>>28-r};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];r.pc2=function pc2(t,r,n,a){for(var o=0,s=0,h=i.length>>>1,l=0;l<h;l++)o<<=1,o|=t>>>i[l]&1;for(l=h;l<i.length;l++)s<<=1,s|=r>>>i[l]&1;n[a+0]=o>>>0,n[a+1]=s>>>0},r.expand=function expand(t,r,n){var i=0,a=0;i=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)i<<=6,i|=t>>>o&63;for(o=11;o>=3;o-=4)a|=t>>>o&63,a<<=6;a|=(31&t)<<1|t>>>31,r[n+0]=i>>>0,r[n+1]=a>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];r.substitute=function substitute(t,r){for(var n=0,i=0;i<4;i++){n<<=4,n|=a[64*i+(t>>>18-6*i&63)]}for(i=0;i<4;i++){n<<=4,n|=a[256+64*i+(r>>>18-6*i&63)]}return n>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];r.permute=function permute(t){for(var r=0,n=0;n<o.length;n++)r<<=1,r|=t>>>o[n]&1;return r>>>0},r.padSplit=function padSplit(t,r,n){for(var i=t.toString(2);i.length<r;)i="0"+i;for(var a=[],o=0;o<r;o+=n)a.push(i.slice(o,o+n));return a.join(" ")}},function(t,r,n){"use strict";var i=n(18),a=n(5),o=n(127),s=n(77);function DESState(){this.tmp=new Array(2),this.keys=null}function DES(t){s.call(this,t);var r=new DESState;this._desState=r,this.deriveKeys(r,t.key)}a(DES,s),t.exports=DES,DES.create=function create(t){return new DES(t)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES.prototype.deriveKeys=function deriveKeys(t,r){t.keys=new Array(32),i.equal(r.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(r,0),a=o.readUInt32BE(r,4);o.pc1(n,a,t.tmp,0),n=t.tmp[0],a=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var l=h[s>>>1];n=o.r28shl(n,l),a=o.r28shl(a,l),o.pc2(n,a,t.keys,s)}},DES.prototype._update=function _update(t,r,n,i){var a=this._desState,s=o.readUInt32BE(t,r),h=o.readUInt32BE(t,r+4);o.ip(s,h,a.tmp,0),s=a.tmp[0],h=a.tmp[1],"encrypt"===this.type?this._encrypt(a,s,h,a.tmp,0):this._decrypt(a,s,h,a.tmp,0),s=a.tmp[0],h=a.tmp[1],o.writeUInt32BE(n,s,i),o.writeUInt32BE(n,h,i+4)},DES.prototype._pad=function _pad(t,r){for(var n=t.length-r,i=r;i<t.length;i++)t[i]=n;return!0},DES.prototype._unpad=function _unpad(t){for(var r=t[t.length-1],n=t.length-r;n<t.length;n++)i.equal(t[n],r);return t.slice(0,t.length-r)},DES.prototype._encrypt=function _encrypt(t,r,n,i,a){for(var s=r,h=n,l=0;l<t.keys.length;l+=2){var c=t.keys[l],d=t.keys[l+1];o.expand(h,t.tmp,0),c^=t.tmp[0],d^=t.tmp[1];var p=o.substitute(c,d),m=h;h=(s^o.permute(p))>>>0,s=m}o.rip(h,s,i,a)},DES.prototype._decrypt=function _decrypt(t,r,n,i,a){for(var s=n,h=r,l=t.keys.length-2;l>=0;l-=2){var c=t.keys[l],d=t.keys[l+1];o.expand(s,t.tmp,0),c^=t.tmp[0],d^=t.tmp[1];var p=o.substitute(c,d),m=s;s=(h^o.permute(p))>>>0,h=m}o.rip(s,h,i,a)}},function(t,r,n){var i=n(53),a=n(9).Buffer,o=n(130);function getBlock(t){var r=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),r}r.encrypt=function(t,r){var n=Math.ceil(r.length/16),o=t._cache.length;t._cache=a.concat([t._cache,a.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var h=getBlock(t),l=o+16*s;t._cache.writeUInt32BE(h[0],l+0),t._cache.writeUInt32BE(h[1],l+4),t._cache.writeUInt32BE(h[2],l+8),t._cache.writeUInt32BE(h[3],l+12)}var c=t._cache.slice(0,r.length);return t._cache=t._cache.slice(r.length),i(r,c)}},function(t,r){t.exports=function incr32(t){for(var r,n=t.length;n--;){if(255!==(r=t.readUInt8(n))){r++,t.writeUInt8(r,n);break}t.writeUInt8(0,n)}}},function(t){t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(t,r,n){var i=n(61),a=n(9).Buffer,o=n(25),s=n(5),h=n(226),l=n(53),c=n(130);function StreamCipher(t,r,n,s){o.call(this);var l=a.alloc(4,0);this._cipher=new i.AES(r);var d=this._cipher.encryptBlock(l);this._ghash=new h(d),n=function calcIv(t,r,n){if(12===r.length)return t._finID=a.concat([r,a.from([0,0,0,1])]),a.concat([r,a.from([0,0,0,2])]);var i=new h(n),o=r.length,s=o%16;i.update(r),s&&(s=16-s,i.update(a.alloc(s,0))),i.update(a.alloc(8,0));var l=8*o,d=a.alloc(8);d.writeUIntBE(l,0,8),i.update(d),t._finID=i.state;var p=a.from(t._finID);return c(p),p}(this,n,d),this._prev=a.from(n),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}s(StreamCipher,o),StreamCipher.prototype._update=function(t){if(!this._called&&this._alen){var r=16-this._alen%16;r<16&&(r=a.alloc(r,0),this._ghash.update(r))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n},StreamCipher.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function xorTest(t,r){var n=0;t.length!==r.length&&n++;for(var i=Math.min(t.length,r.length),a=0;a<i;++a)n+=t[a]^r[a];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},StreamCipher.prototype.getAuthTag=function getAuthTag(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},StreamCipher.prototype.setAuthTag=function setAuthTag(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},StreamCipher.prototype.setAAD=function setAAD(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=StreamCipher},function(t,r,n){var i=n(61),a=n(9).Buffer,o=n(25);function StreamCipher(t,r,n,s){o.call(this),this._cipher=new i.AES(r),this._prev=a.from(n),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=s,this._mode=t}n(5)(StreamCipher,o),StreamCipher.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},StreamCipher.prototype._final=function(){this._cipher.scrub()},t.exports=StreamCipher},function(t,r,n){var i=n(38);t.exports=findPrime,findPrime.simpleSieve=simpleSieve,findPrime.fermatTest=fermatTest;var a=n(135),o=new a(24),s=new(n(136)),h=new a(1),l=new a(2),c=new a(5),d=(new a(16),new a(8),new a(10)),p=new a(3),m=(new a(7),new a(11)),g=new a(4),y=(new a(12),null);function _getPrimes(){if(null!==y)return y;var t=[];t[0]=2;for(var r=1,n=3;n<1048576;n+=2){for(var i=Math.ceil(Math.sqrt(n)),a=0;a<r&&t[a]<=i&&n%t[a]!=0;a++);r!==a&&t[a]<=i||(t[r++]=n)}return y=t,t}function simpleSieve(t){for(var r=_getPrimes(),n=0;n<r.length;n++)if(0===t.modn(r[n]))return 0===t.cmpn(r[n]);return!0}function fermatTest(t){var r=a.mont(t);return 0===l.toRed(r).redPow(t.subn(1)).fromRed().cmpn(1)}function findPrime(t,r){if(t<16)return new a(2===r||5===r?[140,123]:[140,39]);var n,y;for(r=new a(r);;){for(n=new a(i(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(h),n.testn(1)||n.iadd(l),r.cmp(l)){if(!r.cmp(c))for(;n.mod(d).cmp(p);)n.iadd(g)}else for(;n.mod(o).cmp(m);)n.iadd(g);if(simpleSieve(y=n.shrn(1))&&simpleSieve(n)&&fermatTest(y)&&fermatTest(n)&&s.test(y)&&s.test(n))return n}}},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(230).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r,n){var i=n(231),a=n(80);function MillerRabin(t){this.rand=t||new a.Rand}t.exports=MillerRabin,MillerRabin.create=function create(t){return new MillerRabin(t)},MillerRabin.prototype._randbelow=function _randbelow(t){var r=t.bitLength(),n=Math.ceil(r/8);do{var a=new i(this.rand.generate(n))}while(a.cmp(t)>=0);return a},MillerRabin.prototype._randrange=function _randrange(t,r){var n=r.sub(t);return t.add(this._randbelow(n))},MillerRabin.prototype.test=function test(t,r,n){var a=t.bitLength(),o=i.mont(t),s=new i(1).toRed(o);r||(r=Math.max(1,a/48|0));for(var h=t.subn(1),l=0;!h.testn(l);l++);for(var c=t.shrn(l),d=h.toRed(o);r>0;r--){var p=this._randrange(new i(2),h);n&&n(p);var m=p.toRed(o).redPow(c);if(0!==m.cmp(s)&&0!==m.cmp(d)){for(var g=1;g<l;g++){if(0===(m=m.redSqr()).cmp(s))return!1;if(0===m.cmp(d))break}if(g===l)return!1}}return!0},MillerRabin.prototype.getDivisor=function getDivisor(t,r){var n=t.bitLength(),a=i.mont(t),o=new i(1).toRed(a);r||(r=Math.max(1,n/48|0));for(var s=t.subn(1),h=0;!s.testn(h);h++);for(var l=t.shrn(h),c=s.toRed(a);r>0;r--){var d=this._randrange(new i(2),s),p=t.gcd(d);if(0!==p.cmpn(1))return p;var m=d.toRed(a).redPow(l);if(0!==m.cmp(o)&&0!==m.cmp(c)){for(var g=1;g<h;g++){if(0===(m=m.redSqr()).cmp(o))return m.fromRed().subn(1).gcd(t);if(0===m.cmp(c))break}if(g===h)return(m=m.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,r,n){"use strict";(function(r,i){var a;t.exports=Readable,Readable.ReadableState=ReadableState;n(32).EventEmitter;var o=function EElistenerCount(t,r){return t.listeners(r).length},s=n(138),h=n(13).Buffer,l=r.Uint8Array||function(){};var c,d=n(238);c=d&&d.debuglog?d.debuglog("stream"):function debug(){};var p,m,g,y=n(239),b=n(139),w=n(140).getHighWaterMark,M=n(42).codes,_=M.ERR_INVALID_ARG_TYPE,x=M.ERR_STREAM_PUSH_AFTER_EOF,A=M.ERR_METHOD_NOT_IMPLEMENTED,E=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5)(Readable,s);var B=b.errorOrDestroy,C=["error","close","destroy","pause","resume"];function ReadableState(t,r,i){a=a||n(43),t=t||{},"boolean"!=typeof i&&(i=r instanceof a),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",i),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(33).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function Readable(t){if(a=a||n(43),!(this instanceof Readable))return new Readable(t);var r=this instanceof a;this._readableState=new ReadableState(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function readableAddChunk(t,r,n,i,a){c("readableAddChunk",r);var o,s=t._readableState;if(null===r)s.reading=!1,function onEofChunk(t,r){if(c("onEofChunk"),r.ended)return;if(r.decoder){var n=r.decoder.end();n&&n.length&&(r.buffer.push(n),r.length+=r.objectMode?1:n.length)}r.ended=!0,r.sync?emitReadable(t):(r.needReadable=!1,r.emittedReadable||(r.emittedReadable=!0,emitReadable_(t)))}(t,s);else if(a||(o=function chunkInvalid(t,r){var n;(function _isUint8Array(t){return h.isBuffer(t)||t instanceof l})(r)||"string"==typeof r||void 0===r||t.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],r));return n}(s,r)),o)B(t,o);else if(s.objectMode||r&&r.length>0)if("string"==typeof r||s.objectMode||Object.getPrototypeOf(r)===h.prototype||(r=function _uint8ArrayToBuffer(t){return h.from(t)}(r)),i)s.endEmitted?B(t,new E):addChunk(t,s,r,!0);else if(s.ended)B(t,new x);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(r=s.decoder.write(r),s.objectMode||0!==r.length?addChunk(t,s,r,!1):maybeReadMore(t,s)):addChunk(t,s,r,!1)}else i||(s.reading=!1,maybeReadMore(t,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function addChunk(t,r,n,i){r.flowing&&0===r.length&&!r.sync?(r.awaitDrain=0,t.emit("data",n)):(r.length+=r.objectMode?1:n.length,i?r.buffer.unshift(n):r.buffer.push(n),r.needReadable&&emitReadable(t)),maybeReadMore(t,r)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._readableState&&this._readableState.destroyed},set:function set(t){this._readableState&&(this._readableState.destroyed=t)}}),Readable.prototype.destroy=b.destroy,Readable.prototype._undestroy=b.undestroy,Readable.prototype._destroy=function(t,r){r(t)},Readable.prototype.push=function(t,r){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof t&&((r=r||i.defaultEncoding)!==i.encoding&&(t=h.from(t,r),r=""),n=!0),readableAddChunk(this,t,r,!1,n)},Readable.prototype.unshift=function(t){return readableAddChunk(this,t,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(t){p||(p=n(33).StringDecoder);var r=new p(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,a="";null!==i;)a+=r.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var T=1073741824;function howMuchToRead(t,r){return t<=0||0===r.length&&r.ended?0:r.objectMode?1:t!=t?r.flowing&&r.length?r.buffer.head.data.length:r.length:(t>r.highWaterMark&&(r.highWaterMark=function computeNewHighWaterMark(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=r.length?t:r.ended?r.length:(r.needReadable=!0,0))}function emitReadable(t){var r=t._readableState;c("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(c("emitReadable",r.flowing),r.emittedReadable=!0,i.nextTick(emitReadable_,t))}function emitReadable_(t){var r=t._readableState;c("emitReadable_",r.destroyed,r.length,r.ended),r.destroyed||!r.length&&!r.ended||(t.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,flow(t)}function maybeReadMore(t,r){r.readingMore||(r.readingMore=!0,i.nextTick(maybeReadMore_,t,r))}function maybeReadMore_(t,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&0===r.length);){var n=r.length;if(c("maybeReadMore read 0"),t.read(0),n===r.length)break}r.readingMore=!1}function updateReadableListening(t){var r=t._readableState;r.readableListening=t.listenerCount("readable")>0,r.resumeScheduled&&!r.paused?r.flowing=!0:t.listenerCount("data")>0&&t.resume()}function nReadingNextTick(t){c("readable nexttick read 0"),t.read(0)}function resume_(t,r){c("resume",r.reading),r.reading||t.read(0),r.resumeScheduled=!1,t.emit("resume"),flow(t),r.flowing&&!r.reading&&t.read(0)}function flow(t){var r=t._readableState;for(c("flow",r.flowing);r.flowing&&null!==t.read(););}function fromList(t,r){return 0===r.length?null:(r.objectMode?n=r.buffer.shift():!t||t>=r.length?(n=r.decoder?r.buffer.join(""):1===r.buffer.length?r.buffer.first():r.buffer.concat(r.length),r.buffer.clear()):n=r.buffer.consume(t,r.decoder),n);var n}function endReadable(t){var r=t._readableState;c("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,i.nextTick(endReadableNT,r,t))}function endReadableNT(t,r){if(c("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,r.readable=!1,r.emit("end"),t.autoDestroy)){var n=r._writableState;(!n||n.autoDestroy&&n.finished)&&r.destroy()}}function indexOf(t,r){for(var n=0,i=t.length;n<i;n++)if(t[n]===r)return n;return-1}Readable.prototype.read=function(t){c("read",t),t=parseInt(t,10);var r=this._readableState,n=t;if(0!==t&&(r.emittedReadable=!1),0===t&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return c("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(t=howMuchToRead(t,r))&&r.ended)return 0===r.length&&endReadable(this),null;var i,a=r.needReadable;return c("need readable",a),(0===r.length||r.length-t<r.highWaterMark)&&c("length less than watermark",a=!0),r.ended||r.reading?c("reading or ended",a=!1):a&&(c("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(t=howMuchToRead(n,r))),null===(i=t>0?fromList(t,r):null)?(r.needReadable=r.length<=r.highWaterMark,t=0):(r.length-=t,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==t&&r.ended&&endReadable(this)),null!==i&&this.emit("data",i),i},Readable.prototype._read=function(t){B(this,new A("_read()"))},Readable.prototype.pipe=function(t,r){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,c("pipe count=%d opts=%j",a.pipesCount,r);var s=(!r||!1!==r.end)&&t!==i.stdout&&t!==i.stderr?onend:unpipe;function onunpipe(r,i){c("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,function cleanup(){c("cleanup"),t.removeListener("close",onclose),t.removeListener("finish",onfinish),t.removeListener("drain",h),t.removeListener("error",onerror),t.removeListener("unpipe",onunpipe),n.removeListener("end",onend),n.removeListener("end",unpipe),n.removeListener("data",ondata),l=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}())}function onend(){c("onend"),t.end()}a.endEmitted?i.nextTick(s):n.once("end",s),t.on("unpipe",onunpipe);var h=function pipeOnDrain(t){return function pipeOnDrainFunctionResult(){var r=t._readableState;c("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&o(t,"data")&&(r.flowing=!0,flow(t))}}(n);t.on("drain",h);var l=!1;function ondata(r){c("ondata");var i=t.write(r);c("dest.write",i),!1===i&&((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==indexOf(a.pipes,t))&&!l&&(c("false write response, pause",a.awaitDrain),a.awaitDrain++),n.pause())}function onerror(r){c("onerror",r),unpipe(),t.removeListener("error",onerror),0===o(t,"error")&&B(t,r)}function onclose(){t.removeListener("finish",onfinish),unpipe()}function onfinish(){c("onfinish"),t.removeListener("close",onclose),unpipe()}function unpipe(){c("unpipe"),n.unpipe(t)}return n.on("data",ondata),function prependListener(t,r,n){if("function"==typeof t.prependListener)return t.prependListener(r,n);t._events&&t._events[r]?Array.isArray(t._events[r])?t._events[r].unshift(n):t._events[r]=[n,t._events[r]]:t.on(r,n)}(t,"error",onerror),t.once("close",onclose),t.once("finish",onfinish),t.emit("pipe",n),a.flowing||(c("pipe resume"),n.resume()),t},Readable.prototype.unpipe=function(t){var r=this._readableState,n={hasUnpiped:!1};if(0===r.pipesCount)return this;if(1===r.pipesCount)return t&&t!==r.pipes||(t||(t=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var i=r.pipes,a=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var o=0;o<a;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=indexOf(r.pipes,t);return-1===s||(r.pipes.splice(s,1),r.pipesCount-=1,1===r.pipesCount&&(r.pipes=r.pipes[0]),t.emit("unpipe",this,n)),this},Readable.prototype.on=function(t,r){var n=s.prototype.on.call(this,t,r),a=this._readableState;return"data"===t?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===t&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,c("on readable",a.length,a.reading),a.length?emitReadable(this):a.reading||i.nextTick(nReadingNextTick,this))),n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(t,r){var n=s.prototype.removeListener.call(this,t,r);return"readable"===t&&i.nextTick(updateReadableListening,this),n},Readable.prototype.removeAllListeners=function(t){var r=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(updateReadableListening,this),r},Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(c("resume"),t.flowing=!t.readableListening,function resume(t,r){r.resumeScheduled||(r.resumeScheduled=!0,i.nextTick(resume_,t,r))}(this,t)),t.paused=!1,this},Readable.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Readable.prototype.wrap=function(t){var r=this,n=this._readableState,i=!1;for(var a in t.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&r.push(t)}r.push(null)})),t.on("data",(function(a){(c("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a)||(n.objectMode||a&&a.length)&&(r.push(a)||(i=!0,t.pause()))})),t)void 0===this[a]&&"function"==typeof t[a]&&(this[a]=function methodWrap(r){return function methodWrapReturnFunction(){return t[r].apply(t,arguments)}}(a));for(var o=0;o<C.length;o++)t.on(C[o],this.emit.bind(this,C[o]));return this._read=function(r){c("wrapped _read",r),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(Readable.prototype[Symbol.asyncIterator]=function(){return void 0===m&&(m=n(241)),m(this)}),Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function get(){return this._readableState.highWaterMark}}),Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:!1,get:function get(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:!1,get:function get(){return this._readableState.flowing},set:function set(t){this._readableState&&(this._readableState.flowing=t)}}),Readable._fromList=fromList,Object.defineProperty(Readable.prototype,"readableLength",{enumerable:!1,get:function get(){return this._readableState.length}}),"function"==typeof Symbol&&(Readable.from=function(t,r){return void 0===g&&(g=n(242)),g(Readable,t,r)})}).call(this,n(14),n(12))},function(t,r,n){t.exports=n(32).EventEmitter},function(t,r,n){"use strict";(function(r){function emitErrorAndCloseNT(t,r){emitErrorNT(t,r),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function emitErrorNT(t,r){t.emit("error",r)}t.exports={destroy:function destroy(t,n){var i=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(n?n(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(emitErrorNT,this,t)):r.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!n&&t?i._writableState?i._writableState.errorEmitted?r.nextTick(emitCloseNT,i):(i._writableState.errorEmitted=!0,r.nextTick(emitErrorAndCloseNT,i,t)):r.nextTick(emitErrorAndCloseNT,i,t):n?(r.nextTick(emitCloseNT,i),n(t)):r.nextTick(emitCloseNT,i)})),this)},undestroy:function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function errorOrDestroy(t,r){var n=t._readableState,i=t._writableState;n&&n.autoDestroy||i&&i.autoDestroy?t.destroy(r):t.emit("error",r)}}}).call(this,n(12))},function(t,r,n){"use strict";var i=n(42).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function getHighWaterMark(t,r,n,a){var o=function highWaterMarkFrom(t,r,n){return null!=t.highWaterMark?t.highWaterMark:r?t[n]:null}(r,a,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new i(a?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},function(t,r,n){"use strict";(function(r,i){function CorkedRequest(t){var r=this;this.next=null,this.entry=null,this.finish=function(){!function onCorkedFinish(t,r,n){var i=t.entry;t.entry=null;for(;i;){var a=i.callback;r.pendingcb--,a(n),i=i.next}r.corkedRequestsFree.next=t}(r,t)}}var a;t.exports=Writable,Writable.WritableState=WritableState;var o={deprecate:n(71)},s=n(138),h=n(13).Buffer,l=r.Uint8Array||function(){};var c,d=n(139),p=n(140).getHighWaterMark,m=n(42).codes,g=m.ERR_INVALID_ARG_TYPE,y=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_MULTIPLE_CALLBACK,w=m.ERR_STREAM_CANNOT_PIPE,M=m.ERR_STREAM_DESTROYED,_=m.ERR_STREAM_NULL_VALUES,x=m.ERR_STREAM_WRITE_AFTER_END,A=m.ERR_UNKNOWN_ENCODING,E=d.errorOrDestroy;function nop(){}function WritableState(t,r,o){a=a||n(43),t=t||{},"boolean"!=typeof o&&(o=r instanceof a),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function onwrite(t,r){var n=t._writableState,a=n.sync,o=n.writecb;if("function"!=typeof o)throw new b;if(function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),r)!function onwriteError(t,r,n,a,o){--r.pendingcb,n?(i.nextTick(o,a),i.nextTick(finishMaybe,t,r),t._writableState.errorEmitted=!0,E(t,a)):(o(a),t._writableState.errorEmitted=!0,E(t,a),finishMaybe(t,r))}(t,n,a,r,o);else{var s=needFinish(n)||t.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||clearBuffer(t,n),a?i.nextTick(afterWrite,t,n,s,o):afterWrite(t,n,s,o)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(t){var r=this instanceof(a=a||n(43));if(!r&&!c.call(Writable,this))return new Writable(t);this._writableState=new WritableState(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function doWrite(t,r,n,i,a,o,s){r.writelen=i,r.writecb=s,r.writing=!0,r.sync=!0,r.destroyed?r.onwrite(new M("write")):n?t._writev(a,r.onwrite):t._write(a,o,r.onwrite),r.sync=!1}function afterWrite(t,r,n,i){n||function onwriteDrain(t,r){0===r.length&&r.needDrain&&(r.needDrain=!1,t.emit("drain"))}(t,r),r.pendingcb--,i(),finishMaybe(t,r)}function clearBuffer(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,a=new Array(i),o=r.corkedRequestsFree;o.entry=n;for(var s=0,h=!0;n;)a[s]=n,n.isBuf||(h=!1),n=n.next,s+=1;a.allBuffers=h,doWrite(t,r,!0,r.length,a,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new CorkedRequest(r),r.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(doWrite(t,r,!1,r.objectMode?1:l.length,l,c,d),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function needFinish(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function callFinal(t,r){t._final((function(n){r.pendingcb--,n&&E(t,n),r.prefinished=!0,t.emit("prefinish"),finishMaybe(t,r)}))}function finishMaybe(t,r){var n=needFinish(r);if(n&&(function prefinish(t,r){r.prefinished||r.finalCalled||("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,i.nextTick(callFinal,t,r)))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"),r.autoDestroy))){var a=t._readableState;(!a||a.autoDestroy&&a.endEmitted)&&t.destroy()}return n}n(5)(Writable,s),WritableState.prototype.getBuffer=function getBuffer(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:o.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(t){return!!c.call(this,t)||this===Writable&&(t&&t._writableState instanceof WritableState)}})):c=function realHasInstance(t){return t instanceof this},Writable.prototype.pipe=function(){E(this,new w)},Writable.prototype.write=function(t,r,n){var a=this._writableState,o=!1,s=!a.objectMode&&function _isUint8Array(t){return h.isBuffer(t)||t instanceof l}(t);return s&&!h.isBuffer(t)&&(t=function _uint8ArrayToBuffer(t){return h.from(t)}(t)),"function"==typeof r&&(n=r,r=null),s?r="buffer":r||(r=a.defaultEncoding),"function"!=typeof n&&(n=nop),a.ending?function writeAfterEnd(t,r){var n=new x;E(t,n),i.nextTick(r,n)}(this,n):(s||function validChunk(t,r,n,a){var o;return null===n?o=new _:"string"==typeof n||r.objectMode||(o=new g("chunk",["string","Buffer"],n)),!o||(E(t,o),i.nextTick(a,o),!1)}(this,a,t,n))&&(a.pendingcb++,o=function writeOrBuffer(t,r,n,i,a,o){if(!n){var s=function decodeChunk(t,r,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof r||(r=h.from(r,n));return r}(r,i,a);i!==s&&(n=!0,a="buffer",i=s)}var l=r.objectMode?1:i.length;r.length+=l;var c=r.length<r.highWaterMark;c||(r.needDrain=!0);if(r.writing||r.corked){var d=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:o,next:null},d?d.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else doWrite(t,r,!1,l,i,a,o);return c}(this,a,s,t,r,n)),o},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||clearBuffer(this,t))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new A(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:!1,get:function get(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function get(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(t,r,n){n(new y("_write()"))},Writable.prototype._writev=null,Writable.prototype.end=function(t,r,n){var a=this._writableState;return"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t&&this.write(t,r),a.corked&&(a.corked=1,this.uncork()),a.ending||function endWritable(t,r,n){r.ending=!0,finishMaybe(t,r),n&&(r.finished?i.nextTick(n):t.once("finish",n));r.ended=!0,t.writable=!1}(this,a,n),this},Object.defineProperty(Writable.prototype,"writableLength",{enumerable:!1,get:function get(){return this._writableState.length}}),Object.defineProperty(Writable.prototype,"destroyed",{enumerable:!1,get:function get(){return void 0!==this._writableState&&this._writableState.destroyed},set:function set(t){this._writableState&&(this._writableState.destroyed=t)}}),Writable.prototype.destroy=d.destroy,Writable.prototype._undestroy=d.undestroy,Writable.prototype._destroy=function(t,r){r(t)}}).call(this,n(14),n(12))},function(t,r,n){"use strict";t.exports=Transform;var i=n(42).codes,a=i.ERR_METHOD_NOT_IMPLEMENTED,o=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,h=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(43);function afterTransform(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);l.call(this,t),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",prefinish)}function prefinish(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?done(this,null,null):this._flush((function(r,n){done(t,r,n)}))}function done(t,r,n){if(r)return t.emit("error",r);if(null!=n&&t.push(n),t._writableState.length)throw new h;if(t._transformState.transforming)throw new s;return t.push(null)}n(5)(Transform,l),Transform.prototype.push=function(t,r){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,r)},Transform.prototype._transform=function(t,r,n){n(new a("_transform()"))},Transform.prototype._write=function(t,r,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=r,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},Transform.prototype._destroy=function(t,r){l.prototype._destroy.call(this,t,(function(t){r(t)}))}},function(t,r,n){"use strict";var i=r;function zero2(t){return 1===t.length?"0"+t:t}function toHex(t){for(var r="",n=0;n<t.length;n++)r+=zero2(t[n].toString(16));return r}i.toArray=function toArray(t,r){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)n[i]=0|t[i];return n}if("hex"===r){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(i=0;i<t.length;i++){var a=t.charCodeAt(i),o=a>>8,s=255&a;o?n.push(o,s):n.push(s)}return n},i.zero2=zero2,i.toHex=toHex,i.encode=function encode(t,r){return"hex"===r?toHex(t):t}},function(t,r,n){"use strict";var i=r;i.base=n(63),i.short=n(249),i.mont=n(250),i.edwards=n(251)},function(t,r,n){"use strict";var i=n(21).rotr32;function ch32(t,r,n){return t&r^~t&n}function maj32(t,r,n){return t&r^t&n^r&n}function p32(t,r,n){return t^r^n}r.ft_1=function ft_1(t,r,n,i){return 0===t?ch32(r,n,i):1===t||3===t?p32(r,n,i):2===t?maj32(r,n,i):void 0},r.ch32=ch32,r.maj32=maj32,r.p32=p32,r.s0_256=function s0_256(t){return i(t,2)^i(t,13)^i(t,22)},r.s1_256=function s1_256(t){return i(t,6)^i(t,11)^i(t,25)},r.g0_256=function g0_256(t){return i(t,7)^i(t,18)^t>>>3},r.g1_256=function g1_256(t){return i(t,17)^i(t,19)^t>>>10}},function(t,r,n){"use strict";var i=n(21),a=n(54),o=n(145),s=n(18),h=i.sum32,l=i.sum32_4,c=i.sum32_5,d=o.ch32,p=o.maj32,m=o.s0_256,g=o.s1_256,y=o.g0_256,b=o.g1_256,w=a.BlockHash,M=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=M,this.W=new Array(64)}i.inherits(SHA256,w),t.exports=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function _update(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=l(b(n[i-2]),n[i-7],y(n[i-15]),n[i-16]);var a=this.h[0],o=this.h[1],w=this.h[2],M=this.h[3],_=this.h[4],x=this.h[5],A=this.h[6],E=this.h[7];for(s(this.k.length===n.length),i=0;i<n.length;i++){var B=c(E,g(_),d(_,x,A),this.k[i],n[i]),C=h(m(a),p(a,o,w));E=A,A=x,x=_,_=h(M,B),M=w,w=o,o=a,a=h(B,C)}this.h[0]=h(this.h[0],a),this.h[1]=h(this.h[1],o),this.h[2]=h(this.h[2],w),this.h[3]=h(this.h[3],M),this.h[4]=h(this.h[4],_),this.h[5]=h(this.h[5],x),this.h[6]=h(this.h[6],A),this.h[7]=h(this.h[7],E)},SHA256.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,r,n){"use strict";var i=n(21),a=n(54),o=n(18),s=i.rotr64_hi,h=i.rotr64_lo,l=i.shr64_hi,c=i.shr64_lo,d=i.sum64,p=i.sum64_hi,m=i.sum64_lo,g=i.sum64_4_hi,y=i.sum64_4_lo,b=i.sum64_5_hi,w=i.sum64_5_lo,M=a.BlockHash,_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;M.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_,this.W=new Array(160)}function ch64_hi(t,r,n,i,a){var o=t&n^~t&a;return o<0&&(o+=4294967296),o}function ch64_lo(t,r,n,i,a,o){var s=r&i^~r&o;return s<0&&(s+=4294967296),s}function maj64_hi(t,r,n,i,a){var o=t&n^t&a^n&a;return o<0&&(o+=4294967296),o}function maj64_lo(t,r,n,i,a,o){var s=r&i^r&o^i&o;return s<0&&(s+=4294967296),s}function s0_512_hi(t,r){var n=s(t,r,28)^s(r,t,2)^s(r,t,7);return n<0&&(n+=4294967296),n}function s0_512_lo(t,r){var n=h(t,r,28)^h(r,t,2)^h(r,t,7);return n<0&&(n+=4294967296),n}function s1_512_hi(t,r){var n=s(t,r,14)^s(t,r,18)^s(r,t,9);return n<0&&(n+=4294967296),n}function s1_512_lo(t,r){var n=h(t,r,14)^h(t,r,18)^h(r,t,9);return n<0&&(n+=4294967296),n}function g0_512_hi(t,r){var n=s(t,r,1)^s(t,r,8)^l(t,r,7);return n<0&&(n+=4294967296),n}function g0_512_lo(t,r){var n=h(t,r,1)^h(t,r,8)^c(t,r,7);return n<0&&(n+=4294967296),n}function g1_512_hi(t,r){var n=s(t,r,19)^s(r,t,29)^l(t,r,6);return n<0&&(n+=4294967296),n}function g1_512_lo(t,r){var n=h(t,r,19)^h(r,t,29)^c(t,r,6);return n<0&&(n+=4294967296),n}i.inherits(SHA512,M),t.exports=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function _prepareBlock(t,r){for(var n=this.W,i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var a=g1_512_hi(n[i-4],n[i-3]),o=g1_512_lo(n[i-4],n[i-3]),s=n[i-14],h=n[i-13],l=g0_512_hi(n[i-30],n[i-29]),c=g0_512_lo(n[i-30],n[i-29]),d=n[i-32],p=n[i-31];n[i]=g(a,o,s,h,l,c,d,p),n[i+1]=y(a,o,s,h,l,c,d,p)}},SHA512.prototype._update=function _update(t,r){this._prepareBlock(t,r);var n=this.W,i=this.h[0],a=this.h[1],s=this.h[2],h=this.h[3],l=this.h[4],c=this.h[5],g=this.h[6],y=this.h[7],M=this.h[8],_=this.h[9],x=this.h[10],A=this.h[11],E=this.h[12],B=this.h[13],C=this.h[14],T=this.h[15];o(this.k.length===n.length);for(var D=0;D<n.length;D+=2){var P=C,L=T,N=s1_512_hi(M,_),F=s1_512_lo(M,_),I=ch64_hi(M,_,x,A,E),k=ch64_lo(M,_,x,A,E,B),O=this.k[D],U=this.k[D+1],z=n[D],V=n[D+1],j=b(P,L,N,F,I,k,O,U,z,V),H=w(P,L,N,F,I,k,O,U,z,V);P=s0_512_hi(i,a),L=s0_512_lo(i,a),N=maj64_hi(i,a,s,h,l),F=maj64_lo(i,a,s,h,l,c);var G=p(P,L,N,F),W=m(P,L,N,F);C=E,T=B,E=x,B=A,x=M,A=_,M=p(g,y,j,H),_=m(y,y,j,H),g=l,y=c,l=s,c=h,s=i,h=a,i=p(j,H,G,W),a=m(j,H,G,W)}d(this.h,0,i,a),d(this.h,2,s,h),d(this.h,4,l,c),d(this.h,6,g,y),d(this.h,8,M,_),d(this.h,10,x,A),d(this.h,12,E,B),d(this.h,14,C,T)},SHA512.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,r,n){"use strict";const i=r;i.bignum=n(149),i.define=n(268).define,i.base=n(271),i.constants=n(272),i.decoders=n(152),i.encoders=n(150)},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(267).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r,n){"use strict";const i=r;i.der=n(151),i.pem=n(269)},function(t,r,n){"use strict";const i=n(5),a=n(88).Buffer,o=n(89),s=n(91);function DEREncoder(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode,this.tree._init(t.body)}function DERNode(t){o.call(this,"der",t)}function two(t){return t<10?"0"+t:t}t.exports=DEREncoder,DEREncoder.prototype.encode=function encode(t,r){return this.tree._encode(t,r).join()},i(DERNode,o),DERNode.prototype._encodeComposite=function encodeComposite(t,r,n,i){const o=function encodeTag(t,r,n,i){let a;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))a=s.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return i.error("Unknown tag: "+t);a=t}if(a>=31)return i.error("Multi-octet tag encoding unsupported");r||(a|=32);return a|=s.tagClassByName[n||"universal"]<<6,a}(t,r,n,this.reporter);if(i.length<128){const t=a.alloc(2);return t[0]=o,t[1]=i.length,this._createEncoderBuffer([t,i])}let h=1;for(let t=i.length;t>=256;t>>=8)h++;const l=a.alloc(2+h);l[0]=o,l[1]=128|h;for(let t=1+h,r=i.length;r>0;t--,r>>=8)l[t]=255&r;return this._createEncoderBuffer([l,i])},DERNode.prototype._encodeStr=function encodeStr(t,r){if("bitstr"===r)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===r){const r=a.alloc(2*t.length);for(let n=0;n<t.length;n++)r.writeUInt16BE(t.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}return"numstr"===r?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===r?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)||"objDesc"===r?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+r+" unsupported")},DERNode.prototype._encodeObjid=function encodeObjid(t,r,n){if("string"==typeof t){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=r[t].split(/[\s.]+/g);for(let r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(let r=0;r<t.length;r++)t[r]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let i=0;for(let r=0;r<t.length;r++){let n=t[r];for(i++;n>=128;n>>=7)i++}const o=a.alloc(i);let s=o.length-1;for(let r=t.length-1;r>=0;r--){let n=t[r];for(o[s--]=127&n;(n>>=7)>0;)o[s--]=128|127&n}return this._createEncoderBuffer(o)},DERNode.prototype._encodeTime=function encodeTime(t,r){let n;const i=new Date(t);return"gentime"===r?n=[two(i.getUTCFullYear()),two(i.getUTCMonth()+1),two(i.getUTCDate()),two(i.getUTCHours()),two(i.getUTCMinutes()),two(i.getUTCSeconds()),"Z"].join(""):"utctime"===r?n=[two(i.getUTCFullYear()%100),two(i.getUTCMonth()+1),two(i.getUTCDate()),two(i.getUTCHours()),two(i.getUTCMinutes()),two(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+r+" time is not supported yet"),this._encodeStr(n,"octstr")},DERNode.prototype._encodeNull=function encodeNull(){return this._createEncoderBuffer("")},DERNode.prototype._encodeInt=function encodeInt(t,r){if("string"==typeof t){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=r[t]}if("number"!=typeof t&&!a.isBuffer(t)){const r=t.toArray();!t.sign&&128&r[0]&&r.unshift(0),t=a.from(r)}if(a.isBuffer(t)){let r=t.length;0===t.length&&r++;const n=a.alloc(r);return t.copy(n),0===t.length&&(n[0]=0),this._createEncoderBuffer(n)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let n=1;for(let r=t;r>=256;r>>=8)n++;const i=new Array(n);for(let r=i.length-1;r>=0;r--)i[r]=255&t,t>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(a.from(i))},DERNode.prototype._encodeBool=function encodeBool(t){return this._createEncoderBuffer(t?255:0)},DERNode.prototype._use=function use(t,r){return"function"==typeof t&&(t=t(r)),t._getEncoder("der").tree},DERNode.prototype._skipDefault=function skipDefault(t,r,n){const i=this._baseState;let a;if(null===i.default)return!1;const o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,r,n).join()),o.length!==i.defaultBuffer.length)return!1;for(a=0;a<o.length;a++)if(o[a]!==i.defaultBuffer[a])return!1;return!0}},function(t,r,n){"use strict";const i=r;i.der=n(153),i.pem=n(270)},function(t,r,n){"use strict";const i=n(5),a=n(149),o=n(55).DecoderBuffer,s=n(89),h=n(91);function DERDecoder(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode,this.tree._init(t.body)}function DERNode(t){s.call(this,"der",t)}function derDecodeTag(t,r){let n=t.readUInt8(r);if(t.isError(n))return n;const i=h.tagClass[n>>6],a=0==(32&n);if(31==(31&n)){let i=n;for(n=0;128==(128&i);){if(i=t.readUInt8(r),t.isError(i))return i;n<<=7,n|=127&i}}else n&=31;return{cls:i,primitive:a,tag:n,tagStr:h.tag[n]}}function derDecodeLen(t,r,n){let i=t.readUInt8(n);if(t.isError(i))return i;if(!r&&128===i)return null;if(0==(128&i))return i;const a=127&i;if(a>4)return t.error("length octect is too long");i=0;for(let r=0;r<a;r++){i<<=8;const r=t.readUInt8(n);if(t.isError(r))return r;i|=r}return i}t.exports=DERDecoder,DERDecoder.prototype.decode=function decode(t,r){return o.isDecoderBuffer(t)||(t=new o(t,r)),this.tree._decode(t,r)},i(DERNode,s),DERNode.prototype._peekTag=function peekTag(t,r,n){if(t.isEmpty())return!1;const i=t.save(),a=derDecodeTag(t,'Failed to peek tag: "'+r+'"');return t.isError(a)?a:(t.restore(i),a.tag===r||a.tagStr===r||a.tagStr+"of"===r||n)},DERNode.prototype._decodeTag=function decodeTag(t,r,n){const i=derDecodeTag(t,'Failed to decode tag of "'+r+'"');if(t.isError(i))return i;let a=derDecodeLen(t,i.primitive,'Failed to get length of "'+r+'"');if(t.isError(a))return a;if(!n&&i.tag!==r&&i.tagStr!==r&&i.tagStr+"of"!==r)return t.error('Failed to match tag: "'+r+'"');if(i.primitive||null!==a)return t.skip(a,'Failed to match body of: "'+r+'"');const o=t.save(),s=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(s)?s:(a=t.offset-o.offset,t.restore(o),t.skip(a,'Failed to match body of: "'+r+'"'))},DERNode.prototype._skipUntilEnd=function skipUntilEnd(t,r){for(;;){const n=derDecodeTag(t,r);if(t.isError(n))return n;const i=derDecodeLen(t,n.primitive,r);if(t.isError(i))return i;let a;if(a=n.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,r),t.isError(a))return a;if("end"===n.tagStr)break}},DERNode.prototype._decodeList=function decodeList(t,r,n,i){const a=[];for(;!t.isEmpty();){const r=this._peekTag(t,"end");if(t.isError(r))return r;const o=n.decode(t,"der",i);if(t.isError(o)&&r)break;a.push(o)}return a},DERNode.prototype._decodeStr=function decodeStr(t,r){if("bitstr"===r){const r=t.readUInt8();return t.isError(r)?r:{unused:r,data:t.raw()}}if("bmpstr"===r){const r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let n="";for(let t=0;t<r.length/2;t++)n+=String.fromCharCode(r.readUInt16BE(2*t));return n}if("numstr"===r){const r=t.raw().toString("ascii");return this._isNumstr(r)?r:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===r)return t.raw();if("objDesc"===r)return t.raw();if("printstr"===r){const r=t.raw().toString("ascii");return this._isPrintstr(r)?r:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(r)?t.raw().toString():t.error("Decoding of string type: "+r+" unsupported")},DERNode.prototype._decodeObjid=function decodeObjid(t,r,n){let i;const a=[];let o=0,s=0;for(;!t.isEmpty();)s=t.readUInt8(),o<<=7,o|=127&s,0==(128&s)&&(a.push(o),o=0);128&s&&a.push(o);const h=a[0]/40|0,l=a[0]%40;if(i=n?a:[h,l].concat(a.slice(1)),r){let t=r[i.join(" ")];void 0===t&&(t=r[i.join(".")]),void 0!==t&&(i=t)}return i},DERNode.prototype._decodeTime=function decodeTime(t,r){const n=t.raw().toString();let i,a,o,s,h,l;if("gentime"===r)i=0|n.slice(0,4),a=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),h=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==r)return t.error("Decoding "+r+" time is not supported yet");i=0|n.slice(0,2),a=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),h=0|n.slice(8,10),l=0|n.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,a-1,o,s,h,l,0)},DERNode.prototype._decodeNull=function decodeNull(){return null},DERNode.prototype._decodeBool=function decodeBool(t){const r=t.readUInt8();return t.isError(r)?r:0!==r},DERNode.prototype._decodeInt=function decodeInt(t,r){const n=t.raw();let i=new a(n);return r&&(i=r[i.toString(10)]||i),i},DERNode.prototype._use=function use(t,r){return"function"==typeof t&&(t=t(r)),t._getDecoder("der").tree}},function(t){t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(t,r,n){var i=n(51),a=n(9).Buffer;function i2ops(t){var r=a.allocUnsafe(4);return r.writeUInt32BE(t,0),r}t.exports=function(t,r){for(var n,o=a.alloc(0),s=0;o.length<r;)n=i2ops(s++),o=a.concat([o,i("sha1").update(t).update(n).digest()]);return o.slice(0,r)}},function(t,r){t.exports=function xor(t,r){for(var n=t.length,i=-1;++i<n;)t[i]^=r[i];return t}},function(t,r,n){var i=n(92),a=n(9).Buffer;t.exports=function withPublic(t,r){return a.from(t.toRed(i.mont(r.modulus)).redPow(new i(r.publicExponent)).fromRed().toArray())}},function(t,r,n){"use strict";var i=n(44);t.exports=function SchemaObject(t){i.copy(t,this)}},function(t,r,n){"use strict";t.exports=function(t,r){r||(r={}),"function"==typeof r&&(r={cmp:r});var n,i="boolean"==typeof r.cycles&&r.cycles,a=r.cmp&&(n=r.cmp,function(t){return function(r,i){var a={key:r,value:t[r]},o={key:i,value:t[i]};return n(a,o)}}),o=[];return function stringify(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,n;if(Array.isArray(t)){for(n="[",r=0;r<t.length;r++)r&&(n+=","),n+=stringify(t[r])||"null";return n+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,h=Object.keys(t).sort(a&&a(t));for(n="",r=0;r<h.length;r++){var l=h[r],c=stringify(t[l]);c&&(n&&(n+=","),n+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+n+"}"}}(t)}},function(t,r,n){"use strict";t.exports=function generate_validate(t,r,n){var i="",a=!0===t.schema.$async,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var h=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(h){var l="unknown keyword: "+h;if("log"!==t.opts.strictKeywords)throw new Error(l);t.logger.warn(l)}}if(t.isTop&&(i+=" var validate = ",a&&(t.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(i+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof t.schema||!o&&!t.schema.$ref){r="false schema";var c=t.level,d=t.dataLevel,p=t.schema[r],m=t.schemaPath+t.util.getProperty(r),g=t.errSchemaPath+"/"+r,y=!t.opts.allErrors,b="data"+(d||""),w="valid"+c;if(!1===t.schema){t.isTop?y=!0:i+=" var "+w+" = false; ",(ne=ne||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'boolean schema is false' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+b+" "),i+=" } "):i+=" {} ";var M=i;i=ne.pop(),!t.compositeRule&&y?t.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?i+=a?" return data; ":" validate.errors = null; return true; ":i+=" var "+w+" = true; ";return t.isTop&&(i+=" }; return validate; "),i}if(t.isTop){var _=t.isTop;c=t.level=0,d=t.dataLevel=0,b="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],void 0!==t.schema.default&&t.opts.useDefaults&&t.opts.strictDefaults){var x="default is ignored in the schema root";if("log"!==t.opts.strictDefaults)throw new Error(x);t.logger.warn(x)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{c=t.level,b="data"+((d=t.dataLevel)||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),a&&!t.async)throw new Error("async schema in sync schema");i+=" var errs_"+c+" = errors;"}w="valid"+c,y=!t.opts.allErrors;var A="",E="",B=t.schema.type,C=Array.isArray(B);if(B&&t.opts.nullable&&!0===t.schema.nullable&&(C?-1==B.indexOf("null")&&(B=B.concat("null")):"null"!=B&&(B=[B,"null"],C=!0)),C&&1==B.length&&(B=B[0],C=!1),t.schema.$ref&&o){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(i+=" "+t.RULES.all.$comment.code(t,"$comment")),B){if(t.opts.coerceTypes)var T=t.util.coerceToTypes(t.opts.coerceTypes,B);var D=t.RULES.types[B];if(T||C||!0===D||D&&!$shouldUseGroup(D)){m=t.schemaPath+".type",g=t.errSchemaPath+"/type",m=t.schemaPath+".type",g=t.errSchemaPath+"/type";var P=C?"checkDataTypes":"checkDataType";if(i+=" if ("+t.util[P](B,b,t.opts.strictNumbers,!0)+") { ",T){var L="dataType"+c,N="coerced"+c;i+=" var "+L+" = typeof "+b+"; var "+N+" = undefined; ","array"==t.opts.coerceTypes&&(i+=" if ("+L+" == 'object' && Array.isArray("+b+") && "+b+".length == 1) { "+b+" = "+b+"[0]; "+L+" = typeof "+b+"; if ("+t.util.checkDataType(t.schema.type,b,t.opts.strictNumbers)+") "+N+" = "+b+"; } "),i+=" if ("+N+" !== undefined) ; ";var F=T;if(F)for(var I,k=-1,O=F.length-1;k<O;)"string"==(I=F[k+=1])?i+=" else if ("+L+" == 'number' || "+L+" == 'boolean') "+N+" = '' + "+b+"; else if ("+b+" === null) "+N+" = ''; ":"number"==I||"integer"==I?(i+=" else if ("+L+" == 'boolean' || "+b+" === null || ("+L+" == 'string' && "+b+" && "+b+" == +"+b+" ","integer"==I&&(i+=" && !("+b+" % 1)"),i+=")) "+N+" = +"+b+"; "):"boolean"==I?i+=" else if ("+b+" === 'false' || "+b+" === 0 || "+b+" === null) "+N+" = false; else if ("+b+" === 'true' || "+b+" === 1) "+N+" = true; ":"null"==I?i+=" else if ("+b+" === '' || "+b+" === 0 || "+b+" === false) "+N+" = null; ":"array"==t.opts.coerceTypes&&"array"==I&&(i+=" else if ("+L+" == 'string' || "+L+" == 'number' || "+L+" == 'boolean' || "+b+" == null) "+N+" = ["+b+"]; ");i+=" else {   ",(ne=ne||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: { type: '",i+=C?""+B.join(","):""+B,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=C?""+B.join(","):""+B,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+b+" "),i+=" } "):i+=" {} ";M=i;i=ne.pop(),!t.compositeRule&&y?t.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+N+" !== undefined) {  ";var U=d?"data"+(d-1||""):"parentData";i+=" "+b+" = "+N+"; ",d||(i+="if ("+U+" !== undefined)"),i+=" "+U+"["+(d?t.dataPathArr[d]:"parentDataProperty")+"] = "+N+"; } "}else{(ne=ne||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: { type: '",i+=C?""+B.join(","):""+B,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=C?""+B.join(","):""+B,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+b+" "),i+=" } "):i+=" {} ";M=i;i=ne.pop(),!t.compositeRule&&y?t.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(t.schema.$ref&&!o)i+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",y&&(i+=" } if (errors === ",i+=_?"0":"errs_"+c,i+=") { ",E+="}");else{var z=t.RULES;if(z)for(var V=-1,j=z.length-1;V<j;)if($shouldUseGroup(D=z[V+=1])){if(D.type&&(i+=" if ("+t.util.checkDataType(D.type,b,t.opts.strictNumbers)+") { "),t.opts.useDefaults)if("object"==D.type&&t.schema.properties){p=t.schema.properties;var H=Object.keys(p);if(H)for(var G,W=-1,q=H.length-1;W<q;){if(void 0!==(Y=p[G=H[W+=1]]).default){var Q=b+t.util.getProperty(G);if(t.compositeRule){if(t.opts.strictDefaults){x="default is ignored for: "+Q;if("log"!==t.opts.strictDefaults)throw new Error(x);t.logger.warn(x)}}else i+=" if ("+Q+" === undefined ","empty"==t.opts.useDefaults&&(i+=" || "+Q+" === null || "+Q+" === '' "),i+=" ) "+Q+" = ","shared"==t.opts.useDefaults?i+=" "+t.useDefault(Y.default)+" ":i+=" "+JSON.stringify(Y.default)+" ",i+="; "}}}else if("array"==D.type&&Array.isArray(t.schema.items)){var X=t.schema.items;if(X){k=-1;for(var Y,J=X.length-1;k<J;)if(void 0!==(Y=X[k+=1]).default){Q=b+"["+k+"]";if(t.compositeRule){if(t.opts.strictDefaults){x="default is ignored for: "+Q;if("log"!==t.opts.strictDefaults)throw new Error(x);t.logger.warn(x)}}else i+=" if ("+Q+" === undefined ","empty"==t.opts.useDefaults&&(i+=" || "+Q+" === null || "+Q+" === '' "),i+=" ) "+Q+" = ","shared"==t.opts.useDefaults?i+=" "+t.useDefault(Y.default)+" ":i+=" "+JSON.stringify(Y.default)+" ",i+="; "}}}var Z=D.rules;if(Z)for(var $,ee=-1,te=Z.length-1;ee<te;)if($shouldUseRule($=Z[ee+=1])){var re=$.code(t,$.keyword,D.type);re&&(i+=" "+re+" ",y&&(A+="}"))}if(y&&(i+=" "+A+" ",A=""),D.type&&(i+=" } ",B&&B===D.type&&!T)){i+=" else { ";var ne;m=t.schemaPath+".type",g=t.errSchemaPath+"/type";(ne=ne||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(g)+" , params: { type: '",i+=C?""+B.join(","):""+B,i+="' } ",!1!==t.opts.messages&&(i+=" , message: 'should be ",i+=C?""+B.join(","):""+B,i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+m+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+b+" "),i+=" } "):i+=" {} ";M=i;i=ne.pop(),!t.compositeRule&&y?t.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}y&&(i+=" if (errors === ",i+=_?"0":"errs_"+c,i+=") { ",E+="}")}}function $shouldUseGroup(t){for(var r=t.rules,n=0;n<r.length;n++)if($shouldUseRule(r[n]))return!0}function $shouldUseRule(r){return void 0!==t.schema[r.keyword]||r.implements&&function $ruleImplementsSomeKeyword(r){for(var n=r.implements,i=0;i<n.length;i++)if(void 0!==t.schema[n[i]])return!0}(r)}return y&&(i+=" "+E+" "),_?(a?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+w+" = errors === errs_"+c+";",i}},function(t,r,n){"use strict";t.exports=function generate__limit(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h;var g="maximum"==r,y=g?"exclusiveMaximum":"exclusiveMinimum",b=t.schema[y],w=t.opts.$data&&b&&b.$data,M=g?"<":">",_=g?">":"<",x=void 0;if(!m&&"number"!=typeof h&&void 0!==h)throw new Error(r+" must be number");if(!w&&void 0!==b&&"number"!=typeof b&&"boolean"!=typeof b)throw new Error(y+" must be number or boolean");if(w){var A=t.util.getData(b.$data,s,t.dataPathArr),E="exclusive"+o,B="exclType"+o,C="exclIsNumber"+o,T="' + "+(L="op"+o)+" + '";a+=" var schemaExcl"+o+" = "+A+"; ",a+=" var "+E+"; var "+B+" = typeof "+(A="schemaExcl"+o)+"; if ("+B+" != 'boolean' && "+B+" != 'undefined' && "+B+" != 'number') { ";var D;x=y;(D=D||[]).push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(x||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",!1!==t.opts.messages&&(a+=" , message: '"+y+" should be boolean' "),t.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var P=a;a=D.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } else if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+B+" == 'number' ? ( ("+E+" = "+i+" === undefined || "+A+" "+M+"= "+i+") ? "+p+" "+_+"= "+A+" : "+p+" "+_+" "+i+" ) : ( ("+E+" = "+A+" === true) ? "+p+" "+_+"= "+i+" : "+p+" "+_+" "+i+" ) || "+p+" !== "+p+") { var op"+o+" = "+E+" ? '"+M+"' : '"+M+"='; ",void 0===h&&(x=y,c=t.errSchemaPath+"/"+y,i=A,m=w)}else{T=M;if((C="number"==typeof b)&&m){var L="'"+T+"'";a+=" if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" ( "+i+" === undefined || "+b+" "+M+"= "+i+" ? "+p+" "+_+"= "+b+" : "+p+" "+_+" "+i+" ) || "+p+" !== "+p+") { "}else{C&&void 0===h?(E=!0,x=y,c=t.errSchemaPath+"/"+y,i=b,_+="="):(C&&(i=Math[g?"min":"max"](b,h)),b===(!C||i)?(E=!0,x=y,c=t.errSchemaPath+"/"+y,_+="="):(E=!1,T+="="));L="'"+T+"'";a+=" if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+p+" "+_+" "+i+" || "+p+" !== "+p+") { "}}x=x||r,(D=D||[]).push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(x||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { comparison: "+L+", limit: "+i+", exclusive: "+E+" } ",!1!==t.opts.messages&&(a+=" , message: 'should be "+T+" ",a+=m?"' + "+i:i+"'"),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";P=a;return a=D.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+P+"]); ":a+=" validate.errors = ["+P+"]; return false; ":a+=" var err = "+P+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",d&&(a+=" else { "),a}},function(t,r,n){"use strict";t.exports=function generate__limitItems(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;if(m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,!m&&"number"!=typeof h)throw new Error(r+" must be number");a+="if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" "+p+".length "+("maxItems"==r?">":"<")+" "+i+") { ";var g=r,y=y||[];y.push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(g||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxItems"==r?"more":"fewer",a+=" than ",a+=m?"' + "+i+" + '":""+h,a+=" items' "),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var b=a;return a=y.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},function(t,r,n){"use strict";t.exports=function generate__limitLength(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;if(m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,!m&&"number"!=typeof h)throw new Error(r+" must be number");var g="maxLength"==r?">":"<";a+="if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),!1===t.opts.unicode?a+=" "+p+".length ":a+=" ucs2length("+p+") ",a+=" "+g+" "+i+") { ";var y=r,b=b||[];b.push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(y||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(a+=" , message: 'should NOT be ",a+="maxLength"==r?"longer":"shorter",a+=" than ",a+=m?"' + "+i+" + '":""+h,a+=" characters' "),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var w=a;return a=b.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+w+"]); ":a+=" validate.errors = ["+w+"]; return false; ":a+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},function(t,r,n){"use strict";t.exports=function generate__limitProperties(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;if(m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,!m&&"number"!=typeof h)throw new Error(r+" must be number");a+="if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'number') || "),a+=" Object.keys("+p+").length "+("maxProperties"==r?">":"<")+" "+i+") { ";var g=r,y=y||[];y.push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(g||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+i+" } ",!1!==t.opts.messages&&(a+=" , message: 'should NOT have ",a+="maxProperties"==r?"more":"fewer",a+=" than ",a+=m?"' + "+i+" + '":""+h,a+=" properties' "),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var b=a;return a=y.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+b+"]); ":a+=" validate.errors = ["+b+"]; return false; ":a+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(t,r,n){"use strict";var i=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,a=/t|\s/i,o={date:compareDate,time:compareTime,"date-time":function compareDateTime(t,r){if(!t||!r)return;t=t.split(a),r=r.split(a);var n=compareDate(t[0],r[0]);if(void 0===n)return;return n||compareTime(t[1],r[1])}},s={type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function compareDate(t,r){if(t&&r)return t>r?1:t<r?-1:t===r?0:void 0}function compareTime(t,r){if(t&&r&&(t=t.match(i),r=r.match(i),t&&r))return(t=t[1]+t[2]+t[3]+(t[4]||""))>(r=r[1]+r[2]+r[3]+(r[4]||""))?1:t<r?-1:t===r?0:void 0}t.exports=function(t){var r="format"+t;return function defFunc(i){return defFunc.definition={type:"string",inline:n(342),statements:!0,errors:"full",dependencies:["format"],metaSchema:{anyOf:[{type:"string"},s]}},i.addKeyword(r,defFunc.definition),i.addKeyword("formatExclusive"+t,{dependencies:["format"+t],metaSchema:{anyOf:[{type:"boolean"},s]}}),function extendFormats(t){var r=t._formats;for(var n in o){var i=r[n];("object"!=typeof i||i instanceof RegExp||!i.validate)&&(i=r[n]={validate:i}),i.compare||(i.compare=o[n])}}(i),i}}},function(t,r){t.exports=function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(101),a=n(352);function _construct(r,n,o){return a()?(t.exports=_construct=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=_construct=function _construct(t,r,n){var a=[null];a.push.apply(a,r);var o=new(Function.bind.apply(t,a));return n&&i(o,n.prototype),o},t.exports.default=t.exports,t.exports.__esModule=!0),_construct.apply(null,arguments)}t.exports=_construct,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){"use strict";r.a=function stubFalse(){return!1}},function(t,r,n){"use strict";(function(t){var i=n(15),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?i.a.Buffer:void 0,h=s?s.allocUnsafe:void 0;r.a=function cloneBuffer(t,r){if(r)return t.slice();var n=t.length,i=h?h(n):new t.constructor(n);return t.copy(i),i}}).call(this,n(97)(t))},function(t,r,n){"use strict";n.r(r);var i=n(57),a=n.n(i),o=n(4),s=n.n(o),h=n(6),l=n.n(h),c=n(2),d=n.n(c),p=n(7),m=n.n(p),g=n(8),y=n.n(g),b=n(3),w=n.n(b),M=n(0),_=n.n(M),x=n(30),A=n.n(x),E=n(1);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var B=["sb_bg_a","sb_bg_b","sb_bg_c","sb_bg_d"],C=function(t){m()(MainView,t);var r=_createSuper(MainView);function MainView(t){var n;s()(this,MainView),n=r.call(this,t);var i="@".concat(B[Math.floor(Math.random()*B.length)]);return console.log(i),n.setup_components([{name:"SceneComponent",enabled:!0},{name:"CameraComponent",enabled:!0},{name:"ClockComponent",enabled:!0},{name:"RendererComponent",enabled:!0},{name:"MeshComponent",ref:"background",params:{render_order:4,geometry:["PlaneBufferGeometry",[1,1,1]],material_id:"background/body",material:[i,{uniforms:{}}],position:[0,0,.001],frustum_culled:!1}},{name:"UserPointer",params:{events:["move","over","out","down","up","scroll"],raycasting:!0}},{enabled:!0,name:"Animator"}]),n.globals.uniforms.bc.value.x=-1,n.refs.Animator.animate("loading",{duration:5,ease:"ease_in_cubic",values:{"globals.uniforms.bc.value.x":0}}),n.refs.background.mesh.material.uniforms.map.value=AssetManager.load_texture(n.globals.background_image),n.refs.background.mesh.material.uniforms.map.needsUpdate=!0,n.refs.SceneComponent.add(d()(n)),n}return MainView}(E.Group),T=(n(36),n(382),function(){function Stats(){s()(this,Stats),_()(this,"enabled",!0),this.dom=document.createElement("div"),this.dom.style.background="rgba(0,0,0,0.5)",this.dom.style.position="absolute",this.dom.style.display="none",this.dom.style.flexDirection="column",this.dom.style.zIndex="11111",this.dom.style.minWidth="32px",this.dom.style.minHeight="32px",this.dom.style.left="16px",this.dom.style.bottom="16px",this.dom.style.opacity="0.666",this.dom.style.pointerEvents="none",this.dom.classList.add("3hm-stats"),document.body.appendChild(this.dom),this.lines={}}return l()(Stats,[{key:"add_line",value:function add_line(t){var r=document.createElement("p");r.style.color="#fff",r.style.fontFamily="monospace",r.style.fontSize="10px",r.style.margin="0.25em",this.lines[t]=r,this.dom.appendChild(r)}},{key:"update",value:function update(t,r){this.enabled&&(this.lines[t]||this.add_line(t),this.lines[t].innerHTML="[".concat(t,"]: ").concat(r))}},{key:"set_enabled",value:function set_enabled(t){this.enabled=t,this.enabled?this.dom.style.display="flex":this.dom.style.display="none"}}]),Stats}()),D=function(){function Data(t,r){s()(this,Data),_()(this,"value",void 0),_()(this,"cahed_value",void 0),_()(this,"request_id",0),_()(this,"throttle",1),_()(this,"changed",!0),this.throttle=null!=r?r:1,this.value=t}return l()(Data,[{key:"set",value:function set(t){this.value=t}},{key:"get",value:function get(t){var r=this.cached_value;return 1!==this.throttle&&this.request_id%this.throttle!=0||(r=this.value(this.changed),this.changed=r!==this.cached_value,this.cached_value=r),this.request_id++,r}},{key:"valueOf",value:function valueOf(){return this.get()}}]),Data}(),P=n(69),L=n(10);function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function HexMap_createSuper(t){var r=function HexMap_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var N=function(t){m()(HexMap,t);var r,n=HexMap_createSuper(HexMap);function HexMap(t){var r,i;for(var a in s()(this,HexMap),i=n.call(this),_()(d()(i),"dom",null),_()(d()(i),"globals",(r={rendering_mode:0,cell_scale:.75,tick_skip:1,_need_render:!0,focused_cells_group:0,get need_render(){return this._need_render},set need_render(t){this._need_render=t},rendering_postprocessing:!0,rendering_antialias:!0,dom_bounding_rect:{left:0,top:0,width:1,height:1},show_stats:!1,navigation_bounds:[-100,-100,200,200],initial_position:[0,0],zoom_range:[1.5,12],loading_icon_texture:"res/loading.png",uniforms:{bc:{value:new E.Vector2(0,1),type:"v2"},time:{value:0,type:"f"},iTime:{value:0,type:"f"},resolution:{value:new E.Vector2(1,1),type:"v2"},iResolution:{value:new E.Vector2(1,1),type:"v2"},pixel_ratio:{value:window.devicePixelRatio,type:"f"},mouse:{value:new E.Vector2(0,0),type:"v2"},iMouse:{value:new E.Vector2(0,0),type:"v2"},camera_pos:{value:new E.Vector3,type:"v3"}},cells_update_chunks_size:30,callbacks:{get_cells_data:function get_cells_data(){HexMap.log('callbacks "get_cells_data" needs to be passed with params object')}},raycaster:new E.Raycaster,dom:null,get resolution(){return this.uniforms.resolution.value},get pixel_ratio(){return this.uniforms.pixel_ratio.value},get mouse(){return this.uniforms.mouse.value}},_()(r,"mouse",null),_()(r,"log",i.log),_()(r,"cell_caption_bg_image","res/caption_bg.png"),r)),_()(d()(i),"stats",new T),t=function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){_()(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({outline:!0,callbacks:{}},t))i.globals[a]=t[a];return i.stats.set_enabled(!1),i.dom=i.globals.dom=document.createElement("div"),i.dom.style.width="100%",i.dom.style.height="100%",i.dom.style.position="absolute",i.dom.classList.add("app"),i.globals.uniforms.iResolution.value=i.globals.uniforms.resolution.value,i.globals.uniforms.iTime.value=i.globals.uniforms.time.value,i.globals.uniforms.iMouse.value=i.globals.uniforms.mouse.value,i.globals.app=d()(i),i.globals.wait=i.wait,i.globals.stats=i.stats,E.Object3D.global_tick_skip=new D((function(){return i.globals.tick_skip})),E.Object3D.patch_props=function(t){t.app=d()(i),t.globals=i.globals},L.a.patch_props=function(t){t.app=d()(i),t.globals=i.globals},E.Material.patch_uniforms=function(t,r){var n=function _loop(r){t[r]={type:i.globals.uniforms[r].type,value:new D((function(){return i.globals.uniforms[r].value}),4)}};for(var a in i.globals.uniforms)n(a);t.object_position={type:"v3",value:new D((function(){return r.position}))}},i.init(),i}return l()(HexMap,[{key:"init",value:(r=a()(A.a.mark((function _callee(){return A.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:this.main_view=new C,this.globals.main_view=this.main_view,this.log("HexMap","initialized");case 3:case"end":return t.stop()}}),_callee,this)}))),function init(){return r.apply(this,arguments)})},{key:"wait",value:function wait(t){return new Promise((function(r){setTimeout((function(){r()}),t)}))}},{key:"set_param",value:function set_param(t,r){this.globals[t]=r}},{key:"set_zoom",value:function set_zoom(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.main_view.refs.tile_map.set_relative_zoom(t)}},{key:"animate_zoom",value:function animate_zoom(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.main_view.refs.tile_map.animate_relative_zoom(t,r)}},{key:"set_position",value:function set_position(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.main_view.grid_to_world(t,r);this.main_view.refs.tile_map.set_position(n[0],n[1])}},{key:"animate_position",value:function animate_position(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.main_view.grid_to_world(t,r);this.main_view.refs.tile_map.animate_position(i[0],i[1],n)}},{key:"set_mode",value:function set_mode(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.main_view.set_mode(t)}},{key:"update",value:function update(){this.main_view.update()}},{key:"set_focused_cells_group",value:function set_focused_cells_group(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.globals.focused_cells_group=t}},{key:"focus_cell",value:function focus_cell(t,r){this.main_view.focus_cell(t,r)}},{key:"zoom_in",value:function zoom_in(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.main_view.zoom_in(t)}},{key:"zoom_out",value:function zoom_out(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.main_view.zoom_out(t)}}]),HexMap}(P.a);r.default=N},function(t,r,n){var i=function(t){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",h=a.toStringTag||"@@toStringTag";function define(t,r,n){return Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function(t,r,n){return t[r]=n}}function wrap(t,r,n,i){var a=r&&r.prototype instanceof Generator?r:Generator,o=Object.create(a.prototype),s=new Context(i||[]);return o._invoke=function makeInvokeMethod(t,r,n){var i=l;return function invoke(a,o){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===a)throw o;return doneResult()}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var h=maybeInvokeDelegate(s,n);if(h){if(h===m)continue;return h}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var g=tryCatch(t,r,n);if("normal"===g.type){if(i=n.done?p:c,g.arg===m)continue;return{value:g.arg,done:n.done}}"throw"===g.type&&(i=p,n.method="throw",n.arg=g.arg)}}}(t,n,s),o}function tryCatch(t,r,n){try{return{type:"normal",arg:t.call(r,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var l="suspendedStart",c="suspendedYield",d="executing",p="completed",m={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var g={};define(g,o,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(values([])));b&&b!==n&&i.call(b,o)&&(g=b);var w=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(g);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(n,a,o,s){var h=tryCatch(t[n],t,a);if("throw"!==h.type){var l=h.arg,c=l.value;return c&&"object"==typeof c&&i.call(c,"__await")?r.resolve(c.__await).then((function(t){invoke("next",t,o,s)}),(function(t){invoke("throw",t,o,s)})):r.resolve(c).then((function(t){l.value=t,o(l)}),(function(t){return invoke("throw",t,o,s)}))}s(h.arg)}var n;this._invoke=function enqueue(t,i){function callInvokeWithMethodAndArg(){return new r((function(r,n){invoke(t,i,r,n)}))}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var i=t.iterator[n.method];if(i===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,maybeInvokeDelegate(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=tryCatch(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,s=function next(){for(;++a<t.length;)if(i.call(t,a))return next.value=t[a],next.done=!1,next;return next.value=r,next.done=!0,next};return s.next=s}}return{next:doneResult}}function doneResult(){return{value:r,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(w,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,s,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(r,n,i,a,o){void 0===o&&(o=Promise);var s=new AsyncIterator(wrap(r,n,i,a),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},defineIteratorMethods(w),define(w,h,"Generator"),define(w,o,(function(){return this})),define(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var n in t)r.push(n);return r.reverse(),function next(){for(;r.length;){var n=r.pop();if(n in t)return next.value=n,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function handle(i,a){return s.type="throw",s.arg=t,n.next=i,a&&(n.method="next",n.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var h=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(h&&l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=r,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),m},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),m}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var a=i.arg;resetTryEntry(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:values(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=r),m}},t}(t.exports);try{regeneratorRuntime=i}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function loader(t){const r=(0,a.getOptions)(this);(0,o.validate)(s.default,r,{name:"File Loader",baseDataPath:"options"});const n=r.context||this.rootContext,l=r.name||"[contenthash].[ext]",c=(0,a.interpolateName)(this,l,{context:n,content:t,regExp:r.regExp});let d=c;r.outputPath&&(d="function"==typeof r.outputPath?r.outputPath(c,this.resourcePath,n):i.default.posix.join(r.outputPath,c));let p=`__webpack_public_path__ + ${JSON.stringify(d)}`;r.publicPath&&(p="function"==typeof r.publicPath?r.publicPath(c,this.resourcePath,n):`${r.publicPath.endsWith("/")?r.publicPath:`${r.publicPath}/`}${c}`,p=JSON.stringify(p));r.postTransformPublicPath&&(p=r.postTransformPublicPath(p));if(void 0===r.emitFile||r.emitFile){const r={};if("string"==typeof l){let t=l;const n=t.indexOf("?");n>=0&&(t=t.substr(0,n));!0===/\[([^:\]]+:)?(hash|contenthash)(:[^\]]+)?]/gi.test(t)&&(r.immutable=!0)}r.sourceFilename=(0,h.normalizePath)(i.default.relative(this.rootContext,this.resourcePath)),this.emitFile(d,t,null,r)}return`${void 0===r.esModule||r.esModule?"export default":"module.exports ="} ${p};`},r.raw=void 0;var i=_interopRequireDefault(n(59)),a=n(174),o=n(287),s=_interopRequireDefault(n(350)),h=n(351);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}r.raw=!0},function(t,r,n){"use strict";const i=n(175),a=n(103),o=n(177),s=n(178),h=n(179),l=n(180),c=n(181),d=n(182),p=n(104),m=n(285);r.getOptions=i,r.parseQuery=a,r.stringifyRequest=o,r.getRemainingRequest=s,r.getCurrentRequest=h,r.isUrlRequest=l,r.urlToRequest=c,r.parseString=d,r.getHashDigest=p,r.interpolateName=m},function(t,r,n){"use strict";const i=n(103);t.exports=function getOptions(t){const r=t.query;return"string"==typeof r&&""!==r?i(t.query):r&&"object"==typeof r?r:{}}},function(t,r,n){t.exports=function(){"use strict";function createCommonjsModule(t,r){return t(r={exports:{}},r.exports),r.exports}var t=createCommonjsModule((function(t){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)})),r=createCommonjsModule((function(t){var r=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=r)})),n=(r.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),_anObject=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t},_fails=function(t){try{return!!t()}catch(t){return!0}},i=!_fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),a=t.document,o=n(a)&&n(a.createElement),_domCreate=function(t){return o?a.createElement(t):{}},s=!i&&!_fails((function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a})),_toPrimitive=function(t,r){if(!n(t))return t;var i,a;if(r&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;if("function"==typeof(i=t.valueOf)&&!n(a=i.call(t)))return a;if(!r&&"function"==typeof(i=t.toString)&&!n(a=i.call(t)))return a;throw TypeError("Can't convert object to primitive value")},h=Object.defineProperty,l={f:i?Object.defineProperty:function defineProperty(t,r,n){if(_anObject(t),r=_toPrimitive(r,!0),_anObject(n),s)try{return h(t,r,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}},_propertyDesc=function(t,r){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:r}},c=i?function(t,r,n){return l.f(t,r,_propertyDesc(1,n))}:function(t,r,n){return t[r]=n,t},d={}.hasOwnProperty,_has=function(t,r){return d.call(t,r)},p=0,m=Math.random(),_uid=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++p+m).toString(36))},g=!1,y=createCommonjsModule((function(n){var i="__core-js_shared__",a=t[i]||(t[i]={});(n.exports=function(t,r){return a[t]||(a[t]=void 0!==r?r:{})})("versions",[]).push({version:r.version,mode:g?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})}))("native-function-to-string",Function.toString),b=createCommonjsModule((function(n){var i=_uid("src"),a="toString",o=(""+y).split(a);r.inspectSource=function(t){return y.call(t)},(n.exports=function(r,n,a,s){var h="function"==typeof a;h&&(_has(a,"name")||c(a,"name",n)),r[n]!==a&&(h&&(_has(a,i)||c(a,i,r[n]?""+r[n]:o.join(String(n)))),r===t?r[n]=a:s?r[n]?r[n]=a:c(r,n,a):(delete r[n],c(r,n,a)))})(Function.prototype,a,(function toString(){return"function"==typeof this&&this[i]||y.call(this)}))})),_aFunction=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},_ctx=function(t,r,n){if(_aFunction(t),void 0===r)return t;switch(n){case 1:return function(n){return t.call(r,n)};case 2:return function(n,i){return t.call(r,n,i)};case 3:return function(n,i,a){return t.call(r,n,i,a)}}return function(){return t.apply(r,arguments)}},w="prototype",$export=function(n,i,a){var o,s,h,l,d=n&$export.F,p=n&$export.G,m=n&$export.S,g=n&$export.P,y=n&$export.B,M=p?t:m?t[i]||(t[i]={}):(t[i]||{})[w],_=p?r:r[i]||(r[i]={}),x=_[w]||(_[w]={});for(o in p&&(a=i),a)h=((s=!d&&M&&void 0!==M[o])?M:a)[o],l=y&&s?_ctx(h,t):g&&"function"==typeof h?_ctx(Function.call,h):h,M&&b(M,o,h,n&$export.U),_[o]!=h&&c(_,o,l),g&&x[o]!=h&&(x[o]=h)};t.core=r,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var M,_=$export,x=Math.ceil,A=Math.floor,_toInteger=function(t){return isNaN(t=+t)?0:(t>0?A:x)(t)},_defined=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},E=(M=!1,function(t,r){var n,i,a=String(_defined(t)),o=_toInteger(r),s=a.length;return o<0||o>=s?M?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?M?a.charAt(o):n:M?a.slice(o,o+2):i-56320+(n-55296<<10)+65536});_(_.P,"String",{codePointAt:function codePointAt(t){return E(this,t)}}),r.String.codePointAt;var B=Math.max,C=Math.min,_toAbsoluteIndex=function(t,r){return(t=_toInteger(t))<0?B(t+r,0):C(t,r)},T=String.fromCharCode,D=String.fromCodePoint;_(_.S+_.F*(!!D&&1!=D.length),"String",{fromCodePoint:function fromCodePoint(t){for(var r,n=arguments,i=[],a=arguments.length,o=0;a>o;){if(r=+n[o++],_toAbsoluteIndex(r,1114111)!==r)throw RangeError(r+" is not a valid code point");i.push(r<65536?T(r):T(55296+((r-=65536)>>10),r%1024+56320))}return i.join("")}}),r.String.fromCodePoint;var P,L,N,F,I,k,O,U,z,V,j,H,G,W,q={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},Q={isSpaceSeparator:function isSpaceSeparator(t){return"string"==typeof t&&q.Space_Separator.test(t)},isIdStartChar:function isIdStartChar(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||"$"===t||"_"===t||q.ID_Start.test(t))},isIdContinueChar:function isIdContinueChar(t){return"string"==typeof t&&(t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"$"===t||"_"===t||""===t||""===t||q.ID_Continue.test(t))},isDigit:function isDigit(t){return"string"==typeof t&&/[0-9]/.test(t)},isHexDigit:function isHexDigit(t){return"string"==typeof t&&/[0-9A-Fa-f]/.test(t)}},X=function parse(t,r){P=String(t),L="start",N=[],F=0,I=1,k=0,O=void 0,U=void 0,z=void 0;do{O=lex(),J[L]()}while("eof"!==O.type);return"function"==typeof r?internalize({"":z},"",r):z};function internalize(t,r,n){var i=t[r];if(null!=i&&"object"==typeof i)for(var a in i){var o=internalize(i,a,n);void 0===o?delete i[a]:i[a]=o}return n.call(t,r,i)}function lex(){for(V="default",j="",H=!1,G=1;;){W=peek();var t=Y[V]();if(t)return t}}function peek(){if(P[F])return String.fromCodePoint(P.codePointAt(F))}function read(){var t=peek();return"\n"===t?(I++,k=0):t?k+=t.length:k++,t&&(F+=t.length),t}var Y={default:function default$1(){switch(W){case"\t":case"\v":case"\f":case" ":case"":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void read();case"/":return read(),void(V="comment");case void 0:return read(),newToken("eof")}if(!Q.isSpaceSeparator(W))return Y[L]();read()},comment:function comment(){switch(W){case"*":return read(),void(V="multiLineComment");case"/":return read(),void(V="singleLineComment")}throw invalidChar(read())},multiLineComment:function multiLineComment(){switch(W){case"*":return read(),void(V="multiLineCommentAsterisk");case void 0:throw invalidChar(read())}read()},multiLineCommentAsterisk:function multiLineCommentAsterisk(){switch(W){case"*":return void read();case"/":return read(),void(V="default");case void 0:throw invalidChar(read())}read(),V="multiLineComment"},singleLineComment:function singleLineComment(){switch(W){case"\n":case"\r":case"\u2028":case"\u2029":return read(),void(V="default");case void 0:return read(),newToken("eof")}read()},value:function value(){switch(W){case"{":case"[":return newToken("punctuator",read());case"n":return read(),literal("ull"),newToken("null",null);case"t":return read(),literal("rue"),newToken("boolean",!0);case"f":return read(),literal("alse"),newToken("boolean",!1);case"-":case"+":return"-"===read()&&(G=-1),void(V="sign");case".":return j=read(),void(V="decimalPointLeading");case"0":return j=read(),void(V="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return j=read(),void(V="decimalInteger");case"I":return read(),literal("nfinity"),newToken("numeric",1/0);case"N":return read(),literal("aN"),newToken("numeric",NaN);case'"':case"'":return H='"'===read(),j="",void(V="string")}throw invalidChar(read())},identifierNameStartEscape:function identifierNameStartEscape(){if("u"!==W)throw invalidChar(read());read();var t=unicodeEscape();switch(t){case"$":case"_":break;default:if(!Q.isIdStartChar(t))throw invalidIdentifier()}j+=t,V="identifierName"},identifierName:function identifierName(){switch(W){case"$":case"_":case"":case"":return void(j+=read());case"\\":return read(),void(V="identifierNameEscape")}if(!Q.isIdContinueChar(W))return newToken("identifier",j);j+=read()},identifierNameEscape:function identifierNameEscape(){if("u"!==W)throw invalidChar(read());read();var t=unicodeEscape();switch(t){case"$":case"_":case"":case"":break;default:if(!Q.isIdContinueChar(t))throw invalidIdentifier()}j+=t,V="identifierName"},sign:function sign$1(){switch(W){case".":return j=read(),void(V="decimalPointLeading");case"0":return j=read(),void(V="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return j=read(),void(V="decimalInteger");case"I":return read(),literal("nfinity"),newToken("numeric",G*(1/0));case"N":return read(),literal("aN"),newToken("numeric",NaN)}throw invalidChar(read())},zero:function zero(){switch(W){case".":return j+=read(),void(V="decimalPoint");case"e":case"E":return j+=read(),void(V="decimalExponent");case"x":case"X":return j+=read(),void(V="hexadecimal")}return newToken("numeric",0*G)},decimalInteger:function decimalInteger(){switch(W){case".":return j+=read(),void(V="decimalPoint");case"e":case"E":return j+=read(),void(V="decimalExponent")}if(!Q.isDigit(W))return newToken("numeric",G*Number(j));j+=read()},decimalPointLeading:function decimalPointLeading(){if(Q.isDigit(W))return j+=read(),void(V="decimalFraction");throw invalidChar(read())},decimalPoint:function decimalPoint(){switch(W){case"e":case"E":return j+=read(),void(V="decimalExponent")}return Q.isDigit(W)?(j+=read(),void(V="decimalFraction")):newToken("numeric",G*Number(j))},decimalFraction:function decimalFraction(){switch(W){case"e":case"E":return j+=read(),void(V="decimalExponent")}if(!Q.isDigit(W))return newToken("numeric",G*Number(j));j+=read()},decimalExponent:function decimalExponent(){switch(W){case"+":case"-":return j+=read(),void(V="decimalExponentSign")}if(Q.isDigit(W))return j+=read(),void(V="decimalExponentInteger");throw invalidChar(read())},decimalExponentSign:function decimalExponentSign(){if(Q.isDigit(W))return j+=read(),void(V="decimalExponentInteger");throw invalidChar(read())},decimalExponentInteger:function decimalExponentInteger(){if(!Q.isDigit(W))return newToken("numeric",G*Number(j));j+=read()},hexadecimal:function hexadecimal(){if(Q.isHexDigit(W))return j+=read(),void(V="hexadecimalInteger");throw invalidChar(read())},hexadecimalInteger:function hexadecimalInteger(){if(!Q.isHexDigit(W))return newToken("numeric",G*Number(j));j+=read()},string:function string(){switch(W){case"\\":return read(),void(j+=escape());case'"':return H?(read(),newToken("string",j)):void(j+=read());case"'":return H?void(j+=read()):(read(),newToken("string",j));case"\n":case"\r":throw invalidChar(read());case"\u2028":case"\u2029":separatorChar(W);break;case void 0:throw invalidChar(read())}j+=read()},start:function start(){switch(W){case"{":case"[":return newToken("punctuator",read())}V="value"},beforePropertyName:function beforePropertyName(){switch(W){case"$":case"_":return j=read(),void(V="identifierName");case"\\":return read(),void(V="identifierNameStartEscape");case"}":return newToken("punctuator",read());case'"':case"'":return H='"'===read(),void(V="string")}if(Q.isIdStartChar(W))return j+=read(),void(V="identifierName");throw invalidChar(read())},afterPropertyName:function afterPropertyName(){if(":"===W)return newToken("punctuator",read());throw invalidChar(read())},beforePropertyValue:function beforePropertyValue(){V="value"},afterPropertyValue:function afterPropertyValue(){switch(W){case",":case"}":return newToken("punctuator",read())}throw invalidChar(read())},beforeArrayValue:function beforeArrayValue(){if("]"===W)return newToken("punctuator",read());V="value"},afterArrayValue:function afterArrayValue(){switch(W){case",":case"]":return newToken("punctuator",read())}throw invalidChar(read())},end:function end(){throw invalidChar(read())}};function newToken(t,r){return{type:t,value:r,line:I,column:k}}function literal(t){for(var r=0,n=t;r<n.length;r+=1){var i=n[r];if(peek()!==i)throw invalidChar(read());read()}}function escape(){switch(peek()){case"b":return read(),"\b";case"f":return read(),"\f";case"n":return read(),"\n";case"r":return read(),"\r";case"t":return read(),"\t";case"v":return read(),"\v";case"0":if(read(),Q.isDigit(peek()))throw invalidChar(read());return"\0";case"x":return read(),hexEscape();case"u":return read(),unicodeEscape();case"\n":case"\u2028":case"\u2029":return read(),"";case"\r":return read(),"\n"===peek()&&read(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw invalidChar(read())}return read()}function hexEscape(){var t="",r=peek();if(!Q.isHexDigit(r))throw invalidChar(read());if(t+=read(),r=peek(),!Q.isHexDigit(r))throw invalidChar(read());return t+=read(),String.fromCodePoint(parseInt(t,16))}function unicodeEscape(){for(var t="",r=4;r-- >0;){var n=peek();if(!Q.isHexDigit(n))throw invalidChar(read());t+=read()}return String.fromCodePoint(parseInt(t,16))}var J={start:function start(){if("eof"===O.type)throw invalidEOF();push()},beforePropertyName:function beforePropertyName(){switch(O.type){case"identifier":case"string":return U=O.value,void(L="afterPropertyName");case"punctuator":return void pop();case"eof":throw invalidEOF()}},afterPropertyName:function afterPropertyName(){if("eof"===O.type)throw invalidEOF();L="beforePropertyValue"},beforePropertyValue:function beforePropertyValue(){if("eof"===O.type)throw invalidEOF();push()},beforeArrayValue:function beforeArrayValue(){if("eof"===O.type)throw invalidEOF();"punctuator"!==O.type||"]"!==O.value?push():pop()},afterPropertyValue:function afterPropertyValue(){if("eof"===O.type)throw invalidEOF();switch(O.value){case",":return void(L="beforePropertyName");case"}":pop()}},afterArrayValue:function afterArrayValue(){if("eof"===O.type)throw invalidEOF();switch(O.value){case",":return void(L="beforeArrayValue");case"]":pop()}},end:function end(){}};function push(){var t;switch(O.type){case"punctuator":switch(O.value){case"{":t={};break;case"[":t=[]}break;case"null":case"boolean":case"numeric":case"string":t=O.value}if(void 0===z)z=t;else{var r=N[N.length-1];Array.isArray(r)?r.push(t):r[U]=t}if(null!==t&&"object"==typeof t)N.push(t),L=Array.isArray(t)?"beforeArrayValue":"beforePropertyName";else{var n=N[N.length-1];L=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function pop(){N.pop();var t=N[N.length-1];L=null==t?"end":Array.isArray(t)?"afterArrayValue":"afterPropertyValue"}function invalidChar(t){return syntaxError(void 0===t?"JSON5: invalid end of input at "+I+":"+k:"JSON5: invalid character '"+formatChar(t)+"' at "+I+":"+k)}function invalidEOF(){return syntaxError("JSON5: invalid end of input at "+I+":"+k)}function invalidIdentifier(){return syntaxError("JSON5: invalid identifier character at "+I+":"+(k-=5))}function separatorChar(t){console.warn("JSON5: '"+formatChar(t)+"' in strings is not valid ECMAScript; consider escaping")}function formatChar(t){var r={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(r[t])return r[t];if(t<" "){var n=t.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return t}function syntaxError(t){var r=new SyntaxError(t);return r.lineNumber=I,r.columnNumber=k,r}return{parse:X,stringify:function stringify(t,r,n){var i,a,o,s=[],h="",l="";if(null==r||"object"!=typeof r||Array.isArray(r)||(n=r.space,o=r.quote,r=r.replacer),"function"==typeof r)a=r;else if(Array.isArray(r)){i=[];for(var c=0,d=r;c<d.length;c+=1){var p=d[c],m=void 0;"string"==typeof p?m=p:("number"==typeof p||p instanceof String||p instanceof Number)&&(m=String(p)),void 0!==m&&i.indexOf(m)<0&&i.push(m)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),l="          ".substr(0,n)):"string"==typeof n&&(l=n.substr(0,10)),serializeProperty("",{"":t});function serializeProperty(t,r){var n=r[t];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(t):"function"==typeof n.toJSON&&(n=n.toJSON(t))),a&&(n=a.call(r,t,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?quoteString(n,!1):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?serializeArray(n):serializeObject(n):void 0}function quoteString(t){for(var r={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},i="",a=0;a<t.length;a++){var s=t[a];switch(s){case"'":case'"':r[s]++,i+=s;continue;case"\0":if(Q.isDigit(t[a+1])){i+="\\x00";continue}}if(n[s])i+=n[s];else if(s<" "){var h=s.charCodeAt(0).toString(16);i+="\\x"+("00"+h).substring(h.length)}else i+=s}var l=o||Object.keys(r).reduce((function(t,n){return r[t]<r[n]?t:n}));return l+(i=i.replace(new RegExp(l,"g"),n[l]))+l}function serializeObject(t){if(s.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");s.push(t);var r=h;h+=l;for(var n,a,o=[],c=0,d=i||Object.keys(t);c<d.length;c+=1){var p=d[c],m=serializeProperty(p,t);if(void 0!==m){var g=serializeKey(p)+":";""!==l&&(g+=" "),g+=m,o.push(g)}}if(0===o.length)n="{}";else if(""===l)n="{"+(a=o.join(","))+"}";else{var y=",\n"+h;a=o.join(y),n="{\n"+h+a+",\n"+r+"}"}return s.pop(),h=r,n}function serializeKey(t){if(0===t.length)return quoteString(t,!0);var r=String.fromCodePoint(t.codePointAt(0));if(!Q.isIdStartChar(r))return quoteString(t,!0);for(var n=r.length;n<t.length;n++)if(!Q.isIdContinueChar(String.fromCodePoint(t.codePointAt(n))))return quoteString(t,!0);return t}function serializeArray(t){if(s.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");s.push(t);var r=h;h+=l;for(var n,i=[],a=0;a<t.length;a++){var o=serializeProperty(String(a),t);i.push(void 0!==o?o:"null")}if(0===i.length)n="[]";else if(""===l)n="["+i.join(",")+"]";else{var c=",\n"+h,d=i.join(c);n="[\n"+h+d+",\n"+r+"]"}return s.pop(),h=r,n}}}}()},function(t,r,n){"use strict";const i=n(59),a=/^\.\.?[/\\]/;function isAbsolutePath(t){return i.posix.isAbsolute(t)||i.win32.isAbsolute(t)}t.exports=function stringifyRequest(t,r){const n=r.split("!"),o=t.context||t.options&&t.options.context;return JSON.stringify(n.map((t=>{const r=t.match(/^(.*?)(\?.*)/),n=r?r[2]:"";let s=r?r[1]:t;if(isAbsolutePath(s)&&o){if(s=i.relative(o,s),isAbsolutePath(s))return s+n;!1===function isRelativePath(t){return a.test(t)}(s)&&(s="./"+s)}return s.replace(/\\/g,"/")+n})).join("!"))}},function(t,r,n){"use strict";t.exports=function getRemainingRequest(t){return t.remainingRequest?t.remainingRequest:t.loaders.slice(t.loaderIndex+1).map((t=>t.request)).concat([t.resource]).join("!")}},function(t,r,n){"use strict";t.exports=function getCurrentRequest(t){return t.currentRequest?t.currentRequest:t.loaders.slice(t.loaderIndex).map((t=>t.request)).concat([t.resource]).join("!")}},function(t,r,n){"use strict";const i=n(59);t.exports=function isUrlRequest(t,r){return!(/^[a-z][a-z0-9+.-]*:/i.test(t)&&!i.win32.isAbsolute(t))&&(!/^\/\//.test(t)&&(!/^[{}[\]#*;,'$%&(=?`^<>]/.test(t)&&(void 0!==r&&!1!==r||!/^\//.test(t))))}},function(t,r,n){"use strict";const i=/^[A-Z]:[/\\]|^\\\\/i;t.exports=function urlToRequest(t,r){if(""===t)return"";const n=/^[^?]*~/;let a;if(i.test(t))a=t;else if(void 0!==r&&!1!==r&&/^\//.test(t))switch(typeof r){case"string":a=n.test(r)?r.replace(/([^~/])$/,"$1/")+t.slice(1):r+t;break;case"boolean":a=t;break;default:throw new Error("Unexpected parameters to loader-utils 'urlToRequest': url = "+t+", root = "+r+".")}else a=/^\.\.?\//.test(t)?t:"./"+t;return n.test(a)&&(a=a.replace(n,"")),a}},function(t,r,n){"use strict";t.exports=function parseString(t){try{return'"'===t[0]?JSON.parse(t):"'"===t[0]&&"'"===t.substr(t.length-1)?parseString(t.replace(/\\.|"/g,(t=>'"'===t?'\\"':t)).replace(/^'|'$/g,'"')):JSON.parse('"'+t+'"')}catch(r){return t}}},function(t,r,n){var i;!function(a){"use strict";var o,s=1e6,h=1e6,l="[big.js] ",c=l+"Invalid ",d=c+"decimal places",p=c+"rounding mode",m=l+"Division by zero",g={},y=void 0,b=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function round(t,r,n,i){var a=t.c,o=t.e+r+1;if(o<a.length){if(1===n)i=a[o]>=5;else if(2===n)i=a[o]>5||5==a[o]&&(i||o<0||a[o+1]!==y||1&a[o-1]);else if(3===n)i=i||!!a[0];else if(i=!1,0!==n)throw Error(p);if(o<1)a.length=1,i?(t.e=-r,a[0]=1):a[0]=t.e=0;else{if(a.length=o--,i)for(;++a[o]>9;)a[o]=0,o--||(++t.e,a.unshift(1));for(o=a.length;!a[--o];)a.pop()}}else if(n<0||n>3||n!==~~n)throw Error(p);return t}function stringify(t,r,n,i){var a,o,h=t.constructor,l=!t.c[0];if(n!==y){if(n!==~~n||n<(3==r)||n>s)throw Error(3==r?c+"precision":d);for(n=i-(t=new h(t)).e,t.c.length>++i&&round(t,n,h.RM),2==r&&(i=t.e+n+1);t.c.length<i;)t.c.push(0)}if(a=t.e,n=(o=t.c.join("")).length,2!=r&&(1==r||3==r&&i<=a||a<=h.NE||a>=h.PE))o=o.charAt(0)+(n>1?"."+o.slice(1):"")+(a<0?"e":"e+")+a;else if(a<0){for(;++a;)o="0"+o;o="0."+o}else if(a>0)if(++a>n)for(a-=n;a--;)o+="0";else a<n&&(o=o.slice(0,a)+"."+o.slice(a));else n>1&&(o=o.charAt(0)+"."+o.slice(1));return t.s<0&&(!l||4==r)?"-"+o:o}g.abs=function(){var t=new this.constructor(this);return t.s=1,t},g.cmp=function(t){var r,n=this,i=n.c,a=(t=new n.constructor(t)).c,o=n.s,s=t.s,h=n.e,l=t.e;if(!i[0]||!a[0])return i[0]?o:a[0]?-s:0;if(o!=s)return o;if(r=o<0,h!=l)return h>l^r?1:-1;for(s=(h=i.length)<(l=a.length)?h:l,o=-1;++o<s;)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return h==l?0:h>l^r?1:-1},g.div=function(t){var r=this,n=r.constructor,i=r.c,a=(t=new n(t)).c,o=r.s==t.s?1:-1,h=n.DP;if(h!==~~h||h<0||h>s)throw Error(d);if(!a[0])throw Error(m);if(!i[0])return new n(0*o);var l,c,p,g,b,w=a.slice(),M=l=a.length,_=i.length,x=i.slice(0,l),A=x.length,E=t,B=E.c=[],C=0,T=h+(E.e=r.e-t.e)+1;for(E.s=o,o=T<0?0:T,w.unshift(0);A++<l;)x.push(0);do{for(p=0;p<10;p++){if(l!=(A=x.length))g=l>A?1:-1;else for(b=-1,g=0;++b<l;)if(a[b]!=x[b]){g=a[b]>x[b]?1:-1;break}if(!(g<0))break;for(c=A==l?a:w;A;){if(x[--A]<c[A]){for(b=A;b&&!x[--b];)x[b]=9;--x[b],x[A]+=10}x[A]-=c[A]}for(;!x[0];)x.shift()}B[C++]=g?p:++p,x[0]&&g?x[A]=i[M]||0:x=[i[M]]}while((M++<_||x[0]!==y)&&o--);return B[0]||1==C||(B.shift(),E.e--),C>T&&round(E,h,n.RM,x[0]!==y),E},g.eq=function(t){return!this.cmp(t)},g.gt=function(t){return this.cmp(t)>0},g.gte=function(t){return this.cmp(t)>-1},g.lt=function(t){return this.cmp(t)<0},g.lte=function(t){return this.cmp(t)<1},g.minus=g.sub=function(t){var r,n,i,a,o=this,s=o.constructor,h=o.s,l=(t=new s(t)).s;if(h!=l)return t.s=-l,o.plus(t);var c=o.c.slice(),d=o.e,p=t.c,m=t.e;if(!c[0]||!p[0])return p[0]?(t.s=-l,t):new s(c[0]?o:0);if(h=d-m){for((a=h<0)?(h=-h,i=c):(m=d,i=p),i.reverse(),l=h;l--;)i.push(0);i.reverse()}else for(n=((a=c.length<p.length)?c:p).length,h=l=0;l<n;l++)if(c[l]!=p[l]){a=c[l]<p[l];break}if(a&&(i=c,c=p,p=i,t.s=-t.s),(l=(n=p.length)-(r=c.length))>0)for(;l--;)c[r++]=0;for(l=r;n>h;){if(c[--n]<p[n]){for(r=n;r&&!c[--r];)c[r]=9;--c[r],c[n]+=10}c[n]-=p[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--m;return c[0]||(t.s=1,c=[m=0]),t.c=c,t.e=m,t},g.mod=function(t){var r,n=this,i=n.constructor,a=n.s,o=(t=new i(t)).s;if(!t.c[0])throw Error(m);return n.s=t.s=1,r=1==t.cmp(n),n.s=a,t.s=o,r?new i(n):(a=i.DP,o=i.RM,i.DP=i.RM=0,n=n.div(t),i.DP=a,i.RM=o,this.minus(n.times(t)))},g.plus=g.add=function(t){var r,n=this,i=n.constructor,a=n.s,o=(t=new i(t)).s;if(a!=o)return t.s=-o,n.minus(t);var s=n.e,h=n.c,l=t.e,c=t.c;if(!h[0]||!c[0])return c[0]?t:new i(h[0]?n:0*a);if(h=h.slice(),a=s-l){for(a>0?(l=s,r=c):(a=-a,r=h),r.reverse();a--;)r.push(0);r.reverse()}for(h.length-c.length<0&&(r=c,c=h,h=r),a=c.length,o=0;a;h[a]%=10)o=(h[--a]=h[a]+c[a]+o)/10|0;for(o&&(h.unshift(o),++l),a=h.length;0===h[--a];)h.pop();return t.c=h,t.e=l,t},g.pow=function(t){var r=this,n=new r.constructor(1),i=n,a=t<0;if(t!==~~t||t<-1e6||t>h)throw Error(c+"exponent");for(a&&(t=-t);1&t&&(i=i.times(r)),t>>=1;)r=r.times(r);return a?n.div(i):i},g.round=function(t,r){var n=this.constructor;if(t===y)t=0;else if(t!==~~t||t<-s||t>s)throw Error(d);return round(new n(this),t,r===y?n.RM:r)},g.sqrt=function(){var t,r,n,i=this,a=i.constructor,o=i.s,s=i.e,h=new a(.5);if(!i.c[0])return new a(i);if(o<0)throw Error(l+"No square root");0===(o=Math.sqrt(i+""))||o===1/0?((r=i.c.join("")).length+s&1||(r+="0"),s=((s+1)/2|0)-(s<0||1&s),t=new a(((o=Math.sqrt(r))==1/0?"1e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):t=new a(o),s=t.e+(a.DP+=4);do{n=t,t=h.times(n.plus(i.div(n)))}while(n.c.slice(0,s).join("")!==t.c.slice(0,s).join(""));return round(t,a.DP-=4,a.RM)},g.times=g.mul=function(t){var r,n=this,i=n.constructor,a=n.c,o=(t=new i(t)).c,s=a.length,h=o.length,l=n.e,c=t.e;if(t.s=n.s==t.s?1:-1,!a[0]||!o[0])return new i(0*t.s);for(t.e=l+c,s<h&&(r=a,a=o,o=r,c=s,s=h,h=c),r=new Array(c=s+h);c--;)r[c]=0;for(l=h;l--;){for(h=0,c=s+l;c>l;)h=r[c]+o[l]*a[c-l-1]+h,r[c--]=h%10,h=h/10|0;r[c]=(r[c]+h)%10}for(h?++t.e:r.shift(),l=r.length;!r[--l];)r.pop();return t.c=r,t},g.toExponential=function(t){return stringify(this,1,t,t)},g.toFixed=function(t){return stringify(this,2,t,this.e+t)},g.toPrecision=function(t){return stringify(this,3,t,t-1)},g.toString=function(){return stringify(this)},g.valueOf=g.toJSON=function(){return stringify(this,4)},(o=function _Big_(){function Big(t){var r=this;if(!(r instanceof Big))return t===y?_Big_():new Big(t);t instanceof Big?(r.s=t.s,r.e=t.e,r.c=t.c.slice()):function parse(t,r){var n,i,a;if(0===r&&1/r<0)r="-0";else if(!b.test(r+=""))throw Error(c+"number");t.s="-"==r.charAt(0)?(r=r.slice(1),-1):1,(n=r.indexOf("."))>-1&&(r=r.replace(".",""));(i=r.search(/e/i))>0?(n<0&&(n=i),n+=+r.slice(i+1),r=r.substring(0,i)):n<0&&(n=r.length);for(a=r.length,i=0;i<a&&"0"==r.charAt(i);)++i;if(i==a)t.c=[t.e=0];else{for(;a>0&&"0"==r.charAt(--a););for(t.e=n-i-1,t.c=[],n=0;i<=a;)t.c[n++]=+r.charAt(i++)}return t}(r,t),r.constructor=Big}return Big.prototype=g,Big.DP=20,Big.RM=1,Big.NE=-7,Big.PE=21,Big.version="5.2.2",Big}()).default=o.Big=o,void 0===(i=function(){return o}.call(r,n,r,t))||(t.exports=i)}()},function(t,r,n){"use strict";r.randomBytes=r.rng=r.pseudoRandomBytes=r.prng=n(38),r.createHash=r.Hash=n(51),r.createHmac=r.Hmac=n(119);var i=n(212),a=Object.keys(i),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);r.getHashes=function(){return o};var s=n(122);r.pbkdf2=s.pbkdf2,r.pbkdf2Sync=s.pbkdf2Sync;var h=n(214);r.Cipher=h.Cipher,r.createCipher=h.createCipher,r.Cipheriv=h.Cipheriv,r.createCipheriv=h.createCipheriv,r.Decipher=h.Decipher,r.createDecipher=h.createDecipher,r.Decipheriv=h.Decipheriv,r.createDecipheriv=h.createDecipheriv,r.getCiphers=h.getCiphers,r.listCiphers=h.listCiphers;var l=n(229);r.DiffieHellmanGroup=l.DiffieHellmanGroup,r.createDiffieHellmanGroup=l.createDiffieHellmanGroup,r.getDiffieHellman=l.getDiffieHellman,r.createDiffieHellman=l.createDiffieHellman,r.DiffieHellman=l.DiffieHellman;var c=n(236);r.createSign=c.createSign,r.Sign=c.Sign,r.createVerify=c.createVerify,r.Verify=c.Verify,r.createECDH=n(277);var d=n(280);r.publicEncrypt=d.publicEncrypt,r.privateEncrypt=d.privateEncrypt,r.publicDecrypt=d.publicDecrypt,r.privateDecrypt=d.privateDecrypt;var p=n(284);r.randomFill=p.randomFill,r.randomFillSync=p.randomFillSync,r.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},r.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(t,r,n){"use strict";r.byteLength=function byteLength(t){var r=getLens(t),n=r[0],i=r[1];return 3*(n+i)/4-i},r.toByteArray=function toByteArray(t){var r,n,i=getLens(t),s=i[0],h=i[1],l=new o(function _byteLength(t,r,n){return 3*(r+n)/4-n}(0,s,h)),c=0,d=h>0?s-4:s;for(n=0;n<d;n+=4)r=a[t.charCodeAt(n)]<<18|a[t.charCodeAt(n+1)]<<12|a[t.charCodeAt(n+2)]<<6|a[t.charCodeAt(n+3)],l[c++]=r>>16&255,l[c++]=r>>8&255,l[c++]=255&r;2===h&&(r=a[t.charCodeAt(n)]<<2|a[t.charCodeAt(n+1)]>>4,l[c++]=255&r);1===h&&(r=a[t.charCodeAt(n)]<<10|a[t.charCodeAt(n+1)]<<4|a[t.charCodeAt(n+2)]>>2,l[c++]=r>>8&255,l[c++]=255&r);return l},r.fromByteArray=function fromByteArray(t){for(var r,n=t.length,a=n%3,o=[],s=16383,h=0,l=n-a;h<l;h+=s)o.push(encodeChunk(t,h,h+s>l?l:h+s));1===a?(r=t[n-1],o.push(i[r>>2]+i[r<<4&63]+"==")):2===a&&(r=(t[n-2]<<8)+t[n-1],o.push(i[r>>10]+i[r>>4&63]+i[r<<2&63]+"="));return o.join("")};for(var i=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,l=s.length;h<l;++h)i[h]=s[h],a[s.charCodeAt(h)]=h;function getLens(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=r),[n,n===r?0:4-n%4]}function encodeChunk(t,r,n){for(var a,o,s=[],h=r;h<n;h+=3)a=(t[h]<<16&16711680)+(t[h+1]<<8&65280)+(255&t[h+2]),s.push(i[(o=a)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,r){r.read=function(t,r,n,i,a){var o,s,h=8*a-i-1,l=(1<<h)-1,c=l>>1,d=-7,p=n?a-1:0,m=n?-1:1,g=t[r+p];for(p+=m,o=g&(1<<-d)-1,g>>=-d,d+=h;d>0;o=256*o+t[r+p],p+=m,d-=8);for(s=o&(1<<-d)-1,o>>=-d,d+=i;d>0;s=256*s+t[r+p],p+=m,d-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(g?-1:1);s+=Math.pow(2,i),o-=c}return(g?-1:1)*s*Math.pow(2,o-i)},r.write=function(t,r,n,i,a,o){var s,h,l,c=8*o-a-1,d=(1<<c)-1,p=d>>1,m=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,g=i?0:o-1,y=i?1:-1,b=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(h=isNaN(r)?1:0,s=d):(s=Math.floor(Math.log(r)/Math.LN2),r*(l=Math.pow(2,-s))<1&&(s--,l*=2),(r+=s+p>=1?m/l:m*Math.pow(2,1-p))*l>=2&&(s++,l/=2),s+p>=d?(h=0,s=d):s+p>=1?(h=(r*l-1)*Math.pow(2,a),s+=p):(h=r*Math.pow(2,p-1)*Math.pow(2,a),s=0));a>=8;t[n+g]=255&h,g+=y,h/=256,a-=8);for(s=s<<a|h,c+=a;c>0;t[n+g]=255&s,g+=y,s/=256,c-=8);t[n+g-y]|=128*b}},function(t,r,n){var i=n(13),a=i.Buffer;function copyProps(t,r){for(var n in t)r[n]=t[n]}function SafeBuffer(t,r,n){return a(t,r,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(copyProps(i,r),r.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(a.prototype),copyProps(a,SafeBuffer),SafeBuffer.from=function(t,r,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,r,n)},SafeBuffer.alloc=function(t,r,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=a(t);return void 0!==r?"string"==typeof n?i.fill(r,n):i.fill(r):i.fill(0),i},SafeBuffer.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},SafeBuffer.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,r,n){(r=t.exports=n(107)).Stream=r,r.Readable=r,r.Writable=n(111),r.Duplex=n(40),r.Transform=n(112),r.PassThrough=n(194),r.finished=n(72),r.pipeline=n(195)},function(t,r){},function(t,r,n){"use strict";function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _defineProperties(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var i=n(13).Buffer,a=n(191).inspect,o=a&&a.custom||"inspect";t.exports=function(){function BufferList(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(t,r,n){return r&&_defineProperties(t.prototype,r),n&&_defineProperties(t,n),t}(BufferList,[{key:"push",value:function push(t){var r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function unshift(t){var r={data:t,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(t){if(0===this.length)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=t+r.data;return n}},{key:"concat",value:function concat(t){if(0===this.length)return i.alloc(0);for(var r,n,a,o=i.allocUnsafe(t>>>0),s=this.head,h=0;s;)r=s.data,n=o,a=h,i.prototype.copy.call(r,n,a),h+=s.data.length,s=s.next;return o}},{key:"consume",value:function consume(t,r){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():r?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(t){var r=this.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0===(t-=o)){o===a.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=a.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function _getBuffer(t){var r=i.allocUnsafe(t),n=this.head,a=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++a}return this.length-=a,r}},{key:o,value:function value(t,r){return a(this,function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){_defineProperty(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({},r,{depth:0,customInspect:!1}))}}]),BufferList}()},function(t,r){},function(t,r,n){"use strict";(function(r){var i;function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var a=n(72),o=Symbol("lastResolve"),s=Symbol("lastReject"),h=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function createIterResult(t,r){return{value:t,done:r}}function readAndResolve(t){var r=t[o];if(null!==r){var n=t[p].read();null!==n&&(t[c]=null,t[o]=null,t[s]=null,r(createIterResult(n,!1)))}}function onReadable(t){r.nextTick(readAndResolve,t)}var m=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((_defineProperty(i={get stream(){return this[p]},next:function next(){var t=this,n=this[h];if(null!==n)return Promise.reject(n);if(this[l])return Promise.resolve(createIterResult(void 0,!0));if(this[p].destroyed)return new Promise((function(n,i){r.nextTick((function(){t[h]?i(t[h]):n(createIterResult(void 0,!0))}))}));var i,a=this[c];if(a)i=new Promise(function wrapForNext(t,r){return function(n,i){t.then((function(){r[l]?n(createIterResult(void 0,!0)):r[d](n,i)}),i)}}(a,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(createIterResult(o,!1));i=new Promise(this[d])}return this[c]=i,i}},Symbol.asyncIterator,(function(){return this})),_defineProperty(i,"return",(function _return(){var t=this;return new Promise((function(r,n){t[p].destroy(null,(function(t){t?n(t):r(createIterResult(void 0,!0))}))}))})),i),m);t.exports=function createReadableStreamAsyncIterator(t){var r,n=Object.create(g,(_defineProperty(r={},p,{value:t,writable:!0}),_defineProperty(r,o,{value:null,writable:!0}),_defineProperty(r,s,{value:null,writable:!0}),_defineProperty(r,h,{value:null,writable:!0}),_defineProperty(r,l,{value:t._readableState.endEmitted,writable:!0}),_defineProperty(r,d,{value:function value(t,r){var i=n[p].read();i?(n[c]=null,n[o]=null,n[s]=null,t(createIterResult(i,!1))):(n[o]=t,n[s]=r)},writable:!0}),r));return n[c]=null,a(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var r=n[s];return null!==r&&(n[c]=null,n[o]=null,n[s]=null,r(t)),void(n[h]=t)}var i=n[o];null!==i&&(n[c]=null,n[o]=null,n[s]=null,i(createIterResult(void 0,!0))),n[l]=!0})),t.on("readable",onReadable.bind(null,n)),n}}).call(this,n(12))},function(t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,r,n){"use strict";t.exports=PassThrough;var i=n(112);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);i.call(this,t)}n(5)(PassThrough,i),PassThrough.prototype._transform=function(t,r,n){n(null,t)}},function(t,r,n){"use strict";var i;var a=n(39).codes,o=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function noop(t){if(t)throw t}function destroyer(t,r,a,o){o=function once(t){var r=!1;return function(){r||(r=!0,t.apply(void 0,arguments))}}(o);var h=!1;t.on("close",(function(){h=!0})),void 0===i&&(i=n(72)),i(t,{readable:r,writable:a},(function(t){if(t)return o(t);h=!0,o()}));var l=!1;return function(r){if(!h&&!l)return l=!0,function isRequest(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(r||new s("pipe"))}}function call(t){t()}function pipe(t,r){return t.pipe(r)}function popCallback(t){return t.length?"function"!=typeof t[t.length-1]?noop:t.pop():noop}t.exports=function pipeline(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i,a=popCallback(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new o("streams");var s=r.map((function(t,n){var o=n<r.length-1;return destroyer(t,o,n>0,(function(t){i||(i=t),t&&s.forEach(call),o||(s.forEach(call),a(i))}))}));return r.reduce(pipe)}},function(t,r,n){var i=n(5),a=n(41),o=n(9).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],h=new Array(80);function Sha(){this.init(),this._w=h,a.call(this,64,56)}function rotl30(t){return t<<30|t>>>2}function ft(t,r,n,i){return 0===t?r&n|~r&i:2===t?r&n|r&i|n&i:r^n^i}i(Sha,a),Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha.prototype._update=function(t){for(var r,n=this._w,i=0|this._a,a=0|this._b,o=0|this._c,h=0|this._d,l=0|this._e,c=0;c<16;++c)n[c]=t.readInt32BE(4*c);for(;c<80;++c)n[c]=n[c-3]^n[c-8]^n[c-14]^n[c-16];for(var d=0;d<80;++d){var p=~~(d/20),m=0|((r=i)<<5|r>>>27)+ft(p,a,o,h)+l+n[d]+s[p];l=h,h=o,o=rotl30(a),a=i,i=m}this._a=i+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=h+this._d|0,this._e=l+this._e|0},Sha.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=Sha},function(t,r,n){var i=n(5),a=n(41),o=n(9).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],h=new Array(80);function Sha1(){this.init(),this._w=h,a.call(this,64,56)}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,r,n,i){return 0===t?r&n|~r&i:2===t?r&n|r&i|n&i:r^n^i}i(Sha1,a),Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Sha1.prototype._update=function(t){for(var r,n=this._w,i=0|this._a,a=0|this._b,o=0|this._c,h=0|this._d,l=0|this._e,c=0;c<16;++c)n[c]=t.readInt32BE(4*c);for(;c<80;++c)n[c]=(r=n[c-3]^n[c-8]^n[c-14]^n[c-16])<<1|r>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=rotl5(i)+ft(p,a,o,h)+l+n[d]+s[p]|0;l=h,h=o,o=rotl30(a),a=i,i=m}this._a=i+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=h+this._d|0,this._e=l+this._e|0},Sha1.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=Sha1},function(t,r,n){var i=n(5),a=n(113),o=n(41),s=n(9).Buffer,h=new Array(64);function Sha224(){this.init(),this._w=h,o.call(this,64,56)}i(Sha224,a),Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},Sha224.prototype._hash=function(){var t=s.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=Sha224},function(t,r,n){var i=n(5),a=n(114),o=n(41),s=n(9).Buffer,h=new Array(160);function Sha384(){this.init(),this._w=h,o.call(this,128,112)}i(Sha384,a),Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},Sha384.prototype._hash=function(){var t=s.allocUnsafe(48);function writeInt64BE(r,n,i){t.writeInt32BE(r,i),t.writeInt32BE(n,i+4)}return writeInt64BE(this._ah,this._al,0),writeInt64BE(this._bh,this._bl,8),writeInt64BE(this._ch,this._cl,16),writeInt64BE(this._dh,this._dl,24),writeInt64BE(this._eh,this._el,32),writeInt64BE(this._fh,this._fl,40),t},t.exports=Sha384},function(t,r,n){t.exports=Stream;var i=n(32).EventEmitter;function Stream(){i.call(this)}n(5)(Stream,i),Stream.Readable=n(75),Stream.Writable=n(207),Stream.Duplex=n(208),Stream.Transform=n(209),Stream.PassThrough=n(210),Stream.Stream=Stream,Stream.prototype.pipe=function(t,r){var n=this;function ondata(r){t.writable&&!1===t.write(r)&&n.pause&&n.pause()}function ondrain(){n.readable&&n.resume&&n.resume()}n.on("data",ondata),t.on("drain",ondrain),t._isStdio||r&&!1===r.end||(n.on("end",onend),n.on("close",onclose));var a=!1;function onend(){a||(a=!0,t.end())}function onclose(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function onerror(t){if(cleanup(),0===i.listenerCount(this,"error"))throw t}function cleanup(){n.removeListener("data",ondata),t.removeListener("drain",ondrain),n.removeListener("end",onend),n.removeListener("close",onclose),n.removeListener("error",onerror),t.removeListener("error",onerror),n.removeListener("end",cleanup),n.removeListener("close",cleanup),t.removeListener("close",cleanup)}return n.on("error",onerror),t.on("error",onerror),n.on("end",cleanup),n.on("close",cleanup),t.on("close",cleanup),t.emit("pipe",n),t}},function(t,r){},function(t,r,n){"use strict";var i=n(9).Buffer,a=n(203);t.exports=function(){function BufferList(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(t){var r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},BufferList.prototype.unshift=function unshift(t){var r={data:t,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(t){if(0===this.length)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=t+r.data;return n},BufferList.prototype.concat=function concat(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var r,n,a,o=i.allocUnsafe(t>>>0),s=this.head,h=0;s;)r=s.data,n=o,a=h,r.copy(n,a),h+=s.data.length,s=s.next;return o},BufferList}(),a&&a.inspect&&a.inspect.custom&&(t.exports.prototype[a.inspect.custom]=function(){var t=a.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,r){},function(t,r,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function Timeout(t,r){this._id=t,this._clearFn=r}r.setTimeout=function(){return new Timeout(a.call(setTimeout,i,arguments),clearTimeout)},r.setInterval=function(){return new Timeout(a.call(setInterval,i,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(i,this._id)},r.enroll=function(t,r){clearTimeout(t._idleTimeoutId),t._idleTimeout=r},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var r=t._idleTimeout;r>=0&&(t._idleTimeoutId=setTimeout((function onTimeout(){t._onTimeout&&t._onTimeout()}),r))},n(205),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(14))},function(t,r,n){(function(t,r){!function(t,n){"use strict";if(!t.setImmediate){var i,a=1,o={},s=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?function installNextTickImplementation(){i=function(t){r.nextTick((function(){runIfPresent(t)}))}}():!function canUsePostMessage(){if(t.postMessage&&!t.importScripts){var r=!0,n=t.onmessage;return t.onmessage=function(){r=!1},t.postMessage("","*"),t.onmessage=n,r}}()?t.MessageChannel?function installMessageChannelImplementation(){var t=new MessageChannel;t.port1.onmessage=function(t){runIfPresent(t.data)},i=function(r){t.port2.postMessage(r)}}():h&&"onreadystatechange"in h.createElement("script")?function installReadyStateChangeImplementation(){var t=h.documentElement;i=function(r){var n=h.createElement("script");n.onreadystatechange=function(){runIfPresent(r),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function installSetTimeoutImplementation(){i=function(t){setTimeout(runIfPresent,0,t)}}():function installPostMessageImplementation(){var r="setImmediate$"+Math.random()+"$",onGlobalMessage=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(r)&&runIfPresent(+n.data.slice(r.length))};t.addEventListener?t.addEventListener("message",onGlobalMessage,!1):t.attachEvent("onmessage",onGlobalMessage),i=function(n){t.postMessage(r+n,"*")}}(),l.setImmediate=function setImmediate(t){"function"!=typeof t&&(t=new Function(""+t));for(var r=new Array(arguments.length-1),n=0;n<r.length;n++)r[n]=arguments[n+1];var s={callback:t,args:r};return o[a]=s,i(a),a++},l.clearImmediate=clearImmediate}function clearImmediate(t){delete o[t]}function runIfPresent(t){if(s)setTimeout(runIfPresent,0,t);else{var r=o[t];if(r){s=!0;try{!function run(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(void 0,n)}}(r)}finally{clearImmediate(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(14),n(12))},function(t,r,n){"use strict";t.exports=PassThrough;var i=n(118),a=Object.create(n(52));function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);i.call(this,t)}a.inherits=n(5),a.inherits(PassThrough,i),PassThrough.prototype._transform=function(t,r,n){n(null,t)}},function(t,r,n){t.exports=n(76)},function(t,r,n){t.exports=n(34)},function(t,r,n){t.exports=n(75).Transform},function(t,r,n){t.exports=n(75).PassThrough},function(t,r,n){"use strict";var i=n(5),a=n(9).Buffer,o=n(25),s=a.alloc(128),h=64;function Hmac(t,r){o.call(this,"digest"),"string"==typeof r&&(r=a.from(r)),this._alg=t,this._key=r,r.length>h?r=t(r):r.length<h&&(r=a.concat([r,s],h));for(var n=this._ipad=a.allocUnsafe(h),i=this._opad=a.allocUnsafe(h),l=0;l<h;l++)n[l]=54^r[l],i[l]=92^r[l];this._hash=[n]}i(Hmac,o),Hmac.prototype._update=function(t){this._hash.push(t)},Hmac.prototype._final=function(){var t=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,t]))},t.exports=Hmac},function(t,r,n){t.exports=n(121)},function(t,r,n){(function(r){var i,a,o=n(9).Buffer,s=n(123),h=n(124),l=n(125),c=n(126),d=r.crypto&&r.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},m=[];function getNextTick(){return a||(a=r.process&&r.process.nextTick?r.process.nextTick:r.queueMicrotask?r.queueMicrotask:r.setImmediate?r.setImmediate:r.setTimeout)}function browserPbkdf2(t,r,n,i,a){return d.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return d.deriveBits({name:"PBKDF2",salt:r,iterations:n,hash:{name:a}},t,i<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,n,a,g,y,b){"function"==typeof y&&(b=y,y=void 0);var w=p[(y=y||"sha1").toLowerCase()];if(w&&"function"==typeof r.Promise){if(s(a,g),t=c(t,h,"Password"),n=c(n,h,"Salt"),"function"!=typeof b)throw new Error("No callback provided to pbkdf2");!function resolvePromise(t,r){t.then((function(t){getNextTick()((function(){r(null,t)}))}),(function(t){getNextTick()((function(){r(t)}))}))}(function checkNative(t){if(r.process&&!r.process.browser)return Promise.resolve(!1);if(!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(void 0!==m[t])return m[t];var n=browserPbkdf2(i=i||o.alloc(8),i,10,128,t).then((function(){return!0})).catch((function(){return!1}));return m[t]=n,n}(w).then((function(r){return r?browserPbkdf2(t,n,a,g,w):l(t,n,a,g,y)})),b)}else getNextTick()((function(){var r;try{r=l(t,n,a,g,y)}catch(t){return b(t)}b(null,r)}))}}).call(this,n(14))},function(t,r,n){var i=n(215),a=n(78),o=n(79),s=n(228),h=n(62);function createCipheriv(t,r,n){if(t=t.toLowerCase(),o[t])return a.createCipheriv(t,r,n);if(s[t])return new i({key:r,iv:n,mode:t});throw new TypeError("invalid suite type")}function createDecipheriv(t,r,n){if(t=t.toLowerCase(),o[t])return a.createDecipheriv(t,r,n);if(s[t])return new i({key:r,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}r.createCipher=r.Cipher=function createCipher(t,r){var n,i;if(t=t.toLowerCase(),o[t])n=o[t].key,i=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,i=s[t].iv}var a=h(r,!1,n,i);return createCipheriv(t,a.key,a.iv)},r.createCipheriv=r.Cipheriv=createCipheriv,r.createDecipher=r.Decipher=function createDecipher(t,r){var n,i;if(t=t.toLowerCase(),o[t])n=o[t].key,i=o[t].iv;else{if(!s[t])throw new TypeError("invalid suite type");n=8*s[t].key,i=s[t].iv}var a=h(r,!1,n,i);return createDecipheriv(t,a.key,a.iv)},r.createDecipheriv=r.Decipheriv=createDecipheriv,r.listCiphers=r.getCiphers=function getCiphers(){return Object.keys(s).concat(a.getCiphers())}},function(t,r,n){var i=n(25),a=n(216),o=n(5),s=n(9).Buffer,h={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};function DES(t){i.call(this);var r,n=t.mode.toLowerCase(),a=h[n];r=t.decrypt?"decrypt":"encrypt";var o=t.key;s.isBuffer(o)||(o=s.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=s.concat([o,o.slice(0,8)]));var l=t.iv;s.isBuffer(l)||(l=s.from(l)),this._des=a.create({key:o,iv:l,type:r})}h.des=h["des-cbc"],h.des3=h["des-ede3-cbc"],t.exports=DES,o(DES,i),DES.prototype._update=function(t){return s.from(this._des.update(t))},DES.prototype._final=function(){return s.from(this._des.final())}},function(t,r,n){"use strict";r.utils=n(127),r.Cipher=n(77),r.DES=n(128),r.CBC=n(217),r.EDE=n(218)},function(t,r,n){"use strict";var i=n(18),a=n(5),o={};function CBCState(t){i.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var r=0;r<this.iv.length;r++)this.iv[r]=t[r]}r.instantiate=function instantiate(t){function CBC(r){t.call(this,r),this._cbcInit()}a(CBC,t);for(var r=Object.keys(o),n=0;n<r.length;n++){var i=r[n];CBC.prototype[i]=o[i]}return CBC.create=function create(t){return new CBC(t)},CBC},o._cbcInit=function _cbcInit(){var t=new CBCState(this.options.iv);this._cbcState=t},o._update=function _update(t,r,n,i){var a=this._cbcState,o=this.constructor.super_.prototype,s=a.iv;if("encrypt"===this.type){for(var h=0;h<this.blockSize;h++)s[h]^=t[r+h];o._update.call(this,s,0,n,i);for(h=0;h<this.blockSize;h++)s[h]=n[i+h]}else{o._update.call(this,t,r,n,i);for(h=0;h<this.blockSize;h++)n[i+h]^=s[h];for(h=0;h<this.blockSize;h++)s[h]=t[r+h]}}},function(t,r,n){"use strict";var i=n(18),a=n(5),o=n(77),s=n(128);function EDEState(t,r){i.equal(r.length,24,"Invalid key length");var n=r.slice(0,8),a=r.slice(8,16),o=r.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:a}),s.create({type:"encrypt",key:o})]:[s.create({type:"decrypt",key:o}),s.create({type:"encrypt",key:a}),s.create({type:"decrypt",key:n})]}function EDE(t){o.call(this,t);var r=new EDEState(this.type,this.options.key);this._edeState=r}a(EDE,o),t.exports=EDE,EDE.create=function create(t){return new EDE(t)},EDE.prototype._update=function _update(t,r,n,i){var a=this._edeState;a.ciphers[0]._update(t,r,n,i),a.ciphers[1]._update(n,i,n,i),a.ciphers[2]._update(n,i,n,i)},EDE.prototype._pad=s.prototype._pad,EDE.prototype._unpad=s.prototype._unpad},function(t,r,n){var i=n(79),a=n(132),o=n(9).Buffer,s=n(133),h=n(25),l=n(61),c=n(62);function Cipher(t,r,n){h.call(this),this._cache=new Splitter,this._cipher=new l.AES(r),this._prev=o.from(n),this._mode=t,this._autopadding=!0}n(5)(Cipher,h),Cipher.prototype._update=function(t){var r,n;this._cache.add(t);for(var i=[];r=this._cache.get();)n=this._mode.encrypt(this,r),i.push(n);return o.concat(i)};var d=o.alloc(16,16);function Splitter(){this.cache=o.allocUnsafe(0)}function createCipheriv(t,r,n){var h=i[t.toLowerCase()];if(!h)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=o.from(r)),r.length!==h.key/8)throw new TypeError("invalid key length "+r.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==h.mode&&n.length!==h.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===h.type?new s(h.module,r,n):"auth"===h.type?new a(h.module,r,n):new Cipher(h.module,r,n)}Cipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},Cipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},Splitter.prototype.add=function(t){this.cache=o.concat([this.cache,t])},Splitter.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},Splitter.prototype.flush=function(){for(var t=16-this.cache.length,r=o.allocUnsafe(t),n=-1;++n<t;)r.writeUInt8(t,n);return o.concat([this.cache,r])},r.createCipheriv=createCipheriv,r.createCipher=function createCipher(t,r){var n=i[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=c(r,!1,n.key,n.iv);return createCipheriv(t,a.key,a.iv)}},function(t,r){r.encrypt=function(t,r){return t._cipher.encryptBlock(r)},r.decrypt=function(t,r){return t._cipher.decryptBlock(r)}},function(t,r,n){var i=n(53);r.encrypt=function(t,r){var n=i(r,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},r.decrypt=function(t,r){var n=t._prev;t._prev=r;var a=t._cipher.decryptBlock(r);return i(a,n)}},function(t,r,n){var i=n(9).Buffer,a=n(53);function encryptStart(t,r,n){var o=r.length,s=a(r,t._cache);return t._cache=t._cache.slice(o),t._prev=i.concat([t._prev,n?r:s]),s}r.encrypt=function(t,r,n){for(var a,o=i.allocUnsafe(0);r.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=i.allocUnsafe(0)),!(t._cache.length<=r.length)){o=i.concat([o,encryptStart(t,r,n)]);break}a=t._cache.length,o=i.concat([o,encryptStart(t,r.slice(0,a),n)]),r=r.slice(a)}return o}},function(t,r,n){var i=n(9).Buffer;function encryptByte(t,r,n){var a=t._cipher.encryptBlock(t._prev)[0]^r;return t._prev=i.concat([t._prev.slice(1),i.from([n?r:a])]),a}r.encrypt=function(t,r,n){for(var a=r.length,o=i.allocUnsafe(a),s=-1;++s<a;)o[s]=encryptByte(t,r[s],n);return o}},function(t,r,n){var i=n(9).Buffer;function encryptByte(t,r,n){for(var i,a,o=-1,s=0;++o<8;)i=r&1<<7-o?128:0,s+=(128&(a=t._cipher.encryptBlock(t._prev)[0]^i))>>o%8,t._prev=shiftIn(t._prev,n?i:a);return s}function shiftIn(t,r){var n=t.length,a=-1,o=i.allocUnsafe(t.length);for(t=i.concat([t,i.from([r])]);++a<n;)o[a]=t[a]<<1|t[a+1]>>7;return o}r.encrypt=function(t,r,n){for(var a=r.length,o=i.allocUnsafe(a),s=-1;++s<a;)o[s]=encryptByte(t,r[s],n);return o}},function(t,r,n){(function(t){var i=n(53);function getBlock(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}r.encrypt=function(r,n){for(;r._cache.length<n.length;)r._cache=t.concat([r._cache,getBlock(r)]);var a=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),i(n,a)}}).call(this,n(13).Buffer)},function(t,r,n){var i=n(9).Buffer,a=i.alloc(16,0);function fromArray(t){var r=i.allocUnsafe(16);return r.writeUInt32BE(t[0]>>>0,0),r.writeUInt32BE(t[1]>>>0,4),r.writeUInt32BE(t[2]>>>0,8),r.writeUInt32BE(t[3]>>>0,12),r}function GHASH(t){this.h=t,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}GHASH.prototype.ghash=function(t){for(var r=-1;++r<t.length;)this.state[r]^=t[r];this._multiply()},GHASH.prototype._multiply=function(){for(var t,r,n=function toArray(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}(this.h),i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=n[0],i[1]^=n[1],i[2]^=n[2],i[3]^=n[3]),r=0!=(1&n[3]),t=3;t>0;t--)n[t]=n[t]>>>1|(1&n[t-1])<<31;n[0]=n[0]>>>1,r&&(n[0]=n[0]^225<<24)}this.state=fromArray(i)},GHASH.prototype.update=function(t){var r;for(this.cache=i.concat([this.cache,t]);this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},GHASH.prototype.final=function(t,r){return this.cache.length&&this.ghash(i.concat([this.cache,a],16)),this.ghash(fromArray([0,t,0,r])),this.state},t.exports=GHASH},function(t,r,n){var i=n(132),a=n(9).Buffer,o=n(79),s=n(133),h=n(25),l=n(61),c=n(62);function Decipher(t,r,n){h.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new l.AES(r),this._prev=a.from(n),this._mode=t,this._autopadding=!0}function Splitter(){this.cache=a.allocUnsafe(0)}function createDecipheriv(t,r,n){var h=o[t.toLowerCase()];if(!h)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=a.from(n)),"GCM"!==h.mode&&n.length!==h.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof r&&(r=a.from(r)),r.length!==h.key/8)throw new TypeError("invalid key length "+r.length);return"stream"===h.type?new s(h.module,r,n,!0):"auth"===h.type?new i(h.module,r,n,!0):new Decipher(h.module,r,n)}n(5)(Decipher,h),Decipher.prototype._update=function(t){var r,n;this._cache.add(t);for(var i=[];r=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,r),i.push(n);return a.concat(i)},Decipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function unpad(t){var r=t[15];if(r<1||r>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<r;)if(t[n+(16-r)]!==r)throw new Error("unable to decrypt data");if(16===r)return;return t.slice(0,16-r)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},Decipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},Splitter.prototype.add=function(t){this.cache=a.concat([this.cache,t])},Splitter.prototype.get=function(t){var r;if(t){if(this.cache.length>16)return r=this.cache.slice(0,16),this.cache=this.cache.slice(16),r}else if(this.cache.length>=16)return r=this.cache.slice(0,16),this.cache=this.cache.slice(16),r;return null},Splitter.prototype.flush=function(){if(this.cache.length)return this.cache},r.createDecipher=function createDecipher(t,r){var n=o[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(r,!1,n.key,n.iv);return createDecipheriv(t,i.key,i.iv)},r.createDecipheriv=createDecipheriv},function(t,r){r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}},function(t,r,n){(function(t){var i=n(134),a=n(234),o=n(235);var s={binary:!0,hex:!0,base64:!0};r.DiffieHellmanGroup=r.createDiffieHellmanGroup=r.getDiffieHellman=function getDiffieHellman(r){var n=new t(a[r].prime,"hex"),i=new t(a[r].gen,"hex");return new o(n,i)},r.createDiffieHellman=r.DiffieHellman=function createDiffieHellman(r,n,a,h){return t.isBuffer(n)||void 0===s[n]?createDiffieHellman(r,"binary",n,a):(n=n||"binary",h=h||"binary",a=a||new t([2]),t.isBuffer(a)||(a=new t(a,h)),"number"==typeof r?new o(i(r,a),a,!0):(t.isBuffer(r)||(r=new t(r,n)),new o(r,a,!0)))}}).call(this,n(13).Buffer)},function(t,r){},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(232).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r){},function(t,r){},function(t){t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(t,r,n){(function(r){var i=n(135),a=new(n(136)),o=new i(24),s=new i(11),h=new i(10),l=new i(3),c=new i(7),d=n(134),p=n(38);function setPublicKey(t,n){return n=n||"utf8",r.isBuffer(t)||(t=new r(t,n)),this._pub=new i(t),this}function setPrivateKey(t,n){return n=n||"utf8",r.isBuffer(t)||(t=new r(t,n)),this._priv=new i(t),this}t.exports=DH;var m={};function DH(t,r,n){this.setGenerator(r),this.__prime=new i(t),this._prime=i.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=setPublicKey,this.setPrivateKey=setPrivateKey):this._primeCode=8}function formatReturnValue(t,n){var i=new r(t.toArray());return n?i.toString(n):i}Object.defineProperty(DH.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function checkPrime(t,r){var n=r.toString("hex"),i=[n,t.toString(16)].join("_");if(i in m)return m[i];var p,g=0;if(t.isEven()||!d.simpleSieve||!d.fermatTest(t)||!a.test(t))return g+=1,g+="02"===n||"05"===n?8:4,m[i]=g,g;switch(a.test(t.shrn(1))||(g+=2),n){case"02":t.mod(o).cmp(s)&&(g+=8);break;case"05":(p=t.mod(h)).cmp(l)&&p.cmp(c)&&(g+=8);break;default:g+=4}return m[i]=g,g}(this.__prime,this.__gen)),this._primeCode}}),DH.prototype.generateKeys=function(){return this._priv||(this._priv=new i(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},DH.prototype.computeSecret=function(t){var n=(t=(t=new i(t)).toRed(this._prime)).redPow(this._priv).fromRed(),a=new r(n.toArray()),o=this.getPrime();if(a.length<o.length){var s=new r(o.length-a.length);s.fill(0),a=r.concat([s,a])}return a},DH.prototype.getPublicKey=function getPublicKey(t){return formatReturnValue(this._pub,t)},DH.prototype.getPrivateKey=function getPrivateKey(t){return formatReturnValue(this._priv,t)},DH.prototype.getPrime=function(t){return formatReturnValue(this.__prime,t)},DH.prototype.getGenerator=function(t){return formatReturnValue(this._gen,t)},DH.prototype.setGenerator=function(t,n){return n=n||"utf8",r.isBuffer(t)||(t=new r(t,n)),this.__gen=t,this._gen=new i(t),this}}).call(this,n(13).Buffer)},function(t,r,n){var i=n(81).Buffer,a=n(51),o=n(237),s=n(5),h=n(245),l=n(276),c=n(121);function Sign(t){o.Writable.call(this);var r=c[t];if(!r)throw new Error("Unknown message digest");this._hashType=r.hash,this._hash=a(r.hash),this._tag=r.id,this._signType=r.sign}function Verify(t){o.Writable.call(this);var r=c[t];if(!r)throw new Error("Unknown message digest");this._hash=a(r.hash),this._tag=r.id,this._signType=r.sign}function createSign(t){return new Sign(t)}function createVerify(t){return new Verify(t)}Object.keys(c).forEach((function(t){c[t].id=i.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]})),s(Sign,o.Writable),Sign.prototype._write=function _write(t,r,n){this._hash.update(t),n()},Sign.prototype.update=function update(t,r){return"string"==typeof t&&(t=i.from(t,r)),this._hash.update(t),this},Sign.prototype.sign=function signMethod(t,r){this.end();var n=this._hash.digest(),i=h(n,t,this._hashType,this._signType,this._tag);return r?i.toString(r):i},s(Verify,o.Writable),Verify.prototype._write=function _write(t,r,n){this._hash.update(t),n()},Verify.prototype.update=function update(t,r){return"string"==typeof t&&(t=i.from(t,r)),this._hash.update(t),this},Verify.prototype.verify=function verifyMethod(t,r,n){"string"==typeof r&&(r=i.from(r,n)),this.end();var a=this._hash.digest();return l(r,a,t,this._signType,this._tag)},t.exports={Sign:createSign,Verify:createVerify,createSign:createSign,createVerify:createVerify}},function(t,r,n){(r=t.exports=n(137)).Stream=r,r.Readable=r,r.Writable=n(141),r.Duplex=n(43),r.Transform=n(142),r.PassThrough=n(243),r.finished=n(82),r.pipeline=n(244)},function(t,r){},function(t,r,n){"use strict";function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _defineProperties(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var i=n(13).Buffer,a=n(240).inspect,o=a&&a.custom||"inspect";t.exports=function(){function BufferList(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return function _createClass(t,r,n){return r&&_defineProperties(t.prototype,r),n&&_defineProperties(t,n),t}(BufferList,[{key:"push",value:function push(t){var r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function unshift(t){var r={data:t,next:this.head};0===this.length&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function shift(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function clear(){this.head=this.tail=null,this.length=0}},{key:"join",value:function join(t){if(0===this.length)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=t+r.data;return n}},{key:"concat",value:function concat(t){if(0===this.length)return i.alloc(0);for(var r,n,a,o=i.allocUnsafe(t>>>0),s=this.head,h=0;s;)r=s.data,n=o,a=h,i.prototype.copy.call(r,n,a),h+=s.data.length,s=s.next;return o}},{key:"consume",value:function consume(t,r){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():r?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(t){var r=this.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0===(t-=o)){o===a.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=a.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function _getBuffer(t){var r=i.allocUnsafe(t),n=this.head,a=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++a}return this.length-=a,r}},{key:o,value:function value(t,r){return a(this,function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){_defineProperty(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({},r,{depth:0,customInspect:!1}))}}]),BufferList}()},function(t,r){},function(t,r,n){"use strict";(function(r){var i;function _defineProperty(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var a=n(82),o=Symbol("lastResolve"),s=Symbol("lastReject"),h=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function createIterResult(t,r){return{value:t,done:r}}function readAndResolve(t){var r=t[o];if(null!==r){var n=t[p].read();null!==n&&(t[c]=null,t[o]=null,t[s]=null,r(createIterResult(n,!1)))}}function onReadable(t){r.nextTick(readAndResolve,t)}var m=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((_defineProperty(i={get stream(){return this[p]},next:function next(){var t=this,n=this[h];if(null!==n)return Promise.reject(n);if(this[l])return Promise.resolve(createIterResult(void 0,!0));if(this[p].destroyed)return new Promise((function(n,i){r.nextTick((function(){t[h]?i(t[h]):n(createIterResult(void 0,!0))}))}));var i,a=this[c];if(a)i=new Promise(function wrapForNext(t,r){return function(n,i){t.then((function(){r[l]?n(createIterResult(void 0,!0)):r[d](n,i)}),i)}}(a,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(createIterResult(o,!1));i=new Promise(this[d])}return this[c]=i,i}},Symbol.asyncIterator,(function(){return this})),_defineProperty(i,"return",(function _return(){var t=this;return new Promise((function(r,n){t[p].destroy(null,(function(t){t?n(t):r(createIterResult(void 0,!0))}))}))})),i),m);t.exports=function createReadableStreamAsyncIterator(t){var r,n=Object.create(g,(_defineProperty(r={},p,{value:t,writable:!0}),_defineProperty(r,o,{value:null,writable:!0}),_defineProperty(r,s,{value:null,writable:!0}),_defineProperty(r,h,{value:null,writable:!0}),_defineProperty(r,l,{value:t._readableState.endEmitted,writable:!0}),_defineProperty(r,d,{value:function value(t,r){var i=n[p].read();i?(n[c]=null,n[o]=null,n[s]=null,t(createIterResult(i,!1))):(n[o]=t,n[s]=r)},writable:!0}),r));return n[c]=null,a(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var r=n[s];return null!==r&&(n[c]=null,n[o]=null,n[s]=null,r(t)),void(n[h]=t)}var i=n[o];null!==i&&(n[c]=null,n[o]=null,n[s]=null,i(createIterResult(void 0,!0))),n[l]=!0})),t.on("readable",onReadable.bind(null,n)),n}}).call(this,n(12))},function(t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(t,r,n){"use strict";t.exports=PassThrough;var i=n(142);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);i.call(this,t)}n(5)(PassThrough,i),PassThrough.prototype._transform=function(t,r,n){n(null,t)}},function(t,r,n){"use strict";var i;var a=n(42).codes,o=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function noop(t){if(t)throw t}function destroyer(t,r,a,o){o=function once(t){var r=!1;return function(){r||(r=!0,t.apply(void 0,arguments))}}(o);var h=!1;t.on("close",(function(){h=!0})),void 0===i&&(i=n(82)),i(t,{readable:r,writable:a},(function(t){if(t)return o(t);h=!0,o()}));var l=!1;return function(r){if(!h&&!l)return l=!0,function isRequest(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(r||new s("pipe"))}}function call(t){t()}function pipe(t,r){return t.pipe(r)}function popCallback(t){return t.length?"function"!=typeof t[t.length-1]?noop:t.pop():noop}t.exports=function pipeline(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i,a=popCallback(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new o("streams");var s=r.map((function(t,n){var o=n<r.length-1;return destroyer(t,o,n>0,(function(t){i||(i=t),t&&s.forEach(call),o||(s.forEach(call),a(i))}))}));return r.reduce(pipe)}},function(t,r,n){var i=n(81).Buffer,a=n(119),o=n(83),s=n(85).ec,h=n(84),l=n(64),c=n(154);function getKey(t,r,n,o){if((t=i.from(t.toArray())).length<r.byteLength()){var s=i.alloc(r.byteLength()-t.length);t=i.concat([s,t])}var h=n.length,l=function bits2octets(t,r){t=(t=bits2int(t,r)).mod(r);var n=i.from(t.toArray());if(n.length<r.byteLength()){var a=i.alloc(r.byteLength()-n.length);n=i.concat([a,n])}return n}(n,r),c=i.alloc(h);c.fill(1);var d=i.alloc(h);return d=a(o,d).update(c).update(i.from([0])).update(t).update(l).digest(),c=a(o,d).update(c).digest(),{k:d=a(o,d).update(c).update(i.from([1])).update(t).update(l).digest(),v:c=a(o,d).update(c).digest()}}function bits2int(t,r){var n=new h(t),i=(t.length<<3)-r.bitLength();return i>0&&n.ishrn(i),n}function makeKey(t,r,n){var o,s;do{for(o=i.alloc(0);8*o.length<t.bitLength();)r.v=a(n,r.k).update(r.v).digest(),o=i.concat([o,r.v]);s=bits2int(o,t),r.k=a(n,r.k).update(r.v).update(i.from([0])).digest(),r.v=a(n,r.k).update(r.v).digest()}while(-1!==s.cmp(t));return s}function makeR(t,r,n,i){return t.toRed(h.mont(n)).redPow(r).fromRed().mod(i)}t.exports=function sign(t,r,n,a,d){var p=l(r);if(p.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");return function ecSign(t,r){var n=c[r.curve.join(".")];if(!n)throw new Error("unknown curve "+r.curve.join("."));var a=new s(n).keyFromPrivate(r.privateKey).sign(t);return i.from(a.toDER())}(t,p)}if("dsa"===p.type){if("dsa"!==a)throw new Error("wrong private key type");return function dsaSign(t,r,n){var a,o=r.params.priv_key,s=r.params.p,l=r.params.q,c=r.params.g,d=new h(0),p=bits2int(t,l).mod(l),m=!1,g=getKey(o,l,t,n);for(;!1===m;)d=makeR(c,a=makeKey(l,g,n),s,l),0===(m=a.invm(l).imul(p.add(o.mul(d))).mod(l)).cmpn(0)&&(m=!1,d=new h(0));return function toDER(t,r){t=t.toArray(),r=r.toArray(),128&t[0]&&(t=[0].concat(t));128&r[0]&&(r=[0].concat(r));var n=[48,t.length+r.length+4,2,t.length];return n=n.concat(t,[2,r.length],r),i.from(n)}(d,m)}(t,p,n)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");t=i.concat([d,t]);for(var m=p.modulus.byteLength(),g=[0,1];t.length+g.length+1<m;)g.push(255);g.push(0);for(var y=-1;++y<t.length;)g.push(t[y]);return o(g,p)},t.exports.getKey=getKey,t.exports.makeKey=makeKey},function(t,r){},function(t){t.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@^6.5.3","_where":"W:\\\\3hexmap\\\\node_modules\\\\browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')},function(t,r){},function(t,r,n){"use strict";var i=n(19),a=n(23),o=n(5),s=n(63),h=i.assert;function ShortCurve(t){s.call(this,"short",t),this.a=new a(t.a,16).toRed(this.red),this.b=new a(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(t,r,n,i){s.BasePoint.call(this,t,"affine"),null===r&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(r,16),this.y=new a(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(t,r,n,i){s.BasePoint.call(this,t,"jacobian"),null===r&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(r,16),this.y=new a(n,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(ShortCurve,s),t.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function _getEndomorphism(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var r,n;if(t.beta)r=new a(t.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=(r=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(t.lambda)n=new a(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(r))?n=o[0]:(n=o[1],h(0===this.g.mul(n).x.cmp(this.g.x.redMul(r))))}return{beta:r,lambda:n,basis:t.basis?t.basis.map((function(t){return{a:new a(t.a,16),b:new a(t.b,16)}})):this._getEndoBasis(n)}}},ShortCurve.prototype._getEndoRoots=function _getEndoRoots(t){var r=t===this.p?this.red:a.mont(t),n=new a(2).toRed(r).redInvm(),i=n.redNeg(),o=new a(3).toRed(r).redNeg().redSqrt().redMul(n);return[i.redAdd(o).fromRed(),i.redSub(o).fromRed()]},ShortCurve.prototype._getEndoBasis=function _getEndoBasis(t){for(var r,n,i,o,s,h,l,c,d,p=this.n.ushrn(Math.floor(this.n.bitLength()/2)),m=t,g=this.n.clone(),y=new a(1),b=new a(0),w=new a(0),M=new a(1),_=0;0!==m.cmpn(0);){var x=g.div(m);c=g.sub(x.mul(m)),d=w.sub(x.mul(y));var A=M.sub(x.mul(b));if(!i&&c.cmp(p)<0)r=l.neg(),n=y,i=c.neg(),o=d;else if(i&&2==++_)break;l=c,g=m,m=c,w=y,y=d,M=b,b=A}s=c.neg(),h=d;var E=i.sqr().add(o.sqr());return s.sqr().add(h.sqr()).cmp(E)>=0&&(s=r,h=n),i.negative&&(i=i.neg(),o=o.neg()),s.negative&&(s=s.neg(),h=h.neg()),[{a:i,b:o},{a:s,b:h}]},ShortCurve.prototype._endoSplit=function _endoSplit(t){var r=this.endo.basis,n=r[0],i=r[1],a=i.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),s=a.mul(n.a),h=o.mul(i.a),l=a.mul(n.b),c=o.mul(i.b);return{k1:t.sub(s).sub(h),k2:l.add(c).neg()}},ShortCurve.prototype.pointFromX=function pointFromX(t,r){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=i.fromRed().isOdd();return(r&&!o||!r&&o)&&(i=i.redNeg()),this.point(t,i)},ShortCurve.prototype.validate=function validate(t){if(t.inf)return!0;var r=t.x,n=t.y,i=this.a.redMul(r),a=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(a).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function _endoWnafMulAdd(t,r,n){for(var i=this._endoWnafT1,a=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(r[o]),h=t[o],l=h._getBeta();s.k1.negative&&(s.k1.ineg(),h=h.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),i[2*o]=h,i[2*o+1]=l,a[2*o]=s.k1,a[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,i,a,2*o,n),d=0;d<2*o;d++)i[d]=null,a[d]=null;return c},o(Point,s.BasePoint),ShortCurve.prototype.point=function point(t,r,n){return new Point(this,t,r,n)},ShortCurve.prototype.pointFromJSON=function pointFromJSON(t,r){return Point.fromJSON(this,t,r)},Point.prototype._getBeta=function _getBeta(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,endoMul=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=r,r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(endoMul)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(endoMul)}}}return r}},Point.prototype.toJSON=function toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function fromJSON(t,r,n){"string"==typeof r&&(r=JSON.parse(r));var i=t.point(r[0],r[1],n);if(!r[2])return i;function obj2point(r){return t.point(r[0],r[1],n)}var a=r[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(obj2point))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(obj2point))}},i},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return this.inf},Point.prototype.add=function add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var r=this.y.redSub(t.y);0!==r.cmpn(0)&&(r=r.redMul(this.x.redSub(t.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(t.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},Point.prototype.dbl=function dbl(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=t.redInvm(),a=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=a.redSqr().redISub(this.x.redAdd(this.x)),s=a.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},Point.prototype.getX=function getX(){return this.x.fromRed()},Point.prototype.getY=function getY(){return this.y.fromRed()},Point.prototype.mul=function mul(t){return t=new a(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function mulAdd(t,r,n){var i=[this,r],a=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a):this.curve._wnafMulAdd(1,i,a,2)},Point.prototype.jmulAdd=function jmulAdd(t,r,n){var i=[this,r],a=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a,!0):this.curve._wnafMulAdd(1,i,a,2,!0)},Point.prototype.eq=function eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},Point.prototype.neg=function neg(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,negate=function(t){return t.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(negate)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(negate)}}}return r},Point.prototype.toJ=function toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(JPoint,s.BasePoint),ShortCurve.prototype.jpoint=function jpoint(t,r,n){return new JPoint(this,t,r,n)},JPoint.prototype.toP=function toP(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),r=t.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)},JPoint.prototype.neg=function neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),a=t.x.redMul(n),o=this.y.redMul(r.redMul(t.z)),s=t.y.redMul(n.redMul(this.z)),h=i.redSub(a),l=o.redSub(s);if(0===h.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=h.redSqr(),d=c.redMul(h),p=i.redMul(c),m=l.redSqr().redIAdd(d).redISub(p).redISub(p),g=l.redMul(p.redISub(m)).redISub(o.redMul(d)),y=this.z.redMul(t.z).redMul(h);return this.curve.jpoint(m,g,y)},JPoint.prototype.mixedAdd=function mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=t.x.redMul(r),a=this.y,o=t.y.redMul(r).redMul(this.z),s=n.redSub(i),h=a.redSub(o);if(0===s.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),d=n.redMul(l),p=h.redSqr().redIAdd(c).redISub(d).redISub(d),m=h.redMul(d.redISub(p)).redISub(a.redMul(c)),g=this.z.redMul(s);return this.curve.jpoint(p,m,g)},JPoint.prototype.dblp=function dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a,a=this.curve.tinv,o=this.x,s=this.y,h=this.z,l=h.redSqr().redSqr(),c=s.redAdd(s);for(r=0;r<t;r++){var d=o.redSqr(),p=c.redSqr(),m=p.redSqr(),g=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(l)),y=o.redMul(p),b=g.redSqr().redISub(y.redAdd(y)),w=y.redISub(b),M=g.redMul(w);M=M.redIAdd(M).redISub(m);var _=c.redMul(h);r+1<t&&(l=l.redMul(m)),o=b,h=_,c=M}return this.curve.jpoint(o,c.redMul(a),h)},JPoint.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function _zeroDbl(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var h=i.redAdd(i).redIAdd(i),l=h.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=l,r=h.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),p=this.y.redSqr(),m=p.redSqr(),g=this.x.redAdd(p).redSqr().redISub(d).redISub(m);g=g.redIAdd(g);var y=d.redAdd(d).redIAdd(d),b=y.redSqr(),w=m.redIAdd(m);w=(w=w.redIAdd(w)).redIAdd(w),t=b.redISub(g).redISub(g),r=y.redMul(g.redISub(t)).redISub(w),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,r,n)},JPoint.prototype._threeDbl=function _threeDbl(){var t,r,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),o=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=h.redSqr().redISub(s).redISub(s);t=l;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),r=h.redMul(s.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),p=this.y.redSqr(),m=this.x.redMul(p),g=this.x.redSub(d).redMul(this.x.redAdd(d));g=g.redAdd(g).redIAdd(g);var y=m.redIAdd(m),b=(y=y.redIAdd(y)).redAdd(y);t=g.redSqr().redISub(b),n=this.y.redAdd(this.z).redSqr().redISub(p).redISub(d);var w=p.redSqr();w=(w=(w=w.redIAdd(w)).redIAdd(w)).redIAdd(w),r=g.redMul(y.redISub(t)).redISub(w)}return this.curve.jpoint(t,r,n)},JPoint.prototype._dbl=function _dbl(){var t=this.curve.a,r=this.x,n=this.y,i=this.z,a=i.redSqr().redSqr(),o=r.redSqr(),s=n.redSqr(),h=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(a)),l=r.redAdd(r),c=(l=l.redIAdd(l)).redMul(s),d=h.redSqr().redISub(c.redAdd(c)),p=c.redISub(d),m=s.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m);var g=h.redMul(p).redISub(m),y=n.redAdd(n).redMul(i);return this.curve.jpoint(d,g,y)},JPoint.prototype.trpl=function trpl(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),a=t.redAdd(t).redIAdd(t),o=a.redSqr(),s=this.x.redAdd(r).redSqr().redISub(t).redISub(i),h=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),l=i.redIAdd(i);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=a.redIAdd(s).redSqr().redISub(o).redISub(h).redISub(l),d=r.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var p=this.x.redMul(h).redISub(d);p=(p=p.redIAdd(p)).redIAdd(p);var m=this.y.redMul(c.redMul(l.redISub(c)).redISub(s.redMul(h)));m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m);var g=this.z.redAdd(s).redSqr().redISub(n).redISub(h);return this.curve.jpoint(p,m,g)},JPoint.prototype.mul=function mul(t,r){return t=new a(t,r),this.curve._wnafMul(this,t)},JPoint.prototype.eq=function eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var r=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0))return!1;var i=r.redMul(this.z),a=n.redMul(t.z);return 0===this.y.redMul(a).redISub(t.y.redMul(i)).cmpn(0)},JPoint.prototype.eqXToP=function eqXToP(t){var r=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(r);if(0===this.x.cmp(n))return!0;for(var i=t.clone(),a=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(a),0===this.x.cmp(n))return!0}},JPoint.prototype.inspect=function inspect(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)}},function(t,r,n){"use strict";var i=n(23),a=n(5),o=n(63),s=n(19);function MontCurve(t){o.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(t,r,n){o.BasePoint.call(this,t,"projective"),null===r&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(r,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(MontCurve,o),t.exports=MontCurve,MontCurve.prototype.validate=function validate(t){var r=t.normalize().x,n=r.redSqr(),i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r);return 0===i.redSqrt().redSqr().cmp(i)},a(Point,o.BasePoint),MontCurve.prototype.decodePoint=function decodePoint(t,r){return this.point(s.toArray(t,r),1)},MontCurve.prototype.point=function point(t,r){return new Point(this,t,r)},MontCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},Point.prototype.precompute=function precompute(){},Point.prototype._encode=function _encode(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function fromJSON(t,r){return new Point(t,r[0],r[1]||t.one)},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function dbl(){var t=this.x.redAdd(this.z).redSqr(),r=this.x.redSub(this.z).redSqr(),n=t.redSub(r),i=t.redMul(r),a=n.redMul(r.redAdd(this.curve.a24.redMul(n)));return this.curve.point(i,a)},Point.prototype.add=function add(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function diffAdd(t,r){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),a=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(n),s=a.redMul(i),h=r.z.redMul(o.redAdd(s).redSqr()),l=r.x.redMul(o.redISub(s).redSqr());return this.curve.point(h,l)},Point.prototype.mul=function mul(t){for(var r=t.clone(),n=this,i=this.curve.point(null,null),a=[];0!==r.cmpn(0);r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--)0===a[o]?(n=n.diffAdd(i,this),i=i.dbl()):(i=n.diffAdd(i,this),n=n.dbl());return i},Point.prototype.mulAdd=function mulAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.jumlAdd=function jumlAdd(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function eq(t){return 0===this.getX().cmp(t.getX())},Point.prototype.normalize=function normalize(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()}},function(t,r,n){"use strict";var i=n(19),a=n(23),o=n(5),s=n(63),h=i.assert;function EdwardsCurve(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new a(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),h(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function Point(t,r,n,i,o){s.BasePoint.call(this,t,"projective"),null===r&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(r,16),this.y=new a(n,16),this.z=i?new a(i,16):this.curve.one,this.t=o&&new a(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(EdwardsCurve,s),t.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function _mulA(t){return this.mOneA?t.redNeg():this.a.redMul(t)},EdwardsCurve.prototype._mulC=function _mulC(t){return this.oneC?t:this.c.redMul(t)},EdwardsCurve.prototype.jpoint=function jpoint(t,r,n,i){return this.point(t,r,n,i)},EdwardsCurve.prototype.pointFromX=function pointFromX(t,r){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),h=s.redSqrt();if(0!==h.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var l=h.fromRed().isOdd();return(r&&!l||!r&&l)&&(h=h.redNeg()),this.point(t,h)},EdwardsCurve.prototype.pointFromY=function pointFromY(t,r){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(r)throw new Error("invalid point");return this.point(this.zero,t)}var h=s.redSqrt();if(0!==h.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return h.fromRed().isOdd()!==r&&(h=h.redNeg()),this.point(h,t)},EdwardsCurve.prototype.validate=function validate(t){if(t.isInfinity())return!0;t.normalize();var r=t.x.redSqr(),n=t.y.redSqr(),i=r.redMul(this.a).redAdd(n),a=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return 0===i.cmp(a)},o(Point,s.BasePoint),EdwardsCurve.prototype.pointFromJSON=function pointFromJSON(t){return Point.fromJSON(this,t)},EdwardsCurve.prototype.point=function point(t,r,n,i){return new Point(this,t,r,n,i)},Point.fromJSON=function fromJSON(t,r){return new Point(t,r[0],r[1],r[2])},Point.prototype.inspect=function inspect(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function isInfinity(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Point.prototype._extDbl=function _extDbl(){var t=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t),a=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r),o=i.redAdd(r),s=o.redSub(n),h=i.redSub(r),l=a.redMul(s),c=o.redMul(h),d=a.redMul(h),p=s.redMul(o);return this.curve.point(l,c,p,d)},Point.prototype._projDbl=function _projDbl(){var t,r,n,i,a,o,s=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var c=(i=this.curve._mulA(h)).redAdd(l);this.zOne?(t=s.redSub(h).redSub(l).redMul(c.redSub(this.curve.two)),r=c.redMul(i.redSub(l)),n=c.redSqr().redSub(c).redSub(c)):(a=this.z.redSqr(),o=c.redSub(a).redISub(a),t=s.redSub(h).redISub(l).redMul(o),r=c.redMul(i.redSub(l)),n=c.redMul(o))}else i=h.redAdd(l),a=this.curve._mulC(this.z).redSqr(),o=i.redSub(a).redSub(a),t=this.curve._mulC(s.redISub(i)).redMul(o),r=this.curve._mulC(i).redMul(h.redISub(l)),n=i.redMul(o);return this.curve.point(t,r,n)},Point.prototype.dbl=function dbl(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function _extAdd(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),a=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(r),s=a.redSub(i),h=a.redAdd(i),l=n.redAdd(r),c=o.redMul(s),d=h.redMul(l),p=o.redMul(l),m=s.redMul(h);return this.curve.point(c,d,m,p)},Point.prototype._projAdd=function _projAdd(t){var r,n,i=this.z.redMul(t.z),a=i.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),h=this.curve.d.redMul(o).redMul(s),l=a.redSub(h),c=a.redAdd(h),d=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),p=i.redMul(l).redMul(d);return this.curve.twisted?(r=i.redMul(c).redMul(s.redSub(this.curve._mulA(o))),n=l.redMul(c)):(r=i.redMul(c).redMul(s.redSub(o)),n=this.curve._mulC(l).redMul(c)),this.curve.point(p,r,n)},Point.prototype.add=function add(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Point.prototype.mul=function mul(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Point.prototype.mulAdd=function mulAdd(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!1)},Point.prototype.jmulAdd=function jmulAdd(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,!0)},Point.prototype.normalize=function normalize(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function neg(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function getX(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function getY(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function eq(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},Point.prototype.eqXToP=function eqXToP(t){var r=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},function(t,r,n){"use strict";r.sha1=n(253),r.sha224=n(254),r.sha256=n(146),r.sha384=n(255),r.sha512=n(147)},function(t,r,n){"use strict";var i=n(21),a=n(54),o=n(145),s=i.rotl32,h=i.sum32,l=i.sum32_5,c=o.ft_1,d=a.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(SHA1,d),t.exports=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function _update(t,r){for(var n=this.W,i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=s(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],o=this.h[1],d=this.h[2],m=this.h[3],g=this.h[4];for(i=0;i<n.length;i++){var y=~~(i/20),b=l(s(a,5),c(y,o,d,m),g,n[i],p[y]);g=m,m=d,d=s(o,30),o=a,a=b}this.h[0]=h(this.h[0],a),this.h[1]=h(this.h[1],o),this.h[2]=h(this.h[2],d),this.h[3]=h(this.h[3],m),this.h[4]=h(this.h[4],g)},SHA1.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(t,r,n){"use strict";var i=n(21),a=n(146);function SHA224(){if(!(this instanceof SHA224))return new SHA224;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(SHA224,a),t.exports=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},function(t,r,n){"use strict";var i=n(21),a=n(147);function SHA384(){if(!(this instanceof SHA384))return new SHA384;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(SHA384,a),t.exports=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},function(t,r,n){"use strict";var i=n(21),a=n(54),o=i.rotl32,s=i.sum32,h=i.sum32_3,l=i.sum32_4,c=a.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(t,r,n,i){return t<=15?r^n^i:t<=31?r&n|~r&i:t<=47?(r|~n)^i:t<=63?r&i|n&~i:r^(n|~i)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}i.inherits(RIPEMD160,c),r.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function update(t,r){for(var n=this.h[0],i=this.h[1],a=this.h[2],c=this.h[3],y=this.h[4],b=n,w=i,M=a,_=c,x=y,A=0;A<80;A++){var E=s(o(l(n,f(A,i,a,c),t[d[A]+r],K(A)),m[A]),y);n=y,y=c,c=o(a,10),a=i,i=E,E=s(o(l(b,f(79-A,w,M,_),t[p[A]+r],Kh(A)),g[A]),x),b=x,x=_,_=o(M,10),M=w,w=E}E=h(this.h[1],a,_),this.h[1]=h(this.h[2],c,x),this.h[2]=h(this.h[3],y,b),this.h[3]=h(this.h[4],n,w),this.h[4]=h(this.h[0],i,M),this.h[0]=E},RIPEMD160.prototype._digest=function digest(t){return"hex"===t?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],p=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,r,n){"use strict";var i=n(21),a=n(18);function Hmac(t,r,n){if(!(this instanceof Hmac))return new Hmac(t,r,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(r,n))}t.exports=Hmac,Hmac.prototype._init=function init(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),a(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;for(this.inner=(new this.Hash).update(t),r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)},Hmac.prototype.update=function update(t,r){return this.inner.update(t,r),this},Hmac.prototype.digest=function digest(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,r){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,r,n){"use strict";var i=n(23),a=n(260),o=n(19),s=n(86),h=n(80),l=o.assert,c=n(261),d=n(262);function EC(t){if(!(this instanceof EC))return new EC(t);"string"==typeof t&&(l(Object.prototype.hasOwnProperty.call(s,t),"Unknown curve "+t),t=s[t]),t instanceof s.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=EC,EC.prototype.keyPair=function keyPair(t){return new c(this,t)},EC.prototype.keyFromPrivate=function keyFromPrivate(t,r){return c.fromPrivate(this,t,r)},EC.prototype.keyFromPublic=function keyFromPublic(t,r){return c.fromPublic(this,t,r)},EC.prototype.genKeyPair=function genKeyPair(t){t||(t={});for(var r=new a({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||h(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new i(2));;){var s=new i(r.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},EC.prototype._truncateToN=function _truncateToN(t,r){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},EC.prototype.sign=function sign(t,r,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),r=this.keyFromPrivate(r,n),t=this._truncateToN(new i(t,16));for(var s=this.n.byteLength(),h=r.getPrivate().toArray("be",s),l=t.toArray("be",s),c=new a({hash:this.hash,entropy:h,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),p=this.n.sub(new i(1)),m=0;;m++){var g=o.k?o.k(m):new i(c.generate(this.n.byteLength()));if(!((g=this._truncateToN(g,!0)).cmpn(1)<=0||g.cmp(p)>=0)){var y=this.g.mul(g);if(!y.isInfinity()){var b=y.getX(),w=b.umod(this.n);if(0!==w.cmpn(0)){var M=g.invm(this.n).mul(w.mul(r.getPrivate()).iadd(t));if(0!==(M=M.umod(this.n)).cmpn(0)){var _=(y.getY().isOdd()?1:0)|(0!==b.cmp(w)?2:0);return o.canonical&&M.cmp(this.nh)>0&&(M=this.n.sub(M),_^=1),new d({r:w,s:M,recoveryParam:_})}}}}}},EC.prototype.verify=function verify(t,r,n,a){t=this._truncateToN(new i(t,16)),n=this.keyFromPublic(n,a);var o=(r=new d(r,"hex")).r,s=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var h,l=s.invm(this.n),c=l.mul(t).umod(this.n),p=l.mul(o).umod(this.n);return this.curve._maxwellTrick?!(h=this.g.jmulAdd(c,n.getPublic(),p)).isInfinity()&&h.eqXToP(o):!(h=this.g.mulAdd(c,n.getPublic(),p)).isInfinity()&&0===h.getX().umod(this.n).cmp(o)},EC.prototype.recoverPubKey=function(t,r,n,a){l((3&n)===n,"The recovery param is more than two bits"),r=new d(r,a);var o=this.n,s=new i(t),h=r.r,c=r.s,p=1&n,m=n>>1;if(h.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");h=m?this.curve.pointFromX(h.add(this.curve.n),p):this.curve.pointFromX(h,p);var g=r.r.invm(o),y=o.sub(s).mul(g).umod(o),b=c.mul(g).umod(o);return this.g.mulAdd(y,h,b)},EC.prototype.getKeyRecoveryParam=function(t,r,n,i){if(null!==(r=new d(r,i)).recoveryParam)return r.recoveryParam;for(var a=0;a<4;a++){var o;try{o=this.recoverPubKey(t,r,a)}catch(t){continue}if(o.eq(n))return a}throw new Error("Unable to find valid recovery factor")}},function(t,r,n){"use strict";var i=n(87),a=n(143),o=n(18);function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var r=a.toArray(t.entropy,t.entropyEnc||"hex"),n=a.toArray(t.nonce,t.nonceEnc||"hex"),i=a.toArray(t.pers,t.persEnc||"hex");o(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(r,n,i)}t.exports=HmacDRBG,HmacDRBG.prototype._init=function init(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function hmac(){return new i.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function update(t){var r=this._hmac().update(this.V).update([0]);t&&(r=r.update(t)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function reseed(t,r,n,i){"string"!=typeof r&&(i=n,n=r,r=null),t=a.toArray(t,r),n=a.toArray(n,i),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},HmacDRBG.prototype.generate=function generate(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof r&&(i=n,n=r,r=null),n&&(n=a.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,t);return this._update(n),this._reseed++,a.encode(s,r)}},function(t,r,n){"use strict";var i=n(23),a=n(19).assert;function KeyPair(t,r){this.ec=t,this.priv=null,this.pub=null,r.priv&&this._importPrivate(r.priv,r.privEnc),r.pub&&this._importPublic(r.pub,r.pubEnc)}t.exports=KeyPair,KeyPair.fromPublic=function fromPublic(t,r,n){return r instanceof KeyPair?r:new KeyPair(t,{pub:r,pubEnc:n})},KeyPair.fromPrivate=function fromPrivate(t,r,n){return r instanceof KeyPair?r:new KeyPair(t,{priv:r,privEnc:n})},KeyPair.prototype.validate=function validate(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function getPublic(t,r){return"string"==typeof t&&(r=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,t):this.pub},KeyPair.prototype.getPrivate=function getPrivate(t){return"hex"===t?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function _importPrivate(t,r){this.priv=new i(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function _importPublic(t,r){if(t.x||t.y)return"mont"===this.ec.curve.type?a(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,r)},KeyPair.prototype.derive=function derive(t){return t.validate()||a(t.validate(),"public point not validated"),t.mul(this.priv).getX()},KeyPair.prototype.sign=function sign(t,r,n){return this.ec.sign(t,this,r,n)},KeyPair.prototype.verify=function verify(t,r){return this.ec.verify(t,r,this)},KeyPair.prototype.inspect=function inspect(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,r,n){"use strict";var i=n(23),a=n(19),o=a.assert;function Signature(t,r){if(t instanceof Signature)return t;this._importDER(t,r)||(o(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function Position(){this.place=0}function getLength(t,r){var n=t[r.place++];if(!(128&n))return n;var i=15&n;if(0===i||i>4)return!1;for(var a=0,o=0,s=r.place;o<i;o++,s++)a<<=8,a|=t[s],a>>>=0;return!(a<=127)&&(r.place=s,a)}function rmPadding(t){for(var r=0,n=t.length-1;!t[r]&&!(128&t[r+1])&&r<n;)r++;return 0===r?t:t.slice(r)}function constructLength(t,r){if(r<128)t.push(r);else{var n=1+(Math.log(r)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(r>>>(n<<3)&255);t.push(r)}}t.exports=Signature,Signature.prototype._importDER=function _importDER(t,r){t=a.toArray(t,r);var n=new Position;if(48!==t[n.place++])return!1;var o=getLength(t,n);if(!1===o)return!1;if(o+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var s=getLength(t,n);if(!1===s)return!1;var h=t.slice(n.place,s+n.place);if(n.place+=s,2!==t[n.place++])return!1;var l=getLength(t,n);if(!1===l)return!1;if(t.length!==l+n.place)return!1;var c=t.slice(n.place,l+n.place);if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new i(h),this.s=new i(c),this.recoveryParam=null,!0},Signature.prototype.toDER=function toDER(t){var r=this.r.toArray(),n=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&n[0]&&(n=[0].concat(n)),r=rmPadding(r),n=rmPadding(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];constructLength(i,r.length),(i=i.concat(r)).push(2),constructLength(i,n.length);var o=i.concat(n),s=[48];return constructLength(s,o.length),s=s.concat(o),a.encode(s,t)}},function(t,r,n){"use strict";var i=n(87),a=n(86),o=n(19),s=o.assert,h=o.parseBytes,l=n(264),c=n(265);function EDDSA(t){if(s("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=a[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=i.sha512}t.exports=EDDSA,EDDSA.prototype.sign=function sign(t,r){t=h(t);var n=this.keyFromSecret(r),i=this.hashInt(n.messagePrefix(),t),a=this.g.mul(i),o=this.encodePoint(a),s=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),l=i.add(s).umod(this.curve.n);return this.makeSignature({R:a,S:l,Rencoded:o})},EDDSA.prototype.verify=function verify(t,r,n){t=h(t),r=this.makeSignature(r);var i=this.keyFromPublic(n),a=this.hashInt(r.Rencoded(),i.pubBytes(),t),o=this.g.mul(r.S());return r.R().add(i.pub().mul(a)).eq(o)},EDDSA.prototype.hashInt=function hashInt(){for(var t=this.hash(),r=0;r<arguments.length;r++)t.update(arguments[r]);return o.intFromLE(t.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function keyFromPublic(t){return l.fromPublic(this,t)},EDDSA.prototype.keyFromSecret=function keyFromSecret(t){return l.fromSecret(this,t)},EDDSA.prototype.makeSignature=function makeSignature(t){return t instanceof c?t:new c(this,t)},EDDSA.prototype.encodePoint=function encodePoint(t){var r=t.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=t.getX().isOdd()?128:0,r},EDDSA.prototype.decodePoint=function decodePoint(t){var r=(t=o.parseBytes(t)).length-1,n=t.slice(0,r).concat(-129&t[r]),i=0!=(128&t[r]),a=o.intFromLE(n);return this.curve.pointFromY(a,i)},EDDSA.prototype.encodeInt=function encodeInt(t){return t.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function decodeInt(t){return o.intFromLE(t)},EDDSA.prototype.isPoint=function isPoint(t){return t instanceof this.pointClass}},function(t,r,n){"use strict";var i=n(19),a=i.assert,o=i.parseBytes,s=i.cachedProperty;function KeyPair(t,r){this.eddsa=t,this._secret=o(r.secret),t.isPoint(r.pub)?this._pub=r.pub:this._pubBytes=o(r.pub)}KeyPair.fromPublic=function fromPublic(t,r){return r instanceof KeyPair?r:new KeyPair(t,{pub:r})},KeyPair.fromSecret=function fromSecret(t,r){return r instanceof KeyPair?r:new KeyPair(t,{secret:r})},KeyPair.prototype.secret=function secret(){return this._secret},s(KeyPair,"pubBytes",(function pubBytes(){return this.eddsa.encodePoint(this.pub())})),s(KeyPair,"pub",(function pub(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(KeyPair,"privBytes",(function privBytes(){var t=this.eddsa,r=this.hash(),n=t.encodingLength-1,i=r.slice(0,t.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i})),s(KeyPair,"priv",(function priv(){return this.eddsa.decodeInt(this.privBytes())})),s(KeyPair,"hash",(function hash(){return this.eddsa.hash().update(this.secret()).digest()})),s(KeyPair,"messagePrefix",(function messagePrefix(){return this.hash().slice(this.eddsa.encodingLength)})),KeyPair.prototype.sign=function sign(t){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},KeyPair.prototype.verify=function verify(t,r){return this.eddsa.verify(t,r,this)},KeyPair.prototype.getSecret=function getSecret(t){return a(this._secret,"KeyPair is public only"),i.encode(this.secret(),t)},KeyPair.prototype.getPublic=function getPublic(t){return i.encode(this.pubBytes(),t)},t.exports=KeyPair},function(t,r,n){"use strict";var i=n(23),a=n(19),o=a.assert,s=a.cachedProperty,h=a.parseBytes;function Signature(t,r){this.eddsa=t,"object"!=typeof r&&(r=h(r)),Array.isArray(r)&&(r={R:r.slice(0,t.encodingLength),S:r.slice(t.encodingLength)}),o(r.R&&r.S,"Signature without R or S"),t.isPoint(r.R)&&(this._R=r.R),r.S instanceof i&&(this._S=r.S),this._Rencoded=Array.isArray(r.R)?r.R:r.Rencoded,this._Sencoded=Array.isArray(r.S)?r.S:r.Sencoded}s(Signature,"S",(function S(){return this.eddsa.decodeInt(this.Sencoded())})),s(Signature,"R",(function R(){return this.eddsa.decodePoint(this.Rencoded())})),s(Signature,"Rencoded",(function Rencoded(){return this.eddsa.encodePoint(this.R())})),s(Signature,"Sencoded",(function Sencoded(){return this.eddsa.encodeInt(this.S())})),Signature.prototype.toBytes=function toBytes(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function toHex(){return a.encode(this.toBytes(),"hex").toUpperCase()},t.exports=Signature},function(t,r,n){"use strict";var i=n(148);r.certificate=n(273);var a=i.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));r.RSAPrivateKey=a;var o=i.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));r.RSAPublicKey=o;var s=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(h),this.key("subjectPublicKey").bitstr())}));r.PublicKey=s;var h=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),l=i.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(h),this.key("subjectPrivateKey").octstr())}));r.PrivateKey=l;var c=i.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));r.EncryptedPrivateKey=c;var d=i.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));r.DSAPrivateKey=d,r.DSAparam=i.define("DSAparam",(function(){this.int()}));var p=i.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())}));r.ECPrivateKey=p;var m=i.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));r.signature=i.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(t,r){},function(t,r,n){"use strict";const i=n(150),a=n(152),o=n(5);function Entity(t,r){this.name=t,this.body=r,this.decoders={},this.encoders={}}r.define=function define(t,r){return new Entity(t,r)},Entity.prototype._createNamed=function createNamed(t){const r=this.name;function Generated(t){this._initNamed(t,r)}return o(Generated,t),Generated.prototype._initNamed=function _initNamed(r,n){t.call(this,r,n)},new Generated(this)},Entity.prototype._getDecoder=function _getDecoder(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(a[t])),this.decoders[t]},Entity.prototype.decode=function decode(t,r,n){return this._getDecoder(r).decode(t,n)},Entity.prototype._getEncoder=function _getEncoder(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i[t])),this.encoders[t]},Entity.prototype.encode=function encode(t,r,n){return this._getEncoder(r).encode(t,n)}},function(t,r,n){"use strict";const i=n(5),a=n(151);function PEMEncoder(t){a.call(this,t),this.enc="pem"}i(PEMEncoder,a),t.exports=PEMEncoder,PEMEncoder.prototype.encode=function encode(t,r){const n=a.prototype.encode.call(this,t).toString("base64"),i=["-----BEGIN "+r.label+"-----"];for(let t=0;t<n.length;t+=64)i.push(n.slice(t,t+64));return i.push("-----END "+r.label+"-----"),i.join("\n")}},function(t,r,n){"use strict";const i=n(5),a=n(88).Buffer,o=n(153);function PEMDecoder(t){o.call(this,t),this.enc="pem"}i(PEMDecoder,o),t.exports=PEMDecoder,PEMDecoder.prototype.decode=function decode(t,r){const n=t.toString().split(/[\r\n]+/g),i=r.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let h=-1,l=-1;for(let t=0;t<n.length;t++){const r=n[t].match(s);if(null!==r&&r[2]===i){if(-1!==h){if("END"!==r[1])break;l=t;break}if("BEGIN"!==r[1])break;h=t}}if(-1===h||-1===l)throw new Error("PEM section not found for: "+i);const c=n.slice(h+1,l).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const d=a.from(c,"base64");return o.prototype.decode.call(this,d,r)}},function(t,r,n){"use strict";const i=r;i.Reporter=n(90).Reporter,i.DecoderBuffer=n(55).DecoderBuffer,i.EncoderBuffer=n(55).EncoderBuffer,i.Node=n(89)},function(t,r,n){"use strict";const i=r;i._reverse=function reverse(t){const r={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);const i=t[n];r[i]=n})),r},i.der=n(91)},function(t,r,n){"use strict";var i=n(148),a=i.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),h=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),l=i.define("RelativeDistinguishedName",(function(){this.setof(o)})),c=i.define("RDNSequence",(function(){this.seqof(l)})),d=i.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),p=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))})),m=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),g=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(d),this.key("validity").use(p),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(h),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(m).optional())})),y=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));t.exports=y},function(t){t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(t,r,n){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=n(62),h=n(78),l=n(9).Buffer;t.exports=function(t,r){var n,c=t.toString(),d=c.match(i);if(d){var p="aes"+d[1],m=l.from(d[2],"hex"),g=l.from(d[3].replace(/[\r\n]/g,""),"base64"),y=s(r,m.slice(0,8),parseInt(d[1],10)).key,b=[],w=h.createDecipheriv(p,y,m);b.push(w.update(g)),b.push(w.final()),n=l.concat(b)}else{var M=c.match(o);n=l.from(M[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(a)[1],data:n}}},function(t,r,n){var i=n(81).Buffer,a=n(84),o=n(85).ec,s=n(64),h=n(154);function checkValue(t,r){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(r)>=r)throw new Error("invalid sig")}t.exports=function verify(t,r,n,l,c){var d=s(n);if("ec"===d.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function ecVerify(t,r,n){var i=h[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var a=new o(i),s=n.data.subjectPrivateKey.data;return a.verify(r,t,s)}(t,r,d)}if("dsa"===d.type){if("dsa"!==l)throw new Error("wrong public key type");return function dsaVerify(t,r,n){var i=n.data.p,o=n.data.q,h=n.data.g,l=n.data.pub_key,c=s.signature.decode(t,"der"),d=c.s,p=c.r;checkValue(d,o),checkValue(p,o);var m=a.mont(i),g=d.invm(o);return 0===h.toRed(m).redPow(new a(r).mul(g).mod(o)).fromRed().mul(l.toRed(m).redPow(p.mul(g).mod(o)).fromRed()).mod(i).mod(o).cmp(p)}(t,r,d)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");r=i.concat([c,r]);for(var p=d.modulus.byteLength(),m=[1],g=0;r.length+m.length+2<p;)m.push(255),g++;m.push(0);for(var y=-1;++y<r.length;)m.push(r[y]);m=i.from(m);var b=a.mont(d.modulus);t=(t=new a(t).toRed(b)).redPow(new a(d.publicExponent)),t=i.from(t.fromRed().toArray());var w=g<8?1:0;for(p=Math.min(t.length,m.length),t.length!==m.length&&(w=1),y=-1;++y<p;)w|=t[y]^m[y];return 0===w}},function(t,r,n){(function(r){var i=n(85),a=n(278);t.exports=function createECDH(t){return new ECDH(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function ECDH(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function formatReturnValue(t,n,i){Array.isArray(t)||(t=t.toArray());var a=new r(t);if(i&&a.length<i){var o=new r(i-a.length);o.fill(0),a=r.concat([o,a])}return n?a.toString(n):a}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,ECDH.prototype.generateKeys=function(t,r){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,r)},ECDH.prototype.computeSecret=function(t,n,i){return n=n||"utf8",r.isBuffer(t)||(t=new r(t,n)),formatReturnValue(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},ECDH.prototype.getPublicKey=function(t,r){var n=this.keys.getPublic("compressed"===r,!0);return"hybrid"===r&&(n[n.length-1]%2?n[0]=7:n[0]=6),formatReturnValue(n,t)},ECDH.prototype.getPrivateKey=function(t){return formatReturnValue(this.keys.getPrivate(),t)},ECDH.prototype.setPublicKey=function(t,n){return n=n||"utf8",r.isBuffer(t)||(t=new r(t,n)),this.keys._importPublic(t),this},ECDH.prototype.setPrivateKey=function(t,n){n=n||"utf8",r.isBuffer(t)||(t=new r(t,n));var i=new a(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}}).call(this,n(13).Buffer)},function(t,r,n){(function(t){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var TempCtor=function(){};TempCtor.prototype=r.prototype,t.prototype=new TempCtor,t.prototype.constructor=t}function BN(t,r,n){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(n=r,r=10),this._init(t||0,r||10,n||"be"))}var i;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(279).Buffer}catch(t){}function parseHex4Bits(t,r){var n=t.charCodeAt(r);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function parseHexByte(t,r,n){var i=parseHex4Bits(t,n);return n-1>=r&&(i|=parseHex4Bits(t,n-1)<<4),i}function parseBase(t,r,n,i){for(var a=0,o=Math.min(t.length,n),s=r;s<o;s++){var h=t.charCodeAt(s)-48;a*=i,a+=h>=49?h-49+10:h>=17?h-17+10:h}return a}BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,n){if("number"==typeof t)return this._initNumber(t,r,n);if("object"==typeof t)return this._initArray(t,r,n);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===r?this._parseHex(t,i,n):(this._parseBase(t,r,i),"le"===n&&this._initArray(this.toArray(),r,n)))},BN.prototype._initNumber=function _initNumber(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),r,n)},BN.prototype._initArray=function _initArray(t,r,n){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},BN.prototype._parseHex=function _parseHex(t,r,n){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o=0,s=0;if("be"===n)for(i=t.length-1;i>=r;i-=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;else for(i=(t.length-r)%2==0?r+1:r;i<t.length;i+=2)a=parseHexByte(t,r,i)<<o,this.words[s]|=67108863&a,o>=18?(o-=18,s+=1,this.words[s]|=a>>>26):o+=8;this.strip()},BN.prototype._parseBase=function _parseBase(t,r,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=r)i++;i--,a=a/r|0;for(var o=t.length-n,s=o%i,h=Math.min(o,o-s)+n,l=0,c=n;c<h;c+=i)l=parseBase(t,c,c+i,r),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=parseBase(t,c,t.length,r),c=0;c<s;c++)d*=r;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype.strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],o=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(t,r,n){n.negative=r.negative^t.negative;var i=t.length+r.length|0;n.length=i,i=i-1|0;var a=0|t.words[0],o=0|r.words[0],s=a*o,h=67108863&s,l=s/67108864|0;n.words[0]=h;for(var c=1;c<i;c++){for(var d=l>>>26,p=67108863&l,m=Math.min(c,r.length-1),g=Math.max(0,c-t.length+1);g<=m;g++){var y=c-g|0;d+=(s=(a=0|t.words[y])*(o=0|r.words[g])+p)/67108864|0,p=67108863&s}n.words[c]=0|p,l=0|d}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}BN.prototype.toString=function toString(t,r){var n;if(r=0|r||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,h=0,l=0;l<this.length;l++){var c=this.words[l],d=(16777215&(c<<i|h)).toString(16);n=0!==(h=c>>>24-i&16777215)||l!==this.length-1?a[6-d.length]+d+n:d+n,(i+=2)>=26&&(i-=26,l--)}for(0!==h&&(n=h.toString(16)+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var p=o[t],m=s[t];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modn(m).toString(t);n=(g=g.idivn(m)).isZero()?y+n:a[p-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%r!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16)},BN.prototype.toBuffer=function toBuffer(t,r){return assert(void 0!==i),this.toArrayLike(i,t,r)},BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)},BN.prototype.toArrayLike=function toArrayLike(t,r,n){var i=this.byteLength(),a=n||Math.max(1,i);assert(i<=a,"byte array longer than desired length"),assert(a>0,"Requested array length <= 0"),this.strip();var o,s,h="le"===r,l=new t(a),c=this.clone();if(h){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?BN.prototype._countBits=function _countBits(t){return 32-Math.clz32(t)}:BN.prototype._countBits=function _countBits(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},BN.prototype._zeroBits=function _zeroBits(t){if(0===t)return 26;var r=t,n=0;return 0==(8191&r)&&(n+=13,r>>>=13),0==(127&r)&&(n+=7,r>>>=7),0==(15&r)&&(n+=4,r>>>=4),0==(3&r)&&(n+=2,r>>>=2),0==(1&r)&&n++,n},BN.prototype.bitLength=function bitLength(){var t=this.words[this.length-1],r=this._countBits(t);return 26*(this.length-1)+r},BN.prototype.zeroBits=function zeroBits(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,26!==n)break}return t},BN.prototype.byteLength=function byteLength(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function toTwos(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},BN.prototype.fromTwos=function fromTwos(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function isNeg(){return 0!==this.negative},BN.prototype.neg=function neg(){return this.clone().ineg()},BN.prototype.ineg=function ineg(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function iuor(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},BN.prototype.ior=function ior(t){return assert(0==(this.negative|t.negative)),this.iuor(t)},BN.prototype.or=function or(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},BN.prototype.uor=function uor(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},BN.prototype.iuand=function iuand(t){var r;r=this.length>t.length?t:this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},BN.prototype.iand=function iand(t){return assert(0==(this.negative|t.negative)),this.iuand(t)},BN.prototype.and=function and(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},BN.prototype.uand=function uand(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},BN.prototype.iuxor=function iuxor(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0;i<n.length;i++)this.words[i]=r.words[i]^n.words[i];if(this!==r)for(;i<r.length;i++)this.words[i]=r.words[i];return this.length=r.length,this.strip()},BN.prototype.ixor=function ixor(t){return assert(0==(this.negative|t.negative)),this.iuxor(t)},BN.prototype.xor=function xor(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},BN.prototype.uxor=function uxor(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},BN.prototype.inotn=function inotn(t){assert("number"==typeof t&&t>=0);var r=0|Math.ceil(t/26),n=t%26;this._expand(r),n>0&&r--;for(var i=0;i<r;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},BN.prototype.notn=function notn(t){return this.clone().inotn(t)},BN.prototype.setn=function setn(t,r){assert("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=r?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},BN.prototype.iadd=function iadd(t){var r,n,i;if(0!==this.negative&&0===t.negative)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();this.length>t.length?(n=this,i=t):(n=t,i=this);for(var a=0,o=0;o<i.length;o++)r=(0|n.words[o])+(0|i.words[o])+a,this.words[o]=67108863&r,a=r>>>26;for(;0!==a&&o<n.length;o++)r=(0|n.words[o])+a,this.words[o]=67108863&r,a=r>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},BN.prototype.add=function add(t){var r;return 0!==t.negative&&0===this.negative?(t.negative=0,r=this.sub(t),t.negative^=1,r):0===t.negative&&0!==this.negative?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},BN.prototype.isub=function isub(t){if(0!==t.negative){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,i,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=t):(n=t,i=this);for(var o=0,s=0;s<i.length;s++)o=(r=(0|n.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&r;for(;0!==o&&s<n.length;s++)o=(r=(0|n.words[s])+o)>>26,this.words[s]=67108863&r;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function sub(t){return this.clone().isub(t)};var h=function comb10MulTo(t,r,n){var i,a,o,s=t.words,h=r.words,l=n.words,c=0,d=0|s[0],p=8191&d,m=d>>>13,g=0|s[1],y=8191&g,b=g>>>13,w=0|s[2],M=8191&w,_=w>>>13,x=0|s[3],A=8191&x,E=x>>>13,B=0|s[4],C=8191&B,T=B>>>13,D=0|s[5],P=8191&D,L=D>>>13,N=0|s[6],F=8191&N,I=N>>>13,k=0|s[7],O=8191&k,U=k>>>13,z=0|s[8],V=8191&z,j=z>>>13,H=0|s[9],G=8191&H,W=H>>>13,q=0|h[0],Q=8191&q,X=q>>>13,Y=0|h[1],J=8191&Y,Z=Y>>>13,$=0|h[2],ee=8191&$,te=$>>>13,re=0|h[3],ne=8191&re,ie=re>>>13,ae=0|h[4],oe=8191&ae,se=ae>>>13,ue=0|h[5],he=8191&ue,le=ue>>>13,ce=0|h[6],de=8191&ce,fe=ce>>>13,pe=0|h[7],me=8191&pe,ge=pe>>>13,ve=0|h[8],ye=8191&ve,be=ve>>>13,we=0|h[9],Me=8191&we,_e=we>>>13;n.negative=t.negative^r.negative,n.length=19;var xe=(c+(i=Math.imul(p,Q))|0)+((8191&(a=(a=Math.imul(p,X))+Math.imul(m,Q)|0))<<13)|0;c=((o=Math.imul(m,X))+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(y,Q),a=(a=Math.imul(y,X))+Math.imul(b,Q)|0,o=Math.imul(b,X);var Ae=(c+(i=i+Math.imul(p,J)|0)|0)+((8191&(a=(a=a+Math.imul(p,Z)|0)+Math.imul(m,J)|0))<<13)|0;c=((o=o+Math.imul(m,Z)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(M,Q),a=(a=Math.imul(M,X))+Math.imul(_,Q)|0,o=Math.imul(_,X),i=i+Math.imul(y,J)|0,a=(a=a+Math.imul(y,Z)|0)+Math.imul(b,J)|0,o=o+Math.imul(b,Z)|0;var Se=(c+(i=i+Math.imul(p,ee)|0)|0)+((8191&(a=(a=a+Math.imul(p,te)|0)+Math.imul(m,ee)|0))<<13)|0;c=((o=o+Math.imul(m,te)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(A,Q),a=(a=Math.imul(A,X))+Math.imul(E,Q)|0,o=Math.imul(E,X),i=i+Math.imul(M,J)|0,a=(a=a+Math.imul(M,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,i=i+Math.imul(y,ee)|0,a=(a=a+Math.imul(y,te)|0)+Math.imul(b,ee)|0,o=o+Math.imul(b,te)|0;var Ee=(c+(i=i+Math.imul(p,ne)|0)|0)+((8191&(a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0))<<13)|0;c=((o=o+Math.imul(m,ie)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(C,Q),a=(a=Math.imul(C,X))+Math.imul(T,Q)|0,o=Math.imul(T,X),i=i+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,i=i+Math.imul(M,ee)|0,a=(a=a+Math.imul(M,te)|0)+Math.imul(_,ee)|0,o=o+Math.imul(_,te)|0,i=i+Math.imul(y,ne)|0,a=(a=a+Math.imul(y,ie)|0)+Math.imul(b,ne)|0,o=o+Math.imul(b,ie)|0;var Be=(c+(i=i+Math.imul(p,oe)|0)|0)+((8191&(a=(a=a+Math.imul(p,se)|0)+Math.imul(m,oe)|0))<<13)|0;c=((o=o+Math.imul(m,se)|0)+(a>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(P,Q),a=(a=Math.imul(P,X))+Math.imul(L,Q)|0,o=Math.imul(L,X),i=i+Math.imul(C,J)|0,a=(a=a+Math.imul(C,Z)|0)+Math.imul(T,J)|0,o=o+Math.imul(T,Z)|0,i=i+Math.imul(A,ee)|0,a=(a=a+Math.imul(A,te)|0)+Math.imul(E,ee)|0,o=o+Math.imul(E,te)|0,i=i+Math.imul(M,ne)|0,a=(a=a+Math.imul(M,ie)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,ie)|0,i=i+Math.imul(y,oe)|0,a=(a=a+Math.imul(y,se)|0)+Math.imul(b,oe)|0,o=o+Math.imul(b,se)|0;var Ce=(c+(i=i+Math.imul(p,he)|0)|0)+((8191&(a=(a=a+Math.imul(p,le)|0)+Math.imul(m,he)|0))<<13)|0;c=((o=o+Math.imul(m,le)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(F,Q),a=(a=Math.imul(F,X))+Math.imul(I,Q)|0,o=Math.imul(I,X),i=i+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,i=i+Math.imul(C,ee)|0,a=(a=a+Math.imul(C,te)|0)+Math.imul(T,ee)|0,o=o+Math.imul(T,te)|0,i=i+Math.imul(A,ne)|0,a=(a=a+Math.imul(A,ie)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,ie)|0,i=i+Math.imul(M,oe)|0,a=(a=a+Math.imul(M,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,i=i+Math.imul(y,he)|0,a=(a=a+Math.imul(y,le)|0)+Math.imul(b,he)|0,o=o+Math.imul(b,le)|0;var Te=(c+(i=i+Math.imul(p,de)|0)|0)+((8191&(a=(a=a+Math.imul(p,fe)|0)+Math.imul(m,de)|0))<<13)|0;c=((o=o+Math.imul(m,fe)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(O,Q),a=(a=Math.imul(O,X))+Math.imul(U,Q)|0,o=Math.imul(U,X),i=i+Math.imul(F,J)|0,a=(a=a+Math.imul(F,Z)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Z)|0,i=i+Math.imul(P,ee)|0,a=(a=a+Math.imul(P,te)|0)+Math.imul(L,ee)|0,o=o+Math.imul(L,te)|0,i=i+Math.imul(C,ne)|0,a=(a=a+Math.imul(C,ie)|0)+Math.imul(T,ne)|0,o=o+Math.imul(T,ie)|0,i=i+Math.imul(A,oe)|0,a=(a=a+Math.imul(A,se)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,se)|0,i=i+Math.imul(M,he)|0,a=(a=a+Math.imul(M,le)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,le)|0,i=i+Math.imul(y,de)|0,a=(a=a+Math.imul(y,fe)|0)+Math.imul(b,de)|0,o=o+Math.imul(b,fe)|0;var De=(c+(i=i+Math.imul(p,me)|0)|0)+((8191&(a=(a=a+Math.imul(p,ge)|0)+Math.imul(m,me)|0))<<13)|0;c=((o=o+Math.imul(m,ge)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(V,Q),a=(a=Math.imul(V,X))+Math.imul(j,Q)|0,o=Math.imul(j,X),i=i+Math.imul(O,J)|0,a=(a=a+Math.imul(O,Z)|0)+Math.imul(U,J)|0,o=o+Math.imul(U,Z)|0,i=i+Math.imul(F,ee)|0,a=(a=a+Math.imul(F,te)|0)+Math.imul(I,ee)|0,o=o+Math.imul(I,te)|0,i=i+Math.imul(P,ne)|0,a=(a=a+Math.imul(P,ie)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,ie)|0,i=i+Math.imul(C,oe)|0,a=(a=a+Math.imul(C,se)|0)+Math.imul(T,oe)|0,o=o+Math.imul(T,se)|0,i=i+Math.imul(A,he)|0,a=(a=a+Math.imul(A,le)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,le)|0,i=i+Math.imul(M,de)|0,a=(a=a+Math.imul(M,fe)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,fe)|0,i=i+Math.imul(y,me)|0,a=(a=a+Math.imul(y,ge)|0)+Math.imul(b,me)|0,o=o+Math.imul(b,ge)|0;var Pe=(c+(i=i+Math.imul(p,ye)|0)|0)+((8191&(a=(a=a+Math.imul(p,be)|0)+Math.imul(m,ye)|0))<<13)|0;c=((o=o+Math.imul(m,be)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(G,Q),a=(a=Math.imul(G,X))+Math.imul(W,Q)|0,o=Math.imul(W,X),i=i+Math.imul(V,J)|0,a=(a=a+Math.imul(V,Z)|0)+Math.imul(j,J)|0,o=o+Math.imul(j,Z)|0,i=i+Math.imul(O,ee)|0,a=(a=a+Math.imul(O,te)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,te)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(I,ne)|0,o=o+Math.imul(I,ie)|0,i=i+Math.imul(P,oe)|0,a=(a=a+Math.imul(P,se)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,se)|0,i=i+Math.imul(C,he)|0,a=(a=a+Math.imul(C,le)|0)+Math.imul(T,he)|0,o=o+Math.imul(T,le)|0,i=i+Math.imul(A,de)|0,a=(a=a+Math.imul(A,fe)|0)+Math.imul(E,de)|0,o=o+Math.imul(E,fe)|0,i=i+Math.imul(M,me)|0,a=(a=a+Math.imul(M,ge)|0)+Math.imul(_,me)|0,o=o+Math.imul(_,ge)|0,i=i+Math.imul(y,ye)|0,a=(a=a+Math.imul(y,be)|0)+Math.imul(b,ye)|0,o=o+Math.imul(b,be)|0;var Re=(c+(i=i+Math.imul(p,Me)|0)|0)+((8191&(a=(a=a+Math.imul(p,_e)|0)+Math.imul(m,Me)|0))<<13)|0;c=((o=o+Math.imul(m,_e)|0)+(a>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(G,J),a=(a=Math.imul(G,Z))+Math.imul(W,J)|0,o=Math.imul(W,Z),i=i+Math.imul(V,ee)|0,a=(a=a+Math.imul(V,te)|0)+Math.imul(j,ee)|0,o=o+Math.imul(j,te)|0,i=i+Math.imul(O,ne)|0,a=(a=a+Math.imul(O,ie)|0)+Math.imul(U,ne)|0,o=o+Math.imul(U,ie)|0,i=i+Math.imul(F,oe)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,i=i+Math.imul(P,he)|0,a=(a=a+Math.imul(P,le)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,le)|0,i=i+Math.imul(C,de)|0,a=(a=a+Math.imul(C,fe)|0)+Math.imul(T,de)|0,o=o+Math.imul(T,fe)|0,i=i+Math.imul(A,me)|0,a=(a=a+Math.imul(A,ge)|0)+Math.imul(E,me)|0,o=o+Math.imul(E,ge)|0,i=i+Math.imul(M,ye)|0,a=(a=a+Math.imul(M,be)|0)+Math.imul(_,ye)|0,o=o+Math.imul(_,be)|0;var Le=(c+(i=i+Math.imul(y,Me)|0)|0)+((8191&(a=(a=a+Math.imul(y,_e)|0)+Math.imul(b,Me)|0))<<13)|0;c=((o=o+Math.imul(b,_e)|0)+(a>>>13)|0)+(Le>>>26)|0,Le&=67108863,i=Math.imul(G,ee),a=(a=Math.imul(G,te))+Math.imul(W,ee)|0,o=Math.imul(W,te),i=i+Math.imul(V,ne)|0,a=(a=a+Math.imul(V,ie)|0)+Math.imul(j,ne)|0,o=o+Math.imul(j,ie)|0,i=i+Math.imul(O,oe)|0,a=(a=a+Math.imul(O,se)|0)+Math.imul(U,oe)|0,o=o+Math.imul(U,se)|0,i=i+Math.imul(F,he)|0,a=(a=a+Math.imul(F,le)|0)+Math.imul(I,he)|0,o=o+Math.imul(I,le)|0,i=i+Math.imul(P,de)|0,a=(a=a+Math.imul(P,fe)|0)+Math.imul(L,de)|0,o=o+Math.imul(L,fe)|0,i=i+Math.imul(C,me)|0,a=(a=a+Math.imul(C,ge)|0)+Math.imul(T,me)|0,o=o+Math.imul(T,ge)|0,i=i+Math.imul(A,ye)|0,a=(a=a+Math.imul(A,be)|0)+Math.imul(E,ye)|0,o=o+Math.imul(E,be)|0;var Ne=(c+(i=i+Math.imul(M,Me)|0)|0)+((8191&(a=(a=a+Math.imul(M,_e)|0)+Math.imul(_,Me)|0))<<13)|0;c=((o=o+Math.imul(_,_e)|0)+(a>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,i=Math.imul(G,ne),a=(a=Math.imul(G,ie))+Math.imul(W,ne)|0,o=Math.imul(W,ie),i=i+Math.imul(V,oe)|0,a=(a=a+Math.imul(V,se)|0)+Math.imul(j,oe)|0,o=o+Math.imul(j,se)|0,i=i+Math.imul(O,he)|0,a=(a=a+Math.imul(O,le)|0)+Math.imul(U,he)|0,o=o+Math.imul(U,le)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,fe)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,fe)|0,i=i+Math.imul(P,me)|0,a=(a=a+Math.imul(P,ge)|0)+Math.imul(L,me)|0,o=o+Math.imul(L,ge)|0,i=i+Math.imul(C,ye)|0,a=(a=a+Math.imul(C,be)|0)+Math.imul(T,ye)|0,o=o+Math.imul(T,be)|0;var Fe=(c+(i=i+Math.imul(A,Me)|0)|0)+((8191&(a=(a=a+Math.imul(A,_e)|0)+Math.imul(E,Me)|0))<<13)|0;c=((o=o+Math.imul(E,_e)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(G,oe),a=(a=Math.imul(G,se))+Math.imul(W,oe)|0,o=Math.imul(W,se),i=i+Math.imul(V,he)|0,a=(a=a+Math.imul(V,le)|0)+Math.imul(j,he)|0,o=o+Math.imul(j,le)|0,i=i+Math.imul(O,de)|0,a=(a=a+Math.imul(O,fe)|0)+Math.imul(U,de)|0,o=o+Math.imul(U,fe)|0,i=i+Math.imul(F,me)|0,a=(a=a+Math.imul(F,ge)|0)+Math.imul(I,me)|0,o=o+Math.imul(I,ge)|0,i=i+Math.imul(P,ye)|0,a=(a=a+Math.imul(P,be)|0)+Math.imul(L,ye)|0,o=o+Math.imul(L,be)|0;var Ie=(c+(i=i+Math.imul(C,Me)|0)|0)+((8191&(a=(a=a+Math.imul(C,_e)|0)+Math.imul(T,Me)|0))<<13)|0;c=((o=o+Math.imul(T,_e)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(G,he),a=(a=Math.imul(G,le))+Math.imul(W,he)|0,o=Math.imul(W,le),i=i+Math.imul(V,de)|0,a=(a=a+Math.imul(V,fe)|0)+Math.imul(j,de)|0,o=o+Math.imul(j,fe)|0,i=i+Math.imul(O,me)|0,a=(a=a+Math.imul(O,ge)|0)+Math.imul(U,me)|0,o=o+Math.imul(U,ge)|0,i=i+Math.imul(F,ye)|0,a=(a=a+Math.imul(F,be)|0)+Math.imul(I,ye)|0,o=o+Math.imul(I,be)|0;var ke=(c+(i=i+Math.imul(P,Me)|0)|0)+((8191&(a=(a=a+Math.imul(P,_e)|0)+Math.imul(L,Me)|0))<<13)|0;c=((o=o+Math.imul(L,_e)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(G,de),a=(a=Math.imul(G,fe))+Math.imul(W,de)|0,o=Math.imul(W,fe),i=i+Math.imul(V,me)|0,a=(a=a+Math.imul(V,ge)|0)+Math.imul(j,me)|0,o=o+Math.imul(j,ge)|0,i=i+Math.imul(O,ye)|0,a=(a=a+Math.imul(O,be)|0)+Math.imul(U,ye)|0,o=o+Math.imul(U,be)|0;var Oe=(c+(i=i+Math.imul(F,Me)|0)|0)+((8191&(a=(a=a+Math.imul(F,_e)|0)+Math.imul(I,Me)|0))<<13)|0;c=((o=o+Math.imul(I,_e)|0)+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(G,me),a=(a=Math.imul(G,ge))+Math.imul(W,me)|0,o=Math.imul(W,ge),i=i+Math.imul(V,ye)|0,a=(a=a+Math.imul(V,be)|0)+Math.imul(j,ye)|0,o=o+Math.imul(j,be)|0;var Ue=(c+(i=i+Math.imul(O,Me)|0)|0)+((8191&(a=(a=a+Math.imul(O,_e)|0)+Math.imul(U,Me)|0))<<13)|0;c=((o=o+Math.imul(U,_e)|0)+(a>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,i=Math.imul(G,ye),a=(a=Math.imul(G,be))+Math.imul(W,ye)|0,o=Math.imul(W,be);var ze=(c+(i=i+Math.imul(V,Me)|0)|0)+((8191&(a=(a=a+Math.imul(V,_e)|0)+Math.imul(j,Me)|0))<<13)|0;c=((o=o+Math.imul(j,_e)|0)+(a>>>13)|0)+(ze>>>26)|0,ze&=67108863;var Ve=(c+(i=Math.imul(G,Me))|0)+((8191&(a=(a=Math.imul(G,_e))+Math.imul(W,Me)|0))<<13)|0;return c=((o=Math.imul(W,_e))+(a>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,l[0]=xe,l[1]=Ae,l[2]=Se,l[3]=Ee,l[4]=Be,l[5]=Ce,l[6]=Te,l[7]=De,l[8]=Pe,l[9]=Re,l[10]=Le,l[11]=Ne,l[12]=Fe,l[13]=Ie,l[14]=ke,l[15]=Oe,l[16]=Ue,l[17]=ze,l[18]=Ve,0!==c&&(l[19]=c,n.length++),n};function jumboMulTo(t,r,n){return(new FFTM).mulp(t,r,n)}function FFTM(t,r){this.x=t,this.y=r}Math.imul||(h=smallMulTo),BN.prototype.mulTo=function mulTo(t,r){var n=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,r):n<63?smallMulTo(this,t,r):n<1024?function bigMulTo(t,r,n){n.negative=r.negative^t.negative,n.length=t.length+r.length;for(var i=0,a=0,o=0;o<n.length-1;o++){var s=a;a=0;for(var h=67108863&i,l=Math.min(o,r.length-1),c=Math.max(0,o-t.length+1);c<=l;c++){var d=o-c,p=(0|t.words[d])*(0|r.words[c]),m=67108863&p;h=67108863&(m=m+h|0),a+=(s=(s=s+(p/67108864|0)|0)+(m>>>26)|0)>>>26,s&=67108863}n.words[o]=h,i=s,s=a}return 0!==i?n.words[o]=i:n.length--,n.strip()}(this,t,r):jumboMulTo(this,t,r)},FFTM.prototype.makeRBT=function makeRBT(t){for(var r=new Array(t),n=BN.prototype._countBits(t)-1,i=0;i<t;i++)r[i]=this.revBin(i,n,t);return r},FFTM.prototype.revBin=function revBin(t,r,n){if(0===t||t===n-1)return t;for(var i=0,a=0;a<r;a++)i|=(1&t)<<r-a-1,t>>=1;return i},FFTM.prototype.permute=function permute(t,r,n,i,a,o){for(var s=0;s<o;s++)i[s]=r[t[s]],a[s]=n[t[s]]},FFTM.prototype.transform=function transform(t,r,n,i,a,o){this.permute(o,t,r,n,i,a);for(var s=1;s<a;s<<=1)for(var h=s<<1,l=Math.cos(2*Math.PI/h),c=Math.sin(2*Math.PI/h),d=0;d<a;d+=h)for(var p=l,m=c,g=0;g<s;g++){var y=n[d+g],b=i[d+g],w=n[d+g+s],M=i[d+g+s],_=p*w-m*M;M=p*M+m*w,w=_,n[d+g]=y+w,i[d+g]=b+M,n[d+g+s]=y-w,i[d+g+s]=b-M,g!==h&&(_=l*p-c*m,m=l*m+c*p,p=_)}},FFTM.prototype.guessLen13b=function guessLen13b(t,r){var n=1|Math.max(r,t),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},FFTM.prototype.conjugate=function conjugate(t,r,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=t[i];t[i]=t[n-i-1],t[n-i-1]=a,a=r[i],r[i]=-r[n-i-1],r[n-i-1]=-a}},FFTM.prototype.normalize13b=function normalize13b(t,r){for(var n=0,i=0;i<r/2;i++){var a=8192*Math.round(t[2*i+1]/r)+Math.round(t[2*i]/r)+n;t[i]=67108863&a,n=a<67108864?0:a/67108864|0}return t},FFTM.prototype.convert13b=function convert13b(t,r,n,i){for(var a=0,o=0;o<r;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*r;o<i;++o)n[o]=0;assert(0===a),assert(0==(-8192&a))},FFTM.prototype.stub=function stub(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},FFTM.prototype.mulp=function mulp(t,r,n){var i=2*this.guessLen13b(t.length,r.length),a=this.makeRBT(i),o=this.stub(i),s=new Array(i),h=new Array(i),l=new Array(i),c=new Array(i),d=new Array(i),p=new Array(i),m=n.words;m.length=i,this.convert13b(t.words,t.length,s,i),this.convert13b(r.words,r.length,c,i),this.transform(s,o,h,l,i,a),this.transform(c,o,d,p,i,a);for(var g=0;g<i;g++){var y=h[g]*d[g]-l[g]*p[g];l[g]=h[g]*p[g]+l[g]*d[g],h[g]=y}return this.conjugate(h,l,i),this.transform(h,l,m,o,i,a),this.conjugate(m,o,i),this.normalize13b(m,i),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},BN.prototype.mul=function mul(t){var r=new BN(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},BN.prototype.mulf=function mulf(t){var r=new BN(null);return r.words=new Array(this.length+t.length),jumboMulTo(this,t,r)},BN.prototype.imul=function imul(t){return this.clone().mulTo(t,this)},BN.prototype.imuln=function imuln(t){assert("number"==typeof t),assert(t<67108864);for(var r=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=a>>>26,this.words[n]=67108863&a}return 0!==r&&(this.words[n]=r,this.length++),this},BN.prototype.muln=function muln(t){return this.clone().imuln(t)},BN.prototype.sqr=function sqr(){return this.mul(this)},BN.prototype.isqr=function isqr(){return this.imul(this.clone())},BN.prototype.pow=function pow(t){var r=function toBitArray(t){for(var r=new Array(t.bitLength()),n=0;n<r.length;n++){var i=n/26|0,a=n%26;r[n]=(t.words[i]&1<<a)>>>a}return r}(t);if(0===r.length)return new BN(1);for(var n=this,i=0;i<r.length&&0===r[i];i++,n=n.sqr());if(++i<r.length)for(var a=n.sqr();i<r.length;i++,a=a.sqr())0!==r[i]&&(n=n.mul(a));return n},BN.prototype.iushln=function iushln(t){assert("number"==typeof t&&t>=0);var r,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(r=0;r<this.length;r++){var s=this.words[r]&a,h=(0|this.words[r])-s<<n;this.words[r]=h|o,o=s>>>26-n}o&&(this.words[r]=o,this.length++)}if(0!==i){for(r=this.length-1;r>=0;r--)this.words[r+i]=this.words[r];for(r=0;r<i;r++)this.words[r]=0;this.length+=i}return this.strip()},BN.prototype.ishln=function ishln(t){return assert(0===this.negative),this.iushln(t)},BN.prototype.iushrn=function iushrn(t,r,n){var i;assert("number"==typeof t&&t>=0),i=r?(r-r%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,h=n;if(i-=o,i=Math.max(0,i),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var d=0|this.words[l];this.words[l]=c<<26-a|d>>>a,c=d&s}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function ishrn(t,r,n){return assert(0===this.negative),this.iushrn(t,r,n)},BN.prototype.shln=function shln(t){return this.clone().ishln(t)},BN.prototype.ushln=function ushln(t){return this.clone().iushln(t)},BN.prototype.shrn=function shrn(t){return this.clone().ishrn(t)},BN.prototype.ushrn=function ushrn(t){return this.clone().iushrn(t)},BN.prototype.testn=function testn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26,i=1<<r;return!(this.length<=n)&&!!(this.words[n]&i)},BN.prototype.imaskn=function imaskn(t){assert("number"==typeof t&&t>=0);var r=t%26,n=(t-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==r&&n++,this.length=Math.min(n,this.length),0!==r){var i=67108863^67108863>>>r<<r;this.words[this.length-1]&=i}return this.strip()},BN.prototype.maskn=function maskn(t){return this.clone().imaskn(t)},BN.prototype.iaddn=function iaddn(t){return assert("number"==typeof t),assert(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},BN.prototype._iaddn=function _iaddn(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},BN.prototype.isubn=function isubn(t){if(assert("number"==typeof t),assert(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},BN.prototype.addn=function addn(t){return this.clone().iaddn(t)},BN.prototype.subn=function subn(t){return this.clone().isubn(t)},BN.prototype.iabs=function iabs(){return this.negative=0,this},BN.prototype.abs=function abs(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function _ishlnsubmul(t,r,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var h=(0|t.words[i])*r;s=((a-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(assert(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},BN.prototype._wordDiv=function _wordDiv(t,r){var n=(this.length,t.length),i=this.clone(),a=t,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),i.iushln(n),o=0|a.words[a.length-1]);var s,h=i.length-a.length;if("mod"!==r){(s=new BN(null)).length=h+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=i.clone()._ishlnsubmul(a,1,h);0===c.negative&&(i=c,s&&(s.words[h]=1));for(var d=h-1;d>=0;d--){var p=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(p=Math.min(p/o|0,67108863),i._ishlnsubmul(a,p,d);0!==i.negative;)p--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=p)}return s&&s.strip(),i.strip(),"div"!==r&&0!==n&&i.iushrn(n),{div:s||null,mod:i}},BN.prototype.divmod=function divmod(t,r,n){return assert(!t.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,r),"mod"!==r&&(i=o.div.neg()),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),r),"mod"!==r&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),r),"div"!==r&&(a=o.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:o.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new BN(0),mod:this}:1===t.length?"div"===r?{div:this.divn(t.words[0]),mod:null}:"mod"===r?{div:null,mod:new BN(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new BN(this.modn(t.words[0]))}:this._wordDiv(t,r);var i,a,o},BN.prototype.div=function div(t){return this.divmod(t,"div",!1).div},BN.prototype.mod=function mod(t){return this.divmod(t,"mod",!1).mod},BN.prototype.umod=function umod(t){return this.divmod(t,"mod",!0).mod},BN.prototype.divRound=function divRound(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=0!==r.div.negative?r.mod.isub(t):r.mod,i=t.ushrn(1),a=t.andln(1),o=n.cmp(i);return o<0||1===a&&0===o?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)},BN.prototype.modn=function modn(t){assert(t<=67108863);for(var r=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(r*n+(0|this.words[i]))%t;return n},BN.prototype.idivn=function idivn(t){assert(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*r;this.words[n]=i/t|0,r=i%t}return this.strip()},BN.prototype.divn=function divn(t){return this.clone().idivn(t)},BN.prototype.egcd=function egcd(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i=new BN(1),a=new BN(0),o=new BN(0),s=new BN(1),h=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++h;for(var l=n.clone(),c=r.clone();!r.isZero();){for(var d=0,p=1;0==(r.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(c)),i.iushrn(1),a.iushrn(1);for(var m=0,g=1;0==(n.words[0]&g)&&m<26;++m,g<<=1);if(m>0)for(n.iushrn(m);m-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(c)),o.iushrn(1),s.iushrn(1);r.cmp(n)>=0?(r.isub(n),i.isub(o),a.isub(s)):(n.isub(r),o.isub(i),s.isub(a))}return{a:o,b:s,gcd:n.iushln(h)}},BN.prototype._invmp=function _invmp(t){assert(0===t.negative),assert(!t.isZero());var r=this,n=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var i,a=new BN(1),o=new BN(0),s=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var h=0,l=1;0==(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0==(n.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(n.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);r.cmp(n)>=0?(r.isub(n),a.isub(o)):(n.isub(r),o.isub(a))}return(i=0===r.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(t),i},BN.prototype.gcd=function gcd(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++)r.iushrn(1),n.iushrn(1);for(;;){for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=r.cmp(n);if(a<0){var o=r;r=n,n=o}else if(0===a||0===n.cmpn(1))break;r.isub(n)}return n.iushln(i)},BN.prototype.invm=function invm(t){return this.egcd(t).a.umod(t)},BN.prototype.isEven=function isEven(){return 0==(1&this.words[0])},BN.prototype.isOdd=function isOdd(){return 1==(1&this.words[0])},BN.prototype.andln=function andln(t){return this.words[0]&t},BN.prototype.bincn=function bincn(t){assert("number"==typeof t);var r=t%26,n=(t-r)/26,i=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},BN.prototype.isZero=function isZero(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function cmpn(t){var r,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)r=1;else{n&&(t=-t),assert(t<=67108863,"Number is too big");var i=0|this.words[0];r=i===t?0:i<t?-1:1}return 0!==this.negative?0|-r:r},BN.prototype.cmp=function cmp(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var r=this.ucmp(t);return 0!==this.negative?0|-r:r},BN.prototype.ucmp=function ucmp(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|t.words[n];if(i!==a){i<a?r=-1:i>a&&(r=1);break}}return r},BN.prototype.gtn=function gtn(t){return 1===this.cmpn(t)},BN.prototype.gt=function gt(t){return 1===this.cmp(t)},BN.prototype.gten=function gten(t){return this.cmpn(t)>=0},BN.prototype.gte=function gte(t){return this.cmp(t)>=0},BN.prototype.ltn=function ltn(t){return-1===this.cmpn(t)},BN.prototype.lt=function lt(t){return-1===this.cmp(t)},BN.prototype.lten=function lten(t){return this.cmpn(t)<=0},BN.prototype.lte=function lte(t){return this.cmp(t)<=0},BN.prototype.eqn=function eqn(t){return 0===this.cmpn(t)},BN.prototype.eq=function eq(t){return 0===this.cmp(t)},BN.red=function red(t){return new Red(t)},BN.prototype.toRed=function toRed(t){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},BN.prototype.fromRed=function fromRed(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function _forceRed(t){return this.red=t,this},BN.prototype.forceRed=function forceRed(t){return assert(!this.red,"Already a number in reduction context"),this._forceRed(t)},BN.prototype.redAdd=function redAdd(t){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},BN.prototype.redIAdd=function redIAdd(t){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},BN.prototype.redSub=function redSub(t){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},BN.prototype.redISub=function redISub(t){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},BN.prototype.redShl=function redShl(t){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},BN.prototype.redMul=function redMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},BN.prototype.redIMul=function redIMul(t){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},BN.prototype.redSqr=function redSqr(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function redISqr(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function redSqrt(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function redInvm(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function redNeg(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function redPow(t){return assert(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var l={k256:null,p224:null,p192:null,p25519:null};function MPrime(t,r){this.name=t,this.p=new BN(r,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(t){if("string"==typeof t){var r=BN._prime(t);this.m=r.p,this.prime=r}else assert(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function Mont(t){Red.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function _tmp(){var t=new BN(null);return t.words=new Array(Math.ceil(this.n/13)),t},MPrime.prototype.ireduce=function ireduce(t){var r,n=t;do{this.split(n,this.tmp),r=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(r>this.n);var i=r<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},MPrime.prototype.split=function split(t,r){t.iushrn(this.n,0,r)},MPrime.prototype.imulK=function imulK(t){return t.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function split(t,r){for(var n=4194303,i=Math.min(t.length,9),a=0;a<i;a++)r.words[a]=t.words[a];if(r.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(r.words[r.length++]=o&n,a=10;a<t.length;a++){var s=0|t.words[a];t.words[a-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[a-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},K256.prototype.imulK=function imulK(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var i=0|t.words[n];r+=977*i,t.words[n]=67108863&r,r=64*i+(r/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function imulK(t){for(var r=0,n=0;n<t.length;n++){var i=19*(0|t.words[n])+r,a=67108863&i;i>>>=26,t.words[n]=a,r=i}return 0!==r&&(t.words[t.length++]=r),t},BN._prime=function prime(t){if(l[t])return l[t];var prime;if("k256"===t)prime=new K256;else if("p224"===t)prime=new P224;else if("p192"===t)prime=new P192;else{if("p25519"!==t)throw new Error("Unknown prime "+t);prime=new P25519}return l[t]=prime,prime},Red.prototype._verify1=function _verify1(t){assert(0===t.negative,"red works only with positives"),assert(t.red,"red works only with red numbers")},Red.prototype._verify2=function _verify2(t,r){assert(0==(t.negative|r.negative),"red works only with positives"),assert(t.red&&t.red===r.red,"red works only with red numbers")},Red.prototype.imod=function imod(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},Red.prototype.neg=function neg(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},Red.prototype.add=function add(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},Red.prototype.iadd=function iadd(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},Red.prototype.sub=function sub(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},Red.prototype.isub=function isub(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},Red.prototype.shl=function shl(t,r){return this._verify1(t),this.imod(t.ushln(r))},Red.prototype.imul=function imul(t,r){return this._verify2(t,r),this.imod(t.imul(r))},Red.prototype.mul=function mul(t,r){return this._verify2(t,r),this.imod(t.mul(r))},Red.prototype.isqr=function isqr(t){return this.imul(t,t.clone())},Red.prototype.sqr=function sqr(t){return this.mul(t,t)},Red.prototype.sqrt=function sqrt(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(assert(r%2==1),3===r){var n=this.m.add(new BN(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);assert(!i.isZero());var o=new BN(1).toRed(this),s=o.redNeg(),h=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new BN(2*l*l).toRed(this);0!==this.pow(l,h).cmp(s);)l.redIAdd(s);for(var c=this.pow(l,i),d=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),m=a;0!==p.cmp(o);){for(var g=p,y=0;0!==g.cmp(o);y++)g=g.redSqr();assert(y<m);var b=this.pow(c,new BN(1).iushln(m-y-1));d=d.redMul(b),c=b.redSqr(),p=p.redMul(c),m=y}return d},Red.prototype.invm=function invm(t){var r=t._invmp(this.m);return 0!==r.negative?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},Red.prototype.pow=function pow(t,r){if(r.isZero())return new BN(1).toRed(this);if(0===r.cmpn(1))return t.clone();var n=new Array(16);n[0]=new BN(1).toRed(this),n[1]=t;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],t);var a=n[0],o=0,s=0,h=r.bitLength()%26;for(0===h&&(h=26),i=r.length-1;i>=0;i--){for(var l=r.words[i],c=h-1;c>=0;c--){var d=l>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===i&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}h=26}return a},Red.prototype.convertTo=function convertTo(t){var r=t.umod(this.m);return r===t?r.clone():r},Red.prototype.convertFrom=function convertFrom(t){var r=t.clone();return r.red=null,r},BN.mont=function mont(t){return new Mont(t)},inherits(Mont,Red),Mont.prototype.convertTo=function convertTo(t){return this.imod(t.ushln(this.shift))},Mont.prototype.convertFrom=function convertFrom(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function imul(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.mul=function mul(t,r){if(t.isZero()||r.isZero())return new BN(0)._forceRed(this);var n=t.mul(r),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},Mont.prototype.invm=function invm(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(35)(t))},function(t,r){},function(t,r,n){r.publicEncrypt=n(281),r.privateDecrypt=n(283),r.privateEncrypt=function privateEncrypt(t,n){return r.publicEncrypt(t,n,!0)},r.publicDecrypt=function publicDecrypt(t,n){return r.privateDecrypt(t,n,!0)}},function(t,r,n){var i=n(64),a=n(38),o=n(51),s=n(155),h=n(156),l=n(92),c=n(157),d=n(83),p=n(9).Buffer;t.exports=function publicEncrypt(t,r,n){var m;m=t.padding?t.padding:n?1:4;var g,y=i(t);if(4===m)g=function oaep(t,r){var n=t.modulus.byteLength(),i=r.length,c=o("sha1").update(p.alloc(0)).digest(),d=c.length,m=2*d;if(i>n-m-2)throw new Error("message too long");var g=p.alloc(n-i-m-2),y=n-d-1,b=a(d),w=h(p.concat([c,g,p.alloc(1,1),r],y),s(b,y)),M=h(b,s(w,d));return new l(p.concat([p.alloc(1),M,w],n))}(y,r);else if(1===m)g=function pkcs1(t,r,n){var i,o=r.length,s=t.modulus.byteLength();if(o>s-11)throw new Error("message too long");i=n?p.alloc(s-o-3,255):function nonZero(t){var r,n=p.allocUnsafe(t),i=0,o=a(2*t),s=0;for(;i<t;)s===o.length&&(o=a(2*t),s=0),(r=o[s++])&&(n[i++]=r);return n}(s-o-3);return new l(p.concat([p.from([0,n?1:2]),i,p.alloc(1),r],s))}(y,r,n);else{if(3!==m)throw new Error("unknown padding");if((g=new l(r)).cmp(y.modulus)>=0)throw new Error("data too long for modulus")}return n?d(g,y):c(g,y)}},function(t,r){},function(t,r,n){var i=n(64),a=n(155),o=n(156),s=n(92),h=n(83),l=n(51),c=n(157),d=n(9).Buffer;t.exports=function privateDecrypt(t,r,n){var p;p=t.padding?t.padding:n?1:4;var m,g=i(t),y=g.modulus.byteLength();if(r.length>y||new s(r).cmp(g.modulus)>=0)throw new Error("decryption error");m=n?c(new s(r),g):h(r,g);var b=d.alloc(y-m.length);if(m=d.concat([b,m],y),4===p)return function oaep(t,r){var n=t.modulus.byteLength(),i=l("sha1").update(d.alloc(0)).digest(),s=i.length;if(0!==r[0])throw new Error("decryption error");var h=r.slice(1,s+1),c=r.slice(s+1),p=o(h,a(c,s)),m=o(c,a(p,n-s-1));if(function compare(t,r){t=d.from(t),r=d.from(r);var n=0,i=t.length;t.length!==r.length&&(n++,i=Math.min(t.length,r.length));var a=-1;for(;++a<i;)n+=t[a]^r[a];return n}(i,m.slice(0,s)))throw new Error("decryption error");var g=s;for(;0===m[g];)g++;if(1!==m[g++])throw new Error("decryption error");return m.slice(g)}(g,m);if(1===p)return function pkcs1(t,r,n){var i=r.slice(0,2),a=2,o=0;for(;0!==r[a++];)if(a>=r.length){o++;break}var s=r.slice(2,a-1);("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&o++;s.length<8&&o++;if(o)throw new Error("decryption error");return r.slice(a)}(0,m,n);if(3===p)return m;throw new Error("unknown padding")}},function(t,r,n){"use strict";(function(t,i){function oldBrowser(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=n(9),o=n(38),s=a.Buffer,h=a.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function assertOffset(t,r){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>h||t>r)throw new RangeError("offset out of range")}function assertSize(t,r,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+r>n||t>h)throw new RangeError("buffer too small")}function actualFill(t,r,n,a){if(i.browser){var s=t.buffer,h=new Uint8Array(s,r,n);return l.getRandomValues(h),a?void i.nextTick((function(){a(null,t)})):t}if(!a)return o(n).copy(t,r),t;o(n,(function(n,i){if(n)return a(n);i.copy(t,r),a(null,t)}))}l&&l.getRandomValues||!i.browser?(r.randomFill=function randomFill(r,n,i,a){if(!(s.isBuffer(r)||r instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)a=n,n=0,i=r.length;else if("function"==typeof i)a=i,i=r.length-n;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return assertOffset(n,r.length),assertSize(i,n,r.length),actualFill(r,n,i,a)},r.randomFillSync=function randomFillSync(r,n,i){void 0===n&&(n=0);if(!(s.isBuffer(r)||r instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');assertOffset(n,r.length),void 0===i&&(i=r.length-n);return assertSize(i,n,r.length),actualFill(r,n,i)}):(r.randomFill=oldBrowser,r.randomFillSync=oldBrowser)}).call(this,n(14),n(12))},function(t,r,n){"use strict";const i=n(59),a=n(286),o=n(104),s=/[\uD800-\uDFFF]./,h=a.filter((t=>s.test(t))),l={};t.exports=function interpolateName(t,r,n){let a;const s=t.resourceQuery&&t.resourceQuery.length>1;a="function"==typeof r?r(t.resourcePath,s?t.resourceQuery:void 0):r||"[hash].[ext]";const c=n.context,d=n.content,p=n.regExp;let m="bin",g="file",y="",b="",w="";if(t.resourcePath){const r=i.parse(t.resourcePath);let n=t.resourcePath;r.ext&&(m=r.ext.substr(1)),r.dir&&(g=r.name,n=r.dir+i.sep),void 0!==c?(y=i.relative(c,n+"_").replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),y=y.substr(0,y.length-1)):y=n.replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),1===y.length?y="":y.length>1&&(b=i.basename(y))}if(t.resourceQuery&&t.resourceQuery.length>1){w=t.resourceQuery;const r=w.indexOf("#");r>=0&&(w=w.substr(0,r))}let M=a;if(d&&(M=M.replace(/\[(?:([^:\]]+):)?(?:hash|contenthash)(?::([a-z]+\d*))?(?::(\d+))?\]/gi,((t,r,n,i)=>o(d,r,n,parseInt(i,10)))).replace(/\[emoji(?::(\d+))?\]/gi,((t,r)=>function encodeStringToEmoji(t,r){if(l[t])return l[t];r=r||1;const n=[];do{if(!h.length)throw new Error("Ran out of emoji");const t=Math.floor(Math.random()*h.length);n.push(h[t]),h.splice(t,1)}while(--r>0);const i=n.join("");return l[t]=i,i}(d,parseInt(r,10))))),M=M.replace(/\[ext\]/gi,(()=>m)).replace(/\[name\]/gi,(()=>g)).replace(/\[path\]/gi,(()=>y)).replace(/\[folder\]/gi,(()=>b)).replace(/\[query\]/gi,(()=>w)),p&&t.resourcePath){const r=t.resourcePath.match(new RegExp(p));r&&r.forEach(((t,r)=>{M=M.replace(new RegExp("\\["+r+"\\]","ig"),t)}))}return"object"==typeof t.options&&"function"==typeof t.options.customInterpolateName&&(M=t.options.customInterpolateName.call(t,M,r,n)),M}},function(t,r){t.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","#","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","*","","","","","","","","0","","","1","2","","","3","4","5","6","7","8","9","","",""]},function(t,r,n){"use strict";const{validate:i,ValidationError:a}=n(288);t.exports={validate:i,ValidationError:a}},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validate=function validate(t,r,n){let i=[];Array.isArray(r)?(i=Array.from(r,(r=>validateObject(t,r))),i.forEach(((t,r)=>{const applyPrefix=t=>{t.dataPath=`[${r}]${t.dataPath}`,t.children&&t.children.forEach(applyPrefix)};t.forEach(applyPrefix)})),i=i.reduce(((t,r)=>(t.push(...r),t)),[])):i=validateObject(t,r);if(i.length>0)throw new a.default(i,t,n)},Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return a.default}});var i=_interopRequireDefault(n(289)),a=_interopRequireDefault(n(290));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}const o=n(293),s=n(327),h=new o({allErrors:!0,verbose:!0,$data:!0});function validateObject(t,r){const n=h.compile(t);return n(r)?[]:n.errors?function filterErrors(t){let r=[];for(const n of t){const{dataPath:t}=n;let i=[];r=r.filter((r=>!r.dataPath.includes(t)||(r.children&&(i=i.concat(r.children.slice(0))),r.children=void 0,i.push(r),!1))),i.length&&(n.children=i),r.push(n)}return r}(n.errors):[]}s(h,["instanceof","formatMinimum","formatMaximum","patternRequired"]),(0,i.default)(h)},function(t,r,n){"use strict";function errorMessage(t,r,n){return{dataPath:void 0,schemaPath:void 0,keyword:"absolutePath",params:{absolutePath:n},message:t,parentSchema:r}}function getErrorFor(t,r,n){return errorMessage(t?`The provided value ${JSON.stringify(n)} is not an absolute path!`:`A relative path is expected. However, the provided value ${JSON.stringify(n)} is an absolute path!`,r,n)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=function addAbsolutePathKeyword(t){return t.addKeyword("absolutePath",{errors:!0,type:"string",compile(t,r){const callback=n=>{let i=!0;n.includes("!")&&(callback.errors=[errorMessage(`The provided value ${JSON.stringify(n)} contains exclamation mark (!) which is not allowed because it's reserved for loader syntax.`,r,n)],i=!1);return t===/^(?:[A-Za-z]:(\\|\/)|\\\\|\/)/.test(n)||(callback.errors=[getErrorFor(t,r,n)],i=!1),i};return callback.errors=[],callback}}),t};r.default=i},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;const{stringHints:i,numberHints:a}=n(291),o={type:1,not:1,oneOf:1,anyOf:1,if:1,enum:1,const:1,instanceof:1,required:2,pattern:2,patternRequired:2,format:2,formatMinimum:2,formatMaximum:2,minimum:2,exclusiveMinimum:2,maximum:2,exclusiveMaximum:2,multipleOf:2,uniqueItems:2,contains:2,minLength:2,maxLength:2,minItems:2,maxItems:2,minProperties:2,maxProperties:2,dependencies:2,propertyNames:2,additionalItems:2,additionalProperties:2,absolutePath:2};function filterMax(t,r){const n=t.reduce(((t,n)=>Math.max(t,r(n))),0);return t.filter((t=>r(t)===n))}function findAllChildren(t,r){let n=t.length-1;const predicate=r=>0!==t[n].schemaPath.indexOf(r);for(;n>-1&&!r.every(predicate);)if("anyOf"===t[n].keyword||"oneOf"===t[n].keyword){const r=extractRefs(t[n]),i=findAllChildren(t.slice(0,n),r.concat(t[n].schemaPath));n=i-1}else n-=1;return n+1}function extractRefs(t){const{schema:r}=t;return Array.isArray(r)?r.map((({$ref:t})=>t)).filter((t=>t)):[]}function indent(t,r){return t.replace(/\n(?!$)/g,`\n${r}`)}function hasNotInSchema(t){return!!t.not}function findFirstTypedSchema(t){return hasNotInSchema(t)?findFirstTypedSchema(t.not):t}function canApplyNot(t){const r=findFirstTypedSchema(t);return likeNumber(r)||likeInteger(r)||likeString(r)||likeNull(r)||likeBoolean(r)}function isObject(t){return"object"==typeof t&&null!==t}function likeNumber(t){return"number"===t.type||void 0!==t.minimum||void 0!==t.exclusiveMinimum||void 0!==t.maximum||void 0!==t.exclusiveMaximum||void 0!==t.multipleOf}function likeInteger(t){return"integer"===t.type||void 0!==t.minimum||void 0!==t.exclusiveMinimum||void 0!==t.maximum||void 0!==t.exclusiveMaximum||void 0!==t.multipleOf}function likeString(t){return"string"===t.type||void 0!==t.minLength||void 0!==t.maxLength||void 0!==t.pattern||void 0!==t.format||void 0!==t.formatMinimum||void 0!==t.formatMaximum}function likeBoolean(t){return"boolean"===t.type}function likeArray(t){return"array"===t.type||"number"==typeof t.minItems||"number"==typeof t.maxItems||void 0!==t.uniqueItems||void 0!==t.items||void 0!==t.additionalItems||void 0!==t.contains}function likeObject(t){return"object"===t.type||void 0!==t.minProperties||void 0!==t.maxProperties||void 0!==t.required||void 0!==t.properties||void 0!==t.patternProperties||void 0!==t.additionalProperties||void 0!==t.dependencies||void 0!==t.propertyNames||void 0!==t.patternRequired}function likeNull(t){return"null"===t.type}function getSchemaNonTypes(t){if(!t)return"";if(!t.type){if(likeNumber(t)||likeInteger(t))return" | should be any non-number";if(likeString(t))return" | should be any non-string";if(likeArray(t))return" | should be any non-array";if(likeObject(t))return" | should be any non-object"}return""}function formatHints(t){return t.length>0?`(${t.join(", ")})`:""}function getHints(t,r){return likeNumber(t)||likeInteger(t)?a(t,r):likeString(t)?i(t,r):[]}class ValidationError extends Error{constructor(t,r,n={}){let i,a;if(super(),this.name="ValidationError",this.errors=t,this.schema=r,r.title&&(!n.name||!n.baseDataPath)){const t=r.title.match(/^(.+) (.+)$/);t&&(n.name||([,i]=t),n.baseDataPath||([,,a]=t))}this.headerName=n.name||i||"Object",this.baseDataPath=n.baseDataPath||a||"configuration",this.postFormatter=n.postFormatter||null;const o=`Invalid ${this.baseDataPath} object. ${this.headerName} has been initialized using ${function getArticle(t){return/^[aeiou]/i.test(t)?"an":"a"}(this.baseDataPath)} ${this.baseDataPath} object that does not match the API schema.\n`;this.message=`${o}${this.formatValidationErrors(t)}`,Error.captureStackTrace(this,this.constructor)}getSchemaPart(t){const r=t.split("/");let n=this.schema;for(let t=1;t<r.length;t++){const i=n[r[t]];if(!i)break;n=i}return n}formatSchema(t,r=!0,n=[]){let i=r;const formatInnerSchema=(r,a)=>a?n.includes(r)?"(recursive)":this.formatSchema(r,i,n.concat(t)):this.formatSchema(r,i,n);if(hasNotInSchema(t)&&!likeObject(t)){if(canApplyNot(t.not))return i=!r,formatInnerSchema(t.not);const n=!t.not.not,a=r?"":"non ";return i=!r,n?a+formatInnerSchema(t.not):formatInnerSchema(t.not)}if(t.instanceof){const{instanceof:r}=t;return(Array.isArray(r)?r:[r]).map((t=>"Function"===t?"function":t)).join(" | ")}if(t.enum)return t.enum.map((t=>JSON.stringify(t))).join(" | ");if(void 0!==t.const)return JSON.stringify(t.const);if(t.oneOf)return t.oneOf.map((t=>formatInnerSchema(t,!0))).join(" | ");if(t.anyOf)return t.anyOf.map((t=>formatInnerSchema(t,!0))).join(" | ");if(t.allOf)return t.allOf.map((t=>formatInnerSchema(t,!0))).join(" & ");if(t.if){const{if:r,then:n,else:i}=t;return`${r?`if ${formatInnerSchema(r)}`:""}${n?` then ${formatInnerSchema(n)}`:""}${i?` else ${formatInnerSchema(i)}`:""}`}if(t.$ref)return formatInnerSchema(this.getSchemaPart(t.$ref),!0);if(likeNumber(t)||likeInteger(t)){const[n,...i]=getHints(t,r),a=`${n}${i.length>0?` ${formatHints(i)}`:""}`;return r?a:i.length>0?`non-${n} | ${a}`:`non-${n}`}if(likeString(t)){const[n,...i]=getHints(t,r),a=`${n}${i.length>0?` ${formatHints(i)}`:""}`;return r?a:"string"===a?"non-string":`non-string | ${a}`}if(likeBoolean(t))return(r?"":"non-")+"boolean";if(likeArray(t)){i=!0;const r=[];"number"==typeof t.minItems&&r.push(`should not have fewer than ${t.minItems} item${t.minItems>1?"s":""}`),"number"==typeof t.maxItems&&r.push(`should not have more than ${t.maxItems} item${t.maxItems>1?"s":""}`),t.uniqueItems&&r.push("should not have duplicate items");const n=void 0===t.additionalItems||Boolean(t.additionalItems);let a="";return t.items?Array.isArray(t.items)&&t.items.length>0?(a=`${t.items.map((t=>formatInnerSchema(t))).join(", ")}`,n&&t.additionalItems&&isObject(t.additionalItems)&&Object.keys(t.additionalItems).length>0&&r.push(`additional items should be ${formatInnerSchema(t.additionalItems)}`)):a=t.items&&Object.keys(t.items).length>0?`${formatInnerSchema(t.items)}`:"any":a="any",t.contains&&Object.keys(t.contains).length>0&&r.push(`should contains at least one ${this.formatSchema(t.contains)} item`),`[${a}${n?", ...":""}]${r.length>0?` (${r.join(", ")})`:""}`}if(likeObject(t)){i=!0;const r=[];if("number"==typeof t.minProperties&&r.push(`should not have fewer than ${t.minProperties} ${t.minProperties>1?"properties":"property"}`),"number"==typeof t.maxProperties&&r.push(`should not have more than ${t.maxProperties} ${t.minProperties&&t.minProperties>1?"properties":"property"}`),t.patternProperties&&Object.keys(t.patternProperties).length>0){const n=Object.keys(t.patternProperties);r.push(`additional property names should match pattern${n.length>1?"s":""} ${n.map((t=>JSON.stringify(t))).join(" | ")}`)}const n=t.properties?Object.keys(t.properties):[],a=t.required?t.required:[],o=[...new Set([].concat(a).concat(n))].map((t=>`${t}${a.includes(t)?"":"?"}`)).concat(void 0===t.additionalProperties||Boolean(t.additionalProperties)?t.additionalProperties&&isObject(t.additionalProperties)?[`<key>: ${formatInnerSchema(t.additionalProperties)}`]:[""]:[]).join(", "),{dependencies:s,propertyNames:h,patternRequired:l}=t;return s&&Object.keys(s).forEach((t=>{const n=s[t];Array.isArray(n)?r.push(`should have ${n.length>1?"properties":"property"} ${n.map((t=>`'${t}'`)).join(", ")} when property '${t}' is present`):r.push(`should be valid according to the schema ${formatInnerSchema(n)} when property '${t}' is present`)})),h&&Object.keys(h).length>0&&r.push(`each property name should match format ${JSON.stringify(t.propertyNames.format)}`),l&&l.length>0&&r.push(`should have property matching pattern ${l.map((t=>JSON.stringify(t)))}`),`object {${o?` ${o} `:""}}${r.length>0?` (${r.join(", ")})`:""}`}return likeNull(t)?(r?"":"non-")+"null":Array.isArray(t.type)?`${t.type.join(" | ")}`:JSON.stringify(t,null,2)}getSchemaPartText(t,r,n=!1,i=!0){if(!t)return"";if(Array.isArray(r))for(let n=0;n<r.length;n++){const i=t[r[n]];if(!i)break;t=i}for(;t.$ref;)t=this.getSchemaPart(t.$ref);let a=`${this.formatSchema(t,i)}${n?".":""}`;return t.description&&(a+=`\n-> ${t.description}`),t.link&&(a+=`\n-> Read more at ${t.link}`),a}getSchemaPartDescription(t){if(!t)return"";for(;t.$ref;)t=this.getSchemaPart(t.$ref);let r="";return t.description&&(r+=`\n-> ${t.description}`),t.link&&(r+=`\n-> Read more at ${t.link}`),r}formatValidationError(t){const{keyword:r,dataPath:n}=t,i=`${this.baseDataPath}${n}`;switch(r){case"type":{const{parentSchema:r,params:n}=t;switch(n.type){case"number":return`${i} should be a ${this.getSchemaPartText(r,!1,!0)}`;case"integer":return`${i} should be an ${this.getSchemaPartText(r,!1,!0)}`;case"string":case"boolean":return`${i} should be a ${this.getSchemaPartText(r,!1,!0)}`;case"array":return`${i} should be an array:\n${this.getSchemaPartText(r)}`;case"object":return`${i} should be an object:\n${this.getSchemaPartText(r)}`;case"null":return`${i} should be a ${this.getSchemaPartText(r,!1,!0)}`;default:return`${i} should be:\n${this.getSchemaPartText(r)}`}}case"instanceof":{const{parentSchema:r}=t;return`${i} should be an instance of ${this.getSchemaPartText(r,!1,!0)}`}case"pattern":{const{params:r,parentSchema:n}=t,{pattern:a}=r;return`${i} should match pattern ${JSON.stringify(a)}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"format":{const{params:r,parentSchema:n}=t,{format:a}=r;return`${i} should match format ${JSON.stringify(a)}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"formatMinimum":case"formatMaximum":{const{params:r,parentSchema:n}=t,{comparison:a,limit:o}=r;return`${i} should be ${a} ${JSON.stringify(o)}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"minimum":case"maximum":case"exclusiveMinimum":case"exclusiveMaximum":{const{parentSchema:r,params:n}=t,{comparison:a,limit:o}=n,[,...s]=getHints(r,!0);return 0===s.length&&s.push(`should be ${a} ${o}`),`${i} ${s.join(" ")}${getSchemaNonTypes(r)}.${this.getSchemaPartDescription(r)}`}case"multipleOf":{const{params:r,parentSchema:n}=t,{multipleOf:a}=r;return`${i} should be multiple of ${a}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"patternRequired":{const{params:r,parentSchema:n}=t,{missingPattern:a}=r;return`${i} should have property matching pattern ${JSON.stringify(a)}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"minLength":{const{params:r,parentSchema:n}=t,{limit:a}=r;if(1===a)return`${i} should be a non-empty string${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`;const o=a-1;return`${i} should be longer than ${o} character${o>1?"s":""}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"minItems":{const{params:r,parentSchema:n}=t,{limit:a}=r;return 1===a?`${i} should be a non-empty array${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`:`${i} should not have fewer than ${a} items${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"minProperties":{const{params:r,parentSchema:n}=t,{limit:a}=r;return 1===a?`${i} should be a non-empty object${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`:`${i} should not have fewer than ${a} properties${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"maxLength":{const{params:r,parentSchema:n}=t,{limit:a}=r,o=a+1;return`${i} should be shorter than ${o} character${o>1?"s":""}${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"maxItems":{const{params:r,parentSchema:n}=t,{limit:a}=r;return`${i} should not have more than ${a} items${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"maxProperties":{const{params:r,parentSchema:n}=t,{limit:a}=r;return`${i} should not have more than ${a} properties${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"uniqueItems":{const{params:r,parentSchema:n}=t,{i:a}=r;return`${i} should not contain the item '${t.data[a]}' twice${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"additionalItems":{const{params:r,parentSchema:n}=t,{limit:a}=r;return`${i} should not have more than ${a} items${getSchemaNonTypes(n)}. These items are valid:\n${this.getSchemaPartText(n)}`}case"contains":{const{parentSchema:r}=t;return`${i} should contains at least one ${this.getSchemaPartText(r,["contains"])} item${getSchemaNonTypes(r)}.`}case"required":{const{parentSchema:r,params:n}=t,a=n.missingProperty.replace(/^\./,""),o=r&&Boolean(r.properties&&r.properties[a]);return`${i} misses the property '${a}'${getSchemaNonTypes(r)}.${o?` Should be:\n${this.getSchemaPartText(r,["properties",a])}`:this.getSchemaPartDescription(r)}`}case"additionalProperties":{const{params:r,parentSchema:n}=t,{additionalProperty:a}=r;return`${i} has an unknown property '${a}'${getSchemaNonTypes(n)}. These properties are valid:\n${this.getSchemaPartText(n)}`}case"dependencies":{const{params:r,parentSchema:n}=t,{property:a,deps:o}=r;return`${i} should have properties ${o.split(",").map((t=>`'${t.trim()}'`)).join(", ")} when property '${a}' is present${getSchemaNonTypes(n)}.${this.getSchemaPartDescription(n)}`}case"propertyNames":{const{params:r,parentSchema:n,schema:a}=t,{propertyName:o}=r;return`${i} property name '${o}' is invalid${getSchemaNonTypes(n)}. Property names should be match format ${JSON.stringify(a.format)}.${this.getSchemaPartDescription(n)}`}case"enum":{const{parentSchema:r}=t;return r&&r.enum&&1===r.enum.length?`${i} should be ${this.getSchemaPartText(r,!1,!0)}`:`${i} should be one of these:\n${this.getSchemaPartText(r)}`}case"const":{const{parentSchema:r}=t;return`${i} should be equal to constant ${this.getSchemaPartText(r,!1,!0)}`}case"not":{const r=likeObject(t.parentSchema)?`\n${this.getSchemaPartText(t.parentSchema)}`:"",n=this.getSchemaPartText(t.schema,!1,!1,!1);if(canApplyNot(t.schema))return`${i} should be any ${n}${r}.`;const{schema:a,parentSchema:o}=t;return`${i} should not be ${this.getSchemaPartText(a,!1,!0)}${o&&likeObject(o)?`\n${this.getSchemaPartText(o)}`:""}`}case"oneOf":case"anyOf":{const{parentSchema:r,children:n}=t;if(n&&n.length>0){if(1===t.schema.length){const t=n[n.length-1],i=n.slice(0,n.length-1);return this.formatValidationError(Object.assign({},t,{children:i,parentSchema:Object.assign({},r,t.parentSchema)}))}let a=function filterChildren(t){let r=t;return r=filterMax(r,(t=>t.dataPath?t.dataPath.length:0)),r=filterMax(r,(t=>o[t.keyword]||2)),r}(n);return 1===a.length?this.formatValidationError(a[0]):(a=function groupChildrenByFirstChild(t){const r=[];let n=t.length-1;for(;n>0;){const i=t[n];if("anyOf"===i.keyword||"oneOf"===i.keyword){const a=extractRefs(i),o=findAllChildren(t.slice(0,n),a.concat(i.schemaPath));o!==n?(r.push(Object.assign({},i,{children:t.slice(o,n)})),n=o):r.push(i)}else r.push(i);n-=1}return 0===n&&r.push(t[n]),r.reverse()}(a),`${i} should be one of these:\n${this.getSchemaPartText(r)}\nDetails:\n${a.map((t=>` * ${indent(this.formatValidationError(t),"   ")}`)).join("\n")}`)}return`${i} should be one of these:\n${this.getSchemaPartText(r)}`}case"if":{const{params:r,parentSchema:n}=t,{failingKeyword:a}=r;return`${i} should match "${a}" schema:\n${this.getSchemaPartText(n,[a])}`}case"absolutePath":{const{message:r,parentSchema:n}=t;return`${i}: ${r}${this.getSchemaPartDescription(n)}`}default:{const{message:r,parentSchema:n}=t;return`${i} ${r} (${JSON.stringify(t,null,2)}).\n${this.getSchemaPartText(n,!1)}`}}}formatValidationErrors(t){return t.map((t=>{let r=this.formatValidationError(t);return this.postFormatter&&(r=this.postFormatter(r,t)),` - ${indent(r,"   ")}`})).join("\n")}}var s=ValidationError;r.default=s},function(t,r,n){"use strict";const i=n(292);t.exports.stringHints=function stringHints(t,r){const n=[];let i="string";const a={...t};if(!r){const t=a.minLength,r=a.formatMinimum,n=a.formatExclusiveMaximum;a.minLength=a.maxLength,a.maxLength=t,a.formatMinimum=a.formatMaximum,a.formatMaximum=r,a.formatExclusiveMaximum=!a.formatExclusiveMinimum,a.formatExclusiveMinimum=!n}if("number"==typeof a.minLength)if(1===a.minLength)i="non-empty string";else{const t=Math.max(a.minLength-1,0);n.push(`should be longer than ${t} character${t>1?"s":""}`)}if("number"==typeof a.maxLength)if(0===a.maxLength)i="empty string";else{const t=a.maxLength+1;n.push(`should be shorter than ${t} character${t>1?"s":""}`)}return a.pattern&&n.push(`should${r?"":" not"} match pattern ${JSON.stringify(a.pattern)}`),a.format&&n.push(`should${r?"":" not"} match format ${JSON.stringify(a.format)}`),a.formatMinimum&&n.push(`should be ${a.formatExclusiveMinimum?">":">="} ${JSON.stringify(a.formatMinimum)}`),a.formatMaximum&&n.push(`should be ${a.formatExclusiveMaximum?"<":"<="} ${JSON.stringify(a.formatMaximum)}`),[i].concat(n)},t.exports.numberHints=function numberHints(t,r){const n=["integer"===t.type?"integer":"number"],a=new i;"number"==typeof t.minimum&&a.left(t.minimum),"number"==typeof t.exclusiveMinimum&&a.left(t.exclusiveMinimum,!0),"number"==typeof t.maximum&&a.right(t.maximum),"number"==typeof t.exclusiveMaximum&&a.right(t.exclusiveMaximum,!0);const o=a.format(r);return o&&n.push(o),"number"==typeof t.multipleOf&&n.push(`should${r?"":" not"} be multiple of ${t.multipleOf}`),n}},function(t,r,n){"use strict";class Range{static getOperator(t,r){return"left"===t?r?">":">=":r?"<":"<="}static formatRight(t,r,n){return!1===r?Range.formatLeft(t,!r,!n):`should be ${Range.getOperator("right",n)} ${t}`}static formatLeft(t,r,n){return!1===r?Range.formatRight(t,!r,!n):`should be ${Range.getOperator("left",n)} ${t}`}static formatRange(t,r,n,i,a){let o="should be";return o+=` ${Range.getOperator(a?"left":"right",a?n:!n)} ${t} `,o+=a?"and":"or",o+=` ${Range.getOperator(a?"right":"left",a?i:!i)} ${r}`,o}static getRangeValue(t,r){let n=r?1/0:-1/0,i=-1;const a=r?([t])=>t<=n:([t])=>t>=n;for(let r=0;r<t.length;r++)a(t[r])&&([n]=t[r],i=r);return i>-1?t[i]:[1/0,!0]}constructor(){this._left=[],this._right=[]}left(t,r=!1){this._left.push([t,r])}right(t,r=!1){this._right.push([t,r])}format(t=!0){const[r,n]=Range.getRangeValue(this._left,t),[i,a]=Range.getRangeValue(this._right,!t);if(!Number.isFinite(r)&&!Number.isFinite(i))return"";const o=n?r+1:r;return o===(a?i-1:i)?`should be ${t?"":"!"}= ${o}`:Number.isFinite(r)&&!Number.isFinite(i)?Range.formatLeft(r,t,n):!Number.isFinite(r)&&Number.isFinite(i)?Range.formatRight(i,t,a):Range.formatRange(r,i,n,a,t)}}t.exports=Range},function(t,r,n){"use strict";var i=n(294),a=n(93),o=n(298),s=n(158),h=n(159),l=n(299),c=n(300),d=n(321),p=n(44);t.exports=Ajv,Ajv.prototype.validate=function validate(t,r){var n;if("string"==typeof t){if(!(n=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var i=this._addSchema(t);n=i.validate||this._compile(i)}var a=n(r);!0!==n.$async&&(this.errors=n.errors);return a},Ajv.prototype.compile=function compile(t,r){var n=this._addSchema(t,void 0,r);return n.validate||this._compile(n)},Ajv.prototype.addSchema=function addSchema(t,r,n,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)this.addSchema(t[o],void 0,n,i);return this}var s=this._getId(t);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return checkUnique(this,r=a.normalizeId(r||s)),this._schemas[r]=this._addSchema(t,n,i,!0),this},Ajv.prototype.addMetaSchema=function addMetaSchema(t,r,n){return this.addSchema(t,r,n,!0),this},Ajv.prototype.validateSchema=function validateSchema(t,r){var n=t.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function defaultMeta(t){var r=t._opts.meta;return t._opts.defaultMeta="object"==typeof r?t._getId(r)||r:t.getSchema(y)?y:void 0,t._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(n,t);if(!i&&r){var a="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(a);this.logger.error(a)}return i},Ajv.prototype.getSchema=function getSchema(t){var r=_getSchemaObj(this,t);switch(typeof r){case"object":return r.validate||this._compile(r);case"string":return this.getSchema(r);case"undefined":return function _getSchemaFragment(t,r){var n=a.schema.call(t,{schema:{}},r);if(n){var o=n.schema,h=n.root,l=n.baseId,c=i.call(t,o,h,void 0,l);return t._fragments[r]=new s({ref:r,fragment:!0,schema:o,root:h,baseId:l,validate:c}),c}}(this,t)}},Ajv.prototype.removeSchema=function removeSchema(t){if(t instanceof RegExp)return _removeAllSchemas(this,this._schemas,t),_removeAllSchemas(this,this._refs,t),this;switch(typeof t){case"undefined":return _removeAllSchemas(this,this._schemas),_removeAllSchemas(this,this._refs),this._cache.clear(),this;case"string":var r=_getSchemaObj(this,t);return r&&this._cache.del(r.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var n=this._opts.serialize,i=n?n(t):t;this._cache.del(i);var o=this._getId(t);o&&(o=a.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},Ajv.prototype.addFormat=function addFormat(t,r){"string"==typeof r&&(r=new RegExp(r));return this._formats[t]=r,this},Ajv.prototype.errorsText=function errorsText(t,r){if(!(t=t||this.errors))return"No errors";for(var n=void 0===(r=r||{}).separator?", ":r.separator,i=void 0===r.dataVar?"data":r.dataVar,a="",o=0;o<t.length;o++){var s=t[o];s&&(a+=i+s.dataPath+" "+s.message+n)}return a.slice(0,-n.length)},Ajv.prototype._addSchema=function _addSchema(t,r,n,i){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var o=this._opts.serialize,h=o?o(t):t,l=this._cache.get(h);if(l)return l;i=i||!1!==this._opts.addUsedSchema;var c=a.normalizeId(this._getId(t));c&&i&&checkUnique(this,c);var d,p=!1!==this._opts.validateSchema&&!r;p&&!(d=c&&c==a.normalizeId(t.$schema))&&this.validateSchema(t,!0);var m=a.ids.call(this,t),g=new s({id:c,schema:t,localRefs:m,cacheKey:h,meta:n});"#"!=c[0]&&i&&(this._refs[c]=g);this._cache.put(h,g),p&&d&&this.validateSchema(t,!0);return g},Ajv.prototype._compile=function _compile(t,r){if(t.compiling)return t.validate=callValidate,callValidate.schema=t.schema,callValidate.errors=null,callValidate.root=r||callValidate,!0===t.schema.$async&&(callValidate.$async=!0),callValidate;var n,a;t.compiling=!0,t.meta&&(n=this._opts,this._opts=this._metaOpts);try{a=i.call(this,t.schema,r,t.localRefs)}catch(r){throw delete t.validate,r}finally{t.compiling=!1,t.meta&&(this._opts=n)}return t.validate=a,t.refs=a.refs,t.refVal=a.refVal,t.root=a.root,a;function callValidate(){var r=t.validate,n=r.apply(this,arguments);return callValidate.errors=r.errors,n}},Ajv.prototype.compileAsync=n(322);var m=n(323);Ajv.prototype.addKeyword=m.add,Ajv.prototype.getKeyword=m.get,Ajv.prototype.removeKeyword=m.remove,Ajv.prototype.validateKeyword=m.validate;var g=n(95);Ajv.ValidationError=g.Validation,Ajv.MissingRefError=g.MissingRef,Ajv.$dataMetaSchema=d;var y="http://json-schema.org/draft-07/schema",b=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],w=["/properties"];function Ajv(t){if(!(this instanceof Ajv))return new Ajv(t);t=this._opts=p.copy(t)||{},function setLogger(t){var r=t._opts.logger;if(!1===r)t.logger={log:noop,warn:noop,error:noop};else{if(void 0===r&&(r=console),!("object"==typeof r&&r.log&&r.warn&&r.error))throw new Error("logger must implement log, warn and error methods");t.logger=r}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(t.format),this._cache=t.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=c(),this._getId=function chooseGetId(t){switch(t.schemaId){case"auto":return _get$IdOrId;case"id":return _getId;default:return _get$Id}}(t),t.loopRequired=t.loopRequired||1/0,"property"==t.errorDataPath&&(t._errorDataPathProperty=!0),void 0===t.serialize&&(t.serialize=h),this._metaOpts=function getMetaSchemaOptions(t){for(var r=p.copy(t._opts),n=0;n<b.length;n++)delete r[b[n]];return r}(this),t.formats&&function addInitialFormats(t){for(var r in t._opts.formats){var n=t._opts.formats[r];t.addFormat(r,n)}}(this),t.keywords&&function addInitialKeywords(t){for(var r in t._opts.keywords){var n=t._opts.keywords[r];t.addKeyword(r,n)}}(this),function addDefaultMetaSchema(t){var r;t._opts.$data&&(r=n(326),t.addMetaSchema(r,r.$id,!0));if(!1===t._opts.meta)return;var i=n(165);t._opts.$data&&(i=d(i,w));t.addMetaSchema(i,y,!0),t._refs["http://json-schema.org/schema"]=y}(this),"object"==typeof t.meta&&this.addMetaSchema(t.meta),t.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function addInitialSchemas(t){var r=t._opts.schemas;if(!r)return;if(Array.isArray(r))t.addSchema(r);else for(var n in r)t.addSchema(r[n],n)}(this)}function _getSchemaObj(t,r){return r=a.normalizeId(r),t._schemas[r]||t._refs[r]||t._fragments[r]}function _removeAllSchemas(t,r,n){for(var i in r){var a=r[i];a.meta||n&&!n.test(i)||(t._cache.del(a.cacheKey),delete r[i])}}function _getId(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function _get$Id(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function _get$IdOrId(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function checkUnique(t,r){if(t._schemas[r]||t._refs[r])throw new Error('schema with key or id "'+r+'" already exists')}function noop(){}},function(t,r,n){"use strict";var i=n(93),a=n(44),o=n(95),s=n(159),h=n(160),l=a.ucs2length,c=n(94),d=o.Validation;function checkCompiling(t,r,n){var i=compIndex.call(this,t,r,n);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:t,root:r,baseId:n},{index:i,compiling:!1})}function endCompiling(t,r,n){var i=compIndex.call(this,t,r,n);i>=0&&this._compilations.splice(i,1)}function compIndex(t,r,n){for(var i=0;i<this._compilations.length;i++){var a=this._compilations[i];if(a.schema==t&&a.root==r&&a.baseId==n)return i}return-1}function patternCode(t,r){return"var pattern"+t+" = new RegExp("+a.toQuotedString(r[t])+");"}function defaultCode(t){return"var default"+t+" = defaults["+t+"];"}function refValCode(t,r){return void 0===r[t]?"":"var refVal"+t+" = refVal["+t+"];"}function customRuleCode(t){return"var customRule"+t+" = customRules["+t+"];"}function vars(t,r){if(!t.length)return"";for(var n="",i=0;i<t.length;i++)n+=r(i,t);return n}t.exports=function compile(t,r,n,p){var m=this,g=this._opts,y=[void 0],b={},w=[],M={},_=[],x={},A=[];r=r||{schema:t,refVal:y,refs:b};var E=checkCompiling.call(this,t,r,p),B=this._compilations[E.index];if(E.compiling)return B.callValidate=function callValidate(){var t=B.validate,r=t.apply(this,arguments);return callValidate.errors=t.errors,r};var C=this._formats,T=this.RULES;try{var D=localCompile(t,r,n,p);B.validate=D;var P=B.callValidate;return P&&(P.schema=D.schema,P.errors=null,P.refs=D.refs,P.refVal=D.refVal,P.root=D.root,P.$async=D.$async,g.sourceCode&&(P.source=D.source)),D}finally{endCompiling.call(this,t,r,p)}function localCompile(t,n,s,p){var M=!n||n&&n.schema==t;if(n.schema!=r.schema)return compile.call(m,t,n,s,p);var x,E=!0===t.$async,B=h({isTop:!0,schema:t,isRoot:M,baseId:p,root:n,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:T,validate:h,util:a,resolve:i,resolveRef:resolveRef,usePattern:usePattern,useDefault:useDefault,useCustomRule:useCustomRule,opts:g,formats:C,logger:m.logger,self:m});B=vars(y,refValCode)+vars(w,patternCode)+vars(_,defaultCode)+vars(A,customRuleCode)+B,g.processCode&&(B=g.processCode(B,t));try{x=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",B)(m,T,C,r,y,_,A,c,l,d),y[0]=x}catch(t){throw m.logger.error("Error compiling schema, function code:",B),t}return x.schema=t,x.errors=null,x.refs=b,x.refVal=y,x.root=M?x:n,E&&(x.$async=!0),!0===g.sourceCode&&(x.source={code:B,patterns:w,defaults:_}),x}function resolveRef(t,a,o){a=i.url(t,a);var s,h,l=b[a];if(void 0!==l)return resolvedRef(s=y[l],h="refVal["+l+"]");if(!o&&r.refs){var c=r.refs[a];if(void 0!==c)return resolvedRef(s=r.refVal[c],h=addLocalRef(a,s))}h=addLocalRef(a);var d=i.call(m,localCompile,r,a);if(void 0===d){var p=n&&n[a];p&&(d=i.inlineRef(p,g.inlineRefs)?p:compile.call(m,p,r,n,t))}if(void 0!==d)return function replaceLocalRef(t,r){var n=b[t];y[n]=r}(a,d),resolvedRef(d,h);!function removeLocalRef(t){delete b[t]}(a)}function addLocalRef(t,r){var n=y.length;return y[n]=r,b[t]=n,"refVal"+n}function resolvedRef(t,r){return"object"==typeof t||"boolean"==typeof t?{code:r,schema:t,inline:!0}:{code:r,$async:t&&!!t.$async}}function usePattern(t){var r=M[t];return void 0===r&&(r=M[t]=w.length,w[r]=t),"pattern"+r}function useDefault(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return a.toQuotedString(t);case"object":if(null===t)return"null";var r=s(t),n=x[r];return void 0===n&&(n=x[r]=_.length,_[n]=t),"default"+n}}function useCustomRule(t,r,n,i){if(!1!==m._opts.validateSchema){var a=t.definition.dependencies;if(a&&!a.every((function(t){return Object.prototype.hasOwnProperty.call(n,t)})))throw new Error("parent schema must have all required keywords: "+a.join(","));var o=t.definition.validateSchema;if(o)if(!o(r)){var s="keyword schema is invalid: "+m.errorsText(o.errors);if("log"!=m._opts.validateSchema)throw new Error(s);m.logger.error(s)}}var h,l=t.definition.compile,c=t.definition.inline,d=t.definition.macro;if(l)h=l.call(m,r,n,i);else if(d)h=d.call(m,r,n,i),!1!==g.validateSchema&&m.validateSchema(h,!0);else if(c)h=c.call(m,i,t.keyword,r,n);else if(!(h=t.definition.validate))return;if(void 0===h)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var p=A.length;return A[p]=h,{code:"customRule"+p,validate:h}}}},function(t,r,n){!function(t){"use strict";function merge(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length>1){r[0]=r[0].slice(0,-1);for(var i=r.length-1,a=1;a<i;++a)r[a]=r[a].slice(1,-1);return r[i]=r[i].slice(1),r.join("")}return r[0]}function subexp(t){return"(?:"+t+")"}function typeOf(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function toUpperCase(t){return t.toUpperCase()}function toArray(t){return null!=t?t instanceof Array?t:"number"!=typeof t.length||t.split||t.setInterval||t.call?[t]:Array.prototype.slice.call(t):[]}function assign(t,r){var n=t;if(r)for(var i in r)n[i]=r[i];return n}function buildExps(t){var r="[A-Za-z]",n="[0-9]",i=merge(n,"[A-Fa-f]"),a=subexp(subexp("%[EFef]"+i+"%"+i+i+"%"+i+i)+"|"+subexp("%[89A-Fa-f]"+i+"%"+i+i)+"|"+subexp("%"+i+i)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=merge("[\\:\\/\\?\\#\\[\\]\\@]",o),h=t?"[\\uE000-\\uF8FF]":"[]",l=merge(r,n,"[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=subexp(r+merge(r,n,"[\\+\\-\\.]")+"*"),d=subexp(subexp(a+"|"+merge(l,o,"[\\:]"))+"*"),p=(subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+n)+"|"+subexp("1"+n+n)+"|"+subexp("[1-9]"+n)+"|"+n),subexp(subexp("25[0-5]")+"|"+subexp("2[0-4]"+n)+"|"+subexp("1"+n+n)+"|"+subexp("0?[1-9]"+n)+"|0?0?"+n)),m=subexp(p+"\\."+p+"\\."+p+"\\."+p),g=subexp(i+"{1,4}"),y=subexp(subexp(g+"\\:"+g)+"|"+m),b=subexp(subexp(g+"\\:")+"{6}"+y),w=subexp("\\:\\:"+subexp(g+"\\:")+"{5}"+y),M=subexp(subexp(g)+"?\\:\\:"+subexp(g+"\\:")+"{4}"+y),_=subexp(subexp(subexp(g+"\\:")+"{0,1}"+g)+"?\\:\\:"+subexp(g+"\\:")+"{3}"+y),x=subexp(subexp(subexp(g+"\\:")+"{0,2}"+g)+"?\\:\\:"+subexp(g+"\\:")+"{2}"+y),A=subexp(subexp(subexp(g+"\\:")+"{0,3}"+g)+"?\\:\\:"+g+"\\:"+y),E=subexp(subexp(subexp(g+"\\:")+"{0,4}"+g)+"?\\:\\:"+y),B=subexp(subexp(subexp(g+"\\:")+"{0,5}"+g)+"?\\:\\:"+g),C=subexp(subexp(subexp(g+"\\:")+"{0,6}"+g)+"?\\:\\:"),T=subexp([b,w,M,_,x,A,E,B,C].join("|")),D=subexp(subexp(l+"|"+a)+"+"),P=(subexp(T+"\\%25"+D),subexp(T+subexp("\\%25|\\%(?!"+i+"{2})")+D)),L=subexp("[vV]"+i+"+\\."+merge(l,o,"[\\:]")+"+"),N=subexp("\\["+subexp(P+"|"+T+"|"+L)+"\\]"),F=subexp(subexp(a+"|"+merge(l,o))+"*"),I=subexp(N+"|"+m+"(?!"+F+")|"+F),k=subexp(n+"*"),O=subexp(subexp(d+"@")+"?"+I+subexp("\\:"+k)+"?"),U=subexp(a+"|"+merge(l,o,"[\\:\\@]")),z=subexp(U+"*"),V=subexp(U+"+"),j=subexp(subexp(a+"|"+merge(l,o,"[\\@]"))+"+"),H=subexp(subexp("\\/"+z)+"*"),G=subexp("\\/"+subexp(V+H)+"?"),W=subexp(j+H),q=subexp(V+H),Q="(?!"+U+")",X=(subexp(H+"|"+G+"|"+W+"|"+q+"|"+Q),subexp(subexp(U+"|"+merge("[\\/\\?]",h))+"*")),Y=subexp(subexp(U+"|[\\/\\?]")+"*"),J=subexp(subexp("\\/\\/"+O+H)+"|"+G+"|"+q+"|"+Q),Z=subexp(c+"\\:"+J+subexp("\\?"+X)+"?"+subexp("\\#"+Y)+"?"),$=subexp(subexp("\\/\\/"+O+H)+"|"+G+"|"+W+"|"+Q),ee=subexp($+subexp("\\?"+X)+"?"+subexp("\\#"+Y)+"?");return subexp(Z+"|"+ee),subexp(c+"\\:"+J+subexp("\\?"+X)+"?"),subexp(subexp("\\/\\/("+subexp("("+d+")@")+"?("+I+")"+subexp("\\:("+k+")")+"?)")+"?("+H+"|"+G+"|"+q+"|"+Q+")"),subexp("\\?("+X+")"),subexp("\\#("+Y+")"),subexp(subexp("\\/\\/("+subexp("("+d+")@")+"?("+I+")"+subexp("\\:("+k+")")+"?)")+"?("+H+"|"+G+"|"+W+"|"+Q+")"),subexp("\\?("+X+")"),subexp("\\#("+Y+")"),subexp(subexp("\\/\\/("+subexp("("+d+")@")+"?("+I+")"+subexp("\\:("+k+")")+"?)")+"?("+H+"|"+G+"|"+q+"|"+Q+")"),subexp("\\?("+X+")"),subexp("\\#("+Y+")"),subexp("("+d+")@"),subexp("\\:("+k+")"),{NOT_SCHEME:new RegExp(merge("[^]",r,n,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(merge("[^\\%\\:]",l,o),"g"),NOT_HOST:new RegExp(merge("[^\\%\\[\\]\\:]",l,o),"g"),NOT_PATH:new RegExp(merge("[^\\%\\/\\:\\@]",l,o),"g"),NOT_PATH_NOSCHEME:new RegExp(merge("[^\\%\\/\\@]",l,o),"g"),NOT_QUERY:new RegExp(merge("[^\\%]",l,o,"[\\:\\@\\/\\?]",h),"g"),NOT_FRAGMENT:new RegExp(merge("[^\\%]",l,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(merge("[^]",l,o),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(merge("[^\\%]",l,s),"g"),PCT_ENCODED:new RegExp(a,"g"),IPV4ADDRESS:new RegExp("^("+m+")$"),IPV6ADDRESS:new RegExp("^\\[?("+T+")"+subexp(subexp("\\%25|\\%(?!"+i+"{2})")+"("+D+")")+"?\\]?$")}}var r=buildExps(!1),n=buildExps(!0),i=function(){function sliceIterator(t,r){var n=[],i=!0,a=!1,o=void 0;try{for(var s,h=t[Symbol.iterator]();!(i=(s=h.next()).done)&&(n.push(s.value),!r||n.length!==r);i=!0);}catch(t){a=!0,o=t}finally{try{!i&&h.return&&h.return()}finally{if(a)throw o}}return n}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return sliceIterator(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),toConsumableArray=function(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)},a=2147483647,o=36,s=1,h=26,l=38,c=700,d=72,p=128,m="-",g=/^xn--/,y=/[^\0-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=o-s,_=Math.floor,x=String.fromCharCode;function error$1(t){throw new RangeError(w[t])}function map(t,r){for(var n=[],i=t.length;i--;)n[i]=r(t[i]);return n}function mapDomain(t,r){var n=t.split("@"),i="";return n.length>1&&(i=n[0]+"@",t=n[1]),i+map((t=t.replace(b,".")).split("."),r).join(".")}function ucs2decode(t){for(var r=[],n=0,i=t.length;n<i;){var a=t.charCodeAt(n++);if(a>=55296&&a<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?r.push(((1023&a)<<10)+(1023&o)+65536):(r.push(a),n--)}else r.push(a)}return r}var A=function basicToDigit(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:o},E=function digitToBasic(t,r){return t+22+75*(t<26)-((0!=r)<<5)},B=function adapt(t,r,n){var i=0;for(t=n?_(t/c):t>>1,t+=_(t/r);t>M*h>>1;i+=o)t=_(t/M);return _(i+(M+1)*t/(t+l))},C=function decode(t){var r=[],n=t.length,i=0,l=p,c=d,g=t.lastIndexOf(m);g<0&&(g=0);for(var y=0;y<g;++y)t.charCodeAt(y)>=128&&error$1("not-basic"),r.push(t.charCodeAt(y));for(var b=g>0?g+1:0;b<n;){for(var w=i,M=1,x=o;;x+=o){b>=n&&error$1("invalid-input");var E=A(t.charCodeAt(b++));(E>=o||E>_((a-i)/M))&&error$1("overflow"),i+=E*M;var C=x<=c?s:x>=c+h?h:x-c;if(E<C)break;var T=o-C;M>_(a/T)&&error$1("overflow"),M*=T}var D=r.length+1;c=B(i-w,D,0==w),_(i/D)>a-l&&error$1("overflow"),l+=_(i/D),i%=D,r.splice(i++,0,l)}return String.fromCodePoint.apply(String,r)},T=function encode(t){var r=[],n=(t=ucs2decode(t)).length,i=p,l=0,c=d,g=!0,y=!1,b=void 0;try{for(var w,M=t[Symbol.iterator]();!(g=(w=M.next()).done);g=!0){var A=w.value;A<128&&r.push(x(A))}}catch(t){y=!0,b=t}finally{try{!g&&M.return&&M.return()}finally{if(y)throw b}}var C=r.length,T=C;for(C&&r.push(m);T<n;){var D=a,P=!0,L=!1,N=void 0;try{for(var F,I=t[Symbol.iterator]();!(P=(F=I.next()).done);P=!0){var k=F.value;k>=i&&k<D&&(D=k)}}catch(t){L=!0,N=t}finally{try{!P&&I.return&&I.return()}finally{if(L)throw N}}var O=T+1;D-i>_((a-l)/O)&&error$1("overflow"),l+=(D-i)*O,i=D;var U=!0,z=!1,V=void 0;try{for(var j,H=t[Symbol.iterator]();!(U=(j=H.next()).done);U=!0){var G=j.value;if(G<i&&++l>a&&error$1("overflow"),G==i){for(var W=l,q=o;;q+=o){var Q=q<=c?s:q>=c+h?h:q-c;if(W<Q)break;var X=W-Q,Y=o-Q;r.push(x(E(Q+X%Y,0))),W=_(X/Y)}r.push(x(E(W,0))),c=B(l,O,T==C),l=0,++T}}}catch(t){z=!0,V=t}finally{try{!U&&H.return&&H.return()}finally{if(z)throw V}}++l,++i}return r.join("")},D=function toUnicode(t){return mapDomain(t,(function(t){return g.test(t)?C(t.slice(4).toLowerCase()):t}))},P=function toASCII(t){return mapDomain(t,(function(t){return y.test(t)?"xn--"+T(t):t}))},L={version:"2.1.0",ucs2:{decode:ucs2decode,encode:function ucs2encode(t){return String.fromCodePoint.apply(String,toConsumableArray(t))}},decode:C,encode:T,toASCII:P,toUnicode:D},N={};function pctEncChar(t){var r=t.charCodeAt(0);return r<16?"%0"+r.toString(16).toUpperCase():r<128?"%"+r.toString(16).toUpperCase():r<2048?"%"+(r>>6|192).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase():"%"+(r>>12|224).toString(16).toUpperCase()+"%"+(r>>6&63|128).toString(16).toUpperCase()+"%"+(63&r|128).toString(16).toUpperCase()}function pctDecChars(t){for(var r="",n=0,i=t.length;n<i;){var a=parseInt(t.substr(n+1,2),16);if(a<128)r+=String.fromCharCode(a),n+=3;else if(a>=194&&a<224){if(i-n>=6){var o=parseInt(t.substr(n+4,2),16);r+=String.fromCharCode((31&a)<<6|63&o)}else r+=t.substr(n,6);n+=6}else if(a>=224){if(i-n>=9){var s=parseInt(t.substr(n+4,2),16),h=parseInt(t.substr(n+7,2),16);r+=String.fromCharCode((15&a)<<12|(63&s)<<6|63&h)}else r+=t.substr(n,9);n+=9}else r+=t.substr(n,3),n+=3}return r}function _normalizeComponentEncoding(t,r){function decodeUnreserved(t){var n=pctDecChars(t);return n.match(r.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(r.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(r.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_USERINFO,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==t.host&&(t.host=String(t.host).replace(r.PCT_ENCODED,decodeUnreserved).toLowerCase().replace(r.NOT_HOST,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==t.path&&(t.path=String(t.path).replace(r.PCT_ENCODED,decodeUnreserved).replace(t.scheme?r.NOT_PATH:r.NOT_PATH_NOSCHEME,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==t.query&&(t.query=String(t.query).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_QUERY,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(r.PCT_ENCODED,decodeUnreserved).replace(r.NOT_FRAGMENT,pctEncChar).replace(r.PCT_ENCODED,toUpperCase)),t}function _stripLeadingZeros(t){return t.replace(/^0*(.*)/,"$1")||"0"}function _normalizeIPv4(t,r){var n=t.match(r.IPV4ADDRESS)||[],a=i(n,2)[1];return a?a.split(".").map(_stripLeadingZeros).join("."):t}function _normalizeIPv6(t,r){var n=t.match(r.IPV6ADDRESS)||[],a=i(n,3),o=a[1],s=a[2];if(o){for(var h=o.toLowerCase().split("::").reverse(),l=i(h,2),c=l[0],d=l[1],p=d?d.split(":").map(_stripLeadingZeros):[],m=c.split(":").map(_stripLeadingZeros),g=r.IPV4ADDRESS.test(m[m.length-1]),y=g?7:8,b=m.length-y,w=Array(y),M=0;M<y;++M)w[M]=p[M]||m[b+M]||"";g&&(w[y-1]=_normalizeIPv4(w[y-1],r));var _=w.reduce((function(t,r,n){if(!r||"0"===r){var i=t[t.length-1];i&&i.index+i.length===n?i.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,r){return r.length-t.length}))[0],x=void 0;if(_&&_.length>1){var A=w.slice(0,_.index),E=w.slice(_.index+_.length);x=A.join(":")+"::"+E.join(":")}else x=w.join(":");return s&&(x+="%"+s),x}return t}var F=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,I=void 0==="".match(/(){0}/)[1];function parse(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},o=!1!==i.iri?n:r;"suffix"===i.reference&&(t=(i.scheme?i.scheme+":":"")+"//"+t);var s=t.match(F);if(s){I?(a.scheme=s[1],a.userinfo=s[3],a.host=s[4],a.port=parseInt(s[5],10),a.path=s[6]||"",a.query=s[7],a.fragment=s[8],isNaN(a.port)&&(a.port=s[5])):(a.scheme=s[1]||void 0,a.userinfo=-1!==t.indexOf("@")?s[3]:void 0,a.host=-1!==t.indexOf("//")?s[4]:void 0,a.port=parseInt(s[5],10),a.path=s[6]||"",a.query=-1!==t.indexOf("?")?s[7]:void 0,a.fragment=-1!==t.indexOf("#")?s[8]:void 0,isNaN(a.port)&&(a.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?s[4]:void 0)),a.host&&(a.host=_normalizeIPv6(_normalizeIPv4(a.host,o),o)),void 0!==a.scheme||void 0!==a.userinfo||void 0!==a.host||void 0!==a.port||a.path||void 0!==a.query?void 0===a.scheme?a.reference="relative":void 0===a.fragment?a.reference="absolute":a.reference="uri":a.reference="same-document",i.reference&&"suffix"!==i.reference&&i.reference!==a.reference&&(a.error=a.error||"URI is not a "+i.reference+" reference.");var h=N[(i.scheme||a.scheme||"").toLowerCase()];if(i.unicodeSupport||h&&h.unicodeSupport)_normalizeComponentEncoding(a,o);else{if(a.host&&(i.domainHost||h&&h.domainHost))try{a.host=L.toASCII(a.host.replace(o.PCT_ENCODED,pctDecChars).toLowerCase())}catch(t){a.error=a.error||"Host's domain name can not be converted to ASCII via punycode: "+t}_normalizeComponentEncoding(a,r)}h&&h.parse&&h.parse(a,i)}else a.error=a.error||"URI can not be parsed.";return a}function _recomposeAuthority(t,i){var a=!1!==i.iri?n:r,o=[];return void 0!==t.userinfo&&(o.push(t.userinfo),o.push("@")),void 0!==t.host&&o.push(_normalizeIPv6(_normalizeIPv4(String(t.host),a),a).replace(a.IPV6ADDRESS,(function(t,r,n){return"["+r+(n?"%25"+n:"")+"]"}))),"number"!=typeof t.port&&"string"!=typeof t.port||(o.push(":"),o.push(String(t.port))),o.length?o.join(""):void 0}var k=/^\.\.?\//,O=/^\/\.(\/|$)/,U=/^\/\.\.(\/|$)/,z=/^\/?(?:.|\n)*?(?=\/|$)/;function removeDotSegments(t){for(var r=[];t.length;)if(t.match(k))t=t.replace(k,"");else if(t.match(O))t=t.replace(O,"/");else if(t.match(U))t=t.replace(U,"/"),r.pop();else if("."===t||".."===t)t="";else{var n=t.match(z);if(!n)throw new Error("Unexpected dot segment condition");var i=n[0];t=t.slice(i.length),r.push(i)}return r.join("")}function serialize(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.iri?n:r,o=[],s=N[(i.scheme||t.scheme||"").toLowerCase()];if(s&&s.serialize&&s.serialize(t,i),t.host)if(a.IPV6ADDRESS.test(t.host));else if(i.domainHost||s&&s.domainHost)try{t.host=i.iri?L.toUnicode(t.host):L.toASCII(t.host.replace(a.PCT_ENCODED,pctDecChars).toLowerCase())}catch(r){t.error=t.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+r}_normalizeComponentEncoding(t,a),"suffix"!==i.reference&&t.scheme&&(o.push(t.scheme),o.push(":"));var h=_recomposeAuthority(t,i);if(void 0!==h&&("suffix"!==i.reference&&o.push("//"),o.push(h),t.path&&"/"!==t.path.charAt(0)&&o.push("/")),void 0!==t.path){var l=t.path;i.absolutePath||s&&s.absolutePath||(l=removeDotSegments(l)),void 0===h&&(l=l.replace(/^\/\//,"/%2F")),o.push(l)}return void 0!==t.query&&(o.push("?"),o.push(t.query)),void 0!==t.fragment&&(o.push("#"),o.push(t.fragment)),o.join("")}function resolveComponents(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={};return arguments[3]||(t=parse(serialize(t,n),n),r=parse(serialize(r,n),n)),!(n=n||{}).tolerant&&r.scheme?(i.scheme=r.scheme,i.userinfo=r.userinfo,i.host=r.host,i.port=r.port,i.path=removeDotSegments(r.path||""),i.query=r.query):(void 0!==r.userinfo||void 0!==r.host||void 0!==r.port?(i.userinfo=r.userinfo,i.host=r.host,i.port=r.port,i.path=removeDotSegments(r.path||""),i.query=r.query):(r.path?("/"===r.path.charAt(0)?i.path=removeDotSegments(r.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+r.path:i.path=r.path:i.path="/"+r.path,i.path=removeDotSegments(i.path)),i.query=r.query):(i.path=t.path,void 0!==r.query?i.query=r.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=r.fragment,i}function resolve(t,r,n){var i=assign({scheme:"null"},n);return serialize(resolveComponents(parse(t,i),parse(r,i),i,!0),i)}function normalize(t,r){return"string"==typeof t?t=serialize(parse(t,r),r):"object"===typeOf(t)&&(t=parse(serialize(t,r),r)),t}function equal(t,r,n){return"string"==typeof t?t=serialize(parse(t,n),n):"object"===typeOf(t)&&(t=serialize(t,n)),"string"==typeof r?r=serialize(parse(r,n),n):"object"===typeOf(r)&&(r=serialize(r,n)),t===r}function escapeComponent(t,i){return t&&t.toString().replace(i&&i.iri?n.ESCAPE:r.ESCAPE,pctEncChar)}function unescapeComponent(t,i){return t&&t.toString().replace(i&&i.iri?n.PCT_ENCODED:r.PCT_ENCODED,pctDecChars)}var V={scheme:"http",domainHost:!0,parse:function parse(t,r){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function serialize(t,r){var n="https"===String(t.scheme).toLowerCase();return t.port!==(n?443:80)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},j={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize};function isSecure(t){return"boolean"==typeof t.secure?t.secure:"wss"===String(t.scheme).toLowerCase()}var H={scheme:"ws",domainHost:!0,parse:function parse(t,r){var n=t;return n.secure=isSecure(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize:function serialize(t,r){if(t.port!==(isSecure(t)?443:80)&&""!==t.port||(t.port=void 0),"boolean"==typeof t.secure&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){var n=t.resourceName.split("?"),a=i(n,2),o=a[0],s=a[1];t.path=o&&"/"!==o?o:void 0,t.query=s,t.resourceName=void 0}return t.fragment=void 0,t}},G={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},W={},q="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Q="[0-9A-Fa-f]",X=subexp(subexp("%[EFef]"+Q+"%"+Q+Q+"%"+Q+Q)+"|"+subexp("%[89A-Fa-f]"+Q+"%"+Q+Q)+"|"+subexp("%"+Q+Q)),Y="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",J=merge("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Z="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$=new RegExp(q,"g"),ee=new RegExp(X,"g"),te=new RegExp(merge("[^]",Y,"[\\.]",'[\\"]',J),"g"),re=new RegExp(merge("[^]",q,Z),"g"),ne=re;function decodeUnreserved(t){var r=pctDecChars(t);return r.match($)?r:t}var ie={scheme:"mailto",parse:function parse$$1(t,r){var n=t,i=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var a=!1,o={},s=n.query.split("&"),h=0,l=s.length;h<l;++h){var c=s[h].split("=");switch(c[0]){case"to":for(var d=c[1].split(","),p=0,m=d.length;p<m;++p)i.push(d[p]);break;case"subject":n.subject=unescapeComponent(c[1],r);break;case"body":n.body=unescapeComponent(c[1],r);break;default:a=!0,o[unescapeComponent(c[0],r)]=unescapeComponent(c[1],r)}}a&&(n.headers=o)}n.query=void 0;for(var g=0,y=i.length;g<y;++g){var b=i[g].split("@");if(b[0]=unescapeComponent(b[0]),r.unicodeSupport)b[1]=unescapeComponent(b[1],r).toLowerCase();else try{b[1]=L.toASCII(unescapeComponent(b[1],r).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}i[g]=b.join("@")}return n},serialize:function serialize$$1(t,r){var n=t,i=toArray(t.to);if(i){for(var a=0,o=i.length;a<o;++a){var s=String(i[a]),h=s.lastIndexOf("@"),l=s.slice(0,h).replace(ee,decodeUnreserved).replace(ee,toUpperCase).replace(te,pctEncChar),c=s.slice(h+1);try{c=r.iri?L.toUnicode(c):L.toASCII(unescapeComponent(c,r).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to "+(r.iri?"Unicode":"ASCII")+" via punycode: "+t}i[a]=l+"@"+c}n.path=i.join(",")}var d=t.headers=t.headers||{};t.subject&&(d.subject=t.subject),t.body&&(d.body=t.body);var p=[];for(var m in d)d[m]!==W[m]&&p.push(m.replace(ee,decodeUnreserved).replace(ee,toUpperCase).replace(re,pctEncChar)+"="+d[m].replace(ee,decodeUnreserved).replace(ee,toUpperCase).replace(ne,pctEncChar));return p.length&&(n.query=p.join("&")),n}},ae=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function parse$$1(t,r){var n=t.path&&t.path.match(ae),i=t;if(n){var a=r.scheme||i.scheme||"urn",o=n[1].toLowerCase(),s=n[2],h=a+":"+(r.nid||o),l=N[h];i.nid=o,i.nss=s,i.path=void 0,l&&(i=l.parse(i,r))}else i.error=i.error||"URN can not be parsed.";return i},serialize:function serialize$$1(t,r){var n=r.scheme||t.scheme||"urn",i=t.nid,a=n+":"+(r.nid||i),o=N[a];o&&(t=o.serialize(t,r));var s=t,h=t.nss;return s.path=(i||r.nid)+":"+h,s}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function parse(t,r){var n=t;return n.uuid=n.nss,n.nss=void 0,r.tolerant||n.uuid&&n.uuid.match(se)||(n.error=n.error||"UUID is not valid."),n},serialize:function serialize(t,r){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};N[V.scheme]=V,N[j.scheme]=j,N[H.scheme]=H,N[G.scheme]=G,N[ie.scheme]=ie,N[oe.scheme]=oe,N[ue.scheme]=ue,t.SCHEMES=N,t.pctEncChar=pctEncChar,t.pctDecChars=pctDecChars,t.parse=parse,t.removeDotSegments=removeDotSegments,t.serialize=serialize,t.resolveComponents=resolveComponents,t.resolve=resolve,t.normalize=normalize,t.equal=equal,t.escapeComponent=escapeComponent,t.unescapeComponent=unescapeComponent,Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,n){"use strict";t.exports=function ucs2length(t){for(var r,n=0,i=t.length,a=0;a<i;)n++,(r=t.charCodeAt(a++))>=55296&&r<=56319&&a<i&&56320==(64512&(r=t.charCodeAt(a)))&&a++;return n}},function(t,r,n){"use strict";var i=t.exports=function(t,r,n){"function"==typeof r&&(n=r,r={}),_traverse(r,"function"==typeof(n=r.cb||n)?n:n.pre||function(){},n.post||function(){},t,"",t)};function _traverse(t,r,n,a,o,s,h,l,c,d){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var p in r(a,o,s,h,l,c,d),a){var m=a[p];if(Array.isArray(m)){if(p in i.arrayKeywords)for(var g=0;g<m.length;g++)_traverse(t,r,n,m[g],o+"/"+p+"/"+g,s,o,p,a,g)}else if(p in i.propsKeywords){if(m&&"object"==typeof m)for(var y in m)_traverse(t,r,n,m[y],o+"/"+p+"/"+y.replace(/~/g,"~0").replace(/\//g,"~1"),s,o,p,a,y)}else(p in i.keywords||t.allKeys&&!(p in i.skipKeywords))&&_traverse(t,r,n,m,o+"/"+p,s,o,p,a)}n(a,o,s,h,l,c,d)}}i.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},i.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},i.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},i.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(t,r,n){"use strict";var i=t.exports=function Cache(){this._cache={}};i.prototype.put=function Cache_put(t,r){this._cache[t]=r},i.prototype.get=function Cache_get(t){return this._cache[t]},i.prototype.del=function Cache_del(t){delete this._cache[t]},i.prototype.clear=function Cache_clear(){this._cache={}}},function(t,r,n){"use strict";var i=n(44),a=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,h=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,c=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,d=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,p=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,m=/^(?:\/(?:[^~/]|~0|~1)*)*$/,g=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,y=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function formats(t){return t="full"==t?"full":"fast",i.copy(formats[t])}function date(t){var r=t.match(a);if(!r)return!1;var n=+r[1],i=+r[2],s=+r[3];return i>=1&&i<=12&&s>=1&&s<=(2==i&&function isLeapYear(t){return t%4==0&&(t%100!=0||t%400==0)}(n)?29:o[i])}function time(t,r){var n=t.match(s);if(!n)return!1;var i=n[1],a=n[2],o=n[3],h=n[5];return(i<=23&&a<=59&&o<=59||23==i&&59==a&&60==o)&&(!r||h)}t.exports=formats,formats.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":c,url:d,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:h,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:p,"json-pointer":m,"json-pointer-uri-fragment":g,"relative-json-pointer":y},formats.full={date:date,time:time,"date-time":function date_time(t){var r=t.split(b);return 2==r.length&&date(r[0])&&time(r[1],!0)},uri:function uri(t){return w.test(t)&&l.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":c,url:d,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:h,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:regex,uuid:p,"json-pointer":m,"json-pointer-uri-fragment":g,"relative-json-pointer":y};var b=/t|\s/i;var w=/\/|:/;var M=/[^\\]\\Z/;function regex(t){if(M.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}}},function(t,r,n){"use strict";var i=n(301),a=n(44).toHash;t.exports=function rules(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"];return t.all=a(r),t.types=a(["number","integer","string","array","object","boolean","null"]),t.forEach((function(n){n.rules=n.rules.map((function(n){var a;if("object"==typeof n){var o=Object.keys(n)[0];a=n[o],n=o,a.forEach((function(n){r.push(n),t.all[n]=!0}))}return r.push(n),t.all[n]={keyword:n,code:i[n],implements:a}})),t.all.$comment={keyword:"$comment",code:i.$comment},n.type&&(t.types[n.type]=n)})),t.keywords=a(r.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},function(t,r,n){"use strict";t.exports={$ref:n(302),allOf:n(303),anyOf:n(304),$comment:n(305),const:n(306),contains:n(307),dependencies:n(308),enum:n(309),format:n(310),if:n(311),items:n(312),maximum:n(161),minimum:n(161),maxItems:n(162),minItems:n(162),maxLength:n(163),minLength:n(163),maxProperties:n(164),minProperties:n(164),multipleOf:n(313),not:n(314),oneOf:n(315),pattern:n(316),properties:n(317),propertyNames:n(318),required:n(319),uniqueItems:n(320),validate:n(160)}},function(t,r,n){"use strict";t.exports=function generate_ref(t,r,n){var i,a,o=" ",s=t.level,h=t.dataLevel,l=t.schema[r],c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(h||""),m="valid"+s;if("#"==l||"#/"==l)t.isRoot?(i=t.async,a="validate"):(i=!0===t.root.schema.$async,a="root.refVal[0]");else{var g=t.resolveRef(t.baseId,l,t.isRoot);if(void 0===g){var y=t.MissingRefError.message(t.baseId,l);if("fail"==t.opts.missingRefs){t.logger.error(y),(_=_||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { ref: '"+t.util.escapeQuotes(l)+"' } ",!1!==t.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(l)+"' "),t.opts.verbose&&(o+=" , schema: "+t.util.toQuotedString(l)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),o+=" } "):o+=" {} ";var b=o;o=_.pop(),!t.compositeRule&&d?t.async?o+=" throw new ValidationError(["+b+"]); ":o+=" validate.errors = ["+b+"]; return false; ":o+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d&&(o+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,l,y);t.logger.warn(y),d&&(o+=" if (true) { ")}}else if(g.inline){var w=t.util.copy(t);w.level++;var M="valid"+w.level;w.schema=g.schema,w.schemaPath="",w.errSchemaPath=l,o+=" "+t.validate(w).replace(/validate\.schema/g,g.code)+" ",d&&(o+=" if ("+M+") { ")}else i=!0===g.$async||t.async&&!1!==g.$async,a=g.code}if(a){var _;(_=_||[]).push(o),o="",t.opts.passContext?o+=" "+a+".call(this, ":o+=" "+a+"( ",o+=" "+p+", (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var x=o+=" , "+(h?"data"+(h-1||""):"parentData")+" , "+(h?t.dataPathArr[h]:"parentDataProperty")+", rootData)  ";if(o=_.pop(),i){if(!t.async)throw new Error("async schema referenced by sync schema");d&&(o+=" var "+m+"; "),o+=" try { await "+x+"; ",d&&(o+=" "+m+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",d&&(o+=" "+m+" = false; "),o+=" } ",d&&(o+=" if ("+m+") { ")}else o+=" if (!"+x+") { if (vErrors === null) vErrors = "+a+".errors; else vErrors = vErrors.concat("+a+".errors); errors = vErrors.length; } ",d&&(o+=" else { ")}return o}},function(t,r,n){"use strict";t.exports=function generate_allOf(t,r,n){var i=" ",a=t.schema[r],o=t.schemaPath+t.util.getProperty(r),s=t.errSchemaPath+"/"+r,h=!t.opts.allErrors,l=t.util.copy(t),c="";l.level++;var d="valid"+l.level,p=l.baseId,m=!0,g=a;if(g)for(var y,b=-1,w=g.length-1;b<w;)y=g[b+=1],(t.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0||!1===y:t.util.schemaHasRules(y,t.RULES.all))&&(m=!1,l.schema=y,l.schemaPath=o+"["+b+"]",l.errSchemaPath=s+"/"+b,i+="  "+t.validate(l)+" ",l.baseId=p,h&&(i+=" if ("+d+") { ",c+="}"));return h&&(i+=m?" if (true) { ":" "+c.slice(0,-1)+" "),i}},function(t,r,n){"use strict";t.exports=function generate_anyOf(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t),y="";g.level++;var b="valid"+g.level;if(s.every((function(r){return t.opts.strictKeywords?"object"==typeof r&&Object.keys(r).length>0||!1===r:t.util.schemaHasRules(r,t.RULES.all)}))){var w=g.baseId;i+=" var "+m+" = errors; var "+p+" = false;  ";var M=t.compositeRule;t.compositeRule=g.compositeRule=!0;var _=s;if(_)for(var x,A=-1,E=_.length-1;A<E;)x=_[A+=1],g.schema=x,g.schemaPath=h+"["+A+"]",g.errSchemaPath=l+"/"+A,i+="  "+t.validate(g)+" ",g.baseId=w,i+=" "+p+" = "+p+" || "+b+"; if (!"+p+") { ",y+="}";t.compositeRule=g.compositeRule=M,i+=" "+y+" if (!"+p+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",t.opts.allErrors&&(i+=" } ")}else c&&(i+=" if (true) { ");return i}},function(t,r,n){"use strict";t.exports=function generate_comment(t,r,n){var i=" ",a=t.schema[r],o=t.errSchemaPath+"/"+r,s=(t.opts.allErrors,t.util.toQuotedString(a));return!0===t.opts.$comment?i+=" console.log("+s+");":"function"==typeof t.opts.$comment&&(i+=" self._opts.$comment("+s+", "+t.util.toQuotedString(o)+", validate.root.schema);"),i}},function(t,r,n){"use strict";t.exports=function generate_const(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m=t.opts.$data&&s&&s.$data;m&&(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; "),m||(i+=" var schema"+a+" = validate.schema"+h+";"),i+="var "+p+" = equal("+d+", schema"+a+"); if (!"+p+") {   ";var g=g||[];g.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { allowedValue: schema"+a+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be equal to constant' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var y=i;return i=g.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}},function(t,r,n){"use strict";t.exports=function generate_contains(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t);g.level++;var y="valid"+g.level,b="i"+a,w=g.dataLevel=t.dataLevel+1,M="data"+w,_=t.baseId,x=t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all);if(i+="var "+m+" = errors;var "+p+";",x){var A=t.compositeRule;t.compositeRule=g.compositeRule=!0,g.schema=s,g.schemaPath=h,g.errSchemaPath=l,i+=" var "+y+" = false; for (var "+b+" = 0; "+b+" < "+d+".length; "+b+"++) { ",g.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers,!0);var E=d+"["+b+"]";g.dataPathArr[w]=b;var B=t.validate(g);g.baseId=_,t.util.varOccurences(B,M)<2?i+=" "+t.util.varReplace(B,M,E)+" ":i+=" var "+M+" = "+E+"; "+B+" ",i+=" if ("+y+") break; }  ",t.compositeRule=g.compositeRule=A,i+="  if (!"+y+") {"}else i+=" if ("+d+".length == 0) {";var C=C||[];C.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should contain a valid item' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var T=i;return i=C.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",x&&(i+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } "),t.opts.allErrors&&(i+=" } "),i}},function(t,r,n){"use strict";t.exports=function generate_dependencies(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="errs__"+a,m=t.util.copy(t),g="";m.level++;var y="valid"+m.level,b={},w={},M=t.opts.ownProperties;for(E in s)if("__proto__"!=E){var _=s[E],x=Array.isArray(_)?w:b;x[E]=_}i+="var "+p+" = errors;";var A=t.errorPath;for(var E in i+="var missing"+a+";",w)if((x=w[E]).length){if(i+=" if ( "+d+t.util.getProperty(E)+" !== undefined ",M&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(E)+"') "),c){i+=" && ( ";var B=x;if(B)for(var C=-1,T=B.length-1;C<T;){I=B[C+=1],C&&(i+=" || "),i+=" ( ( "+(z=d+(U=t.util.getProperty(I)))+" === undefined ",M&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(I)+"') "),i+=") && (missing"+a+" = "+t.util.toQuotedString(t.opts.jsonPointers?I:U)+") ) "}i+=")) {  ";var D="missing"+a,P="' + "+D+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(A,D,!0):A+" + "+D);var L=L||[];L.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { property: '"+t.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+x.length+", deps: '"+t.util.escapeQuotes(1==x.length?x[0]:x.join(", "))+"' } ",!1!==t.opts.messages&&(i+=" , message: 'should have ",1==x.length?i+="property "+t.util.escapeQuotes(x[0]):i+="properties "+t.util.escapeQuotes(x.join(", ")),i+=" when property "+t.util.escapeQuotes(E)+" is present' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var N=i;i=L.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+N+"]); ":i+=" validate.errors = ["+N+"]; return false; ":i+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var F=x;if(F)for(var I,k=-1,O=F.length-1;k<O;){I=F[k+=1];var U=t.util.getProperty(I),z=(P=t.util.escapeQuotes(I),d+U);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(A,I,t.opts.jsonPointers)),i+=" if ( "+z+" === undefined ",M&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(I)+"') "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { property: '"+t.util.escapeQuotes(E)+"', missingProperty: '"+P+"', depsCount: "+x.length+", deps: '"+t.util.escapeQuotes(1==x.length?x[0]:x.join(", "))+"' } ",!1!==t.opts.messages&&(i+=" , message: 'should have ",1==x.length?i+="property "+t.util.escapeQuotes(x[0]):i+="properties "+t.util.escapeQuotes(x.join(", ")),i+=" when property "+t.util.escapeQuotes(E)+" is present' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",c&&(g+="}",i+=" else { ")}t.errorPath=A;var V=m.baseId;for(var E in b){_=b[E];(t.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0||!1===_:t.util.schemaHasRules(_,t.RULES.all))&&(i+=" "+y+" = true; if ( "+d+t.util.getProperty(E)+" !== undefined ",M&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(E)+"') "),i+=") { ",m.schema=_,m.schemaPath=h+t.util.getProperty(E),m.errSchemaPath=l+"/"+t.util.escapeFragment(E),i+="  "+t.validate(m)+" ",m.baseId=V,i+=" }  ",c&&(i+=" if ("+y+") { ",g+="}"))}return c&&(i+="   "+g+" if ("+p+" == errors) {"),i}},function(t,r,n){"use strict";t.exports=function generate_enum(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m=t.opts.$data&&s&&s.$data;m&&(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var g="i"+a,y="schema"+a;m||(i+=" var "+y+" = validate.schema"+h+";"),i+="var "+p+";",m&&(i+=" if (schema"+a+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+a+")) "+p+" = false; else {"),i+=p+" = false;for (var "+g+"=0; "+g+"<"+y+".length; "+g+"++) if (equal("+d+", "+y+"["+g+"])) { "+p+" = true; break; }",m&&(i+="  }  "),i+=" if (!"+p+") {   ";var b=b||[];b.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { allowedValues: schema"+a+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var w=i;return i=b.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+w+"]); ":i+=" validate.errors = ["+w+"]; return false; ":i+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",c&&(i+=" else { "),i}},function(t,r,n){"use strict";t.exports=function generate_format(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||"");if(!1===t.opts.format)return c&&(i+=" if (true) { "),i;var p,m=t.opts.$data&&s&&s.$data;m?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+a):p=s;var g=t.opts.unknownFormats,y=Array.isArray(g);if(m){i+=" var "+(b="format"+a)+" = formats["+p+"]; var "+(w="isObject"+a)+" = typeof "+b+" == 'object' && !("+b+" instanceof RegExp) && "+b+".validate; var "+(M="formatType"+a)+" = "+w+" && "+b+".type || 'string'; if ("+w+") { ",t.async&&(i+=" var async"+a+" = "+b+".async; "),i+=" "+b+" = "+b+".validate; } if (  ",m&&(i+=" ("+p+" !== undefined && typeof "+p+" != 'string') || "),i+=" (","ignore"!=g&&(i+=" ("+p+" && !"+b+" ",y&&(i+=" && self._opts.unknownFormats.indexOf("+p+") == -1 "),i+=") || "),i+=" ("+b+" && "+M+" == '"+n+"' && !(typeof "+b+" == 'function' ? ",t.async?i+=" (async"+a+" ? await "+b+"("+d+") : "+b+"("+d+")) ":i+=" "+b+"("+d+") ",i+=" : "+b+".test("+d+"))))) {"}else{var b;if(!(b=t.formats[s])){if("ignore"==g)return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),c&&(i+=" if (true) { "),i;if(y&&g.indexOf(s)>=0)return c&&(i+=" if (true) { "),i;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var w,M=(w="object"==typeof b&&!(b instanceof RegExp)&&b.validate)&&b.type||"string";if(w){var _=!0===b.async;b=b.validate}if(M!=n)return c&&(i+=" if (true) { "),i;if(_){if(!t.async)throw new Error("async format in sync schema");i+=" if (!(await "+(x="formats"+t.util.getProperty(s)+".validate")+"("+d+"))) { "}else{i+=" if (! ";var x="formats"+t.util.getProperty(s);w&&(x+=".validate"),i+="function"==typeof b?" "+x+"("+d+") ":" "+x+".test("+d+") ",i+=") { "}}var A=A||[];A.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { format:  ",i+=m?""+p:""+t.util.toQuotedString(s),i+="  } ",!1!==t.opts.messages&&(i+=" , message: 'should match format \"",i+=m?"' + "+p+" + '":""+t.util.escapeQuotes(s),i+="\"' "),t.opts.verbose&&(i+=" , schema:  ",i+=m?"validate.schema"+h:""+t.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;return i=A.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}},function(t,r,n){"use strict";t.exports=function generate_if(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t);g.level++;var y="valid"+g.level,b=t.schema.then,w=t.schema.else,M=void 0!==b&&(t.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:t.util.schemaHasRules(b,t.RULES.all)),_=void 0!==w&&(t.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:t.util.schemaHasRules(w,t.RULES.all)),x=g.baseId;if(M||_){var A;g.createErrors=!1,g.schema=s,g.schemaPath=h,g.errSchemaPath=l,i+=" var "+m+" = errors; var "+p+" = true;  ";var E=t.compositeRule;t.compositeRule=g.compositeRule=!0,i+="  "+t.validate(g)+" ",g.baseId=x,g.createErrors=!0,i+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }  ",t.compositeRule=g.compositeRule=E,M?(i+=" if ("+y+") {  ",g.schema=t.schema.then,g.schemaPath=t.schemaPath+".then",g.errSchemaPath=t.errSchemaPath+"/then",i+="  "+t.validate(g)+" ",g.baseId=x,i+=" "+p+" = "+y+"; ",M&&_?i+=" var "+(A="ifClause"+a)+" = 'then'; ":A="'then'",i+=" } ",_&&(i+=" else { ")):i+=" if (!"+y+") { ",_&&(g.schema=t.schema.else,g.schemaPath=t.schemaPath+".else",g.errSchemaPath=t.errSchemaPath+"/else",i+="  "+t.validate(g)+" ",g.baseId=x,i+=" "+p+" = "+y+"; ",M&&_?i+=" var "+(A="ifClause"+a)+" = 'else'; ":A="'else'",i+=" } "),i+=" if (!"+p+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { failingKeyword: "+A+" } ",!1!==t.opts.messages&&(i+=" , message: 'should match \"' + "+A+" + '\" schema' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",c&&(i+=" else { ")}else c&&(i+=" if (true) { ");return i}},function(t,r,n){"use strict";t.exports=function generate_items(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t),y="";g.level++;var b="valid"+g.level,w="i"+a,M=g.dataLevel=t.dataLevel+1,_="data"+M,x=t.baseId;if(i+="var "+m+" = errors;var "+p+";",Array.isArray(s)){var A=t.schema.additionalItems;if(!1===A){i+=" "+p+" = "+d+".length <= "+s.length+"; ";var E=l;l=t.errSchemaPath+"/additionalItems",i+="  if (!"+p+") {   ";var B=B||[];B.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+s.length+" } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var C=i;i=B.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+C+"]); ":i+=" validate.errors = ["+C+"]; return false; ":i+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l=E,c&&(y+="}",i+=" else { ")}var T=s;if(T)for(var D,P=-1,L=T.length-1;P<L;)if(D=T[P+=1],t.opts.strictKeywords?"object"==typeof D&&Object.keys(D).length>0||!1===D:t.util.schemaHasRules(D,t.RULES.all)){i+=" "+b+" = true; if ("+d+".length > "+P+") { ";var N=d+"["+P+"]";g.schema=D,g.schemaPath=h+"["+P+"]",g.errSchemaPath=l+"/"+P,g.errorPath=t.util.getPathExpr(t.errorPath,P,t.opts.jsonPointers,!0),g.dataPathArr[M]=P;var F=t.validate(g);g.baseId=x,t.util.varOccurences(F,_)<2?i+=" "+t.util.varReplace(F,_,N)+" ":i+=" var "+_+" = "+N+"; "+F+" ",i+=" }  ",c&&(i+=" if ("+b+") { ",y+="}")}if("object"==typeof A&&(t.opts.strictKeywords?"object"==typeof A&&Object.keys(A).length>0||!1===A:t.util.schemaHasRules(A,t.RULES.all))){g.schema=A,g.schemaPath=t.schemaPath+".additionalItems",g.errSchemaPath=t.errSchemaPath+"/additionalItems",i+=" "+b+" = true; if ("+d+".length > "+s.length+") {  for (var "+w+" = "+s.length+"; "+w+" < "+d+".length; "+w+"++) { ",g.errorPath=t.util.getPathExpr(t.errorPath,w,t.opts.jsonPointers,!0);N=d+"["+w+"]";g.dataPathArr[M]=w;F=t.validate(g);g.baseId=x,t.util.varOccurences(F,_)<2?i+=" "+t.util.varReplace(F,_,N)+" ":i+=" var "+_+" = "+N+"; "+F+" ",c&&(i+=" if (!"+b+") break; "),i+=" } }  ",c&&(i+=" if ("+b+") { ",y+="}")}}else if(t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){g.schema=s,g.schemaPath=h,g.errSchemaPath=l,i+="  for (var "+w+" = 0; "+w+" < "+d+".length; "+w+"++) { ",g.errorPath=t.util.getPathExpr(t.errorPath,w,t.opts.jsonPointers,!0);N=d+"["+w+"]";g.dataPathArr[M]=w;F=t.validate(g);g.baseId=x,t.util.varOccurences(F,_)<2?i+=" "+t.util.varReplace(F,_,N)+" ":i+=" var "+_+" = "+N+"; "+F+" ",c&&(i+=" if (!"+b+") break; "),i+=" }"}return c&&(i+=" "+y+" if ("+m+" == errors) {"),i}},function(t,r,n){"use strict";t.exports=function generate_multipleOf(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;if(m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,!m&&"number"!=typeof h)throw new Error(r+" must be number");a+="var division"+o+";if (",m&&(a+=" "+i+" !== undefined && ( typeof "+i+" != 'number' || "),a+=" (division"+o+" = "+p+" / "+i+", ",t.opts.multipleOfPrecision?a+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+t.opts.multipleOfPrecision+" ":a+=" division"+o+" !== parseInt(division"+o+") ",a+=" ) ",m&&(a+="  )  "),a+=" ) {   ";var g=g||[];g.push(a),a="",!1!==t.createErrors?(a+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { multipleOf: "+i+" } ",!1!==t.opts.messages&&(a+=" , message: 'should be multiple of ",a+=m?"' + "+i:i+"'"),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var y=a;return a=g.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},function(t,r,n){"use strict";t.exports=function generate_not(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="errs__"+a,m=t.util.copy(t);m.level++;var g="valid"+m.level;if(t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){m.schema=s,m.schemaPath=h,m.errSchemaPath=l,i+=" var "+p+" = errors;  ";var y,b=t.compositeRule;t.compositeRule=m.compositeRule=!0,m.createErrors=!1,m.opts.allErrors&&(y=m.opts.allErrors,m.opts.allErrors=!1),i+=" "+t.validate(m)+" ",m.createErrors=!0,y&&(m.opts.allErrors=y),t.compositeRule=m.compositeRule=b,i+=" if ("+g+") {   ";var w=w||[];w.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should NOT be valid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var M=i;i=w.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+M+"]); ":i+=" validate.errors = ["+M+"]; return false; ":i+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",t.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: 'should NOT be valid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(i+=" if (false) { ");return i}},function(t,r,n){"use strict";t.exports=function generate_oneOf(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t),y="";g.level++;var b="valid"+g.level,w=g.baseId,M="prevValid"+a,_="passingSchemas"+a;i+="var "+m+" = errors , "+M+" = false , "+p+" = false , "+_+" = null; ";var x=t.compositeRule;t.compositeRule=g.compositeRule=!0;var A=s;if(A)for(var E,B=-1,C=A.length-1;B<C;)E=A[B+=1],(t.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0||!1===E:t.util.schemaHasRules(E,t.RULES.all))?(g.schema=E,g.schemaPath=h+"["+B+"]",g.errSchemaPath=l+"/"+B,i+="  "+t.validate(g)+" ",g.baseId=w):i+=" var "+b+" = true; ",B&&(i+=" if ("+b+" && "+M+") { "+p+" = false; "+_+" = ["+_+", "+B+"]; } else { ",y+="}"),i+=" if ("+b+") { "+p+" = "+M+" = true; "+_+" = "+B+"; }";return t.compositeRule=g.compositeRule=x,i+=y+"if (!"+p+") {   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { passingSchemas: "+_+" } ",!1!==t.opts.messages&&(i+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }",t.opts.allErrors&&(i+=" } "),i}},function(t,r,n){"use strict";t.exports=function generate_pattern(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m=t.opts.$data&&h&&h.$data;m?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,a+="if ( ",m&&(a+=" ("+i+" !== undefined && typeof "+i+" != 'string') || "),a+=" !"+(m?"(new RegExp("+i+"))":t.usePattern(h))+".test("+p+") ) {   ";var g=g||[];g.push(a),a="",!1!==t.createErrors?(a+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { pattern:  ",a+=m?""+i:""+t.util.toQuotedString(h),a+="  } ",!1!==t.opts.messages&&(a+=" , message: 'should match pattern \"",a+=m?"' + "+i+" + '":""+t.util.escapeQuotes(h),a+="\"' "),t.opts.verbose&&(a+=" , schema:  ",a+=m?"validate.schema"+l:""+t.util.toQuotedString(h),a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var y=a;return a=g.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+y+"]); ":a+=" validate.errors = ["+y+"]; return false; ":a+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+="} ",d&&(a+=" else { "),a}},function(t,r,n){"use strict";t.exports=function generate_properties(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="errs__"+a,m=t.util.copy(t),g="";m.level++;var y="valid"+m.level,b="key"+a,w="idx"+a,M=m.dataLevel=t.dataLevel+1,_="data"+M,x="dataProperties"+a,A=Object.keys(s||{}).filter(notProto),E=t.schema.patternProperties||{},B=Object.keys(E).filter(notProto),C=t.schema.additionalProperties,T=A.length||B.length,D=!1===C,P="object"==typeof C&&Object.keys(C).length,L=t.opts.removeAdditional,N=D||P||L,F=t.opts.ownProperties,I=t.baseId,k=t.schema.required;if(k&&(!t.opts.$data||!k.$data)&&k.length<t.opts.loopRequired)var O=t.util.toHash(k);function notProto(t){return"__proto__"!==t}if(i+="var "+p+" = errors;var "+y+" = true;",F&&(i+=" var "+x+" = undefined;"),N){if(i+=F?" "+x+" = "+x+" || Object.keys("+d+"); for (var "+w+"=0; "+w+"<"+x+".length; "+w+"++) { var "+b+" = "+x+"["+w+"]; ":" for (var "+b+" in "+d+") { ",T){if(i+=" var isAdditional"+a+" = !(false ",A.length)if(A.length>8)i+=" || validate.schema"+h+".hasOwnProperty("+b+") ";else{var U=A;if(U)for(var z=-1,V=U.length-1;z<V;)te=U[z+=1],i+=" || "+b+" == "+t.util.toQuotedString(te)+" "}if(B.length){var j=B;if(j)for(var H=-1,G=j.length-1;H<G;)ce=j[H+=1],i+=" || "+t.usePattern(ce)+".test("+b+") "}i+=" ); if (isAdditional"+a+") { "}if("all"==L)i+=" delete "+d+"["+b+"]; ";else{var W=t.errorPath,q="' + "+b+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers)),D)if(L)i+=" delete "+d+"["+b+"]; ";else{i+=" "+y+" = false; ";var Q=l;l=t.errSchemaPath+"/additionalProperties",(ue=ue||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { additionalProperty: '"+q+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),t.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var X=i;i=ue.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=Q,c&&(i+=" break; ")}else if(P)if("failing"==L){i+=" var "+p+" = errors;  ";var Y=t.compositeRule;t.compositeRule=m.compositeRule=!0,m.schema=C,m.schemaPath=t.schemaPath+".additionalProperties",m.errSchemaPath=t.errSchemaPath+"/additionalProperties",m.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers);var J=d+"["+b+"]";m.dataPathArr[M]=b;var Z=t.validate(m);m.baseId=I,t.util.varOccurences(Z,_)<2?i+=" "+t.util.varReplace(Z,_,J)+" ":i+=" var "+_+" = "+J+"; "+Z+" ",i+=" if (!"+y+") { errors = "+p+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+b+"]; }  ",t.compositeRule=m.compositeRule=Y}else{m.schema=C,m.schemaPath=t.schemaPath+".additionalProperties",m.errSchemaPath=t.errSchemaPath+"/additionalProperties",m.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers);J=d+"["+b+"]";m.dataPathArr[M]=b;Z=t.validate(m);m.baseId=I,t.util.varOccurences(Z,_)<2?i+=" "+t.util.varReplace(Z,_,J)+" ":i+=" var "+_+" = "+J+"; "+Z+" ",c&&(i+=" if (!"+y+") break; ")}t.errorPath=W}T&&(i+=" } "),i+=" }  ",c&&(i+=" if ("+y+") { ",g+="}")}var $=t.opts.useDefaults&&!t.compositeRule;if(A.length){var ee=A;if(ee)for(var te,re=-1,ne=ee.length-1;re<ne;){var ie=s[te=ee[re+=1]];if(t.opts.strictKeywords?"object"==typeof ie&&Object.keys(ie).length>0||!1===ie:t.util.schemaHasRules(ie,t.RULES.all)){var ae=t.util.getProperty(te),oe=(J=d+ae,$&&void 0!==ie.default);m.schema=ie,m.schemaPath=h+ae,m.errSchemaPath=l+"/"+t.util.escapeFragment(te),m.errorPath=t.util.getPath(t.errorPath,te,t.opts.jsonPointers),m.dataPathArr[M]=t.util.toQuotedString(te);Z=t.validate(m);if(m.baseId=I,t.util.varOccurences(Z,_)<2){Z=t.util.varReplace(Z,_,J);var se=J}else{se=_;i+=" var "+_+" = "+J+"; "}if(oe)i+=" "+Z+" ";else{if(O&&O[te]){i+=" if ( "+se+" === undefined ",F&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(te)+"') "),i+=") { "+y+" = false; ";W=t.errorPath,Q=l;var ue,he=t.util.escapeQuotes(te);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(W,te,t.opts.jsonPointers)),l=t.errSchemaPath+"/required",(ue=ue||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+he+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+he+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";X=i;i=ue.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+X+"]); ":i+=" validate.errors = ["+X+"]; return false; ":i+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l=Q,t.errorPath=W,i+=" } else { "}else c?(i+=" if ( "+se+" === undefined ",F&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(te)+"') "),i+=") { "+y+" = true; } else { "):(i+=" if ("+se+" !== undefined ",F&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(te)+"') "),i+=" ) { ");i+=" "+Z+" } "}}c&&(i+=" if ("+y+") { ",g+="}")}}if(B.length){var le=B;if(le)for(var ce,de=-1,fe=le.length-1;de<fe;){ie=E[ce=le[de+=1]];if(t.opts.strictKeywords?"object"==typeof ie&&Object.keys(ie).length>0||!1===ie:t.util.schemaHasRules(ie,t.RULES.all)){m.schema=ie,m.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(ce),m.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(ce),i+=F?" "+x+" = "+x+" || Object.keys("+d+"); for (var "+w+"=0; "+w+"<"+x+".length; "+w+"++) { var "+b+" = "+x+"["+w+"]; ":" for (var "+b+" in "+d+") { ",i+=" if ("+t.usePattern(ce)+".test("+b+")) { ",m.errorPath=t.util.getPathExpr(t.errorPath,b,t.opts.jsonPointers);J=d+"["+b+"]";m.dataPathArr[M]=b;Z=t.validate(m);m.baseId=I,t.util.varOccurences(Z,_)<2?i+=" "+t.util.varReplace(Z,_,J)+" ":i+=" var "+_+" = "+J+"; "+Z+" ",c&&(i+=" if (!"+y+") break; "),i+=" } ",c&&(i+=" else "+y+" = true; "),i+=" }  ",c&&(i+=" if ("+y+") { ",g+="}")}}}return c&&(i+=" "+g+" if ("+p+" == errors) {"),i}},function(t,r,n){"use strict";t.exports=function generate_propertyNames(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="errs__"+a,m=t.util.copy(t);m.level++;var g="valid"+m.level;if(i+="var "+p+" = errors;",t.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:t.util.schemaHasRules(s,t.RULES.all)){m.schema=s,m.schemaPath=h,m.errSchemaPath=l;var y="key"+a,b="idx"+a,w="i"+a,M="' + "+y+" + '",_="data"+(m.dataLevel=t.dataLevel+1),x="dataProperties"+a,A=t.opts.ownProperties,E=t.baseId;A&&(i+=" var "+x+" = undefined; "),i+=A?" "+x+" = "+x+" || Object.keys("+d+"); for (var "+b+"=0; "+b+"<"+x+".length; "+b+"++) { var "+y+" = "+x+"["+b+"]; ":" for (var "+y+" in "+d+") { ",i+=" var startErrs"+a+" = errors; ";var B=y,C=t.compositeRule;t.compositeRule=m.compositeRule=!0;var T=t.validate(m);m.baseId=E,t.util.varOccurences(T,_)<2?i+=" "+t.util.varReplace(T,_,B)+" ":i+=" var "+_+" = "+B+"; "+T+" ",t.compositeRule=m.compositeRule=C,i+=" if (!"+g+") { for (var "+w+"=startErrs"+a+"; "+w+"<errors; "+w+"++) { vErrors["+w+"].propertyName = "+y+"; }   var err =   ",!1!==t.createErrors?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { propertyName: '"+M+"' } ",!1!==t.opts.messages&&(i+=" , message: 'property name \\'"+M+"\\' is invalid' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&c&&(t.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),c&&(i+=" break; "),i+=" } }"}return c&&(i+="  if ("+p+" == errors) {"),i}},function(t,r,n){"use strict";t.exports=function generate_required(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m=t.opts.$data&&s&&s.$data;m&&(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var g="schema"+a;if(!m)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var y=[],b=s;if(b)for(var w,M=-1,_=b.length-1;M<_;){w=b[M+=1];var x=t.schema.properties[w];x&&(t.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:t.util.schemaHasRules(x,t.RULES.all))||(y[y.length]=w)}}else y=s;if(m||y.length){var A=t.errorPath,E=m||y.length>=t.opts.loopRequired,B=t.opts.ownProperties;if(c)if(i+=" var missing"+a+"; ",E){m||(i+=" var "+g+" = validate.schema"+h+"; ");var C="' + "+(F="schema"+a+"["+(P="i"+a)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(A,F,t.opts.jsonPointers)),i+=" var "+p+" = true; ",m&&(i+=" if (schema"+a+" === undefined) "+p+" = true; else if (!Array.isArray(schema"+a+")) "+p+" = false; else {"),i+=" for (var "+P+" = 0; "+P+" < "+g+".length; "+P+"++) { "+p+" = "+d+"["+g+"["+P+"]] !== undefined ",B&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+g+"["+P+"]) "),i+="; if (!"+p+") break; } ",m&&(i+="  }  "),i+="  if (!"+p+") {   ",(N=N||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var T=i;i=N.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var D=y;if(D)for(var P=-1,L=D.length-1;P<L;){k=D[P+=1],P&&(i+=" || "),i+=" ( ( "+(V=d+(z=t.util.getProperty(k)))+" === undefined ",B&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(k)+"') "),i+=") && (missing"+a+" = "+t.util.toQuotedString(t.opts.jsonPointers?k:z)+") ) "}i+=") {  ";var N;C="' + "+(F="missing"+a)+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(A,F,!0):A+" + "+F),(N=N||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";T=i;i=N.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(E){m||(i+=" var "+g+" = validate.schema"+h+"; ");var F;C="' + "+(F="schema"+a+"["+(P="i"+a)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(A,F,t.opts.jsonPointers)),m&&(i+=" if ("+g+" && !Array.isArray("+g+")) {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+g+" !== undefined) { "),i+=" for (var "+P+" = 0; "+P+" < "+g+".length; "+P+"++) { if ("+d+"["+g+"["+P+"]] === undefined ",B&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+g+"["+P+"]) "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",m&&(i+="  }  ")}else{var I=y;if(I)for(var k,O=-1,U=I.length-1;O<U;){k=I[O+=1];var z=t.util.getProperty(k),V=(C=t.util.escapeQuotes(k),d+z);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(A,k,t.opts.jsonPointers)),i+=" if ( "+V+" === undefined ",B&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+t.util.escapeQuotes(k)+"') "),i+=") {  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingProperty: '"+C+"' } ",!1!==t.opts.messages&&(i+=" , message: '",t.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+C+"\\'",i+="' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=A}else c&&(i+=" if (true) {");return i}},function(t,r,n){"use strict";t.exports=function generate_uniqueItems(t,r,n){var i,a=" ",o=t.level,s=t.dataLevel,h=t.schema[r],l=t.schemaPath+t.util.getProperty(r),c=t.errSchemaPath+"/"+r,d=!t.opts.allErrors,p="data"+(s||""),m="valid"+o,g=t.opts.$data&&h&&h.$data;if(g?(a+=" var schema"+o+" = "+t.util.getData(h.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=h,(h||g)&&!1!==t.opts.uniqueItems){g&&(a+=" var "+m+"; if ("+i+" === false || "+i+" === undefined) "+m+" = true; else if (typeof "+i+" != 'boolean') "+m+" = false; else { "),a+=" var i = "+p+".length , "+m+" = true , j; if (i > 1) { ";var y=t.schema.items&&t.schema.items.type,b=Array.isArray(y);if(!y||"object"==y||"array"==y||b&&(y.indexOf("object")>=0||y.indexOf("array")>=0))a+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+p+"[i], "+p+"[j])) { "+m+" = false; break outer; } } } ";else{a+=" var itemIndices = {}, item; for (;i--;) { var item = "+p+"[i]; ";var w="checkDataType"+(b?"s":"");a+=" if ("+t.util[w](y,"item",t.opts.strictNumbers,!0)+") continue; ",b&&(a+=" if (typeof item == 'string') item = '\"' + item; "),a+=" if (typeof itemIndices[item] == 'number') { "+m+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}a+=" } ",g&&(a+="  }  "),a+=" if (!"+m+") {   ";var M=M||[];M.push(a),a="",!1!==t.createErrors?(a+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(a+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(a+=" , schema:  ",a+=g?"validate.schema"+l:""+h,a+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+p+" "),a+=" } "):a+=" {} ";var _=a;a=M.pop(),!t.compositeRule&&d?t.async?a+=" throw new ValidationError(["+_+"]); ":a+=" validate.errors = ["+_+"]; return false; ":a+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",a+=" } ",d&&(a+=" else { ")}else d&&(a+=" if (true) { ");return a}},function(t,r,n){"use strict";var i=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];t.exports=function(t,r){for(var n=0;n<r.length;n++){t=JSON.parse(JSON.stringify(t));var a,o=r[n].split("/"),s=t;for(a=1;a<o.length;a++)s=s[o[a]];for(a=0;a<i.length;a++){var h=i[a],l=s[h];l&&(s[h]={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return t}},function(t,r,n){"use strict";var i=n(95).MissingRef;t.exports=function compileAsync(t,r,n){var a=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(n=r,r=void 0);var o=loadMetaSchemaOf(t).then((function(){var n=a._addSchema(t,void 0,r);return n.validate||_compileAsync(n)}));n&&o.then((function(t){n(null,t)}),n);return o;function loadMetaSchemaOf(t){var r=t.$schema;return r&&!a.getSchema(r)?compileAsync.call(a,{$ref:r},!0):Promise.resolve()}function _compileAsync(t){try{return a._compile(t)}catch(n){if(n instanceof i)return function loadMissingSchema(n){var i=n.missingSchema;if(added(i))throw new Error("Schema "+i+" is loaded but "+n.missingRef+" cannot be resolved");var o=a._loadingSchemas[i];o||(o=a._loadingSchemas[i]=a._opts.loadSchema(i)).then(removePromise,removePromise);return o.then((function(t){if(!added(i))return loadMetaSchemaOf(t).then((function(){added(i)||a.addSchema(t,i,void 0,r)}))})).then((function(){return _compileAsync(t)}));function removePromise(){delete a._loadingSchemas[i]}function added(t){return a._refs[t]||a._schemas[t]}}(n);throw n}}}},function(t,r,n){"use strict";var i=/^[a-z_$][a-z0-9_$-]*$/i,a=n(324),o=n(325);t.exports={add:function addKeyword(t,r){var n=this.RULES;if(n.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!i.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(r){this.validateKeyword(r,!0);var o=r.type;if(Array.isArray(o))for(var s=0;s<o.length;s++)_addRule(t,o[s],r);else _addRule(t,o,r);var h=r.metaSchema;h&&(r.$data&&this._opts.$data&&(h={anyOf:[h,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),r.validateSchema=this.compile(h,!0))}function _addRule(t,r,i){for(var o,s=0;s<n.length;s++){var h=n[s];if(h.type==r){o=h;break}}o||(o={type:r,rules:[]},n.push(o));var l={keyword:t,definition:i,custom:!0,code:a,implements:i.implements};o.rules.push(l),n.custom[t]=l}return n.keywords[t]=n.all[t]=!0,this},get:function getKeyword(t){var r=this.RULES.custom[t];return r?r.definition:this.RULES.keywords[t]||!1},remove:function removeKeyword(t){var r=this.RULES;delete r.keywords[t],delete r.all[t],delete r.custom[t];for(var n=0;n<r.length;n++)for(var i=r[n].rules,a=0;a<i.length;a++)if(i[a].keyword==t){i.splice(a,1);break}return this},validate:function validateKeyword(t,r){validateKeyword.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(n(t))return!0;if(validateKeyword.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(t,r,n){"use strict";t.exports=function generate_custom(t,r,n){var i,a,o=" ",s=t.level,h=t.dataLevel,l=t.schema[r],c=t.schemaPath+t.util.getProperty(r),d=t.errSchemaPath+"/"+r,p=!t.opts.allErrors,m="data"+(h||""),g="valid"+s,y="errs__"+s,b=t.opts.$data&&l&&l.$data;b?(o+=" var schema"+s+" = "+t.util.getData(l.$data,h,t.dataPathArr)+"; ",a="schema"+s):a=l;var w,M,_,x,A,E=this,B="definition"+s,C=E.definition,T="";if(b&&C.$data){A="keywordValidate"+s;var D=C.validateSchema;o+=" var "+B+" = RULES.custom['"+r+"'].definition; var "+A+" = "+B+".validate;"}else{if(!(x=t.useCustomRule(E,l,t.schema,t)))return;a="validate.schema"+c,A=x.code,w=C.compile,M=C.inline,_=C.macro}var P=A+".errors",L="i"+s,N="ruleErr"+s,F=C.async;if(F&&!t.async)throw new Error("async keyword in sync schema");if(M||_||(o+=P+" = null;"),o+="var "+y+" = errors;var "+g+";",b&&C.$data&&(T+="}",o+=" if ("+a+" === undefined) { "+g+" = true; } else { ",D&&(T+="}",o+=" "+g+" = "+B+".validateSchema("+a+"); if ("+g+") { ")),M)C.statements?o+=" "+x.validate+" ":o+=" "+g+" = "+x.validate+"; ";else if(_){var I=t.util.copy(t);T="";I.level++;var k="valid"+I.level;I.schema=x.validate,I.schemaPath="";var O=t.compositeRule;t.compositeRule=I.compositeRule=!0;var U=t.validate(I).replace(/validate\.schema/g,A);t.compositeRule=I.compositeRule=O,o+=" "+U}else{(H=H||[]).push(o),o="",o+="  "+A+".call( ",t.opts.passContext?o+="this":o+="self",w||!1===C.schema?o+=" , "+m+" ":o+=" , "+a+" , "+m+" , validate.schema"+t.schemaPath+" ",o+=" , (dataPath || '')",'""'!=t.errorPath&&(o+=" + "+t.errorPath);var z=h?"data"+(h-1||""):"parentData",V=h?t.dataPathArr[h]:"parentDataProperty",j=o+=" , "+z+" , "+V+" , rootData )  ";o=H.pop(),!1===C.errors?(o+=" "+g+" = ",F&&(o+="await "),o+=j+"; "):o+=F?" var "+(P="customErrors"+s)+" = null; try { "+g+" = await "+j+"; } catch (e) { "+g+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+g+" = "+j+"; "}if(C.modifying&&(o+=" if ("+z+") "+m+" = "+z+"["+V+"];"),o+=""+T,C.valid)p&&(o+=" if (true) { ");else{var H;o+=" if ( ",void 0===C.valid?(o+=" !",o+=_?""+k:""+g):o+=" "+!C.valid+" ",o+=") { ",i=E.keyword,(H=H||[]).push(o),o="",(H=H||[]).push(o),o="",!1!==t.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: { keyword: '"+E.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ";var G=o;o=H.pop(),!t.compositeRule&&p?t.async?o+=" throw new ValidationError(["+G+"]); ":o+=" validate.errors = ["+G+"]; return false; ":o+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var W=o;o=H.pop(),M?C.errors?"full"!=C.errors&&(o+="  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+N+" = vErrors["+L+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+N+".schemaPath === undefined) { "+N+'.schemaPath = "'+d+'"; } ',t.opts.verbose&&(o+=" "+N+".schema = "+a+"; "+N+".data = "+m+"; "),o+=" } "):!1===C.errors?o+=" "+W+" ":(o+=" if ("+y+" == errors) { "+W+" } else {  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+N+" = vErrors["+L+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+N+".schemaPath === undefined) { "+N+'.schemaPath = "'+d+'"; } ',t.opts.verbose&&(o+=" "+N+".schema = "+a+"; "+N+".data = "+m+"; "),o+=" } } "):_?(o+="   var err =   ",!1!==t.createErrors?(o+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(d)+" , params: { keyword: '"+E.keyword+"' } ",!1!==t.opts.messages&&(o+=" , message: 'should pass \""+E.keyword+"\" keyword validation' "),t.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&p&&(t.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===C.errors?o+=" "+W+" ":(o+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+L+"="+y+"; "+L+"<errors; "+L+"++) { var "+N+" = vErrors["+L+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+t.errorPath+";  "+N+'.schemaPath = "'+d+'";  ',t.opts.verbose&&(o+=" "+N+".schema = "+a+"; "+N+".data = "+m+"; "),o+=" } } else { "+W+" } "),o+=" } ",p&&(o+=" else { ")}return o}},function(t,r,n){"use strict";var i=n(165);t.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:i.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:i.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(t){t.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(t,r,n){"use strict";var i=n(328);function defineKeywords(t,r){if(Array.isArray(r)){for(var n=0;n<r.length;n++)get(r[n])(t);return t}if(r)return get(r)(t),t;for(r in i)get(r)(t);return t}function get(t){var r=i[t];if(!r)throw new Error("Unknown keyword "+t);return r}t.exports=defineKeywords,defineKeywords.get=get},function(t,r,n){"use strict";t.exports={instanceof:n(329),range:n(330),regexp:n(331),typeof:n(332),dynamicDefaults:n(333),allRequired:n(334),anyRequired:n(335),oneRequired:n(336),prohibited:n(337),uniqueItemProperties:n(338),deepProperties:n(339),deepRequired:n(340),formatMinimum:n(341),formatMaximum:n(343),patternRequired:n(344),switch:n(346),select:n(348),transform:n(349)}},function(t,r,n){"use strict";(function(r){var n={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};t.exports=function defFunc(t){return void 0!==r&&(n.Buffer=r),"undefined"!=typeof Promise&&(n.Promise=Promise),defFunc.definition={compile:function(t){if("string"==typeof t){var r=getConstructor(t);return function(t){return t instanceof r}}var n=t.map(getConstructor);return function(t){for(var r=0;r<n.length;r++)if(t instanceof n[r])return!0;return!1}},CONSTRUCTORS:n,metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},t.addKeyword("instanceof",defFunc.definition),t;function getConstructor(t){var r=n[t];if(r)return r;throw new Error('invalid "instanceof" keyword value '+t)}}}).call(this,n(13).Buffer)},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"number",macro:function(t,r){var n=t[0],i=t[1],a=r.exclusiveRange;return function validateRangeSchema(t,r,n){if(void 0!==n&&"boolean"!=typeof n)throw new Error("Invalid schema for exclusiveRange keyword, should be boolean");if(t>r||n&&t==r)throw new Error("There are no numbers in range")}(n,i,a),!0===a?{exclusiveMinimum:n,exclusiveMaximum:i}:{minimum:n,maximum:i}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}},t.addKeyword("range",defFunc.definition),t.addKeyword("exclusiveRange"),t}},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"string",inline:function(t,r,n){return function getRegExp(){try{if("object"==typeof n)return new RegExp(n.pattern,n.flags);var t=n.match(/^\/(.*)\/([gimuy]*)$/);if(t)return new RegExp(t[1],t[2]);throw new Error("cannot parse string into RegExp")}catch(t){throw console.error("regular expression",n,"is invalid"),t}}()+".test(data"+(t.dataLevel||"")+")"},metaSchema:{type:["string","object"],properties:{pattern:{type:"string"},flags:{type:"string"}},required:["pattern"],additionalProperties:!1}},t.addKeyword("regexp",defFunc.definition),t}},function(t,r,n){"use strict";var i=["undefined","string","number","object","function","boolean","symbol"];t.exports=function defFunc(t){return defFunc.definition={inline:function(t,r,n){var i="data"+(t.dataLevel||"");return"string"==typeof n?"typeof "+i+' == "'+n+'"':(n="validate.schema"+t.schemaPath+"."+r)+".indexOf(typeof "+i+") >= 0"},metaSchema:{anyOf:[{type:"string",enum:i},{type:"array",items:{type:"string",enum:i}}]}},t.addKeyword("typeof",defFunc.definition),t}},function(t,r,n){"use strict";var i={},a={timestamp:function(){return Date.now()},datetime:function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().slice(0,10)},time:function(){return(new Date).toISOString().slice(11)},random:function(){return Math.random()},randomint:function(t){var r=t&&t.max||2;return function(){return Math.floor(Math.random()*r)}},seq:function(t){var r=t&&t.name||"";return i[r]=i[r]||0,function(){return i[r]++}}};t.exports=function defFunc(t){return defFunc.definition={compile:function(t,r,n){var i={};for(var a in t){var o=t[a],s=getDefault("string"==typeof o?o:o.func);i[a]=s.length?s(o.args):s}return n.opts.useDefaults&&!n.compositeRule?function assignDefaults(r){for(var a in t)void 0!==r[a]&&("empty"!=n.opts.useDefaults||null!==r[a]&&""!==r[a])||(r[a]=i[a]());return!0}:function noop(){return!0}},DEFAULTS:a,metaSchema:{type:"object",additionalProperties:{type:["string","object"],additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}}},t.addKeyword("dynamicDefaults",defFunc.definition),t;function getDefault(t){var r=a[t];if(r)return r;throw new Error('invalid "dynamicDefaults" keyword property value: '+t)}}},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"object",macro:function(t,r){if(!t)return!0;var n=Object.keys(r.properties);return 0==n.length||{required:n}},metaSchema:{type:"boolean"},dependencies:["properties"]},t.addKeyword("allRequired",defFunc.definition),t}},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{required:t}:{anyOf:t.map((function(t){return{required:[t]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("anyRequired",defFunc.definition),t}},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{required:t}:{oneOf:t.map((function(t){return{required:[t]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("oneRequired",defFunc.definition),t}},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"object",macro:function(t){return 0==t.length||(1==t.length?{not:{required:t}}:{not:{anyOf:t.map((function(t){return{required:[t]}}))}})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("prohibited",defFunc.definition),t}},function(t,r,n){"use strict";var i=["number","integer","string","boolean","null"];t.exports=function defFunc(t){return defFunc.definition={type:"array",compile:function(t,r,n){var a=n.util.equal,o=function getScalarKeys(t,r){return t.map((function(t){var n=r.items&&r.items.properties,a=n&&n[t]&&n[t].type;return Array.isArray(a)?a.indexOf("object")<0&&a.indexOf("array")<0:i.indexOf(a)>=0}))}(t,r);return function(r){if(r.length>1)for(var n=0;n<t.length;n++){var i,s=t[n];if(o[n]){var h={};for(i=r.length;i--;)if(r[i]&&"object"==typeof r[i]){var l=r[i][s];if(!l||"object"!=typeof l){if("string"==typeof l&&(l='"'+l),h[l])return!1;h[l]=!0}}}else for(i=r.length;i--;)if(r[i]&&"object"==typeof r[i])for(var c=i;c--;)if(r[c]&&"object"==typeof r[c]&&a(r[i][s],r[c][s]))return!1}return!0}},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("uniqueItemProperties",defFunc.definition),t}},function(t,r,n){"use strict";var i=n(96);function getSchema(t,r){for(var n=t.split("/"),i={},a=i,o=1;o<n.length;o++){var s=n[o],h=o==n.length-1;s=s.replace(/~1/g,"/").replace(/~0/g,"~");var l=a.properties={},c=void 0;if(/[0-9]+/.test(s)){var d=+s;for(c=a.items=[];d--;)c.push({})}a=h?r:{},l[s]=a,c&&c.push(a)}return i}t.exports=function defFunc(t){return defFunc.definition={type:"object",macro:function(t){var r=[];for(var n in t)r.push(getSchema(n,t[n]));return{allOf:r}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:i.metaSchemaRef(t)}},t.addKeyword("deepProperties",defFunc.definition),t}},function(t,r,n){"use strict";function getData(t,r){var n="data"+(r||"");if(!t)return n;for(var s,h=n,l=t.split("/"),c=1;c<l.length;c++){var d=l[c];h+=" && "+(n+=(s=d.replace(/~1/g,"/").replace(/~0/g,"~"),a.test(s)?"["+s+"]":i.test(s)?"."+s:"['"+s.replace(o,"\\$&")+"']"))}return h}t.exports=function defFunc(t){return defFunc.definition={type:"object",inline:function(t,r,n){for(var i="",a=0;a<n.length;a++)a&&(i+=" && "),i+="("+getData(n[a],t.dataLevel)+" !== undefined)";return i},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}},t.addKeyword("deepRequired",defFunc.definition),t};var i=/^[a-z$_][a-z$_0-9]*$/i,a=/^[0-9]+$/,o=/'|\\/g},function(t,r,n){"use strict";t.exports=n(166)("Minimum")},function(t,r,n){"use strict";t.exports=function generate__formatLimit(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a;if(i+="var "+p+" = undefined;",!1===t.opts.format)return i+=" "+p+" = true; ";var m=t.schema.format,g=t.opts.$data&&m.$data,y="";if(g){i+=" var "+(b="format"+a)+" = formats["+t.util.getData(m.$data,o,t.dataPathArr)+"] , "+(w="compare"+a)+" = "+b+" && "+b+".compare;"}else{var b;if(!(b=t.formats[m])||!b.compare)return i+="  "+p+" = true; ";var w="formats"+t.util.getProperty(m)+".compare"}var M,_="formatMaximum"==r,x="formatExclusive"+(_?"Maximum":"Minimum"),A=t.schema[x],E=t.opts.$data&&A&&A.$data,B=_?"<":">",C="result"+a,T=t.opts.$data&&s&&s.$data;if(T?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",M="schema"+a):M=s,E){var D=t.util.getData(A.$data,o,t.dataPathArr),P="exclusive"+a,L="' + "+(I="op"+a)+" + '";i+=" var schemaExcl"+a+" = "+D+"; ",i+=" if (typeof "+(D="schemaExcl"+a)+" != 'boolean' && "+D+" !== undefined) { "+p+" = false; ";var N=x;(k=k||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(N||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: '"+x+" should be boolean' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var F=i;i=k.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }  ",c&&(y+="}",i+=" else { "),T&&(i+=" if ("+M+" === undefined) "+p+" = true; else if (typeof "+M+" != 'string') "+p+" = false; else { ",y+="}"),g&&(i+=" if (!"+w+") "+p+" = true; else { ",y+="}"),i+=" var "+C+" = "+w+"("+d+",  ",i+=T?""+M:""+t.util.toQuotedString(s),i+=" ); if ("+C+" === undefined) "+p+" = false; var "+P+" = "+D+" === true; if ("+p+" === undefined) { "+p+" = "+P+" ? "+C+" "+B+" 0 : "+C+" "+B+"= 0; } if (!"+p+") var op"+a+" = "+P+" ? '"+B+"' : '"+B+"=';"}else{L=B;(P=!0===A)||(L+="=");var I="'"+L+"'";T&&(i+=" if ("+M+" === undefined) "+p+" = true; else if (typeof "+M+" != 'string') "+p+" = false; else { ",y+="}"),g&&(i+=" if (!"+w+") "+p+" = true; else { ",y+="}"),i+=" var "+C+" = "+w+"("+d+",  ",i+=T?""+M:""+t.util.toQuotedString(s),i+=" ); if ("+C+" === undefined) "+p+" = false; if ("+p+" === undefined) "+p+" = "+C+" "+B,P||(i+="="),i+=" 0;"}i+=y+"if (!"+p+") { ";var k;N=r;(k=k||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(N||"_formatLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { comparison: "+I+", limit:  ",i+=T?""+M:""+t.util.toQuotedString(s),i+=" , exclusive: "+P+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be "+L+' "',i+=T?"' + "+M+" + '":""+t.util.escapeQuotes(s),i+="\"' "),t.opts.verbose&&(i+=" , schema:  ",i+=T?"validate.schema"+h:""+t.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";F=i;return i=k.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="}"}},function(t,r,n){"use strict";t.exports=n(166)("Maximum")},function(t,r,n){"use strict";t.exports=function defFunc(t){return defFunc.definition={type:"object",inline:n(345),statements:!0,errors:"full",metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}},t.addKeyword("patternRequired",defFunc.definition),t}},function(t,r,n){"use strict";t.exports=function generate_patternRequired(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="key"+a,g="idx"+a,y="patternMatched"+a,b="dataProperties"+a,w="",M=t.opts.ownProperties;i+="var "+p+" = true;",M&&(i+=" var "+b+" = undefined;");var _=s;if(_)for(var x,A=-1,E=_.length-1;A<E;){x=_[A+=1],i+=" var "+y+" = false;  ",i+=M?" "+b+" = "+b+" || Object.keys("+d+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+d+") { ",i+=" "+y+" = "+t.usePattern(x)+".test("+m+"); if ("+y+") break; } ";var B=t.util.escapeQuotes(x);i+=" if (!"+y+") { "+p+" = false;  var err =   ",!1!==t.createErrors?(i+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { missingPattern: '"+B+"' } ",!1!==t.opts.messages&&(i+=" , message: 'should have property matching pattern \\'"+B+"\\'' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",c&&(w+="}",i+=" else { ")}return i+=""+w}},function(t,r,n){"use strict";var i=n(96);t.exports=function defFunc(t){if(!t.RULES.keywords.switch||!t.RULES.keywords.if){var r=i.metaSchemaRef(t);return defFunc.definition={inline:n(347),statements:!0,errors:"full",metaSchema:{type:"array",items:{required:["then"],properties:{if:r,then:{anyOf:[{type:"boolean"},r]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},t.addKeyword("switch",defFunc.definition),t}}},function(t,r,n){"use strict";t.exports=function generate_switch(t,r,n){var i=" ",a=t.level,o=t.dataLevel,s=t.schema[r],h=t.schemaPath+t.util.getProperty(r),l=t.errSchemaPath+"/"+r,c=!t.opts.allErrors,d="data"+(o||""),p="valid"+a,m="errs__"+a,g=t.util.copy(t),y="";g.level++;var b,w="valid"+g.level,M="ifPassed"+t.level,_=g.baseId;i+="var "+M+";";var x=s;if(x)for(var A,E=-1,B=x.length-1;E<B;){if(A=x[E+=1],E&&!b&&(i+=" if (!"+M+") { ",y+="}"),A.if&&(t.opts.strictKeywords?"object"==typeof A.if&&Object.keys(A.if).length>0:t.util.schemaHasRules(A.if,t.RULES.all))){i+=" var "+m+" = errors;   ";var C=t.compositeRule;if(t.compositeRule=g.compositeRule=!0,g.createErrors=!1,g.schema=A.if,g.schemaPath=h+"["+E+"].if",g.errSchemaPath=l+"/"+E+"/if",i+="  "+t.validate(g)+" ",g.baseId=_,g.createErrors=!0,t.compositeRule=g.compositeRule=C,i+=" "+M+" = "+w+"; if ("+M+") {  ","boolean"==typeof A.then){if(!1===A.then){(D=D||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { caseIndex: "+E+" } ",!1!==t.opts.messages&&(i+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var T=i;i=D.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" var "+w+" = "+A.then+"; "}else g.schema=A.then,g.schemaPath=h+"["+E+"].then",g.errSchemaPath=l+"/"+E+"/then",i+="  "+t.validate(g)+" ",g.baseId=_;i+="  } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } } "}else if(i+=" "+M+" = true;  ","boolean"==typeof A.then){if(!1===A.then){var D;(D=D||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { caseIndex: "+E+" } ",!1!==t.opts.messages&&(i+=" , message: 'should pass \"switch\" keyword validation' "),t.opts.verbose&&(i+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";T=i;i=D.pop(),!t.compositeRule&&c?t.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" var "+w+" = "+A.then+"; "}else g.schema=A.then,g.schemaPath=h+"["+E+"].then",g.errSchemaPath=l+"/"+E+"/then",i+="  "+t.validate(g)+" ",g.baseId=_;b=A.continue}return i+=y+"var "+p+" = "+w+";"}},function(t,r,n){"use strict";var i=n(96);t.exports=function defFunc(t){if(!t._opts.$data)return console.warn("keyword select requires $data option"),t;var r=i.metaSchemaRef(t),n=[];return defFunc.definition={validate:function v(t,r,n){if(void 0===n.selectCases)throw new Error('keyword "selectCases" is absent');var i=getCompiledSchemas(n,!1),a=i.cases[t];if(void 0===a&&(a=i.default),"boolean"==typeof a)return a;var o=a(r);return o||(v.errors=a.errors),o},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},t.addKeyword("select",defFunc.definition),t.addKeyword("selectCases",{compile:function(t,r){var n=getCompiledSchemas(r);for(var i in t)n.cases[i]=compileOrBoolean(t[i]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:r}}),t.addKeyword("selectDefault",{compile:function(t,r){return getCompiledSchemas(r).default=compileOrBoolean(t),function(){return!0}},valid:!0,metaSchema:r}),t;function getCompiledSchemas(t,r){var i;return n.some((function(r){if(r.parentSchema===t)return i=r,!0})),i||!1===r||(i={parentSchema:t,cases:{},default:!0},n.push(i)),i}function compileOrBoolean(r){return"boolean"==typeof r?r:t.compile(r)}}},function(t,r,n){"use strict";t.exports=function defFunc(t){var r={trimLeft:function(t){return t.replace(/^[\s]+/,"")},trimRight:function(t){return t.replace(/[\s]+$/,"")},trim:function(t){return t.trim()},toLowerCase:function(t){return t.toLowerCase()},toUpperCase:function(t){return t.toUpperCase()},toEnumCase:function(t,r){return r.hash[makeHashTableKey(t)]||t}};return defFunc.definition={type:"string",errors:!1,modifying:!0,valid:!0,compile:function(t,n){var i;if(-1!==t.indexOf("toEnumCase")){if(i={hash:{}},!n.enum)throw new Error('Missing enum. To use `transform:["toEnumCase"]`, `enum:[...]` is required.');for(var a=n.enum.length;a--;a){var o=n.enum[a];if("string"==typeof o){var s=makeHashTableKey(o);if(i.hash[s])throw new Error('Invalid enum uniqueness. To use `transform:["toEnumCase"]`, all values must be unique when case insensitive.');i.hash[s]=o}}}return function(n,a,o,s){if(o){for(var h=0,l=t.length;h<l;h++)n=r[t[h]](n,i);o[s]=n}}},metaSchema:{type:"array",items:{type:"string",enum:["trimLeft","trimRight","trim","toLowerCase","toUpperCase","toEnumCase"]}}},t.addKeyword("transform",defFunc.definition),t;function makeHashTableKey(t){return t.toLowerCase()}}},function(t){t.exports=JSON.parse('{"additionalProperties":true,"properties":{"name":{"description":"The filename template for the target file(s) (https://github.com/webpack-contrib/file-loader#name).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"outputPath":{"description":"A filesystem path where the target file(s) will be placed (https://github.com/webpack-contrib/file-loader#outputpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"publicPath":{"description":"A custom public path for the target file(s) (https://github.com/webpack-contrib/file-loader#publicpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"postTransformPublicPath":{"description":"A custom transformation function for post-processing the publicPath (https://github.com/webpack-contrib/file-loader#posttransformpublicpath).","instanceof":"Function"},"context":{"description":"A custom file context (https://github.com/webpack-contrib/file-loader#context).","type":"string"},"emitFile":{"description":"Enables/Disables emit files (https://github.com/webpack-contrib/file-loader#emitfile).","type":"boolean"},"regExp":{"description":"A Regular Expression to one or many parts of the target file path. The capture groups can be reused in the name property using [N] placeholder (https://github.com/webpack-contrib/file-loader#regexp).","anyOf":[{"type":"string"},{"instanceof":"RegExp"}]},"esModule":{"description":"By default, file-loader generates JS modules that use the ES modules syntax.","type":"boolean"}},"type":"object"}')},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.normalizePath=function normalizePath(t,r){if("\\"===t||"/"===t)return"/";const n=t.length;if(n<=1)return t;let i="";if(n>4&&"\\"===t[3]){const r=t[2];"?"!==r&&"."!==r||"\\\\"!==t.slice(0,2)||(t=t.slice(2),i="//")}const a=t.split(/[/\\]+/);!1!==r&&""===a[a.length-1]&&a.pop();return i+a.join("/")}},function(t,r){t.exports=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(167);t.exports=function _arrayWithoutHoles(t){if(Array.isArray(t))return i(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){t.exports=function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i=n(167);t.exports=function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return i(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,r):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r){t.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,r,n){var i={"./Animator.js":383,"./CameraComponent.js":358,"./CanvasTextComponent.js":385,"./ClockComponent.js":359,"./FollowPointer.js":360,"./FollowTarget.js":361,"./MeshComponent.js":362,"./RendererComponent.js":363,"./SceneComponent.js":364,"./UserPointer.js":384};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=357},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b),M=n(10),_=n(1),x=n(98),A=n(99);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var E=function(t){d()(CameraComponent,t);var r=_createSuper(CameraComponent);function CameraComponent(){var t;a()(this,CameraComponent);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r.call.apply(r,[this].concat(i)),w()(l()(t),"offset",[0,0,0]),t}return s()(CameraComponent,[{key:"on_created",value:function on_created(){var t=this.find_component_of_type("SceneComponent");this.o_camera=new A.a({fov:90,aspect:window.innerWidth/window.innerHeight,near:.01,far:1e3,parent:t.$scene,position:new _.Vector3(0,0,20)}),this.p_camera=new x.a({fov:90,aspect:window.innerWidth/window.innerHeight,near:.01,far:1e3,parent:t.$scene,position:new _.Vector3(0,0,20)});this.set_camera_type(0)}},{key:"set_camera_type",value:function set_camera_type(t){switch(t){case 0:this.$camera=this.o_camera,this.globals.camera=this.$camera;break;case 1:this.$camera=this.p_camera,this.globals.camera=this.$camera}}},{key:"on_tick",value:function on_tick(){this.globals.uniforms.camera_pos.value.set(this.$camera.position.x,this.$camera.position.y,this.$camera.position.z)}},{key:"set_aspect",value:function set_aspect(t){this.$camera.aspect=t,this.$camera.updateProjectionMatrix()}}]),CameraComponent}(M.a);r.default=E},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(7),l=n.n(h),c=n(8),d=n.n(c),p=n(3),m=n.n(p);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=m()(t);if(r){var a=m()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d()(this,n)}}var g=function(t){l()(ClockComponent,t);var r=_createSuper(ClockComponent);function ClockComponent(){return a()(this,ClockComponent),r.apply(this,arguments)}return s()(ClockComponent,[{key:"on_created",value:function on_created(){this.handle_raf=this.handle_raf.bind(this),this.loop_id=requestAnimationFrame(this.handle_raf),this.raf_cb_id=0,this.raf_callbacks={}}},{key:"handle_raf",value:function handle_raf(){this.loop_id=requestAnimationFrame(this.handle_raf);var t=this.find_component_of_type("SceneComponent");for(var r in t&&setTimeout((function(){t.tick_scene()})),this.raf_callbacks)this.raf_callbacks[r]();this.globals.tick_skip=(this.globals.need_render,1)}},{key:"on_tick",value:function on_tick(t){this.globals.uniforms.time.value+=.01}},{key:"add",value:function add(t){return this.raf_callbacks[this.raf_cb_id]=t,this.raf_cb_id++}},{key:"create",value:function create(t){var r={};return r.id=requestAnimationFrame((function loop_func(){r.id=requestAnimationFrame(loop_func),t()})),r.stop=function(){cancelAnimationFrame(r.id)},r}},{key:"remove",value:function remove(t){delete this.raf_callbacks[t]}}]),ClockComponent}(n(10).a);r.default=g},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var M=function(t){d()(FollowPointer,t);var r=_createSuper(FollowPointer);function FollowPointer(){var t;a()(this,FollowPointer);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r.call.apply(r,[this].concat(i)),w()(l()(t),"offset",[0,0,0]),t}return s()(FollowPointer,[{key:"on_created",value:function on_created(){console.log("follow pointer created")}},{key:"handle_pointermove",value:function handle_pointermove(t){var r=this.globals.camera.screen_to_world(t.pointer_a);this.object.position.set(r[0]+this.offset[0],r[1]+this.offset[1],r[2]+this.offset[2])}}]),FollowPointer}(n(10).a);r.default=M},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var M=function(t){d()(FollowTarget,t);var r=_createSuper(FollowTarget);function FollowTarget(){var t;a()(this,FollowTarget);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r.call.apply(r,[this].concat(i)),w()(l()(t),"offset",[0,0,0]),t}return s()(FollowTarget,[{key:"on_created",value:function on_created(){this.log("FollowTarget","component created")}},{key:"on_tick",value:function on_tick(t){this.target&&(this.object.position.x=this.target.position.x+this.offset[0],this.object.position.y=this.target.position.y+this.offset[1],this.object.position.z=this.target.position.z+this.offset[2])}}]),FollowTarget}(n(10).a);r.default=M},function(t,r,n){"use strict";n.r(r);var i=n(17),a=n.n(i),o=n(4),s=n.n(o),h=n(6),l=n.n(h),c=n(2),d=n.n(c),p=n(7),m=n.n(p),g=n(8),y=n.n(g),b=n(3),w=n.n(b),M=n(0),_=n.n(M),x=n(1),A=n(36);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var E=function(t){m()(MeshComponent,t);var r=_createSuper(MeshComponent);function MeshComponent(){var t;s()(this,MeshComponent);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),_()(d()(t),"mesh",null),_()(d()(t),"enabled",!0),t}return l()(MeshComponent,[{key:"on_created",value:function on_created(){var t,r,n,i=this.geometry?this.create_geometry(this.geometry,this.geometry_id):void 0,o=this.material?this.create_material(this.material,this.material_id):void 0,s=new x.Mesh({geometry:i,material:o});(this.geometry_translate&&i.translate.apply(i,a()(this.geometry_translate)),void 0!==this.position)&&(t=s.position).set.apply(t,a()(this.position));void 0!==this.scale&&(r=s.scale).set.apply(r,a()(this.scale));void 0!==this.rotation&&(n=s.rotation).set.apply(n,a()(this.rotation));void 0!==this.frustum_culled&&(s.frustumCulled=this.frustum_culled),s.renderOrder=this.render_order||0,this.mesh=s}},{key:"on_enabled",value:function on_enabled(){this.object.add(this.mesh)}},{key:"on_disabled",value:function on_disabled(){console.log("disabled"),this.object.remove(this.mesh)}},{key:"create_geometry",value:function create_geometry(t,r){return A.a.create_geometry(t[0],t[1],r)}},{key:"create_material",value:function create_material(t,r){return A.a.create_material(t[0],t[1],r)}},{key:"visible",get:function get(){return this.mesh.visible},set:function set(t){this.mesh.visible=t}},{key:"uniform",value:function uniform(t){return this.mesh.material.uniforms[t]}},{key:"uniforms",get:function get(){return this.mesh.material.uniforms}}]),MeshComponent}(n(10).a);r.default=E},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b),M=n(10),_=n(1);n(98),n(99);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var x=function(t){d()(RendererComponent,t);var r=_createSuper(RendererComponent);function RendererComponent(){var t;a()(this,RendererComponent);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=r.call.apply(r,[this].concat(i)),w()(l()(t),"canvas",null),t}return s()(RendererComponent,[{key:"on_created",value:function on_created(){this.find_component_of_type("SceneComponent").$scene;var t=this.renderer=this.globals.renderer=new _.WebGL1Renderer({antialias:this.globals.rendering_antialias,alpha:!0});t.setSize(1e3,1e3),t.setPixelRatio(this.globals.uniforms.pixel_ratio.value),t.setPixelRatio(1),this.canvas=this.globals.canvas=this.renderer.domElement,this.handle_mousemove=this.handle_mousemove.bind(this),this.renderer.domElement.addEventListener("mousemove",this.handle_mousemove)}},{key:"handle_mousemove",value:function handle_mousemove(t){var r=t.clientX/this.canvas.width,n=t.clientY/this.canvas.height;this.globals.uniforms.mouse.value.x=r,this.globals.uniforms.mouse.value.y=n}},{key:"on_tick",value:function on_tick(t){}},{key:"on_enabled",value:function on_enabled(){this.globals.dom.appendChild(this.renderer.domElement);var t=this.find_component_of_type("ClockComponent");this.raf_loop=t.create(this.render.bind(this))}},{key:"render",value:function render(){var t=this.find_component_of_type("SceneComponent"),r=this.find_component_of_type("CameraComponent");t&&r&&(this.check_size(),this.renderer.need_render=this.globals.need_render,this.renderer.need_render=!0,this.globals.stats.update("rendering",this.globals.need_render),this.globals.need_render=!1,this.renderer.render(t.$scene,r.$camera))}},{key:"check_size",value:function check_size(){var t=this.find_component_of_type("CameraComponent"),r=this.globals.dom.getBoundingClientRect();r.width===this.globals.dom_bounding_rect.width&&r.height===this.globals.dom_bounding_rect.height||(this.renderer.setPixelRatio(this.globals.uniforms.pixel_ratio.value),this.renderer.setSize(r.width,r.height),this.renderer.getSize(this.globals.uniforms.resolution.value),this.globals.need_render=!0,t.set_aspect(this.globals.uniforms.resolution.value.x/this.globals.uniforms.resolution.value.y)),this.globals.dom_bounding_rect=r}}]),RendererComponent}(M.a);r.default=x},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(7),l=n.n(h),c=n(8),d=n.n(c),p=n(3),m=n.n(p),g=n(10),y=n(1);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=m()(t);if(r){var a=m()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return d()(this,n)}}var b=function(t){l()(SceneComponent,t);var r=_createSuper(SceneComponent);function SceneComponent(){return a()(this,SceneComponent),r.apply(this,arguments)}return s()(SceneComponent,[{key:"on_created",value:function on_created(){var t=this.$scene=new y.Scene;this.globals.scene=t}},{key:"on_tick",value:function on_tick(t){}},{key:"tick_scene",value:function tick_scene(){this.$scene.tick()}},{key:"add",value:function add(){var t;(t=this.$scene).add.apply(t,arguments)}}]),SceneComponent}(g.a);r.default=b},function(t,r,n){var i={"./sb_bg_a.yaml":366,"./sb_bg_b.yaml":367,"./sb_bg_c.yaml":368,"./sb_bg_d.yaml":369};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=365},function(t){t.exports=JSON.parse('{"type":"ShaderMaterial","params":{"vertexShader":"varying vec2 vUv; uniform float opacity; uniform float cell_scale;\\nvoid main() {\\n    vUv = uv;\\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    gl_Position = vec4(position * 2., 1.);\\n}\\n","fragmentShader":"precision highp float;\\n        uniform vec2      resolution;\\n        uniform float     time;\\n  \\n        float rand(vec2 n) {\\n        return fract(cos(dot(n, vec2(2.9898, 20.1414))) * 5.5453);\\n        }\\n  \\n        float noise(vec2 n) {\\n          const vec2 d = vec2(0.0, 1.0);\\n          vec2 b = floor(n), f = smoothstep(vec2(0.0), vec2(1.0), fract(n));\\n          return mix(mix(rand(b), rand(b + d.yx), f.x), mix(rand(b + d.xy), rand(b + d.yy), f.x), f.y);\\n        }\\n  \\n        float fbm(vec2 n){\\n          float total=0.,amplitude=1.5;\\n          for(int i=0;i<18;i++){\\n              total+=noise(n)*amplitude;\\n                n+=n;\\n                amplitude*=.45;\\n          }\\n      return total;\\n        }\\n  \\n        \\nvoid main(void){\\n    const vec3 c1=vec3(0.802, 0.1059, 0.01059);\\n    const vec3 c2=vec3(167./255.,96./255.,110./255.);\\n    const vec3 c3=vec3(0.4902, 0.2333, 0.2902);\\n    const vec3 c4=vec3(0.4118, 0.1451, 0.2706);\\n    const vec3 c5=vec3(0.4176, 0.2549, 0.1);\\n    const vec3 c6=vec3(0.8, 0.3569, 0.3569);\\n    \\n    vec2 p=gl_FragCoord.xy*5./resolution.xx;\\n    float q=fbm(p-time*.05);\\n    vec2 r=vec2(fbm(p+q+time*0.1-p.x-p.y),fbm(p+q-time*0.1));\\n    vec3 c=mix(c1,c2,fbm(p+r))+mix(c3,c4,r.x)-mix(c5,c6,r.y);\\n    float grad=gl_FragCoord.y/resolution.y;\\n    gl_FragColor=vec4(c*cos(1.0*gl_FragCoord.y/resolution.y),1.5);\\n    gl_FragColor.xyz*=1.15-grad;\\n}\\n","transparent":true,"blending":1,"uniforms":{"opacity":{"type":"f","value":1},"map":{"type":"time;"}}}}')},function(t){t.exports=JSON.parse('{"type":"ShaderMaterial","params":{"vertexShader":"varying vec2 vUv; uniform float opacity; uniform float cell_scale;\\nvoid main() {\\n    vUv = uv;\\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    gl_Position = vec4(position * 2., 1.);\\n}\\n","fragmentShader":"#extension GL_OES_standard_derivatives : enable\\nuniform float time; uniform vec2 mouse; uniform vec2 resolution;\\n#define PI 3.1415\\nvec3 bg = vec3(.21, .421, .328); vec3 bg2 = vec3(.345, .332, .228);\\nfloat random(float p) {\\n  return fract(sin(p * 11.2972) * 267.978);\\n}\\nvec2 random(in vec2 p) {\\n  return fract(1965.5786 * vec2(sin(p.x * 591.32 + p.y * 154.077), cos(p.x * 391.32 + p.y * 49.077)));\\n}\\nfloat random3(vec2 p) {\\n  return fract(sin(dot(p.xy, vec2(12.2898,48.233)))* 42714.339281);\\n}\\nfloat tri(float x, float s) {\\n    return (abs(fract(x + s) - 0.5) - .25) * s;\\n}\\nvec3 pix(vec2 pos, float t, float s) {\\n    s += floor(t * 0.25);\\n    float scl = (random(s + 30.0) * 4.0);\\n    scl += sin(t * 2.0) * 0.25 + sin(t) * 0.5;\\n    vec2 pol = vec2(atan(pos.x, pos.y), length(pos));\\n    float id = floor(pol.y * 2.0 * scl);\\n    pol.x += t * (random(id + s) * 2.0 - 1.0) * 0.4;\\n    float rp = floor(random(id) * 5.0 + 4.0);\\n    float v = (abs(tri(pol.x, PI / rp)) - id * 0.1) * pol.y;\\n    v = max(v, abs(tri(pol.y, 1.0 / scl)) - (1.0 - id) * 0.11);\\n    v *= clamp(sin(v), 0.75, 1.);\\n    v = smoothstep(0.01, 0.0, v);\\n    return vec3(v);\\n}\\nvec3 blur(vec2 pos) {\\n    float t = time * 3.0;\\n    float s = 10.0;\\n    return pix(pos, t, s) + pix(pos, t + sin(time) * .1, s + 50.);\\n}\\nvoid main( void ) {\\n\\n  vec2 position = (gl_FragCoord.xy * 2. - resolution.xy) / min(resolution.x, resolution.y);\\n  // transition glitch\\n    position += (vec2(random(time), random(time + 9.999)) - 0.5) * 0.03;\\n\\n  vec3 c = vec3(\\n    blur(position).r,\\n    blur(position + vec2(0.01, 0.002)).g,\\n    blur(position + vec2(0.005, 0.001)).b\\n  );\\n  float percent = 1.0 - (gl_FragCoord.y / resolution.y);\\n  vec3 bg = mix(bg, bg2, tan(time * 1.5));\\n  c.r += bg.r * percent;\\n  c.g += bg.g * percent;\\n  c.b += bg.b * percent;\\n  gl_FragColor = vec4(c, 1.0 );\\n}\\n","transparent":true,"blending":1,"uniforms":{"opacity":{"type":"f","value":1},"map":{"type":"time;"}}}}')},function(t){t.exports=JSON.parse('{"type":"ShaderMaterial","params":{"vertexShader":"varying vec2 vUv; uniform float opacity; uniform float cell_scale;\\nvoid main() {\\n    vUv = uv;\\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    gl_Position = vec4(position * 2., 1.);\\n}\\n","fragmentShader":"\\nuniform float time; uniform vec2 resolution;\\nvec2 hash22(vec2 p){\\n  vec3 p3=fract(vec3(p.xyx)*vec3(.1031,.1030,.0973));\\n  p3+=dot(p3,p3.yzx+33.33);\\n  return fract((p3.xx+p3.yz)*p3.zy);\\n} vec2 hash(vec2 p,float a){\\n  p+=time*a+dot(hash22(p),vec2(1));\\n  return mix(hash22(floor(p)),hash22(ceil(p)),smoothstep(0.,1.,fract(p)));\\n} float voronoi(vec2 p){\\n  vec2 g=floor(p);vec2 f=fract(p);float dist=1.;\\n  for(int y=-1;y<=1;y++)for(int x=-1;x<=1;x++)\\n    dist=min(dist,distance(vec2(x,y)+hash(g+vec2(x,y),1.),f));\\n  return dist;\\n} float perlin(vec2 p){\\n  vec2 g=floor(p);vec2 f=fract(p);vec2 s=smoothstep(0.,1.,f);const float a=.2;\\n  return mix(\\n    mix(dot(hash(g+vec2(0,0),a),f-vec2(0,0)),dot(hash(g+vec2(1,0),a),f-vec2(1,0)),s.x),\\n    mix(dot(hash(g+vec2(0,1),a),f-vec2(0,1)),dot(hash(g+vec2(1,1),a),f-vec2(1,1)),s.x),\\n  s.y);\\n}\\nvoid main(){\\n  vec2 st=gl_FragCoord.xy/resolution;\\n  vec2 uv=st*2.-1.;uv.x*=resolution.x/resolution.y;\\n  \\n  float dist=1./abs((voronoi(uv*16.+time)+perlin(uv*.3-time*.1)*8.)*16.);\\n  vec3 col=sin(time+vec3(0,2.1,4.2)+perlin(uv*.5+time*.05)*4.)*.5+.5;\\n  \\n  gl_FragColor =vec4(dist*col*1.5,1);\\n}\\n","transparent":true,"blending":1,"uniforms":{"opacity":{"type":"f","value":1},"map":{"type":"time;"}}}}')},function(t){t.exports=JSON.parse('{"type":"ShaderMaterial","params":{"vertexShader":"varying vec2 vUv; uniform float opacity; uniform float cell_scale;\\nvoid main() {\\n    vUv = uv;\\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n    gl_Position = vec4(position * 2., 1.);\\n}\\n","fragmentShader":"\\nuniform float time; uniform vec2 resolution;\\n\\nfloat vortex(vec2 uv, float dist, float seed, float bias, float offset) {\\n    float ang = atan(uv.y, uv.x)+sin(dist+0.1*seed)*(1.2-offset)*2.0;\\n    ang += 3.14159*(0.01*seed);\\n    return clamp((sin((ang)*(3.0+offset*float(6)))+bias)/(1.0+bias), 0.0, 1.0);\\n} void mainImage( out vec4 fragColor, in vec2 fragCoord ) {\\n    vec2 uv = (fragCoord-vec2(resolution.xy*0.5))/resolution.y;\\n    float texel = 1.0/resolution.y;\\n    float dist = length(uv);\\n    vec3 col = vec3(.0, .0, .0);\\n    for (int i=0; i<6; i++) \\n    {\\n        float offset = float(i)/float(6);\\n        float seed = 1000.0*fract(3.1379136*floor(time*0.25+offset));\\n        float time = fract(time*0.25+offset);\\n        vec2 cccc = vec2(0.0, time*1.8);\\n        float maskA = vortex(uv, dist, seed+100.0*float(i), -0.998+texel, offset);\\n        float dist2 = length(uv+cccc);\\n        float maskB = vortex(uv+cccc, dist2, seed+42.0*float(i), -0.99+texel, offset);\\n        float radius = pow(((maskA*maskA)+(maskB*maskB)), 2.0);\\n        float fade = time*(1.0-time);\\n        float mask = maskA*maskB*fade*radius;\\n        col = mix(col, vec3(1.50+2.0*dist-1.2*offset-1.1*radius, 0.75-0.5*offset-0.5*dist, 1.0-0.8*dist), mask);\\n        col = max(vec3(maskA*0.0, maskB*0.0+0.1, max(maskA*0.0*2.0, maskB*0.0)+0.12)*fade, col);\\n    }\\n    fragColor = vec4(col*3.0,5.0);\\n}\\nvoid main(void) {\\n    mainImage(gl_FragColor, gl_FragCoord.xy);\\n}\\n","transparent":true,"blending":1,"uniforms":{"opacity":{"type":"f","value":1},"map":{"type":"time;"}}}}')},function(t,r,n){var i={"./body.yaml":371,"./dot_circle.yaml":372,"./follow_pointer.yaml":373};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=370},function(t){t.exports=JSON.parse('{"type":"HexCellBodyBufferGeometry","params":{"args":[0.578,6]}}')},function(t){t.exports=JSON.parse('{"type":"CircleBufferGeometry","params":{"args":[0.05,6]}}')},function(t){t.exports=JSON.parse('{"type":"CircleBufferGeometry","params":{"args":[0.4,3]}}')},function(t,r,n){var i={"./hex_sdf.yaml":375};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=374},function(t){t.exports=JSON.parse('{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAG8CAYAAAComB1pAAAAAXNSR0IArs4c6QAAIABJREFUeF7tXQv8l9P9P/7YzLBhxsyaqUREJJcQiVxK0kWk0XWWLhKNrujKIumiWVeWSBdJuUQi5JIUEanMmhkzbJjZiP/rfNup8zt9zuX5fp/bec77+3r16vd9znnOc57PeZ7v5/15fy5nB8bYtwyfICVw2GGHsRtvvDHIe8dNQwKQAGPXXnste/311yGKQCWwAwBAoCvPGLvvvvtY69at2bffAgOG+xTgzkOVwA477MDmzJnDLrjgglBFEPx9AwAE+gice+657IEHHmDffPMNAECgzwBuO2wJcADwf//3f+y8885jDz74YNjCCPTuAQACXfiVK1eyunXrlgAA/4cPJAAJhCUBrvz5v9WrV7N69eqFdfO425IEAAACfBCuuOIKduutt25V/gABAT4EuOWgJSCUv/j/yiuvZLfddlvQMgnx5gEAAlv1vfbai7399tts99133w4AIBYgsIcBtxukBAT1L4OAzz77jB100EHs448/DlImod40AEBgK89Rfs+ePbdT/mABAnsQcLvBSkC1/sX3cePGMc4O4hOOBAAAwllrdswxx7AVK1ZolT9AQEAPA241SAnolL84Xr9+ffbSSy8FKZsQbxoAIKBVX7hwITvnnHOsAACugIAeCtxqMBKgqH8VEDz00EOsWbNmwcgk9BsFAAjkCeC5vvfee69V+SMtMJAHArcZnARcAAAHBBdeeGGpRgg+xZcAAEDx17h0h2vXrmW1atVyBgBgAQJ5MHCbQUiAK39XALBu3TpWu3btIOQS+k0CAATwBPBynyNGjHBW/ogFCOChwC0GJQFB9buCgP79+6NMeABPCABAwRf5pz/9aSntb6eddooMAMACFPzhwO0FIQFZ6bsCgK+//rqUFviXv/wlCBmFepMAAAVf+UmTJrHOnTs7KX/h/xcMACoEFvzhwO0FIQE50M8VAPBzpkyZwrp27RqEjEK9SQCAAq/8ySefzJYtW1ZF+W/evHlr/X9Z0VPKH66AAj8cuLUgJECl/VEgQBzbcccdS+WBxb+GDRuyp59+OghZhXiTAAAFXvUlS5awRo0alRS+UPxCqXN63wYA+Dm8H1wBBX5IcGuFlgBX5LJS1zEA/LjoJ4OBpUuXssaNGxdaRiHfHABAQVf/0ksvZdOmTXOi/ikwIIMDAICCPiS4rUJLwEb329oFC9CxY0d25513FlpWod4cAEABV56/uBs3bmTVqlWLDQAABBTwQcEtFVYCLml/rgBg06ZNrHr16tg1tIBPCwBAARf1hhtuYIMGDYpN+SMWoIAPCW6p0BJwTftzBQFDhw5l1113XaFlFuLNAQAUbNVr1KjB1q9f76T8TYF/VKwAWICCPSy4nUJKIEranysA4ICiZs2abMOGDYWUWag3BQBQsJWfMWMGa9euXSIAAGWCC/aw4HYKJwFVodsUvK1dzgiYOXMma9++feFkFvINAQAUaPWbNGnCHnnkESfl7xL4p2YJAAAU6GHBrRRSAqYof9NOgK5A4KyzzmKLFy8upOxCvCkAgAKt+vLly9nxxx+/NeWPK3k1/U9H+6t9dQABboACPTC4lcJJQFXkPLXPJSCQgwMbCOBjPf/886xBgwaFk1uoNwQAUJCV79atG5swYULi1j8CAgvywOA2CicBW+CfTcHb2sX43bt3ZxMnTiyc/EK8IQCAAqz697///VK9/x/96EepAQAwAQV4cHALhZGAS+CfTcHb2gUA+Pvf/17aJ+Bf//pXYeQX6o0AABRg5UeNGsWuuuoqJ+Vvi/w3Uf9qTEABRIdbgAQKIQHVv28q96uLBXAFAPz8W265hfXt27cQsgv5JgAAPF/9OnXqsFdffTUW5W8CB7rSwZ6LD9OHBLyXQBRlb1PytnYZPBxxxBFszZo13ssv5BsAAPB89efOncvOP//8zAAAXAGeP0CYvtcS0AX4JZ0NwIHA/fffz1q1auW1/EKfPACAx09AixYt2Lx585yUfyVpf6ZNgwAAPH6AMHXvJWDz/ScNBFq2bMnmz5/vvRxDvQEAAI9XftWqVYzTcFS+vm2nP9d2l10DPRYhpg4JeC0BmZLPwhXA3Y9HHXWU1zIMefIAAJ6ufp8+fdjNN9+cufIXAMFTMWLakIC3EqBy97MAAVdffTUbPXq0t3IMeeIAAB6uPk/342l/PP0va+tfAAC4Ajx8kDBlbyUgFL1L6d+k3QA8HZCnBfL0QHz8kgAAgF/rVZrt+PHj2eWXX+6k/G1pf+VE/sugQ3YReChKTBkS8FICuqI/WTAAfC63334769Gjh5eyDHnSAACerf5xxx1XKsfpYvmnqfzhCvDsQcJ0vZWASv3ngQXgc+JlyF944QVv5RrixAEAPFv1hx56iPENOSgAwOv+q0F7VBCf3E+0q+eKvQHk86mxxXlwBXj2IGG63kpA1Pd3YQE4OJD7C7DAj8lAQvSzFRTS9ePn8Y3IzjnnHG/lGuLEAQA8WvWLLrqI3X333U7Wf1JpfyqroAIExAJ49EBhqt5JQM37N6UBZuEOuPjii9k999zjnVxDnTAAgEcr/+abb7KaNWvmGgBgy2CPHihM1SsJUIF/eQMA69evZ4cccohXcg15sgAAnqz+gAED2NChQ52Uv833b2IHXFwIOrcAAgI9eZgwzVxKgCtz0ycqAHBNE7TtIuiyVbDsOhg0aBAbPnx4LmWMSVWVAACAB09EtWrV2IYNG0q+PJfgv6zofzE3fn24Ajx4sDBFbyTgSv3nISCQxwXVqFGDbdq0yRv5hjpRAAAPVn7KlCmsY8eOTsrfZv3HmfZnYwIAAjx4uDDF3EsgiuWfBwDA2YBp06axzp075162oU8QACDnT8Cpp57Kli5dWkX5c4Sty8WXo/pNfUT0vhzFT2URyFa9auHrygkjIyDnDxWm55UEVACgC+6z7QsgqHyRFSBnCNgyC9SsAcotIPoId0CjRo3Yk08+6ZWsQ5ssAEDOV5wr/1NOOSWS9a8CBFWJqyBBUPa8nzhXVuJqqp9gEajUQRUkgAXI+QOG6eVaAoL61yl3WYnr/paVtazI5ZRAF/CgAgc1ZVD9/tRTTzEOAvDJrwQAAPK7NqxTp05s8uTJTso/D35/HVuQYxFjapBAriVgUvxU8F7esgK6dOnCpk6dmmsZhzw5AICcrv7OO+9cCvw74IADvAcAYAFy+pBhWrmWQDmBf3kDAO+++24pIPCrr77KtaxDnRwAQE5XftiwYax///6xKP8ogX8UkyC7A2yxB1RgILICcvqQYVq5loDJwndR9C6FgKg+rml/unNVV8CIESPYwIEDcy3rUCcHAJDDla9VqxbjRX9cUv7yFPWvqxIIAJDDhwxTyrUEZOvfdzcABwS8ONC6detyLfMQJwcAkMNVnzlzJrvwwgsLBQBQITCHDxqmlEsJmKL+KwEDOsu+XBbAlQHg17333ntZu3btcinvkCcFAJCz1T/77LPZokWLnJR/ngP/KDYAsQA5e9gwnVxKQOf7r0T556E+QNOmTdnDDz+cS5mHOikAgJytPN/qt379+okAAGqHPypyXyhv246ALoWAkBaYswcM08m9BHTb/ZYDAOTUPdk3r4sPUOsBqHOxtZtSA1esWFHaMhif/EgAACA/a8G6d+/Oxo0bl4jy1yl6KobApthtOwKaYgF4Gz6QACRAS0DdolcNBCwHBLhsG2zbD8BG99vaxfg9e/ZkEyZMwPLnRAIAADlZiD322INt3LiR7bXXXgAAOVkTTAMSSFsCRQcAH3/8MatevTr79NNP0xYtrkdIAAAgJ4/FLbfcwq688kon5W+L/I+y21/SDIAuLTAnYsc0IIHcSEAN/qPAQFYMgC010JUB4OPceuut7KqrrsqN3EOeCABADla/bt26bNWqVbEo/yg5/0krf3l8tZYAAgJz8OBhCrmRgC7yn1L4WYEAm5K3tcvxAUcddRRbvXp1buQf6kQAAHKw8vfffz8777zzggIAiAXIwYOHKeRGAjpff1EBwAMPPMDOP//83Mg/1IkAAGS88i1btmRz5sxxUv6+pf1RDIB6LGPx4/KQQOYSKJf6950JaN26NZs3b17m8g95AgAAGa/+K6+8wg4//PBgAQBcARk/gLh8phKwVfxzAQe6tEHX41kVCHrttdfYkUceman8Q784AECGT8DVV1/Nfvvb3+ZW+dsseFs7tYcAYgEyfOBw6dxJwKXqXyUgwFQASMcg2OoF2AICXdrFNX7zm9+wm2++OXfrEsqEAAAyWul9992Xvf3222yXXXbJLQCIUg9AF+1vqwmAfQIyegBx2cwlQFn/Jp9/EeMBvvzyS3bQQQexDz74IPP1CHECAAAZrfrtt9/Ofv3rXzspf1vany+R/6asgIyWAZeFBDKTgGuaXyUMQN7dAHx+v/vd79jll1+e2TqEfGEAgAxW/4QTTmDLly+H8v/225IMwAJk8BDikplKwGT9h8YCcBDQoEED9txzz2W6JiFeHAAgg1V/5JFHWJMmTdjmzZtLyk/8r27/Kx+3FfehxqDOUa+no/lt/n1bu6v/XwYACAjM4GHEJVOXgFD+5eT+l+MGcI0DEGwB789r/ptKCFN7AlCxA+pY8pjyNRYvXszOOuus1Nci9AsCAKT8BFx88cXsD3/4g5P1X8S0PxU4yEABACDlhxGXy0QCqvWfFhDIuzvgl7/8Jbv77rszWZNQLwoAkPLKr1+/vhT0olr71PfQAACKA6X8MOJymUhA9f0DAPxfiW3gQdE1a9bMZE1CvSgAQIorP2jQIHbDDTfEovx1gX862l8GGC60v43iN0X3mzICTAyAaEtxSXApSCBVCVDKPkqQn6mvi4Uf1R2gbu9Llft1KQHs0odf67rrrmNDhw5NdU1CvhgAQEqrf+CBB5Z2++MfWP/bAv90mQEpLQsuAwmkJgGTpQ8WYAsLwD98t8B33nkntXUJ+UIAACmt/rRp09ill17qpPxDSPsTkf86AIB4gJQeTFwmFQnYov4BALYAAP7vzjvvZB07dkxlXUK/CABACk/Aaaedxh5//PGtyl9E4gsmQFDmIpJfptD5MVdAoJ6nugNMkfnqXGwFfEw5/TqaX474N52PtMAUHkpcIlUJ2ACAHIEvR8q7uAfKyQygIvypa4l5qVkBNkpftIvz5LHVY/waalbB6aefzp544olU1yjEiwEApLDqy5YtYyeddFIV618odtUdoCppGwAwpRHKVraaJuha5c/mz1eVugwkdOfK86LOBwBI4aHEJVKVgAwATMpep/Ap3305xyiwQMUOyEq6HL+/fI6s3HXAQQYYfD7PPPMMa9iwYaprFOLFAAASXvUuXbqw3//+907Uf4hR/yrgUV0DCS8PhocEEpeArNRtVL8LUxC1gqBLcKCpj662v06Zu7IDaoCh+v1Xv/oVmzx5cuLrE/IFAAASXP3vfve7pdSW/fbbDwBAqvjnQv8jIyDBBxNDpyoBAIBt/n0dmKDAwPvvv19Kmf7Pf/6T6nqFdDEAgARXe8SIEezaa6/NlfJ38e279KEsdzWOQC3yE0Xxy66BBJcIQ0MCiUpAtehdGADVRRB3HADFIFCK2ZQyqKsSaDvu2i763Xjjjax///6JrlHIgwMAJLT6hx56KFu7dq2T8ncN8qPSByvJ+3eNA7ABAlOcQCUgQD43oWXCsJBAYhLQWf4uIMDWJxQ3AL/P2rVrszfeeCOxdQp5YACAhFZ/1qxZrE2bNgAAyoY/UVgAFTwktFQYFhKIXQImy9+m3BEHUNVlMHv2bNa2bdvY1wgDMgYAkMBT0LRpU/bggw86KX8E/m1fFEgXGJjAUmFISCARCeiUOOIByosHOPfcc9miRYsSWauQBwUASGD1V6xYwY4++mgAgDID/wAAEngoMWSqEgAA2KLo48oIePnll1n9+vVTXcMQLgYAEPMq9+zZk912221Q/jErf2QFxPygYrjEJGCz8m3tqn/f5jIIJR7giiuuYOPGjUts3UIcGAAgxlX/4Q9/WEr7+8EPfgAAkBAAQIngGB9YDBW7BFyi/gEAynMD/POf/yylBf7jH/+Ifd1CHRAAIMaVHzNmDOvVq1eiyp/KGDBlAujKAesi+6kgvShlf3VlgHVpg2rhH1thIACAGB9YDBW7BIoEAHTpgrpUPhPdX26bWh9g7NixrHfv3rGvW6gDAgDEtPLc579y5Uon5Y+0v2+37m9gSxNU28X3mJYNw0ACsUlAzt+3Wfm2drgBqrIEMhCoV68e4zEB+FQuAQCAymVYGmHBggWsWbNmAAAxpf1RGwfJbEFMy4ZhIIHYJAAAoA/6iysYkMt44cKFrHnz5rGtW8gDAQDEsPqtW7dm9913n5PyR9qfe9qfDAIoJiCGpcMQkEAsEhDUv2rZ2yx9WzuYAJoJuOCCC9icOXNiWbuQBwEAiGH1X3vtNcYr/1GV+nS7/en66gBCKBX/bJY/WIAYHlgMEbsEqPK9RYoHkC34PJQI5pUBDz/88NjXMbQBAQAqXPFrrrmGjRw5MrfK31bG14egP12cAAICK3x4cXosErBV/bNZ+bb2NFkAV0WfBxDQr18/dtNNN8WyhqEOAgBQwcr/5Cc/KaX9fec738ktAPCp3n8U618wAQABFTzAOLViCeiof8QDJB8P8N///reUFvjXv/614nUMdQAAgApW/o477mBdu3Z1Uv6I/K888p9KGQQAqOABxqkVSwAAQF/xTxf4F2dA4KRJk9hll11W8TqGOgAAQJkrf+KJJ7JnnnkmduW/efNmprPa1e12qe+6vH8bE0C1qzn58vVs+fq62gHlpv3plD8qBJb5AOO0iiXgGvDncyyAieqP6gbg/XfcccdYSwRzpuWkk05izz77bMXrGeIAAABlrvpjjz3GGjduzFSFzb/rrH2h/HR95HYTCDD1iwoAVNrdVvSHoulNx0yFgWwgglL6usyAMpcRp0ECZUsgbwBAp5DVUsJqwCJV2Ic6Rz6PK3IBbMTfatEeNZ5A9FP7i34mcKD2EXPh5yxZsoSdccYZZa9jyCcCAJSx+pdccgmbPn26k/WPtL940v5sKYFwBZTxIOOUsiUgU/95AwLqJjyqMqcC/XTBf1GP6zYAStod0KFDB3bXXXeVvZ6hnggAUMbKb9y4kR144IEAAAnW+zdF/lM1AThAwAcSSEsCpiA/XVS/z64AHaigFD6l7JMGAO+88w6rXr16WstfmOsAAERcyuuvv54NHjw4UeVfSb1/F9dBFN++KY1QpuhNPn+K6jdF/Kv3IEf8q0yA2jficqI7JBBZAqpVzAegUvVkha8CBh1I0I2jq8tvAxUqva/OyXUnwShuAldQoNtTwORKUNvk70OGDGH89xkfdwkAALjLqpRywq1/l4I/iPpPLurf5g6IsKToCglEkoAu6h9ugB1KIMik1JNmAfi1OQvAU7PxcZMAAICbnEq9uI+pffv2AAAp1fu3Rf4jLTDCw4uusUgAAGCbotfFB2QVB8CvO2PGDMZjtPBxkwAAgJucSlGmixcvLkX92xgAmfKm+uvaqYBBXVS/roKfjrL3veKfzu8vuwfkvx2XFd0gAWcJqIF/FP2eVyZAjto3uRPK8fVXAgTkjACKIbC1qy4B3r9JkyaMZ2nhY5cAAIBdRqUePOe/QYMGWwGAmoonK3qTIlfTBmUwYVL2tpx/ne+fOm46Rvnf1WurlnfaOf86y18FA45Li26QgJMEKD++TeFnGRBIpfulnREgAwoVhOh8/bZ0QX6eDAzk/rxt+fLlpdoA+NglAABgl1Gp0tTEiROtlj/8/tn5/SlQ4LC06AIJOElAZ+37xAJQAYG2lEFXRqASFsAWOxClXfTt1q0b45Va8TFLAADA8oR873vfKwWV/PjHPwYAyFnaH0X/ywGCePkhgbgkAACwfclflxoBWcUD/O1vfysFbf/73/+O6xEo5DgAAJZl5btN9e3b10n5l8sA6IoF6VwCLnEBpvQ9qqSvrb/qg3eh/V2rBlLWuy3Sn0oHpOIECvnW4qZSlYAp8C8EBsAWM6BjFmxpflHqBdjGotIDR40axfhurfjoJQAAYHg6+H7Ta9asSVT560BDJUrepsx1ypvy9at9TTn9utx+0xhJKn8xNn4AIIFyJUAF/vkWC6D6/SmFTlnzLha+S5+sWAB+3Tp16rDXXnut3OUv/HkAAIYlnj17NmvVqhUAQM7T/mxBgYV/i3GDiUkAAKA86l+17qNY+7p6AeWwAHPnzmVt2rRJ7PnwfWAAAM0KNm/enM2fP99J+esofCpy3xT1T7EBUaL7Yfl/W9pJUf4nZOL7i4r5py8BKsI/dHeAi8Wft4DAFi1asAULFqT/AHlwRQAAzSKtXLmS1a1bFwDAs8A/AAAPfnU8mSIAwJaiP5Uo/ayZAJ4iuGrVKlavXj1Pnrp0pwkAQMi7d+/ebPTo0VD+BVH+iAVI90elCFdzsfRNAEGNEzB9d2lTc/rV4EOdX1+X92/y+RcxHqBPnz5szJgxRXg0Y70HAABFnHvvvXep3v/uu+8OAAAAEOvLhsH8kQAAQFXfv88sAAdHn332WWmfgI8++sifhzCFmQIAKEIeO3Ys69Gjh5PyLzftz8fIf1v1QFuaIJWip8sasPWlfPy2mgBgAVL4NSnIJdTAP13UPxiA6O6BLDMCxo8fz3r16lWQpzSe2wAAkORYv3599uKLL0L5ex71TwEIGSDE8+pglCJKgIr6RyyA/7EAIoPg2GOPZStWrCjio1vWPQEASGJbuHAhO+eccwAAAADKeplwkv8SAADQK/sobgBb8F9WaYEPPfQQa9asmf8Pakx3AADwP0G2bduW3XPPPU7KH2l/32xNtctDtT9XlwBYgJh+NQo6jE75Ix6gWPEAF110EZs1a1ZBn+JotwUA8D95rV27ltWqVQsAoGCBf1RsAD+GDySgSgAAYJtPX80ecCkHHIUhMBX10RUCiqtA0Lp161jt2rXxAjDGAAAYY/369WPDhw+PRfm7BvhFKfqjK/BjK/yjK9tr297XdJ7O2s663K/N708BAfwCQAJCAi7KX029o87JukywLb1PjWeggvJsqYOVKnqbeyBqoGA5uwUOGDCAjRw5MvgXIHgAcMABB5TS/nbaaadYAIDOPUAdR73/bVX7bJv/2Mr9lgMAwAQE//tXEkAU5Y+AwGIEBH799deltMB333036JcgeAAwadIk1rlzZyflH1Lan2nDIEoZ+8gAAAAE/du39eYBAOh0viK7AThrMGXKFNa1a9egX4KgAUDDhg3ZU089tZ3y37x5c+kYVxD8b5USl+v5U7X95fNt+wGoQXQ21wDVn3IFUDS+uBcdxS8rdptC9zX4D66AoH/vtrv5qMrfBzcAVTVQ9rmbKH7exsvnUn101L96PZ1/Xz3f5NOnrsXnpXMPUG4A9V7E+WIM/v2UU05hy5YtC/alCBoALFmyhDVq1Kik5FWFLyt+CgSIY6qyV0EDBSRUAGHzuVP9ZfcB9beL/5/qQ4EdF4vftaiPSvWr1D3VnhT9L8YN9u3HjUem/10AgMlNoCvpS40bpUSwS6lgHTCQr60qbx1YoPYIoBS6LSZBVtzytQUIkZU4BUzEMRM40I3Bz1m6dClr3LhxsG9CsACgQ4cObOrUqU7Uv86vb7Pu4ff/diuwonz0Wfn9wQIE+3tX5cbLtf7l81AlMHo1QBuToIICHVNgYhBcmAJxnU6dOrHp06cH+VIECQA48tuwYQOrVq0aAEAgaX+U0pePBfn2B37TAABVA/pcfP4mi55iBSh3QN4AwKZNm1iNGjVKTHBonyABwJAhQ9jAgQMTVf4u6YA6Gt+W3ufaTmUZmCh+nSvBZL3LLIiqZKl4Bf6C6cYz0f/UOeKYPCb/Wx1HPabrw8fDJwwJqMqfKyo5I0D9TtH6vD/FAJhYAcoPrnMZqLn31JxdxtPR9TplrlrWqovABBTUOdsAgAk06GIJKH8/5UqIwgIMGzaMDR48OIyHX7rL4ABAzZo12VtvveWk/BH1r6fwbUGCNt9+nuh/MAFh/e7FYfnDDVCs6oAcLBx88MFs/fr1Qb0MwQGAGTNmsHbt2gEAFLzev43y17UH9fYHerMAANuof12Qn2vwnisb4Ooe0FntSccB8OvOnDmTtW/fPqi3IigAcOaZZ7KHH37YSfkj8M//ev8AAUH9ljndbNzKH0xAsZiAs88+mz366KNOz1IROgUFAJYvX86OO+64Kil/sg9bpPS5Uv9cwcjnuPj9df77qMddUv9Umt5E2+v66qj8ctP+8kr9ww1QhJ8z+z0AAND1/n1lAuR0QV0cgMoqyOmEvE3+/sILL7AGDRrYH6SC9AgGAHTr1o1NmDAB1j+i/rfuZGhiCAryfuM25ICnHXYoO+/fFTggLdD/tMDu3buziRMnBvHuBAEAdtttN/b222+zvffeGwAAAAAAIIiftu1v0lWJV9IPAMB/APDRRx+xgw46iH3++eeFf1OCAACjRo1iV111lZPyd6X/1ep8PtH/Ig0uiotATR/UVedzdQ3o0vpMx21t5fr8ERBY+N+5xC1/OVVOByB04EA9bvout+n66fpQKXpycJ1Ia6TOV1PyXGoGuAb+5a0uAJ/3Lbfcwvr27Vv4F6PwAOCII45gr7zyCpQ/ov6dLH/EAhTzN68Sqz7quWAB/GcB+BoeeeSR7NVXXy3mC/G/uyo8AJg7dy47//zzAQAAACIBAP5+oDBQMX77uALnn6iKvNz+AADFAAD3338/a9WqVTFeAs1dFBoAtGjRgs2bN89J+SPtL9y0P8oFIAAAQIDfv39CiacJALJwB8iUPBXRb2unqg7aXAa6zIGo1QB1LgA195+qBZB0fYCWLVuy+fPn+/0SGGZfaACwevVqVqdOHQAABP6VZf0LYFDYtz+AG5Ot+LRBAJgA/5mANWvWsLp16xb2TSksAOjTpw+7+eabvVD+VDCe6zGXegBqwB5y/r81AgLZ+gcQLfNAAAAgAElEQVQI8Pe3T6Xw0wYAqtWtzifuoECblW9rT5MFMFn3eQsKvPrqq9no0aP9fRFCYwD22WefUtrfrrvu6gUAoJQ4AMAWJW3bICiJyH9kBfj/W6fz36cNAsAC+M8CfPHFF6W0wA8//ND/F0O5g0IyAOPHj2eXX365k/K3pf2ZYgOoNvWYTbm7VAB0sfKjpPSBAaAZAMryBwPg729eHkAAAEB2AMC2G6AufoCqKHj77bezHj16+PsyhBIEyEv9Pv/887EofxM4gPLX7xRIWe46S95k4efN+kdAoB+/f7aof7AAW5SyLogviqsgaqCgz7UBjj/+eMZLBRfpUzgGgG/2wzf9kQv18Hr9OkteHNf10bXz4+Ic8T+s/22WtQ81/9WcfxP1DybAn589l8j/NEEAWAA7C+AaE0ABCLW2Px+LH9MxALZ2igHgx/gmQXyzoCJ9CgUALrroInb33Xc7Wf9I+0PaXzkAACxAvn/+XKP+0wQASAvcfgMiX5mAiy++mN1zzz35fgkizK5QAGDdunWsRo0aAABI+6so7c8GDCK8X+iasgSiRP6nDQLABNiZAFdgYLLuKQve5u+3tYsxN2zYwGrVqpXyU53c5QoDAAYOHMiGDBnipPzLDfyrxO+vC/azBQnK/nR562JqPHks/sjI/dXryKmBvJ/or/rvKSqf6i+fL48txpMD7NQgRKpNVsKiPxWkJ+aio+9djtuC/6gxknslMXK5EqCC/kxKvlIAwM+nlLoYl2qTj6n91DYqLU8oKvnavJ/4rl5T/i6PZ+qvnqMbXyhFNZbANS6A6kcp9jTSAl0BAJ/f4MGD2bBhw8p9THN1XiEAQLVq1djGjRtLLyO1SY96DPQ/6H/Zp+/i+6dYgVy9yYFPxhT4lyQI0GUa6I6DBfCfBeD6pHr16mzTpk3ev3WFAABTp05lHTp0cFL+Nusfkf/u0f22QL+8R/6Xa/kjIDB/v3u2wL+8gAAAAP8BAF/D6dOns06dOuXvRYg4I+8BwKmnnsqWLl26XdS/Sper33nkPtVHjvrXUegyoyBnA1D59TpAoVLwsrLUUf3UtWzUvupCoKh1agxKeatz1I2luhFM/VR3gQtlH1efSgEAnwc+2UvAJfAvLwDAFhDoChBcqH5ZLhStr5uLiZqXz6HcC3JEvs41QEX8UxQ8Rf3LY6rR/7LvX50nlRUgj6/LGqD6iOs0atSIPfnkk9m/ABXMwHsAwBegYcOGJAAQClNVzLLyF21yKp+c3icrPV3an5pCSPntqXFsCp1SuPK1KF87dUy9f915Jou+3DYX5W8CDHEpe3UcKP8KfjVyeKpvIMBV0euUuKwI1b9d2ijlrQICysevKnX1HBUAuCpx3k+cSwEENTZA9JfvQ5yvjkMdp8ADBV7kYwIkCLksW7aMcQPU54/XAIBTMJMnT3ai/uH3h9+f8uNTAEMHDtTj4rvPPwC+z53y/eusfV9YAEqh26x1qt2FJdABAVMgHwUUdNa+LdCPAgiUslfBiC1YkOqvMgTyd/VvipGg+nfp0oVxF7SvH28BwM4771yq97///vsDACDtL9G0P0H16wCEry9/EeYtlJGq3H0AAXGzAC6Wv055687VAQGKCdApbhdwUI7S1zEFLorepuBt7eIa7733XmmfgK+++srL18lbADB8+HDWr18/J+VvC/zTsQPUcdsxiv5Xz7H1ofz2VFyAyXeviylQ6XbKzSCn3alxENT5/Mk3xQdQFL98ji5YUCheU3tUF0Fc1L8KBrx8+wswaRP1nzUIEEpNNw9Z6al9KHCgWuv8HBuVz9t1/WwMATW26Vg5AMDGEKiWvI4xMFn8OmVuUvKuAIBfd+TIkWzAgAFevk1eAgBeiOHNN9+MRfkj6j+cqH/KkndxC+iof3EuXAHp//a5UP9ZAwAZnOj+BgtQjKyAQw45hPFCdL59vAQAvBRj27ZtAQCU7XKpLIQoFj9lqScZ+Z928F9S1r8MBHz7AfB1vq7Uf95BAABAMQDArFmzGC9F79vHOwDAN2NYtGiRk/JH4B8C/1wsfBMz4Gr9izF8+wHwdb5FAQC64D6ZMdCBBBOFj3iAHUrukTTjAZo2bcr4ZnQ+fbwDAHw7xvr165d24pPz8am/AQAAAFSaPo6of2pMuAHS+9lT6X/Vyrd914EHUzyBC51fSR8wAX4zATxFcMWKFYxvR+/TxysA0KNHDzZ27Fir4rcF/cHvH5bfP2nfvzq+Tz8Avs2VUt42hZ93NwBYgOLsFtirVy82fvx4b14rbwDAHnvsUUr723PPPQEAkPaXadofpfCRFZDOb57OSi8CCAAL4DcLwNfvk08+KaUFfvrpp+m8EBVexRsAMHr0aNa7d28n5Z8kA6BL6VOvqabo6cr7mkoARwnq0/XVBQG6BveZKgCagvhMqXtxpvXZ0gDTCPyj4gwqfC9xOiEBW+S/7yAAAKAyAGCqJWBKE1TPU2MHXNrlc8aMGcP69OnjxTvsBQCoW7cuW7VqVebKP6qS1/WnwIGsTHVgwabMqZK/pjz/okf9p039wxWQ3G+eS9Cf7wBADdxTYwoQDLgtsE9XDyAPxYH4Oh111FFs9erVyb0QMY3sBQCYP38+a968OQAA0v5yT/0jJTCmXyYNAwAWYAdmAwa2Aj+6DAO1KI8uk4Aq3qPGMdgK/Mhjuxb7cVH6eQEACxYsYC1atEjuZYhp5NwDgFatWrHZs2c7KX9E/SPqP+20P931kBUQ0y8UYyWFJ1v3Jku/CCwAmIAtln5Uha/rr6PwVbBgcxO4tot+bdq0YXPnzo3vRUhgpNwDgFdffZUddthhAAAI/PPK+kddgHh/rUIDAYgH8B8AvP766+yII46I90WIebRcA4C+ffuym266yQvlTwXh6Y7p/PJq3X2TTx9Bf98aAUFWwX9yHABYgMp/rWTFDxZgG/3vYzyAjp6X3Qcu7gATzZ83FuCaa65ho0aNqvxFSGiE3AKAfffdt5T2t8suu3gBAKJG/bsCBgT+mRV9lMI+cVb8c6H+EQ9Q+a+WGvwXEggAC+A/C/Dll1+W0gI/+OCDyl+GBEbILQCYOHEiu+yyy5yUf5Jpf4j83xZXgLS/b0uvYFTlD3dAeb9cOto/FBAAAOA/AOBreMcdd7Bu3bqV9xIkfFYuAUCDBg3Ys88+C+WPqP9Ifv88pP2ZigQl/C4XanhTxb9QAACCAYsRDMhBwIknnsiWL1+eu3c0lwDg0UcfZWeccUap3r8tsj+q9S+PKY8tjvNjYp8BYempeflRWQHk/Uen8W0Ffnyh/uEGKP83DyBgmwJUU/9M4ACbBFWtFyBkxev1Cznyv6l4A+o4VRjItTgQvx4f87HHHmNnnnlm+S9DQmfmDgC0b9+e3XXXXU7Wvw0c6Nqp4+oxm0/fBQRA8aej+GUlqwMOuqBAE6VvsuZ1bfJ41N8JvceFGtYU8S+s/5BYADABxWACLrnkEjZjxoxcvau5AwDr168vBU3YdvqLavnL4wEAuG8G5IPf3wfqH3EA0X73AAKqFvxBPID/8QA8qL1mzZrRXoSEe+cKAAwePJhdf/31iSp/CjjYAEEUNkBWmBToUN0KplK95ab6udbvl8cX1qqYs/xdnrNQZLp+/DzqnuTz5D7ib52FzsdS+1dC/4vxdKDBZsFTbIM4R3eurPwBBMy/aELxyxZ+nMGA6rhqmqGsaKm+lFtCpufFOXwc/tEpbtFG9ZevK58vxpQZATEO1abrJ+7ZVNGPYh1cKgDK5+n6q/ckU/Hq+bq0QF26n8txXUEfNb1Qpv5Nba7uAN6P67chQ4YkrNbdh88NAPjFL37BNmzYsPXH3sYAgP5H1T/fqH8ZdLi/ouH0VJUxWACwAC51AVQF7AoCKKWuU/RxAQD+NteoUYP98Y9/zMWLnRsAMH36dMZ9JDbFTwXkUefA/08DBJXSd2ULVKtbPU9uN7XpfPTlHtcxBya3gHqO6btLm401UBmCXLz5OZ0EQMD2tf4FwwA3gP9uAL6GPMatQ4cOuXgDcwEAGjduXIqStCl/m9WvUuYiml93XB2Poud1wX7UuVRfm/tAdRmodHu5bgDKd6+j5m19XZV7morfd+sfroCqv38mxS9T4tTfunYTg6C2Ud9tdL/pHNktEPffAAJbgICI6qdcDTpaXgZTKrtAjcf76I5Xkh3As9yWLFmSOQjIBQBYtmxZKU+S/yiqSttFiVN9VDChU9gqoyDmoCpmqp/Ox6/rK5SWnHJI9aVAgQoETJa8TtEXDQD4av3L4CXzX4CcTEBVtkKpq//rlHpIICBNAKBLKVT9+CpL4RIvoPr+5TQ9m1KPSvPrAEPUeABxXZEuKH+n4hdk8CCDCV7npmHDhpm/fZkDgK5du5YqJdmsf9W6Bu2/PcXvquB9p/2LYP2DAdieAQALoKf/VRYhTRAgKzZVyVHuCdfgP2qsKEF/LiDApY+JLaCs/LjiAXil20mTJmUKAjIFALzO/8aNG9l+++0HAIDd/iJV/SuC9Q8QsOW3z2bVgwXYHhgAAPgfD/D++++z6tWrM75fQFafTAHAyJEjGd8tKQ7rX8cQuAYD2nz1ulgAykev89ub6H7exj8m94GN2lfbxXh5CvyT5xRa4J/KXMjBgVn9AGR9XcrqBxNgZwJ8BQB83vxjS/2Lwg6UkwWgWvE6q546bmMAoqQF8t1u+/Xrl9lrmBkAqF27NuP7Jbsof9D/+sI9ttiAPCn/chW+el6RrP/QWQAAALuy1wUR+goCXOIFTG4EW3xAOYAgKzcAv+5hhx3G1q5dmwkIyAwAzJo1i7Vp0wYAABv+BEv9C+UfKggwWfpgAezAAADAfzcAX8PZs2eztm3bhgMAmjVrxhYsWOCk/HUUvkqV26L+KRYhK9rfZLXr3Ac6Sx6Bf9v2G9AxA+px03eXNrkP9bdM7ctKXlX4AADc/qgaAyC+AwDYAQAVgOcaLKiL7jcF9bkE/NkCBlXrXUf1U8F7VJS96ZhPTEDz5s3ZwoULUwcBmTAAK1asYEcffTQAAAL/YP1/+23qL32eLggWwF3RwxWg3xTIJdrfpU9WroCXX36Z1a9fP/VXM3UA0KtXLzZmzBgofyj/SMpftaRd4wJ8sv5DcQUIpa+z/sECRAcFcAf47w7o3bs3Gzt2bKogIFUAsOeeezK+I9Iee+wBAAAAEAkAFDHwT1b4oSh/8esGEBBdyesYAJV2hxugMjCQFQvw6aeflnbC/eSTT1IDAakCAG75cwYAkf9Vo/qpWASXSn+h+P9DUf6hgACV9gcTUDkY8I0B0MUg2CL8ixwHwO+dMwCcCUjrkxoAqFevHnvppZeg/BH1H8nyD4n6L3pQoM7fDwBQOQAAC6CPD/ApGJDP9ZhjjmErV65MBQOkBgB41D+P/of1T+f0I/p/WzS/7N8PzfovOgsAEBCPsqfcAb6xAFEyBkKqC8CzAXhWQBqfVAAAz/fnef8uyh9pf/Q2viEW/IH1n8ZPQLrXAABIDgAgLXCb798l4t+lT1bxALwuAK8PkPQnFQDAK/4dcsghAAAI/ItE/4ds/ReNCXAJ+oMrIB5wACagsiBAGRhkBQDefPPNUoXApD+JAwBe65/X/PfB+rfV9TfV+FeZiyhBfDbr3tZexHK/oVv/AADbFwlCcSB3gFAUEEAF/ZncATar3qTcdedmBQL4HgF8r4AkP4kCgP3337+U9rfzzjt7AQBslQFt0fpRN/KB35/2+0P5bykOVBQQECXqHyyAu5JHWqCZ8reBAdfgwKwAwFdffVVKC3zvvfcSwwCJAoA77riDde3a1Un5Y8MfbPgjgv9A/RdH+at5/3AFxKPgTcofGQHFyQiYNGkSu+yyy/wDACeddBJ7+umnY1f+mzdvLllGUfYCsFn2SW31i5r/egtfreSHyP8t7ziVCugrE2BS9iZLHyxAPCChKG6APNQGUF0HfE4Ug7Djjjtud1z0lf/XjUf1Pfnkk9kzzzyTCAhIjAF4/PHH2WmnncZUhc2VIj9GKV1xXG4T56s+dt1xOdZA9o1TwIG3y8fl/hTAUNtNwEJtEwrOFkeg8+dTYEIdUz3XFhsgK125qJCqnE1tJkVeThus/6rWv6/KX7X8KaUOEBCPotexAeUAAF1qHpVhQI2v889HSfmT70dWtDZK31QkSDcvrrDlexP9xHEd/a/OSyh+3XF+DTGmPLY8PjUGP/bEE0+w008/3R8AcMkll7Dp06c7Wf+qYnfZ1U/nLlDHguW/zQLXKfG8KH7Q/8Wy/gEAaOUuQI+Nwo+zvRwgoJ5j+u7SJveh/nYBDnlgArKKB+jQoQO76667YgcBsTMA/MHduHEj+/nPfw4AgLQ/pP1Ju/2p9L5s3duof9+YAIr+BwuwBRSkDQIAAPxPC/zTn/7EqlevHntgcOwA4Prrr2eDBw92Uv62wD8TO2Cy9l3oe13Evi4ewOQe0LWZaH/V8o4SL8B/QOT5y9cRbSq9z/sLel38LcaQjwtFQ7VR/cS9y9fV9bO5BNT56fqLawk4bOon95WVrHyf1DiqP96kvGXZ6vz4smtD7qP7mwIHscP/hAd0jQFQgYF8nslNwBWbyjSoClY3tugnjyH+ptp0Frm4vnwu1Zf3E4rYFQDI58j3Ja6ljid/V/+W50dZ7Or8VCpb0OvqnGRaXm1zsfRV14J8XWqeOqaAOk+11ikXguqLt7kR1OvovovjOsbA5Tx5DP73kCFDGNevcX5iBQAcoWzYsCEW5W8CBxQwAP2vp/t9oP9lBakqdF2betz03aWNUtI6xU+BiSgWfrnWf96ZAJvlTyl0k5I3tQnlEaWPrEhlRawqZdc2k0VvUvSuICAuVwBYAP9ZAL6GNWrUKDHscX1iBQDcR9G+fXsAAGz4A+o/Aeo/78pftcZlxaz728QSuLQBBLgFEgIAFAMAzJgxg/EYu7g+sQGAM844gy1evLhKhL8c1U9F56sBf1FS+3R9EfiHwD+ddU4FGgqrH9Z/XD8pbKufGwDA7O9PmwWQ6W2KWdCBBIqKl8+nqH6V2lepdZd2le6nxtDR/CYqn3IFuLgLKDpfdSGYKH+qr4urQM4a4H83adKEPfbYY7G8sLEBgGeffZadcMIJzgCA/xjL6YBRUgNtqX5ibPGDL6cMmuoIyL58eQwqda+cdD5dKp9uLHU+6nddHIEae6BS6nmK/Af1r0/708UB5JUJiEL/wxWAgEAdsKCUMRUr4KLkeR811c8EAOS+tr9d4gFMKX9iHlQqour/599FmuBzzz3HTjzxxPwAAF6paOLEiU7UP+W/d2EH4PfXVwq0AQUZAORJ+auWOnz/0cFALL8CMQ0CALCF/VD/5SkWACxAMaoEduvWjfFKu5V+KmYAdt1111K9/3322QcAAGl/8P0n7PvPq/Vfjv8fLABYABWQmKL8K2EBdFkC5VD/KpWfhhtAZQQ+/PDD0j4BX3zxRUUYoGIAwHcr6tu3b6LKn8oIMDECujgAXYpfVIo/Cv1P9eUrpqbxyZa5zVXgYvHnPfIf1H90a1/nEqjoFyCmk8u1/gEC0gcBWQUE6mIFhHLjz0LSAECdgwkA2OILbP57nc+/3FgAFQSMGjWK8d12K/lUBAAOP/xwtmbNGiflb0rrQ/DfN1v3N9D57ymA4NI3r/Q/AAAAgMoauET9U4BBnIeMALeMALgBiuEG4ICgTp067LXXXisbA1QEAObMmcNatmwJAIC0P1D/KVL/eXUDgAXYpoB1fv+8xANkxQIgG6BqOiIV7GdjCORz5s2bx1q3bp0+AGjevDmbP3++k/JH4N8WC18Xxe9q3Rch6h+Bf9+WXlaXCH+XPmW/+QmcCADgDwCg0vDU4EWkBW5hClzjBHQpgEm7Alq0aMEWLFhQ1htdNgPw8ssvsyOPPBIAAIF/sP4ztv6zYgRkhV9pECBiAdKPBYAroBiugFdeeYUdffTR6QGA3r17s9GjR0P5Q/lHUv6w/pOx/gEAthXckSn2KPECchwBNYYaX6DGHbh8p8aIkjJIpRjGcQzuAP+rBPbp04eNGTMmMgiIzADsvffepbS/3XbbDQAAACASAEDgX/zUf1bKn7L4wQJsX/kv77EAYAGKwQJ8/vnnpbTAjz76KBIIiAwAxo0bx7p37+6k/BH5ry/eQ6X6mXz8vvv/ofyTV/5pgQGV+ocroGoBIFXp5x0EgAHwnwHgazhhwgTWs2fP5ABA/fr12Ysvvgjlj6j/SJY/qP90qH8AALgCynUJAAQUAwQce+yxbMWKFc4gIBIDsGjRInb22WcDAAAARAIAsP6LY/3rqH+wAGABdLX9KTcDVRTIVCiISh80jWEr4iNH5qtju0b9U2NQWQOmY7rMAVuRISp9kB97+OGHWdOmTeMHABdeeCGbOXOmk/JH2h/S/uQCRAAAAADlpgiiOJB7cZ9yrX/5PDAB/jMB7dq1Y/fee68TCHBmAN544w128MEHAwAg8A/Wf87S/tKi/tVfFMQCVA36s/n+8x4LgIDAYgQEvvXWW+zQQw+NDwD079+fDRs2zDvlT9X+V9kJtUAPVZbYpYiPLajP1q4rEuRzuV/4/ovl+wcAMEf5FwEAFAkE6Ch69R5Vut2V2reNn6U7YODAgWzEiBFWEGBlAA444AC2ceNGttNOO3kHAKhNgUzHXNoowCArb11VvxABAKj/7Kj/uFkByscv59kjLZAu5GMDBXmsDQA3gP9ugK+//ppVr16dvfvuu0YQYAUAkydPZp06dXJS/kj7Q9qfAEhQ/sVR/iblDhCwveK3Kf28uwIAAPwHAHwNp06dyrp06VI+ADjllFPYk08+WUX5b968eWtNe0GXq7Q576Oj0vlxdQxhQYvzXC13+fqyZW7bPlhnxcvzcrX0bRa/CztQRPofAAAAQP7lKTcIUAYYCAhMLyDQBxCgi96nMgbkYzvuuCMz9aEi81W6X/5u2i9APY9fW9dftKlji+/yvHWbCMnj8z6nnnoqe+qpp7QgwMgAPPHEE6UBZEUrK3dVAauAwKWdyhgQyldVyDKo0IEIm9+fUsjUPG2Km1L8pmOuG/6oYMDlO9VHjsJ3aVf7V/Idyr94yh8swJY0P9l6N1n6RWYBdHECpjRAWyog5Ze3KXJZUQtXSpTUQPV8VTHLY9pSA1XlTClxSpFTQKKS1EAVAHAD/rTTTosOADp27MimTJniRP1TSrwS5a87l2IGKIWvsg8uvn3VR2/y2ev66ix5V+Uv93NV/Dblro5ZiWJ3PRcAAACAihkAC4DdAnWK3kWBu4KEKCCAAhkUEDBZ+TZwYMvpjxsEqOxA586d2bRp00gQQDIAHEXwwL+f/exnAABI+0Panydpf3EH/unMBgQEbiv6U2QWQGfpU8paHCvX0gcA2LLtsA0sRGkXff/85z+XAgI5a75dJg/fmlw9OHToUDZgwADvlL/Jire12aL0Ta4FNf6Ay9M2XhS/v8ogyBY2xS7I11evI9p0/wslIsYV16K+U5a+em0xno49UMcwfRdt8tzFuHKbekyeg9pPvp6uTbwfunGo8+Rj5fytXlP33XbctX27H4b/0d0AATTtLyt+/jf/sRXH1DZZOcptqktB7ke1iWuI64n+8ncxvjwfoZTVNtFH/V+njOXzbSCgHEu/EhCgWvIUC0D1odwAskXuwhBEYQd09H7SLMDw4cPZoEGDtnudt2MAeLGfdevWOSl/KthOjQPQuQd0vn/Q/99uDbKUlaaOyjdR/GnT/xQgoJSxfF/lAAAXBa8CD5Ny14EIneJWgQAAwLbfFZUdgCvA7xLBYAGKURyIA49atWoxXiRI/mwHAO6++2520UUXAQCg3j+o/4JQ/+W6BnRUv/gBgSsgDFeAGtxnovt1zIApQNClzcWip6x1nQUf1cqn+rv6/lXrnrL2k2YA+FzvuecedvHFF+sBwFlnncUeeughJ+WPwD/U+zdZ8i5tsP63ed8oJa0e0ylym4K3tUel+QEAwsoIiEr3mwCCi7KvxBWgo/QBBLbEF5xzzjnskUce2frKV2EAnnvuOXbcccdtzdPXpfyB+kfBHxcFb/L/Q/nnW/nblLytHa4A95RByt8v+/dlhSr/rcYT6PrFdRxMgF8FgkRqovz/Cy+8wE444YTtAcDll1/Oxo8fD+sfUf+RqP+oQX66mAATIHBpk/tQf+tiAGwBgqbYgSL6/lU2AG4AmuYXyldWwqpCdm3zBQAgHqAY8QA9evRgt99+e+lVLzEAu+++eyntb++99wYAAACIBABU5ezCDMD698P6t1n5tnawAGABKNAAN8C2dL8s4gE++uijUlrgZ599tgUA3HzzzaxPnz5Oyj9O+t+WCSC3R/mb6iuOubQJJRalOJA6vjoG9d33wj9Q/vkt+FOu3x/xAFX9+zZL39auWvcmlsAHJgBugHjdAFRaYBoBgaNHj2ZXX3012+HII4/8dvXq1akrfwpIRFHyugqALgo+imJH1b8taYnUPwAAAACwAOEFBAIExAsCsmAB+BrWrVuX7TBv3rxvW7RoAQCAtD9Q/4Gn/emsf5uSt7XDFVAsVwAAQDEAwPz58wEAbNQ9GABY/3KwXwiBf3ADwA1gyhwAACgQAIALYFtKH1VWFwAALoAQKv/B+t+yUY/q07f5+G3tRYsBQCZAMTIBtroAEAS4paAPdv/TK3rEAGyJ2pcD60ygQNfXdFwo4KyL/8D6h/UP63+bhW+qGFhOJUAXf3+qQYBIAwQA0Cl4l+MIBCx+ICBqAaAWAKoBmkFBOWAgq42BtksD5D/iKARUFQhQrIBthz9buzym+rfLd11qoayo094ASLaEo2QKoBaAH7UAoPyh/E2lfV3aTHn/qkvBpUYA9gXYfutgHZgQOxXK/29XCEjQfigFDBDgYvWrfcACFJcFAAAAAID1H836p/YjcM33j5P+j1QKmP+IYzMgAIByAABYAH2MgM/xAFD+UP4uFr4pMBDW/5agwSwAAGX9G1Z6NaEAACAASURBVDcD4j9W2A4YAYHlgACwAMVjAQAAAAAQ9V+cqH/rdsD8R/zggw9m69atQ2EgFAaKVBgILECxWAAofyh/UP/RqH8qYyAvlj+fR61atdhbb71VJdGnynbAomXo0KFswIABTiBALr3LA9DUf7p26rh6LGppYFOJX1ubLYCPKj1MBfWZ6vvH0cbHkK1tqnYBb6eOCyUtxqD+l/vISl2MJ66tzkOwBuq1owIDU3CgS5vch/pbpuTVuena1BQ9UwoglSrooxsAACBbAEDtC8B/xMVHptb5MfFd/VtW4rxNKCnRj/qfUvzi2ragPZ3LgHIFiGurcxfXkqlz+bouQYCufSh/vSn1rxwlr/r1XVIBdW4DldbXxQyo/YYPH84GDRpURfmXngeeBqge5cEDfHfAn/3sZ96BAAo0mI65tKnR9ygOhOJAPoKA7d7+Mg/owIF6nOonHyv3b+o8WWGK21KPqUpVKETd/7b+lJIWY9naqHahPOUxZIVqOkftF9d3VXHrFLzpuEtkvw50mACHSXmr49kC81SAYeuvWvblAAObkrcpd1u7GP/Pf/5zafe/zZs3uwEA3qtjx45sypQpAADYHhiuAEsRIMrqzysTUKbO33oalD/NDOjAgk6p65R8npS/qnxVUKEDBwj8y1fgX+fOndm0adPIV59kAETPJ554gp166qlVQABHEVGoftE3qiuA9+fXkml2eSy5TbczoEqDR3UDuFQHVOdnYwtUt0Ec36kx1EC+NOsDyNS7Og9dm3rc9N2lTe5D/S2Oqf+rlr2LpQ8AsK16nmp9y7865Vr8lIVust6jWPaw/reUQHZV7pSlrjsWBQjoLH3VElct9XIZAtX6pix4cV8inc5k5Ys+poh/cb7cV2fF26x7XTsfW6b/n3zySXbaaadpcb8RAJxyyimMDyArfFXxym1CEckggaLYdcpbnOdK46vXps6jAIhOSauAg1LuUel/G0BQ51IOIKDGyBIAyEpTnYepDSAgneJA5bIAsP7Dsf59oP51tD0FEuRjlAKWQYwtcE/tSyl9am6yYlYVOP8ulLcOaFDt6pgqAOAG/FNPPVUeAOBnTZ48mXXq1MnJFaBa4lGYAoohUI/pFHyU4yZw4dJms/B1wXe2IENV8ZsCBk0Wv8nSBwuwJXZBZ/27MgWm86k2+Vg5f4u3V2Ya1HHkN1ztV67CV88DAAgDAPig/HX+fxNDoLP6dda/SbG7xgBQYEJ3zHTcFi+gBv3x71OnTmVdunQxvv5GBoCfecABB5QCAnfaaScnEEApcoolUMEBAMC2+gNgAbYFGbrQ/QKUmRS4yjwABESDBVD+YSh/+P2Lkff/9ddflwL/3n333coAAD+7f//+bNiwYd4BACo2gGIVVJredB4YgGi7BqoKXHYJ6NrgCojHFRBNxUfvrYICCiTA77/Nvy7iDVR/u+64kJ3aP+nvRWEATD57+R5VGl13nqvVT9H7qoUet+9fHX/gwIFsxIgR1pfaygCIEd54441SkSCK1nex5sECmCsMIhbAzerXWfJgAazveuwdAAD4z6cbM2BS5nkCAEVR/pSLQOc2cAkI9En582I/hx56qNP77gwALrzwQjZz5kwAAKQFIi3Qo7RAp1+BMjpB+RdP+YP+Lwb9365dO3bvvfc6vdXOAICPtmjRInb22Wc7gQAEBOp9+ggI1Fv7lCVPZQ5Q/n6wAE7vfCydAACKBQBg+W8r+1uOtZ8H2p/P++GHH2ZNmzZ1fscjAYD69euzF198EQAA+wSABQiYBYDyL5byh+VfDMufA4Bjjz2WrVixIhkAwEcdN24c6969O0AAQEAkEIBgwOx2C3T+NXDsCABQLAAA678Y1v+ECRNYz549Hd/iLd0iMQD8hL333pu9/fbbbLfddnMCAUgL/GaroqRqBOjqBhStLgCKA6WzW2Cktz+Gzoj83xYESAX6+RD5DwDgPwD4/PPP2UEHHcQ++uijSG91ZADAR+/duzcbPXo0AAACAiOxAAABxQIBUP7+K3/Q/8Wg//v06cPGjBkTSfmXxQCIK7z88svsyCOPBAgACIgEAuAKSN4VEPlXoMwTAAD8BwCw/v23/l955RV29NFHl/UWl8UA8Cs1b96czZ8/HwAAACASAAALkAwLUNbbH/NJKPqDoj8qo6ACDLUAj6m/KW9fFEOKmttfxLK/LVq0YAsWLCjrbS4bAPCrzZkzh7Vs2dIJBCAtEGmBuhQ/VAekK//JNf11f5f11id0EgCAPwAAlr//lj9fw3nz5rHWrVuX/UZXBAAOP/xwtmbNGgAAZASABchBWmDZvwIxnAjl74/yh9+/GH5/DgDq1KnDXnvttbLf4IoAAL/qTTfdxPr27esEAsrNCKDYA9PmQXIbVftft0UwtQcAtf2vbktgU5S/fA6XmzwHXcS/aUdA7Ba4jUo3FQAKqThQ2b8CMZwIAOAPAMjK+qfof5mS549h0rQ/tQdA1Nr/VB1/12NqkSFqFz/dPgFq31GjRrFrrrmmore3YgCw6667ltIC99lnn0RBAHYLxG6BtoqAoe0TUNGbn9DJ5QIB6jw5rU5MVz2mpt6JtDvd/7b+tlQ+Na3P9l34qtV+4jh1Pbktib+zAgAy82ACA1Q/U+yArnKfOo5tf4ByKgDqFLpOiduUu61dgIAPP/ywlPb3xRdfVPQmVwwA+NUvu+wyNnHiRAAABATCFZCyK6Citz/mk6H8q2YF5FH5g/4vBv3frVs3dscdd1T8BscCAPgsnn32WXbCCSewzZs3l4AAt8bE39RugXK7+rdMj8tj2Gh/3ldQvra/bW4AMSeZnnd1Eeh29qP2ANCNT42B4kBb9hDgH1PgoNxu6ivadP3VdlN/qq/pfFt/ud30d8W/ADEOAACQfwCQJ+tflyFAWeICTOnahGVMsQc77rgjM50vnyv3tf3tYv2LMdT5ycfV+VFuAX6M9+P/P/fcc+zEE0+M5c2NDQCcccYZbPHixc4AwLStsC5WAG6A4rkBkBZYXlpgLG9/QoNEAQKg/rfFDiRB96tj5gkAqGxE0v5/k0sgz/S/ChaaNGnCHnvssVje3tgAAJ/NXXfdxdq3b+/kCkBaINICkRa4rSiQS8qf3CeWtz+hQQAA7AGBafv+ofiLkfY3Y8YMdskll8T25sYKAKpXr842bNgAAIC0QMQCpBALENuvQIwDQfnnT/nD718Mvz8HcTVq1GAbN26M7Y2NFQDwWV1//fVs8ODBsYAAU9qgKb3P5t+X3Q+qD97Vz29KBdSl6FFjq75+l1RCLmc1jVDch2iTfeSir/Al8+/yGPJxYWXqzpHlRY0nU/riXlQ/vDw3ypcv5mfqJ/qYxhZviTye6u83temyClSfPDWG2ke9rs3i17XH9uanMJCJ3ueX17XLx+V+stXMj/MfRPFR29QAPDGOaQwxnuijjk9R9OL68rm6fsIKl+diov3FPar3Iq6ljid/V/+W50f53uVrib9t/WS/ujonV3rf5puX5WPy80dpo1wNuvNd/Py6PuqYlG9fyEnn95ePDxkypKRf4/zEDgD4DXGE8vOf/9wJBJiUvMlNgHiA4sUD2JQ5BQjUc0zfXdooRS0DAVmxuwAESpGr41FjqgDCF/pfVcgmRW9S3rY2nYJXAYNKtdvadf3V6+m+246nTf3D+i+G9f+nP/2JcYY97t+B2AEAf8G4j2L69OkAAEgLhCsgRldAnMg/rbFcWQDVMjdZ/lD+0QIH4f/33//foUOHUoxd3J9EAACf5OOPP85OO+20UlaAaq3LqYK2lD85nU+m7nXHdfS+Og9hTcrH43AHqBS+iztAvq7ub10KoelcW5vqJtBR7uo96PrFcRwsgH63wLhf/jTGAwCoqqxd6X+Ta8C1rRzFr6PuVapexyzoIvldXQKU20E+RtHq8tgu0fxyfyoFj7fLkfcmml7IRaToyfMT44g5iTFNqYEy5S/Of+KJJ9jpp5+eyOuaGAA46aST2NNPP+3EAkTJCKAUOZVSKIOOOP6mxjABBrVNKEdT7IDaxzaGqT/VpgKCPAIAlVZXQYUOIITiCkjkVyChQaH8s1P+oP7jpf51IEA+rip8k18/iu//5JNPZs8880wib2liAIDPllcq6tq1a+wgQFX4KsNAAQqAgC1FdHwAAWABqrIAibz5KQ8aheIH/R+N4qcYgXKsf8r6lsdWLXFbm66/jiWg+usC9lysflU5m9gDE3PgGgjoEvRnCxhUQcOkSZNKlXaT+iQKAPbff//SPgE777yzEwigFDlF6QMAVA0AtFH9OjeEal2bqP403QBgAbYvDpTUD0Aa40L5859ZukqgK50ftR8AgP9+/6+++qpU7/+9995L7DVNFADwWfPdikaOHOkFAKDoeSp1z0TjyzENajwA3ADbWAiXeAEwAYm996kPbHIHuLQh8C8aK1AUAKBa+qqV7cIE6FgEl3gBk1Xv4hag3ACu9H+/fv1Ku+0m+UkcAPDJv/766+yQQw7xAgTYXAWIBYimxF0Uva4PAECSr366Y7soeVD/0ZS8jhUoivIPmf5/88032WGHHZb4S5oKAGjTpg2bNWsWAADSApEWGCEtMPG3P4MLqO4AF2AA6z8aMAAA8J/+b9u2LZs9e3bib2gqAIDfxYIFC1izZs2cQECUrADEAxQ7HiBkFiDxtz+DCwAARFPmUXz/UPz+K36+hgsXLmTNmzdP5e1MDQDUq1ePvfTSSwAA2CcALECgLACUf3LKH2l/8ab9ZRn5f8wxx7CVK1cWCwDwuxkzZgzr1asXQIACAmxxBboof12QYdGyAkJjAVJ58zO8SJSsAND/bqDBN+tfl3IYst+f3/vYsWNZ7969U3s7U2MA+B3tueeepbTAPfbYwwkEIC3wGzJ3n6oKaEr1s6UB6lL8kBa4JeBRABAZiFB/q/1c+8jnpfbmZ3wh+P7dFLurC8A3AKAyFqbaAFHbXKP7dXUCsrL+P/3001La3yeffJLa25kqAOB3xRkAzgRQ1ftc/PmoC7DN5x8KAyCyBEJhAlJ7+zO6EJR/vMof9H8x6H9u+XMGIM1P6gCA39yKFSvY0UcfDRCArIBI8QBFBwBpvvh5uZYuLgDUvztIgPXvf/Dfyy+/zOrXr5/6a5kJAODZADwrACzA9hS/rshQ6HEAobAAqf8CZHhBKH93JW9yBQAA+A8AeNQ/j/5P+5MJAOA3yesC8PoALiAAaYFVU/0o6j8UdwBYgLR/IpK7HgBAZQAAit9/xc/XkOf787z/LD6ZAYDatWuXKgQCANDKHUyAvuJgEUFAFi9/Hq5JgQATMOBzVt0DtjFM/ak2eTzV8pavH6XNNZgvSj8AgGIAAF7xb+3atZm8jpkBAH63fI8AvleACwiwZQToWALdeepxWwlg3Z4Atv0DZOretE8Ab+Mfqo8t6l/XLsbLU1qgPKdyywQDAGTyW5HIRW3KWyhc9X9VSdvadf19BQBZKH9+Tf5Ro/KjRvSLMeR70EXuy2Pr9gFIKuo/ajaAXPdfzjCg9gMQx3itf17zP6tPpgBgl112YRs3bmT77bdfLCDAVdlTYCErAGBS7mABwmABsnr583JdmzK3KXdbe9GUP6L+ixH1//7777Pq1auzL7/8MrNXMVMAwO+6a9eu7I477gAAQEZApIyAomwZnNmbn7MLI+o/WjxAFgyAWKNKGADdGHlkAHRWvM26t7UL6/+yyy5jkyZNyvRNzBwA8LtftmwZO/HEE0sKYPPmzVVocPW7sIrFceocyqVgovxVS5uPTVH3Oro/ihtAzFfeGjhOFsBE97sGCqpjyFQ9igPFWxwo07c/RxcHAHAHAGkqf1vFvij0P6X85fF33HHHrfEdrhUBTfS/OoYYn6L2VaWtflfnxr/L4+jGlo/z/uL7s88+yxo2bJj5G5gLANC4cWP22GOPWVmAKHEAOmAgH6dAAXUNW6leHWDQKXkdtW+K7neNA1CBi055q4rc9l2+F53v3gQOyvX3287zOR4g87c/RxNA4F8+AYBNwdvaTWyBq5KXlTEVE2AbR/XN65S9ixJ3se5d+pxxxhlsyZIlmb+BuQAAXArTp09nl1xyiRUEqEFyugBCxAPQZYTzFBBoU+4u7b4CgMzf/JxOwAQEbLECanvRfP9pWv42xW5rT0PxU8DANSAwaoCfTanb2mUQctddd7EOHTrk4g3MDQD4xS9+wTZs2FASShxZAQAAYQAAn2MBcvELkKNJQPmbWQAAAP/T/vjrVqNGDfbHP/4xF29ebgAAl8bgwYPZ9ddfnygAsGUAUAxDlAwBl9gBk+uBovBd6X+qH+XPp1wQwpIW9y9/V+l/GaSp/UQb5TIQbXIf+Rhl8cvpkSZl78oEiPF0Y8nj6P5WzxX9bP3lfrl4+3M4CQEC+NSEzzhOy18dVwUdspKl+qqxCvIc5bH4OPyjU9qiTVxD7i9fVz5f9JGtbzEO1abrJ+ZJUefy/VD+f3U+ql9fpehN3ykq3pXir9T6d4kDUF0H8nf1b1cGgOu3IUOG5ObNyxUA4FJZv359aUcksAAoE+ziAhB9XAGAPKZ6jum7S5sNPOTmrfdgIib6XihIWVG6AAad8tYp+nIAgAoI4voO699/65/vhFuzZs1cvX25AwDt27dn3EcCAAAAEAUA+OQKyNUvQA4nA+W/vSsAAMB/AMBj3GbMmJGrNy53AIBL59FHH2U8SlKOrjcBAp2/n6LzdRH74jgfS04xjEL/q+4Fyh2go/iTzAxwTf+zZQLoovzzkhqYdxYgV2++B5OhLPbQrH8o/soVv6Dn5VQ+kcZHpQoKet9G69vaxdj8WjzL7cwzz8zdW5dLANCgQQPG8yRdWADKp6+eh4BABARGiR9wofsp14M4z+QKyN0vQE4nBOW/hQUAAKgcANh8+TpFblPwtnb5urzOzfLly3P3tuUSAHApTZw4kfFKSQAB2CwoiisgryxA7t58DyYUZ/CfOhb13RbgZzonLl+/KQjPpY0K3NOdZ+prSuNzCfSz9dEFIKrWdyXBflSQoWvwnk2529rl6/BKt926dcvlG5dbALDvvvsyHjTB9wtwAQFR3ADyeNR5VJR+XNkBJqofbgB97X/fQUAu334PJqUqZQT+mZkBAIAtrIlrlH/S1j+v88+D2j/44INcvm25BQBcWn379mV8tyQfAAClvHXHKJ+8CkqoWIE4UgRNaYG2NqqdSvdTlbUpRiCKYo/SN09MQC7ffE8mJVvdISn/ItL/OotcgDyKqqcYAJNlr2MMKECgO2Y67hofIPrx3W5HjRqV27ct1wCAS+3VV19lfL9kH0CALWCQao8SKKgqWx1joCpqqj6AKeDP92DAPGUE5PbN92xiOneAKVZAR+nLQEKmx3XH06b+i6j8VaWqcxFQrgHdua7Hs1L+r7/+OjviiCNy/ablHgC0atWKzZ49GwAAuwV6u1tgrn8BPJhcaMofAKAY2/22adOGzZ07N9dvWO4BAJfe/PnzWfPmzZ1AALIC6KBBm0uBovJ9ZwKydgPk+s33cHIuFr1qxdu+I/BvS5Q9ZZGrQMQUuKcbI0TLn9/zggULWIsWLXL/lnkBAOrWrctWrVoFAPAtMgKixAHkwRWQ+18ATyYYgvKH5V8My58DgKOOOoqtXr0692+XFwCAS3H06NGsd+/emYOAuDIE1HgA1/gBm3/f5u+3tevG1wX7oTgQq+KaEKxD7t98DydI+eJdAwNNfvy8+P6R819Zzr8pJsAWvGdL67O1ywGMY8aMYX369PHiDfMGAOyxxx6ltMA999zTCQQgLZAu/hMaAMiKBfDi7fdwkrqgPRvVj8C/7YsKyYADef/b0gfVWgEuWQHinE8++aSU9vfpp5968XZ5AwC4NHv06MHGjh0LAICAwFwHBHrx5ns6yaJG/YP+Lwb936tXLzZ+/Hhv3i6vAACX6gsvvMDq16+/tV6/KT0QLABYAOG6SCsg0Js33+OJRskK8IH6h/L3X/nzev8rVqxgxx13nFdvlncA4Oyzz2aLFi0CCwAWIJcsgFdvv8eTdQkK9EX5AwD4DwC4C6Bp06bs4Ycf9uqt8g4AcOnec889rG3btk4gAGmBSAtMkwXw6u33eLJFAQAI/Kss8E8NzqOC9XQBfLbAPlu7HCswa9YsdtFFF3n3RnkJAGrVqsXefPNNAACkBeaKBfDu7fd4wraMAF+sfwCAYgCAQw45hK1bt867N8pLAMClPHz4cNavX79YQIAuVoA6bjtmKu2rbigUNfVPF8Gv21tATt2j+thSCrmc5TnrigWJfrpUQfU6IjKfuh81z18dO2odAGo83Ri6OAH1OPXduze/IBPWZQXkAQAI5a7LQJCjy9U+FDBQo/b5OVQkv1yUh7fr+qnXUMdyzRKwle9ViwzZigNRUfe2MUxpfuUwAFGs/5EjR7IBAwZ4+UZ5CwB23nnnUlrg/vvv7wQCEBCIgMCkXAFevvkFmbSrK0DXzwQg5LYk/ob177/1/95775XS/r766isv3yhvAQCXdqdOndjkyZMBABAQmKkrwMs3vyCTdnEF5FH5I/CvGIF/Xbp0YVOnTvX2bfIaAHCpP/nkk6xhw4ZVQMDmzZtL37nFJ/+tHpPpbd5PWIjib/lcMZb8v2AVRH8TxS9T8NS1VIpepd7luduoe5MbQqa/TbsJRqkIaNszwOQacGmrlPanztfR/cI94XKOt299ASfuYsnrqHiTuyAJyz8J5W+j8+X7kOlyai4mil6l4mV3A/+bp8OpY6r0vNwu+svnqvS7jv7n58r3LcaSx+Tt8pxEf/WY2k9cU+4nj8/7L1u2jJ166qlev03eAwC+AEuXLiUBAJUBICttVWHL/YXy1ylmCjxQCpW6houy1ylnGWzofPxUbAHlh6fm4erHNyl9XXlgag5ZAQCTogcI8Os3zTflbwIArm6BKArfpJBtAEBWxi4gQgUAFJigFDzlc1evrcYaUEqcAjdCueuAja5d7S8Ah7hGo0aNSgaozx/vAQAXPqdgOnTo4OQKQFog0gLjigXw+cUv2txtNH9erH9XBa8qW9fvLsBAFzhIBfNR4IFiAUxWvq7NpJAp5W8KDhTXoPqYAgRdzpP7iL+nT59eckH7/ikEAKhWrRrbuHFjiQ4yVQbUWePqObqAQeq4eoyyvlXQYetjs+B1rgaba4CKuqeyA6hjlKVuo/51TEA5DEESboBKWQDfX/4izd9E4+dF+SdB/esUtErN26h7nVIHAPi/kl6R//Hfr+rVq7NNmzZ5/woVAgDwVRg4cCAbMmSIEwCwsQBJAAAdCHAFAyZQQFH5XCZUHAGltPkx0d/F90/1l89XwYLoTx2XlbANMFB+e3XscoBCufEA3r/9BbsB2Uq2MQImwECNoxubsugF4KDa5GNqP7VNtchlpc7PldvFd1cGwNRfZQj4d6q/i2Wv89+7nEtZ7rr4ABdLnnIzuLID8viDBw9mw4YNK8TbUxgAwFeDF2KoUaOGEwjQKXkbSwAWQO9CsMUZyMrZZxagEG9+QW9CVdSw/neoEpQH+n97i97kNlCt/w0bNjBeiK4on0IBAF6K8e677wYAQFpgommBRXn5i3gfLgGBcVj/riyByXfv0may6EH/b7+Fr87KN1n/UQDAxRdfXCpFX5RPoQAAXxS+GcOZZ565XVaAjdZXU/lUJoBK9ZPTBdWI/Kh+/yguAtnSRjzAt5GVPeUmcHUDFOXFL/J9pEH/RwEAlCuA8tG7BvoVUfGbqH1bmy7NT6fY+XhyCiEV5Ecde/TRRxnfjK5In8IBAL4d4/PPP+/EAthiAUztcAWE6Qoo0stf1HuxWfgmt0AUxe7aFwDA/4p/fA2PP/740nb0RfoUDgDwxRk/fjy7/PLLYwEBplgBgIBigQAbC1CkFz+Ee9Ep6DQBAJR/dsrfRu3b3AIyC3D77bezHj16FO61KSQA2GeffUr7BOy6665OIAABgdgnwLU2QOF+AQp6Q3lQ/ipVr85JBw7g99/m208q6t8GDmTl/8UXX5Tq/X/44YeFe1sKCQD4KvXp04fdfPPNXgAANT9f59en+rnUDNCl36EuAB0/QDEBhXvzA7ihKBkBrnR+1H5gAGgGwObX16XnUVZ70oF/V199NRs9enQh35jCAgC+WqtXr2Z16tTxAgS41gMACIgn6M9UL0AFAIV88wO5KdesgKiK3aU/lH929L+N3re1CwCyZs0aVrdu3cK+LYUGAC1atGDz5s0DAEBaYORMARkEFPbtD+DGXDICXJR5OX0AAPwHAC1btmTz588v7JtSaADAV23u3Lns/PPPdwIByArAPgFqLEBh3/yAbsyWFVCOcjedA8Xvv+Lna3j//fezVq1aFfpNKTwAOOKII9grr7wCAPAtrdx1LgXbvgK2qn9F2Seg0G9/QDcXt5IHANim5GU6XQ58tJXypc6jgvOy8PvzeRx55JHs1VdfLfRbUngAwFdv1KhR7KqrrgII+B8I4DKJWkBILT5EbQ7kso+ASzngvJQJLvSbH9jNpQUA0rT+ddkC5ZT75efwj6y0TcrcpU1V5i4KPw9R/3zet9xyC+vbt2/h35IgAMBuu+1WSgvce++9nUAA0gKRFlj4Nz/AG0wDBKQJANQ0Q1nhinulwIDaz7WP7jzV0o+q6HX9dal6SUf9f/TRR6W0v88//7zwb0kQAICvYrdu3diECRMAABAQ6BQQWPg3P8AbBADYnra3gQidFV9kBqB79+5s4sSJQbwhwQAAvprLly9nvFSwoJh5LX9Bhav/u1QA5H3UMVAd0P/qgEG8+YHeZJIgANZ/+sF/Yh8AW1qf3K7uHSB/56V+GzRoEMzbERQA4JsE8c2CdEpfPg43QLhugGDe/gBvFACAZgFUi97Fwi9i8B/f7Idv+hPKJygAwBd1xowZrF27dk4gAGmB4aUFhvLih3yfcYMAWP7pW/66SoFyCd8o5X5535kzZ7L27dsH9WoEBwBq1qzJ5C6eCQAAHJdJREFU3nrrLQAApAWSsQBBvf2B3iwAwJZa+2qgIBXkF0rgH7/Pgw8+mK1fvz6otyI4AMBXd8iQIWzgwIFOIKBcV4COPbCV/FXT82z7BJja1blTewJQ+fq2PQLUlEBd2h41Ny5/XQ0BU/ofdY44Jo8pUhzldEP1mK4PPwefMCSgggCRBicrRS4JuZ9q6fN2yvo3MQIqba4qYXlMKqpfnY+uj07BU6mDuuwBKiXQBhKitFNWfJScfxcL3xYbIOYwbNgwNnjw4DAefukugwQAPOhjw4YNrFq1aomCAAQE+hMQGNybjxuuotzLZQVA//tP/2/atInVqFGjFNAd2idIAMAXuUOHDmzq1KkAAEgLLDES+IQngXKVvokVcGmjrHDdeaa+Osvdhdp36RMK/d+pUyc2ffr08F4AznBxRjbIO2eMLVmyhDVq1GhrKp9I65P/57Q0R4Yq7S2OiTRAuV3uL6cc6twJVJU9yhUgH7O5EkxjylS7ie6nrke5EaJUAKRofmo+MoWvqzroUlWQGkc9Furzj/uuSvFHAQQuND81HkXNx6H8deOqNLlO8atUeZSsAPXaciCeKVNAR8/z42qqnnpMnCv68f91LgH5XHlc/vfSpUtZ48aNg30VggYADRs2ZE899VQVFkDO61eBgFB0qoJXlbUKCmzZBLKCo/qafPm6mAEKAIh568CBbh6UAnYFEbZzdfEAAADB/ialeuNRlL6LdS8rTirOwDSGCRyYgvbUa7r4/3XWvU7RysCBUrRqu66PLq5ABg0UaOHHTEqeAh3qvYjzxfj8+ymnnMKWLVuW6jOXp4sFDQD4QkyaNIl17tzZyRVgU+SmdsQD5DMeIE8vI+aSjQSiggD4/f33+/M1nDJlCuvatWs2D11Orho8ADjggAPYxo0b2U477eQEAnQ0vomyd8kIUPvYKH5df+o81eKnovN1NL6ur62/zbKnsg9cKH1TpoAti4BiFXLyHmIaGUoAAIBW6KobIGqEP0X/25gBKjNA51JQWQOdC4Dq9/XXX7Pq1auzd999N8MnL/tLBw8A+BL069ePDR8+PBYA4KrsbVQ/Rfvr6H71uIniF31Nvn9T/IBOSdvGixInQIGHJOIAsn/9MIO8SCAKCMgzA2DzuevcBToK3TUQUEfbUwpdF29gU/S6mAHbeRQAGDBgABs5cmReHr/M5gEA8D/Rr127ltWqVSsWEKBjCeAGyI8bILM3DhfOrQRcQECelb9JWeuC/3SKu8jW/7p161jt2rVz+xymOTEAgP9Ju23btuyee+4BAAgkLTDNlwzX8kMCAAD63QKLRP9fdNFFbNasWX48lAnPEgBAEvDChQvZOeec4wQCEBDo7z4BCb9TGN5jCehAACz/aIF/NpqfovNNaYEUjW+LF6DOeeihh1izZs08fkLjnToAgCTP+vXrsxdffBEAoOD7BMT7CmG0IkkAAGDbPgGqgnUJ6nPpowvWSwMAHHvssWzFihVFemQruhcAAEV8Y8eOZT169AAIUECALbvAl6yAit4WnByEBGz5+y71AFTGwPTdpU3uQ/2t8/+rvnwX374pkNAU7Jd35T9+/HjWq1evIJ5h15sEAFAktffee5fSAnfffXcnEIC0wG+27qrnQ3Eg1xcD/cKVAADAFhagSH7/zz77rJT299FHH4X7YBN3DgBACKV3795s9OjRAAAFCwjEmw8JuErAxcpXU+pM57hY+WqkPmW9m9L4bP1tCt2FHfCVAejTpw8bM2aM6/IH0w8AQLPUK1euZHXr1gUIKAgICOaNxo3GJgGTgofyjxYUaArYS9L3z8v9rlq1itWrVy+256JIAwEAaFazefPmbP78+QAAAABFet9xLxEkAACgDwgshwnIKvivRYsWbMGCBRFWPpyuAACGtZ49ezZr1aqVEwhAWmB+0wLDeZ1xp3FLgMoK0KUEIvBv+9iBrCx/cd25c+eyNm3axP1YFGY8AADDUh5++OFszZo1AACepwUW5m3FjaQuAQCAqsGAPln+fK516tRhr732WurPjS8XBACwrNRNN93E+vbtmygIcC0dTG3qE3UTITWdz7bpELUvgGmvAdf+aW0W5MuLiHnmVwIuAYFFtv5twYOmjAEd7R/VHVBO0Z9Ro0axa665Jr8PVg5mBgBgWYTvfe977O2332Y//vGPnUAA0gLzkxaYg/cLUyiIBKgIfUT905S/rQpgVFAgV/TTBQyqVf/+9re/sYMOOoj9+9//LsgTmMxtAAA4yPWyyy5jEydOBADwLCDQYWnRBRJwkgAAQHmugKiWvk3B29oFEOjWrRu74447nNY25E4AAI6r/8wzz7AGDRqwzZs3l4CAsPT5d/63OG7bDlj0l7flpbb5tY0TlfpXt+u1bSGsFvUxbfdLjU1t35vmlsGOy4pukICzBHwL/lMrBuqqBSZZ9Ee+Jk/Jk4GUarUL5S76if8p+l9uk/vzvsuXL2cnnXSS87qG3BEAwHH1zzjjDLZ48eIqip5S4qqSk4EBpXRdgYN8rgAc5cYEuJT1lYGKq1/fpuBt7bpywhSYoGIIRD/+Pz6QQNwSoAICqVTBPBb9UZVvpUV/osYF6Gh8WZFT1r2tXQURvH+TJk3YY489FvfyF3I8AIAIy3rXXXex9u3bO7kCkBaYXVpghCVFV0ggkgTg98+v35+DgRkzZrBLLrkk0pqG3BkAIMLq86ASvk+AzvJXjyMgMJuAwAhLiq6QQCQJAADkGwDwev88aBsfNwkAALjJaWuv66+/ng0ePNgJBJQLACj2gBqLcgHo0vp0fnoZtKhUOxWboEvfM8UBuKYNyhS+6vLQuQHU+424nOgOCUSWgLrrnS1NUPZh6/rq/PNq8CGVh0/10eXrUz54ag8BXdqdeu+uQX6m4D1bYJ+tXcx1yJAhjP8+4+MuAQAAd1lt7clZgAMPPDBREGBS+CbFHDU40BYPYAsWpECDLWbApb2ceIAylhKnQAJlSaDIef+UktcBCgoAUApbp8Rtyt3WLpT/O++8U9rtD59oEgAAiCavUm/uY5o+fToAQI7SAhH4V8aDjFPKloAaEJjHwD9ddL/NivcRAHTo0IHxGC18okkAACCavLb25lGmjRs3LmUFyFH5apqgSrHz77o+amqhLT1QTSmUrXGd5a5zL7gyAWp6oM5STzs1sMxlxGmQQNkSsGUAuIACNVXPRPmr11PdBqq1bKP2df11Ef7yXOWsAjVdj3If8GvZ+vF2m0tB9BH9+PclS5YwnqWFT3QJAABEl1npjBNPPJHx2gBxBwRSSt0WXKjz+0c5DgBQ5oOA04KVQN4AgMnvb2tzaTe5AWyKW1bYur66VEE11U/9znP+n3322WCfw0puHACgAunxSlNdu3aNHQTYFL4tSDCK4qcsdVvAoGtQX1osQAVLiFMhgYokYAvqUy16yiq3WfY6S99m4essefU8V/++zjXgovyjKHdXvz8fc9KkSYxXasWnPAkAAJQnt9JZP/nJT0opJ9/5znecQEC5WQEICNTXFIDvv4IHGKdWLAEAgO1LBFMugCQAwH//+99Svf+//vWvFa9jqAMAAFS48ny3qZEjR+YWAOiyAkyUv08MQIXLh9MhgYolYLLyfWMAXK18U/xAWgCgX79+jO/Wik/5EgAAKF92W8/k+00feuihuQUBUVwCrrEAeXADxLB0GAISiEUCumA+G71vawf9v4VhUP+98cYb7PDDD49l7UIeBAAghtVv3bo1u++++wAAUkwLBPUfw4OLIWKTgM4VYFPwtnYAABoAXHDBBWzOnDmxrV+oAwEAxLTyCxYsYM2aNXMCAdgnoPJ9AmJaNgwDCcQmgbTT/myR+0XM9+f3vHDhQta8efPY1i3kgQAAYlr9o48+mq1cuRIA4FtaucedERDTsmEYSCA2CQAA/F9pu1+KsrdF9tva5THr1avHXn755djWLeSBAABiXP0xY8awXr16OYGAcjMCbCmApgJARSkTHOOSYShIIFYJ+Bb055rbTylol0BAW0CgS00AWfmPHTuW9e7dO9Y1C3kwAIAYV/+HP/xhKS3wBz/4QaIgIOS0QL5c8P/H+NBiqFglUCQA4JoRYFPyNuve1i7G/+c//1lK+/vHP/4R65qFPBgAQMyr37NnT3bbbbcBACQUEBjzcmE4SCB2CdgC+2ztCPyjA/+uuOIKNm7cuNjXK+QBAQASWP0VK1YwHhPgUia4XFdAiCxAAkuFISGBRCSgMgG6NEGqWl8UgGA631YJsJwKgFlV/eM+//r16yeyViEPCgCQwOo3bdqUPfjggwAAMbMACSwVhoQEEpEAAIC+QmCUqoCi77nnnssWLVqUyFqFPCgAQEKrP2vWLNamTRsnEIC0QHtaIPz+CT2oGDYRCdiqA8Lyp7MFqAyC2bNns7Zt2yayTqEPCgCQ0BPAKwOuXbsWACCmtMCElgnDQgKJSUBH5es28QH1T/v+a9euzXjlP3zilwAAQPwy3TriiBEj2LXXXusEAtKKBXDZG8Clj64UsEu+f5Q+sPwTfEAxdOIScMkK0LEBOqBQqd/fJTaA8vW7pALaMgJc20W/G2+8kfXv3z/xdQr1AgAACa78d7/73VJa4H777ZcrEBBlb4CstwtOcHkwNCSQigSiWPa62IEQq/69//77pbS///znP6msU4gXAQBIeNW7dOnCfv/73wMAlBkQmPDyYHhIIHEJAABUpfZd8/5/9atfscmTJye+PiFfAAAghdVftmwZO+mkk6qAgM2bN5OgQKXWRT+di4Af5310aYHiuNrHlQWwbRssGAL1+vy77lyqTe0L6j+FBxOXSE0CsmWvpgTqSgjLdDlVda+cY7riPurxHXfcsVTSV523K4Uvj8fHUt0ZarCfuJ44/swzz7CGDRumtj6hXggAIIWVP+2009jjjz++VeELpa2W7RVKWlbaah9dbQFVqVKgQAUXtrLCNuXvGgdAKXddHIAMKFJYGlwCEkhFAi7UvgkkUIqbUqqmYza/vk5J8+OygtaBAiq9TwYS4vrqMX5cBgn8++mnn86eeOKJVNYm5IsAAKS0+tOmTWOXXnqpkysAaYFb2AN8IIGiSMAGAGyZAZUG/rla/rYcfR19b6P1be3yde+8807WsWPHoix9ru8DACCl5TnwwAPZxo0bS1dDhcBvSgpexyBA+af0UOIyqUrApOQBALbECfBP9erV2TvvvJPq2oR6MQCAFFd+0KBB7IYbbogFAOhYgkpKBNsi/l12EzT5/qmdCikQkOKS4FKQQKoSoBR9FCo/CsVvchtQvnwqpkD11VOWvIt179KHX+u6665jQ4cOTXVNQr4YAEDKq79+/fpSagtYAJoFSHk5cDlIIHUJqHQ+rP8t1j9Pma5Zs2bq6xHyBQEAUl79iy++mP3hD38AACDSAkH9p/ww4nKZSECNBwAA2AIAfvnLX7K77747kzUJ9aIAABms/COPPMKaNGmyNX1Pl8YnHzdVCtSlAurcAbpxqVQ+V9qfovdtFQVl+l+4DjJYDlwSEkhVAgIApKX4TdQ+1UZF/avBgWrUvs5VoI4lux7kzILFixezs846K9V1wMUYAwDI4Ck44YQT2PLly51YgJAyAjJYClwSEshEArasANVHHyVOwObf12UEUGmCumOm4661AmTQ0KBBA/bcc89lshYhXxQAIKPVv/3229mvf/1rgID/bRaU0TLgspBAZhKImtpnC+qLmupXbtBf3Mr/d7/7Hbv88sszW4eQLwwAkNHq77vvvqWgl1122cUJBJhcACaWoJKsANdqga5Uv2kToIyWAZeFBDKTgIkFiAoOVKUcFQxkZf1/+eWXpaDoDz74ILN1CPnCAAAZrv7VV1/Nfvvb3+YWAERJCzRVDbS1ZbgEuDQkkKkEdHEAcQEAV/9/1AI/trQ+W7ug/3/zm9+wm2++OdM1CPniAAAZr/4rr7zCDj/88NyCgKRZAET+Z/wA4vKZSoBiAeJS/q6sQFbW/2uvvcaOPPLITOUf+sUBADJ+Alq2bMnmzJkTLADIWPy4PCSQuQRcAvyK6P9v3bo1mzdvXubyD3kCAAA5WP3777+fnXfeeU4goEhZATkQPaYACeRCAqFF/T/wwAPs/PPPz4XsQ54EAEAOVr9u3bps1apVAAA5WAtMARLIQgKhAYCjjjqKrV69OgtR45qSBAAAcvI43HLLLezKK6+MBQTYigapZYh1BYBcigCVmwGQE7FjGpBAbiRQrivA1ddfSdqfLfXPNeiPj3Prrbeyq666KjdyD3kiAAA5Wf099tijtFvgXnvt5QQCfE4LzInIMQ1IIHcSoAIAbcfSAAA2BW9rFwzHxx9/XNrt79NPP82d7EOcEABAjla9e/fubNy4cQAAOVoTTAUSSFMCNmUfNb8/b1X/evbsySZMmJCmSHEtgwQAAHL2eDz//POsfv36iYAA3Z4BVGChqM2v7lNQSVog6v3n7GHDdHIpAZ1FX47yFzX7Xel/qsa/fK6tXd0TQP6+YsUKdvzxx+dS5qFOCgAgZyt/9tlns0WLFiUCANQNe+RYgCTjAATAQM5/zh42TCeXEpBrA9gYAZ/o/6ZNm7KHH344lzIPdVIAADlc+ZkzZ7ILL7zQCQT4lBYIAJDDhw1Typ0EXKoD+qT4+Vzvvfde1q5du9zJOvQJAQDk8AmoVasWe/PNNwsFAKD8c/igYUq5lYCtQqBvAOCQQw5h69aty628Q50YAEBOV37YsGGsf//+TiDAlhEQZbMg0+ZBLm4CXd1/AICcPmiYVm4lQG2ra0oV1NUSkP3wLrEAtpQ/al4m3/+IESPYwIEDcyvnkCcGAJDT1d95553Zhg0b2AEHHBALCNCBhDR2C4Tyz+lDhmnlWgK6WACfrP93332X1ahRg3311Ve5lnWokwMAyPHKd+rUiU2ePNl7AJBjEWNqkECuJVBO5L/OQqdy9aPuAhjV+u/SpQubOnVqrmUc8uQAAHK++kuXLmWnnHKKEwgQVD9P3VOr/VFb+4p+Ij2P95GPyeOpaYFUSqFK/yPtL+cPF6aXewkIFsAEBORUPzVNT3UZ8HbBIIg219Q+qp+J+n/qqadYo0aNci/jkCcIAJDz1T/11FMZBwGyQlcVPOV3t/UR+f3if1ONAKrcr0usAKj/nD9cmJ4XEjBlBcgWuanoj9yPAgw64CDOk4GDjgUQfUQ7V/5PPvmkFzIOdZIAAB6s/JQpU1jHjh0jsQAUA2CqA6ALFHQJ/DPtB+CBeDFFSCDXErAF/uWt2h8HANOmTWOdO3fOtVwxOcYAADx4CqpVq1YKCOQI26TYbQre1h5nQCCsfw8eLEzRGwmUExCoi+ZP2u/PWUUe+Ldp0yZv5BvqRAEAPFn5AQMGsKFDhzoBAFtxoCi7BdpAgS7tzyRWgANPHjpMMzcSiFoXIEogoEtgn+tmP3ysQYMGseHDh+dGdpiIXgIAAB49Hbw4UM2aNZ1AgK02QJJpgVDwHj1UmKo3EojiCsjK+l+/fj3jRX/w8UMCAAB+rFNplhdddBG7++67cw0AoPw9eqAwVe8k4OoKyAoAXHzxxeyee+7xTq6hThgAwLOVf+ihh9hZZ51FggB15z6dK0DuJ5gAatc/006AVIqgOOaZSDFdSMArCdgi9tWgQKq/GtXPz1Gj+CkQoevH+z7yyCPsnHPO8UqWoU8WAMCzJ+C4445jfMtgl2BAWyxAlBLBui2D1cBCz8SJ6UIC3knAVAkwK8ufX5dv9fvCCy94J8+QJwwA4OHqjx8/nl1++eW5AwEeihJThgS8lECUIL+ko/75XG6//XbWo0cPL2UZ8qQBADxc/R/96Efs7bffZt///vedQEAaAYHw/Xv4IGHK3kqACgjMyvr/17/+xQ466CD297//3Vt5hjpxAABPV75Pnz7s5ptvzg0A8FSMmDYk4K0EdD56tTxv0gzA1VdfzUaPHu2tHEOeOACAx6u/atUqdsQRR2QOAjwWIaYOCXgtAdNWv6ZtfW15/bZ2cd1XX32VHXXUUV7LMOTJAwB4vPotWrRg8+bNyxQAgPr3+AHC1L2XgK3+f9LWf8uWLdn8+fO9l2OoNwAA4PnKz507l51//vlOICCJrAAAAM8fIEzfawmodQFsVf1slr2tXWYc7r//ftaqVSuv5Rf65AEAPH8C6tSpwzgNl1VaoOfiw/QhAe8lQCntpC1/DgS4+3HNmjXeyy/kGwAAKMDqjxo1il111VWxgIAoJYILIDrcAiRQCAm4BP7ZrHtbu3yNW265hfXt27cQsgv5JgAACrD6PB2QpwXy9EAXJiCOtEBQ/wV4cHALhZGALRbAFBBocxuo4IKn+/G0P57+h4/fEgAA8Hv9ts6+W7dubMKECakBgIKIDbcBCRRGAjZFbrPwbe1i/O7du7OJEycWRm4h3wgAQIFWf/ny5aVynLyGv1yrX2UFdFv8ivNsJYILJDLcCiRQKAmoSlzsAyAfV/cGsAEH0c7P42XIGzRoUCiZhXwzAAAFWv0mTZqUNuRI2g1QIJHhViCBQkkg6eA/vhHZ4sWLCyWzkG8GAKBgqz9jxgzWrl07JxBQTlogfP8Fe2BwO4WSgAoAbLS+rV32/8+cOZO1b9++UPIK/WYAAAr2BNSoUYOtX78+EQAA5V+whwW3U0gJuAQEutL+MgCoWbMm27BhQyFlFupNAQAUcOVvuOEGNmjQICcQECUjoICiwi1BAoWUgKuCd2UAhg4dyq677rpCyirkmwIAKODq85d/48aNrFq1arGBAFj/BXxQcEuFlYCuQqBt7wA15Y9/37RpE6tevXrptwSfYkkAAKBY67n1bi699FI2bdq02ABAQcWE24IECisBm3VvaxdgoGPHjuzOO+8srJxCvjEAgAKv/pIlS1ijRo1KIEBO8dMF/6nuAH4OPwbrv8APCW6t0BLgSpyn79lcAhwMyOmB4pylS5eyxo0bF1pGId8cAECBV//kk09my5Ytq8ICyDUCXOoDgPYr8AOCWyu8BChK37R3gAwW+LkNGzZkTz/9dOHlFOoNAgAUfOUnTZrEOnfu7OQKoJiBgosHtwcJFF4C5fj9+TlTpkxhXbt2Lbx8Qr5BAICCr/5Pf/rT0j4BO+20kxMIkN0AoP4L/nDg9oKQQJS0QAEWvv7661K9/7/85S9ByCjUmwQACGDlr732WjZixIjIACAA0eAWIYEgJGCLAVBdBf3792c33nhjELIJ+SYBAAJZ/bVr17JatWo5gwBY/4E8GLjNICTgkhYoQMC6detY7dq1g5BL6DcJABDIE3DBBRewe++91xkABCIW3CYkEIwEXNP+LrzwQnbfffcFI5eQbxQAIKDVX7hwITvnnHOsIADWf0APBW41GAm4AICHHnqINWvWLBiZhH6jAAABPQHHHHMMW7FihRUABCQS3CokEJQEqLRA+Vj9+vXZSy+9FJRMQr5ZAIDAVv+2225jPXv21IKAwMSB24UEgpOADgSMGzeOXXHFFcHJI+QbBgAIbPX32muvUlrg7rvvvh0IAPUf2MOA2w1SApQr4LPPPiul/X388cdByiTUmwYACHDlOcq/9dZbtwMAAYoCtwwJBCkBlQW48sorGWcH8QlLAgAAYa331rtduXIlq1u37lYQEKgYcNuQQLASECBg9erVrF69esHKIeQbBwAIdPXPPfdc9sADD5QAAKj/QB8C3HbQEhCugPPOO489+OCDQcsi1JsHAAh15Rkr5fq2bt0aACDgZwC3Hq4EOACYM2cO4zVC8AlTAgAAYa576a4PO+wwlPsMeP1x65AALxP++uuvQxCBSuD/Ae69AFaNpnUSAAAAAElFTkSuQmCC\\n"}')},function(t,r,n){var i={"./ArrowABufferGeometry.js":377,"./HexCellBodyBufferGeometry.js":378,"./HexCellBorderBufferGeometry.js":379};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=376},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(7),s=n.n(o),h=n(8),l=n.n(h),c=n(3),d=n.n(c),p=n(1);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=d()(t);if(r){var a=d()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l()(this,n)}}var m=function(t){s()(ArrowABufferGeometry,t);var r=_createSuper(ArrowABufferGeometry);function ArrowABufferGeometry(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;a()(this,ArrowABufferGeometry),t=r.apply(this,arguments);for(var i=[],o=[],s=[],h=[],l=[],c=[],d=(new p.Vector3,new p.Vector2,0);d<n;d++){var m=d/(n-1),g=d/n,y=d<n/2?d/(n/2)/2:1-d/(n/2)/2;i.push(0,0,0),i.push(0,0,0),c.push(0,1),h.push(y,y),o.push(g,0),o.push(g,1),l.push(m,m)}i.push(0,0,0),i.push(0,0,0),i.push(0,0,0),c.push(4,2,3),o.push(1,.5),o.push((n-1)/n,1),o.push((n-1)/n,-1);for(var b=0,w=0;w<n-1;w++){var M=2*w,_=2*w+1,x=2*(w+1),A=2*(w+1)+1;b=Math.max(b,M,_,x,A),s.push(M,_,x),s.push(_,x,A)}return s.push(b+1,b+2,b+3),t.setIndex(s),t.setAttribute("position",new p.Float32BufferAttribute(i,3)),t.setAttribute("edge_type",new p.Float32BufferAttribute(c,1)),t.setAttribute("arc",new p.Float32BufferAttribute(h,1)),t.setAttribute("segment_index",new p.Float32BufferAttribute(l,1)),t.setAttribute("uv",new p.Float32BufferAttribute(o,2)),t.set_attributes_needs_update(!0),t}return ArrowABufferGeometry}(p.BufferGeometry);r.default=m},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(7),s=n.n(o),h=n(8),l=n.n(h),c=n(3),d=n.n(c);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=d()(t);if(r){var a=d()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l()(this,n)}}var p=function(t){s()(HexCellBodyBufferGeometry,t);var r=_createSuper(HexCellBodyBufferGeometry);function HexCellBodyBufferGeometry(){return a()(this,HexCellBodyBufferGeometry),console.log(arguments),r.apply(this,arguments)}return HexCellBodyBufferGeometry}(n(1).CircleBufferGeometry);r.default=p},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var M=function(t){d()(HexCellBorderBufferGeometry,t);var r=_createSuper(HexCellBorderBufferGeometry);function HexCellBorderBufferGeometry(){var t;return a()(this,HexCellBorderBufferGeometry),t=r.apply(this,arguments),w()(l()(t),"indexes",[[0,2,14,16],[3,5,17,19],[4,6,18,20],[7,9,21,23],[8,10,22,24],[11,13,25,27]]),w()(l()(t),"borders",null),t.add_attribute("border_state",14,1),t}return s()(HexCellBorderBufferGeometry,[{key:"set_borders",value:function set_borders(t){var r=this;this.borders=t.join("/");for(var n=0;n<28;n++)this.set_attrs(n,{border_state:[0]});for(var i=0;i<6;i++)t.indexOf(i)>-1&&this.indexes[i].forEach((function(t){r.set_attrs(t,{border_state:[1]})}));this.set_attributes_needs_update(!0)}}]),HexCellBorderBufferGeometry}(n(1).RingBufferGeometry);r.default=M},function(t,r,n){var i={"./TestMaterial.js":381};function webpackContext(t){var r=webpackContextResolve(t);return n(r)}function webpackContextResolve(t){if(!n.o(i,t)){var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}return i[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=380},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(7),s=n.n(o),h=n(8),l=n.n(h),c=n(3),d=n.n(c);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=d()(t);if(r){var a=d()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l()(this,n)}}var p=function(t){s()(TestMaterial,t);var r=_createSuper(TestMaterial);function TestMaterial(){return a()(this,TestMaterial),r.apply(this,arguments)}return TestMaterial}(n(1).MeshBasicMaterial);r.default=p},function(t,r,n){var i;t.exports=((i=function(){function e(t){return r.appendChild(t.dom),t}function u(n){for(var i=0;i<r.children.length;i++)r.children[i].style.display=i===n?"block":"none";t=n}var t=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(n){n.preventDefault(),u(++t%r.children.length)}),!1);var n=(performance||Date).now(),a=n,o=0,s=e(new i.Panel("FPS","#0ff","#002")),h=e(new i.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=e(new i.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:r,addPanel:e,showPanel:u,begin:function(){n=(performance||Date).now()},end:function(){o++;var t=(performance||Date).now();if(h.update(t-n,200),t>a+1e3&&(s.update(1e3*o/(t-a),100),a=t,o=0,l)){var r=performance.memory;l.update(r.usedJSHeapSize/1048576,r.jsHeapSizeLimit/1048576)}return t},update:function(){n=this.end()},domElement:r,setMode:u}}).Panel=function(t,r,n){var i=1/0,a=0,o=Math.round,s=o(window.devicePixelRatio||1),h=80*s,l=48*s,c=3*s,d=2*s,p=3*s,m=15*s,g=74*s,y=30*s,b=document.createElement("canvas");b.width=h,b.height=l,b.style.cssText="width:80px;height:48px";var w=b.getContext("2d");return w.font="bold "+9*s+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=n,w.fillRect(0,0,h,l),w.fillStyle=r,w.fillText(t,c,d),w.fillRect(p,m,g,y),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(p,m,g,y),{dom:b,update:function(l,M){i=Math.min(i,l),a=Math.max(a,l),w.fillStyle=n,w.globalAlpha=1,w.fillRect(0,0,h,m),w.fillStyle=r,w.fillText(o(l)+" "+t+" ("+o(i)+"-"+o(a)+")",c,d),w.drawImage(b,p+s,m,g-s,y,p,m,g-s,y),w.fillRect(p+g-s,m,s,y),w.fillStyle=n,w.globalAlpha=.9,w.fillRect(p+g-s,m,s,o((1-l/M)*y))}}},i)},function(t,r,n){"use strict";n.r(r);var i=n(56),a=n.n(i),o=n(4),s=n.n(o),h=n(6),l=n.n(h),c=n(2),d=n.n(c),p=n(7),m=n.n(p),g=n(8),y=n.n(g),b=n(3),w=n.n(b),M=n(0),_=n.n(M),x=n(10),A=n(16),E=n(26),B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,C=/^\w*$/;var T=function isKey(t,r){if(Object(A.a)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(E.a)(t))||(C.test(t)||!B.test(t)||null!=r&&t in Object(r))},D=n(58);function memoize(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var memoized=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=memoized.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return memoized.cache=a.set(i,o)||a,o};return memoized.cache=new(memoize.Cache||D.a),memoized}memoize.Cache=D.a;var P=memoize;var L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/\\(\\)?/g,F=function memoizeCapped(t){var r=P(t,(function(t){return 500===n.size&&n.clear(),t})),n=r.cache;return r}((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(L,(function(t,n,i,a){r.push(i?a.replace(N,"$1"):n||t)})),r})),I=n(24);var k=function arrayMap(t,r){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=r(t[n],n,t);return a},O=I.a?I.a.prototype:void 0,U=O?O.toString:void 0;var z=function baseToString(t){if("string"==typeof t)return t;if(Object(A.a)(t))return k(t,baseToString)+"";if(Object(E.a)(t))return U?U.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var V=function toString_toString(t){return null==t?"":z(t)};var j=function castPath(t,r){return Object(A.a)(t)?t:T(t,r)?[t]:F(V(t))};var H=function toKey(t){if("string"==typeof t||Object(E.a)(t))return t;var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r};var G=function baseGet(t,r){for(var n=0,i=(r=j(r,t)).length;null!=t&&n<i;)t=t[H(r[n++])];return n&&n==i?t:void 0};var W=function get(t,r,n){var i=null==t?void 0:G(t,r);return void 0===i?n:i},q=Object.prototype.hasOwnProperty;var Q=function baseHas(t,r){return null!=t&&q.call(t,r)},X=n(37),Y=n(28),J=n(47);var Z=function hasPath(t,r,n){for(var i=-1,a=(r=j(r,t)).length,o=!1;++i<a;){var s=H(r[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=a?o:!!(a=null==t?0:t.length)&&Object(J.a)(a)&&Object(Y.a)(s,a)&&(Object(A.a)(t)||Object(X.a)(t))};var $=function has(t,r){return null!=t&&Z(t,r,Q)},ee=n(67),te=n(11);var re=function baseSet(t,r,n,i){if(!Object(te.a)(t))return t;for(var a=-1,o=(r=j(r,t)).length,s=o-1,h=t;null!=h&&++a<o;){var l=H(r[a]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(a!=s){var d=h[l];void 0===(c=i?i(d,l,h):void 0)&&(c=Object(te.a)(d)?d:Object(Y.a)(r[a+1])?[]:{})}Object(ee.a)(h,l,c),h=h[l]}return t};var ne=function set(t,r,n){return null==t?t:re(t,r,n)};n(102);function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var ie={linear:function linear(t){return t},ease_in_quad:function ease_in_quad(t){return t*t},ease_out_quad:function ease_out_quad(t){return t*(2-t)},ease_in_out_quad:function ease_in_out_quad(t){return t<.5?2*t*t:(4-2*t)*t-1},ease_in_cubic:function ease_in_cubic(t){return t*t*t},ease_out_cubic:function ease_out_cubic(t){return--t*t*t+1},ease_in_out_cubic:function ease_in_out_cubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},ease_in_quard:function ease_in_quard(t){return t*t*t*t},ease_out_quart:function ease_out_quart(t){return 1- --t*t*t*t},ease_in_out_quart:function ease_in_out_quart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},ease_in_quint:function ease_in_quint(t){return t*t*t*t*t},ease_out_quint:function ease_out_quint(t){return 1+--t*t*t*t*t},ease_in_out_quint:function ease_in_out_quint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},ease_in_back:function ease_in_back(t){return t*t*(3.5*t-2.5)},ease_out_back:function ease_out_back(t){return--t*t*(3.5*t+2.5)+1},ease_in_out_back:function ease_in_out_back(t){return((t*=2)<1?t*t*(3.5*t-2.5):(t-=2)*t*(3.5*t+2.5)+2)/2}},ae=function(t){m()(Animator,t);var r=_createSuper(Animator);function Animator(){var t;s()(this,Animator);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),_()(d()(t),"tick_skip",2),_()(d()(t),"active_animations",{}),_()(d()(t),"animations",{}),t}return l()(Animator,[{key:"on_created",value:function on_created(){}},{key:"on_enabled",value:function on_enabled(){for(var t in this.animations)this.animations[t].autoplay&&this.animate(t,1)}},{key:"animate",value:function animate(t,r,n){var i=this;return new Promise((function(o){if("object"===a()(r)){var s=r;i.animations[t]=s,r=1}void 0===i.animations[t]&&console.log("Animator: no such animation: ".concat(t)),r="number"==typeof r?r:1;var h={};for(var l in i.animations[t].values)i.animations[t].from_values&&void 0!==i.animations[t].from_values[l]?h[l]=i.animations[t].from_values[l]:h[l]=W(i.object,l)||0;i.active_animations[t]={name:t,start:+new Date,end:+new Date+i.animations[t].duration*r*1e3,progress:0,started:!1,stopped:!1,on_complete:n?n.on_complete:void 0,on_start:n?n.on_start:void 0,on_update:n?n.on_update:void 0,start_values:h,_resolve:o}}))}},{key:"on_tick",value:function on_tick(t){var r=+new Date,n={};for(var i in this.active_animations){var a=this.active_animations[i],o=a.ease||"linear",s=ie[o]((r-a.start)/(a.end-a.start));s>1&&(this.animations[a.name].repeat?s%=1:s=1),a.stopped&&delete this.active_animations[i],a.started||(a.started=!0,a.on_start&&a.on_start());var h=this.animations[a.name].values;for(var l in h){var c=this.lerp(a.start_values[l],h[l],s);this.animations[a.name].object?$(this.animations[a.name].object,l)&&ne(this.animations[a.name].object,l,c):n[l]=c}s>=1&&(a.on_complete&&a.on_complete(),a._resolve(),delete this.active_animations[i]),this.globals.need_render=!0}for(var d in n)$(this.object,d)&&ne(this.object,d,n[d])}}]),Animator}(x.a);_()(ae,"easing_functions",ie);r.default=ae},function(t,r,n){"use strict";n.r(r);var i=n(4),a=n.n(i),o=n(6),s=n.n(o),h=n(2),l=n.n(h),c=n(7),d=n.n(c),p=n(8),m=n.n(p),g=n(3),y=n.n(g),b=n(0),w=n.n(b),M=n(1),_=n(10),x=n(11),A=n(15),lodash_es_now=function(){return A.a.Date.now()},E=/\s/;var B=function trimmedEndIndex(t){for(var r=t.length;r--&&E.test(t.charAt(r)););return r},C=/^\s+/;var T=function baseTrim(t){return t?t.slice(0,B(t)+1).replace(C,""):t},D=n(26),P=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,N=/^0o[0-7]+$/i,F=parseInt;var I=function toNumber(t){if("number"==typeof t)return t;if(Object(D.a)(t))return NaN;if(Object(x.a)(t)){var r="function"==typeof t.valueOf?t.valueOf():t;t=Object(x.a)(r)?r+"":r}if("string"!=typeof t)return 0===t?t:+t;t=T(t);var n=L.test(t);return n||N.test(t)?F(t.slice(2),n?2:8):P.test(t)?NaN:+t},k=Math.max,O=Math.min;var U=function debounce(t,r,n){var i,a,o,s,h,l,c=0,d=!1,p=!1,m=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function invokeFunc(r){var n=i,o=a;return i=a=void 0,c=r,s=t.apply(o,n)}function leadingEdge(t){return c=t,h=setTimeout(timerExpired,r),d?invokeFunc(t):s}function shouldInvoke(t){var n=t-l;return void 0===l||n>=r||n<0||p&&t-c>=o}function timerExpired(){var t=lodash_es_now();if(shouldInvoke(t))return trailingEdge(t);h=setTimeout(timerExpired,function remainingWait(t){var n=r-(t-l);return p?O(n,o-(t-c)):n}(t))}function trailingEdge(t){return h=void 0,m&&i?invokeFunc(t):(i=a=void 0,s)}function debounced(){var t=lodash_es_now(),n=shouldInvoke(t);if(i=arguments,a=this,l=t,n){if(void 0===h)return leadingEdge(l);if(p)return clearTimeout(h),h=setTimeout(timerExpired,r),invokeFunc(l)}return void 0===h&&(h=setTimeout(timerExpired,r)),s}return r=I(r)||0,Object(x.a)(n)&&(d=!!n.leading,o=(p="maxWait"in n)?k(I(n.maxWait)||0,r):o,m="trailing"in n?!!n.trailing:m),debounced.cancel=function cancel(){void 0!==h&&clearTimeout(h),c=0,i=l=a=h=void 0},debounced.flush=function flush(){return void 0===h?s:trailingEdge(lodash_es_now())},debounced};function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=y()(t);if(r){var a=y()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return m()(this,n)}}var z=new M.Raycaster,V=new M.Vector2,j=function(t){d()(UserPointer,t);var r=_createSuper(UserPointer);function UserPointer(t){var n;a()(this,UserPointer),n=r.call(this,function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){w()(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({events:["move"]},t)),w()(l()(n),"enabled",!0),w()(l()(n),"pointer_a",[0,0]),w()(l()(n),"pointer_b",[0,0]),w()(l()(n),"prev_pointer_a",[0,0]),w()(l()(n),"prev_pointer_b",[0,0]),w()(l()(n),"delta_a",[0,0]),w()(l()(n),"delta_b",[0,0]),w()(l()(n),"down",!1),w()(l()(n),"prev_down_time",-1),w()(l()(n),"dbl_click_duration",300),w()(l()(n),"dbl_click",!1),w()(l()(n),"raycasting",!1),w()(l()(n),"event_map",{move:["mousemove","touchmove"],over:["mouseover"],out:["mouseout"],down:["mousedown","touchstart"],up:["mouseup","touchend"],scroll:["mousewheel"]}),w()(l()(n),"event_alias",{}),n.check_raycasting_events_debounced=U(n.check_raycasting_events_debounced,50),n.handle_event=n.handle_event.bind(l()(n));var i=function _loop(t){n.event_map[t].forEach((function(r){n.event_alias[r]=t}))};for(var o in n.event_map)i(o);return n.log("UserPointer","component initialized"),n}return s()(UserPointer,[{key:"on_enabled",value:function on_enabled(){var t=this;for(var r in this.event_map)this.events.indexOf(r)>-1&&this.event_map[r].forEach((function(r){document.body.addEventListener(r,t.handle_event)}))}},{key:"on_disabled",value:function on_disabled(){var t=this;for(var r in this.event_map)this.event_map[r].forEach((function(r){document.body.removeEventListener(r,t.handle_event)}))}},{key:"handle_event",value:function handle_event(t){if(this.enabled){var r=+new Date,n=this.globals.dom_bounding_rect,i=t.type,a=this.event_alias[i];"scroll"===a&&t.preventDefault();var o=this.pointer_a,s=t.wheelDelta>0;t.touches&&t.touches.length>0?(o[0]=t.touches[0].pageX-n.left,o[1]=t.touches[0].pageY-n.top):t.touches||(o[0]=t.pageX-n.left,o[1]=t.pageY-n.top);var h=this.delta_a;h[0]=(o[0]-this.prev_pointer_a[0])*this.globals.uniforms.pixel_ratio.value,h[1]=(o[1]-this.prev_pointer_a[1])*this.globals.uniforms.pixel_ratio.value,"down"===a&&(this.down=!0,r-this.prev_down_time<this.dbl_click_duration&&(a="dblclick"),this.prev_down_time=r),"up"===a&&(this.down=!1),this.down&&"move"===a&&(a="drag"),"function"==typeof this.object["handle_pointer".concat(a)]&&this.object["handle_pointer".concat(a)]({pointer_a:o,delta_a:h,scroll_down:s}),this.components.forEach((function(t){"function"==typeof t["handle_pointer".concat(a)]&&t["handle_pointer".concat(a)]({pointer_a:o,delta_a:h,scroll_down:s,date:r})})),this.prev_pointer_a[0]=o[0],this.prev_pointer_a[1]=o[1],V.x=o[0]/this.globals.resolution.x*2-1,V.y=-o[1]/this.globals.resolution.y*2+1,this.raycasting&&("move"!==a&&"drag"!==a?this.check_raycasting_events(a):this.check_raycasting_events_debounced(a))}}},{key:"check_raycasting_events",value:function check_raycasting_events(t){z.setFromCamera(V,this.globals.camera);var r=[];"function"==typeof this.object.get_raycasted&&(r=r.concat(this.object.get_raycasted())),this.components.forEach((function(t){"function"==typeof t.get_raycasted&&(r=r.concat(t.get_raycasted()))}));var n=z.intersect_objects(r);"function"==typeof this.object.handle_raycasted&&this.object.handle_raycasted(n,t),this.components.forEach((function(r){"function"==typeof r.handle_raycasted&&r.handle_raycasted(n,t)}))}},{key:"check_raycasting_events_debounced",value:function check_raycasting_events_debounced(t){return this.check_raycasting_events(t)}}]),UserPointer}(_.a);r.default=j},function(t,r,n){"use strict";n.r(r);var i=n(17),a=n.n(i),o=n(4),s=n.n(o),h=n(6),l=n.n(h),c=n(2),d=n.n(c),p=n(7),m=n.n(p),g=n(8),y=n.n(g),b=n(3),w=n.n(b),M=n(0),_=n.n(M),x=n(10),A=n(57),E=n.n(A),B=n(30),C=n.n(B),T=n(1),D=n(36);function ownKeys(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,i)}return n}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var P=function(t){m()(CanvasText,t);var r,n=_createSuper(CanvasText);function CanvasText(t){var r;return s()(this,CanvasText),r=n.call(this,t),_()(d()(r),"mesh",null),_()(d()(r),"inited",!1),r.params=function _objectSpread(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(n),!0).forEach((function(r){_()(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}({shrink:1,font_size:12,font_family:"monospace",bold:!1,text:"",color:"#ffffff",offset_x:1,offset_y:1},t),r}return l()(CanvasText,[{key:"init",value:function init(){if(!this.inited){this.canvas=document.createElement("canvas"),this.canvas.width=1e3,this.canvas.height=1e3,this.context2d=this.canvas.getContext("2d"),this.texture=new T.Texture(this.canvas);var t=new T.PlaneBufferGeometry(.1,.1),r=D.a.create_material("@canvas_text");if(r.uniforms.map.value=this.texture,this.params.gradient){var n,i=(n=this.context2d).createLinearGradient.apply(n,a()(this.params.gradient.layout));this.params.gradient.colors.forEach((function(t){i.addColorStop(t[0],t[1])})),this.gradient_object=i}this.mesh=new T.Mesh({geometry:t,material:r}),this.add(this.mesh),this.update_text()}this.inited=!0}},{key:"set_text",value:function set_text(t){t!==this.params.text&&(this.params.text=t,this.update_text())}},{key:"update_text",value:(r=E()(C.a.mark((function _callee(){var t,r,n;return C.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!this.params.background_image||this.background_image){i.next=4;break}return i.next=3,D.a.load_image(this.params.background_image);case 3:this.background_image=i.sent;case 4:this.context2d.font="".concat(null!==(t=this.params.font_weight)&&void 0!==t?t:"400"," ").concat(this.params.font_size,"px ").concat(this.params.font_family),n=this.context2d.measureText(this.params.text),this.canvas.width=this.params.fixed_width||n.width+2,this.canvas.height=this.params.fixed_height||this.params.font_size+4,this.mesh.scale.x=this.params.fixed_width||n.width+2,this.mesh.scale.y=this.params.fixed_height||this.params.font_size+4,this.context2d.clearRect(1,2,this.canvas.width,this.canvas.height),this.background_image&&this.context2d.drawImage(this.background_image,0,0,this.canvas.width,this.canvas.height),this.context2d.shadowOffsetX=3,this.context2d.shadowOffsetY=3,this.context2d.shadowColor="rgba(0,0,0,0.3)",this.context2d.shadowBlur=4,this.context2d.font="".concat(this.params.bold?"bold":""," ").concat(this.params.font_size*this.params.shrink,"pt ").concat(this.params.font_family),this.context2d.fillStyle=null!==(r=this.params.fill_style)&&void 0!==r?r:"#000000",this.params.gradient&&(this.context2d.fillStyle=this.gradient_object),this.context2d.textAlign="center",this.context2d.textBaseline="middle",this.context2d.fillText(this.params.text,this.canvas.width/2*this.params.offset_x,this.canvas.height/2*this.params.offset_y),this.mesh.material.map=this.texture,this.texture.needsUpdate=!0,this.mesh.material.map.needsUpdate=!0,this.globals.need_render=!0;case 26:case"end":return i.stop()}}),_callee,this)}))),function update_text(){return r.apply(this,arguments)})}]),CanvasText}(T.Object3D);function CanvasTextComponent_createSuper(t){var r=function CanvasTextComponent_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var n,i=w()(t);if(r){var a=w()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y()(this,n)}}var L=function(t){m()(CanvasTextComponent,t);var r=CanvasTextComponent_createSuper(CanvasTextComponent);function CanvasTextComponent(){var t;s()(this,CanvasTextComponent);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=r.call.apply(r,[this].concat(i)),_()(d()(t),"offset",[0,0,0]),_()(d()(t),"inited",!0),t}return l()(CanvasTextComponent,[{key:"on_created",value:function on_created(){var t,r,n;(this.canvas_text=new P({text:this.text,fill_style:this.fill_style,gradient:this.gradient,background_image:this.background_image,fixed_width:this.fixed_width,fixed_height:this.fixed_height,shrink:this.shrink,font_family:this.font_family,font_weight:this.font_weight,font_size:this.font_size,offset_x:this.offset_x,offset_y:this.offset_y}),void 0!==this.position)&&(t=this.canvas_text.position).set.apply(t,a()(this.position));void 0!==this.scale&&(r=this.canvas_text.scale).set.apply(r,a()(this.scale));void 0!==this.rotation&&(n=this.canvas_text.rotation).set.apply(n,a()(this.rotation));void 0!==this.frustum_culled&&(this.canvas_text.frustumCulled=this.frustum_culled),this.canvas_text.renderOrder=this.render_order||0}},{key:"on_enabled",value:function on_enabled(){this.inited&&(this.canvas_text.init(),this.inited=!0),this.object.add(this.canvas_text)}},{key:"on_disabled",value:function on_disabled(){this.object.remove(this.canvas_text)}},{key:"set_text",value:function set_text(t){this.canvas_text.set_text(t)}}]),CanvasTextComponent}(x.a);r.default=L},,function(t,r,n){"use strict";n.r(r);var i=n(57),a=n.n(i),o=n(30),s=n.n(o),h=(n.p,n(171));document.addEventListener("DOMContentLoaded",a()(s.a.mark((function _callee(){var t;return s.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=new h.default({rendering_postprocessing:!1,show_stats:!0,navigation_bounds:[-200,-200,400,400],loading_icon_texture:"res/loading.png",background_image:"res/bg_b.jpg",cell_scale:.888,border_width:1}),document.body.appendChild(t.dom);case 2:case"end":return r.stop()}}),_callee)}))))}])})); 